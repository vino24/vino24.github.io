<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[微信中页面关闭时弹窗]]></title>
      <url>http://iminyao.com/2017/05/09/wechat-close-dialog/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="与窗口关闭相关的几个事件"><a href="#与窗口关闭相关的几个事件" class="headerlink" title="与窗口关闭相关的几个事件"></a>与窗口关闭相关的几个事件</h3><ol>
<li><p><del>window.onclose</del>(chrome中测试关闭窗口不会触发)</p>
<blockquote>
<p>当在window对象上触发close事件时的事件处理器</p>
</blockquote>
</li>
<li><p>window.onunload</p>
<blockquote>
<p>当页面关闭后,会触发unload事件.</p>
</blockquote>
<p> <strong>语法：</strong> <code>window.onunload = funcRef;</code></p>
</li>
<li><p>window.onbeforeunload</p>
<blockquote>
<p>当窗口即将被卸载时,会触发该事件.此时页面文档依然可见,且该事件的默认动作可以被取消.<br>当该事件处理函数返回一个非空的值时,会有一个弹窗提示让用户决定是否要关闭该页面.在大多数浏览器中,返回值会转换为字符串显示在弹窗上.</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">	e = e || <span class="built_in">window</span>.event;</div><div class="line"> 		<span class="comment">// 兼容IE8和Firefox 4之前的版本</span></div><div class="line"> 		<span class="keyword">if</span> (e) &#123;</div><div class="line">   		e.returnValue = <span class="string">'关闭提示'</span>;</div><div class="line"> 		&#125;</div><div class="line"> 		<span class="comment">// Chrome, Safari, Firefox 4+, Opera 12+ , IE9+</span></div><div class="line"> 		<span class="keyword">return</span> <span class="string">'关闭提示'</span>;</div><div class="line">	&#125;;</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>visibilitychange</p>
<blockquote>
<p>浏览器标签页被隐藏或显示的时候会触发visibilitychange事件.</p>
</blockquote>
</li>
</ol>
<pre><code><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"visibilitychange"</span>, 		</div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"> 	<span class="built_in">console</span>.log( <span class="built_in">document</span>.visibilityState );</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</code></pre><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onclose" target="_blank" rel="external">GlobalEventHandlers.onclose
</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/onbeforeunload" target="_blank" rel="external">window.onbeforeunload</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/onunload" target="_blank" rel="external">window.onunload
</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Events/visibilitychange" target="_blank" rel="external">visibilitychange
</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[关于Git中的"撤销"]]></title>
      <url>http://iminyao.com/2017/02/20/git-undo/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-撤销push"><a href="#一-撤销push" class="headerlink" title="一. 撤销push"></a>一. 撤销push</h3><p><code>git revert &lt;SHA&gt;</code></p>
<blockquote>
<p>git revert 会产生一个新的 commit,在新的commit中将内容修改回原来的状态。（即任何从原先的 commit 里删除的内容会在新的 commit 里被加回去，任何在原先的 commit 里加入的内容会在新的 commit  里被删除。）</p>
</blockquote>
<p><code>git revert</code>是Git中最安全的撤销命令，因为它不会改变历史，回退到之前的某个状态，而是修改文件与之前的某个状态一模一样。</p>
<h3 id="二-撤销add-撤销工作目录修改"><a href="#二-撤销add-撤销工作目录修改" class="headerlink" title="二. 撤销add(撤销工作目录修改)"></a>二. 撤销add(撤销工作目录修改)</h3><p><code>git checkout -- &lt;filename&gt;</code></p>
<blockquote>
<p>通过checkout撤销的修改会完全消失，因为其只在工作目录，从来没有被提交过，所以Git无法恢复。</p>
</blockquote>
<h3 id="三-撤销commit"><a href="#三-撤销commit" class="headerlink" title="三. 撤销commit"></a>三. 撤销commit</h3><p><code>git reset &lt;SHA&gt;</code>或<code>git reset --hard &lt;SHA&gt;</code></p>
<blockquote>
<p>git reset 会把你的代码库历史返回到指定的 SHA 状态。 这样就像是这些提交从来没有发生过。缺省情况下， git reset 会保留工作目录,但是修改内容还在磁盘上。而<code>--hard</code>会“撤销”提交以及修改内容.</p>
</blockquote>
<h3 id="四-修正最后一个commit的message-或是追加add"><a href="#四-修正最后一个commit的message-或是追加add" class="headerlink" title="四. 修正最后一个commit的message(或是追加add)"></a>四. 修正最后一个commit的message(或是追加add)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">git commit -m <span class="string">'message'</span></div><div class="line">git add xxx</div><div class="line">git commit --amend</div><div class="line"></div><div class="line">git commit -m <span class="string">'javascrpt'</span></div><div class="line">git commit --amend -m <span class="string">'javascript'</span></div></pre></td></tr></table></figure>
<h3 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章:"></a>相关文章:</h3><ol>
<li><a href="/2016/04/04/git-cmd/">Git常用命令</a><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3></li>
<li><a href="http://blog.jobbole.com/87700/" target="_blank" rel="external">如何在 Git 里撤销(几乎)任何操作</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[es6 let vs const]]></title>
      <url>http://iminyao.com/2017/02/04/es6-let-vs-const/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>看一段代码<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 定义常量</span></div><div class="line"><span class="keyword">const</span> REG_GET_INPUT = <span class="regexp">/^\d&#123;1,3&#125;$/</span>;</div><div class="line"></div><div class="line"><span class="comment">// 定义配置项</span></div><div class="line"><span class="keyword">let</span> config = &#123;</div><div class="line">  <span class="attr">isDev</span> : <span class="literal">false</span>,</div><div class="line">  <span class="attr">pubDir</span>: <span class="string">'./admin/'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 引入 gulp</span></div><div class="line"><span class="keyword">let</span> gulp    = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 引入gulp相关插件</span></div><div class="line"><span class="keyword">let</span> concat  = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>);</div><div class="line"><span class="keyword">let</span> uglify  = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</div><div class="line"><span class="keyword">let</span> cssnano = <span class="built_in">require</span>(<span class="string">'gulp-cssnano'</span>);</div></pre></td></tr></table></figure></p>
<p>大多数将const理解为不可变的值，但是const的定义是不可重新赋值的值，这与不可变值（immutable value）是有区别的，const定义的Object，在定义之后仍可以修改其属性。</p>
<blockquote>
<p>所以包括常量、配置项以及引用的组件、定义的 “大部分” 中间变量等，都应该以const做定义。<br>反之就 let 而言，他的使用场景应该是相对较少的，我们只会在 loop(for，while 循环)及少量必须重定义的变量上用到他。</p>
</blockquote>
<p>所以上述代码中使用所有let的地方其实都应使用const替代。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="http://taobaofed.org/blog/2016/07/22/es6-basics/" target="_blank" rel="external">ES6基础篇</a></li>
<li><a href="https://codetower.github.io/es6-features/?utm_source=javascriptweekly&amp;utm_medium=email" target="_blank" rel="external">ES6 Features</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascript编码规范指南]]></title>
      <url>http://iminyao.com/2017/02/04/javascript-code-style/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="避免重复的描述"><a href="#避免重复的描述" class="headerlink" title="避免重复的描述"></a>避免重复的描述</h4><blockquote>
<p>当类/对象名已经有意义时，对其变量进行命名不需要再次重复。</p>
</blockquote>
<p><strong>反例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = &#123;</div><div class="line">  <span class="attr">carMake</span>: <span class="string">'Honda'</span>,</div><div class="line">  <span class="attr">carModel</span>: <span class="string">'Accord'</span>,</div><div class="line">  <span class="attr">carColor</span>: <span class="string">'Blue'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">paintCar</span>(<span class="params">car</span>) </span>&#123;</div><div class="line">  car.carColor = <span class="string">'Red'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>正例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = &#123;</div><div class="line">  <span class="attr">make</span>: <span class="string">'Honda'</span>,</div><div class="line">  <span class="attr">model</span>: <span class="string">'Accord'</span>,</div><div class="line">  <span class="attr">color</span>: <span class="string">'Blue'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">paintCar</span>(<span class="params">car</span>) </span>&#123;</div><div class="line">  car.color = <span class="string">'Red'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="函数参数-理想情况下应不超过2个"><a href="#函数参数-理想情况下应不超过2个" class="headerlink" title="函数参数 (理想情况下应不超过2个)"></a>函数参数 (理想情况下应不超过2个)</h4><p>限制函数参数数量很有必要，这么做使得在测试函数时更加轻松。过多的参数将导致难以采用有效的测试用例对函数的各个参数进行测试。</p>
<p>应避免三个以上参数的函数。通常情况下，参数超过两个意味着函数功能过于复杂，这时需要重新优化你的函数。当确实需要多个参数时，大多情况下可以考虑这些参数封装成一个对象。</p>
<p><strong>反例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">title, body, buttonText, cancellable</span>) </span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>正例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> menuConfig = &#123;</div><div class="line">  <span class="attr">title</span>: <span class="string">'Foo'</span>,</div><div class="line">  <span class="attr">body</span>: <span class="string">'Bar'</span>,</div><div class="line">  <span class="attr">buttonText</span>: <span class="string">'Baz'</span>,</div><div class="line">  <span class="attr">cancellable</span>: <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">menuConfig</span>) </span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="使用Object-assign设置默认对象"><a href="#使用Object-assign设置默认对象" class="headerlink" title="使用Object.assign设置默认对象"></a>使用Object.assign设置默认对象</h4><p><strong>反例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> menuConfig = &#123;</div><div class="line">  <span class="attr">title</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">body</span>: <span class="string">'Bar'</span>,</div><div class="line">  <span class="attr">buttonText</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">cancellable</span>: <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">config</span>) </span>&#123;</div><div class="line">  config.title = config.title || <span class="string">'Foo'</span></div><div class="line">  config.body = config.body || <span class="string">'Bar'</span></div><div class="line">  config.buttonText = config.buttonText || <span class="string">'Baz'</span></div><div class="line">  config.cancellable = config.cancellable === <span class="literal">undefined</span> ? config.cancellable : <span class="literal">true</span>;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">createMenu(menuConfig);</div></pre></td></tr></table></figure>
<p><strong>正例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> menuConfig = &#123;</div><div class="line">  <span class="attr">title</span>: <span class="string">'Order'</span>,</div><div class="line">  <span class="comment">// User did not include 'body' key</span></div><div class="line">  buttonText: <span class="string">'Send'</span>,</div><div class="line">  <span class="attr">cancellable</span>: <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">config</span>) </span>&#123;</div><div class="line">  config = <span class="built_in">Object</span>.assign(&#123;</div><div class="line">    <span class="attr">title</span>: <span class="string">'Foo'</span>,</div><div class="line">    <span class="attr">body</span>: <span class="string">'Bar'</span>,</div><div class="line">    <span class="attr">buttonText</span>: <span class="string">'Baz'</span>,</div><div class="line">    <span class="attr">cancellable</span>: <span class="literal">true</span></div><div class="line">  &#125;, config);</div><div class="line"></div><div class="line">  <span class="comment">// config now equals: &#123;title: "Order", body: "Bar", buttonText: "Send", cancellable: true&#125;</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">createMenu(menuConfig);</div></pre></td></tr></table></figure>
<h4 id="不要使用标记-Flag-作为函数参数"><a href="#不要使用标记-Flag-作为函数参数" class="headerlink" title="不要使用标记(Flag)作为函数参数"></a>不要使用标记(Flag)作为函数参数</h4><p>这通常意味着函数的功能的单一性已经被破坏。此时应考虑对函数进行再次划分。<br><strong>反例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFile</span>(<span class="params">name, temp</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (temp) &#123;</div><div class="line">    fs.create(<span class="string">'./temp/'</span> + name);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    fs.create(name);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>正例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createTempFile</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  fs.create(<span class="string">'./temp/'</span> + name);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFile</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  fs.create(name);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="避免副作用"><a href="#避免副作用" class="headerlink" title="避免副作用"></a>避免副作用</h4><p>当函数产生了除了“接受一个值并返回一个结果”之外的行为时，称该函数产生了副作用。比如写文件、修改全局变量或将你的钱全转给了一个陌生人等。</p>
<p>程序在某些情况下确实需要副作用这一行为，如先前例子中的写文件。这时应该将这些功能集中在一起，不要用多个函数/类修改某个文件。用且只用一个service完成这一需求。<br><strong>反例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Global variable referenced by following function.</span></div><div class="line"><span class="comment">// If we had another function that used this name, now it'd be an array and it could break it.</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">'Ryan McDermott'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">splitIntoFirstAndLastName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  name = name.split(<span class="string">' '</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">splitIntoFirstAndLastName();</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(name); <span class="comment">// ['Ryan', 'McDermott'];</span></div></pre></td></tr></table></figure>
<p><strong>正例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">splitIntoFirstAndLastName</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> name.split(<span class="string">' '</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> name = <span class="string">'Ryan McDermott'</span></div><div class="line"><span class="keyword">var</span> newName = splitIntoFirstAndLastName(name);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 'Ryan McDermott';</span></div><div class="line"><span class="built_in">console</span>.log(newName); <span class="comment">// ['Ryan', 'McDermott'];</span></div></pre></td></tr></table></figure>
<h4 id="不要写全局函数"><a href="#不要写全局函数" class="headerlink" title="不要写全局函数"></a>不要写全局函数</h4><p>在JS中污染全局是一个非常不好的实践，这么做可能和其他库起冲突，且调用你的API的用户在实际环境中得到一个exception前对这一情况是一无所知的。</p>
<p>使用ES6中的class对全局的Array做简单的扩展显然是一个更棒的选择。</p>
<p><strong>反例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.diff = <span class="function"><span class="keyword">function</span>(<span class="params">comparisonArray</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> values = [];</div><div class="line">  <span class="keyword">var</span> hash = &#123;&#125;;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">of</span> comparisonArray) &#123;</div><div class="line">    hash[i] = <span class="literal">true</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">of</span> <span class="keyword">this</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (!hash[i]) &#123;</div><div class="line">      values.push(i);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> values;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>正例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(...args) &#123;</div><div class="line">    <span class="keyword">super</span>(...args);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  diff(comparisonArray) &#123;</div><div class="line">    <span class="keyword">var</span> values = [];</div><div class="line">    <span class="keyword">var</span> hash = &#123;&#125;;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">of</span> comparisonArray) &#123;</div><div class="line">      hash[i] = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">of</span> <span class="keyword">this</span>) &#123;</div><div class="line">      <span class="keyword">if</span> (!hash[i]) &#123;</div><div class="line">        values.push(i);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> values;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="采用函数式编程"><a href="#采用函数式编程" class="headerlink" title="采用函数式编程"></a>采用函数式编程</h4><p>函数式的编程具有更干净且便于测试的特点。</p>
<p><strong>反例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> programmerOutput = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Uncle Bobby'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Suzie Q'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">1500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Jimmy Gosling'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">150</span></div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Gracie Hopper'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">1000</span></div><div class="line">  &#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">var</span> totalOutput = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; programmerOutput.length; i++) &#123;</div><div class="line">  totalOutput += programmerOutput[i].linesOfCode;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>正例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> programmerOutput = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Uncle Bobby'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Suzie Q'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">1500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Jimmy Gosling'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">150</span></div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Gracie Hopper'</span>,</div><div class="line">    <span class="attr">linesOfCode</span>: <span class="number">1000</span></div><div class="line">  &#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">var</span> totalOutput = programmerOutput</div><div class="line">  .map(<span class="function">(<span class="params">programmer</span>) =&gt;</span> programmer.linesOfCode)</div><div class="line">  .reduce(<span class="function">(<span class="params">acc, linesOfCode</span>) =&gt;</span> acc + linesOfCode, <span class="number">0</span>);</div></pre></td></tr></table></figure></p>
<h4 id="封装判断条件"><a href="#封装判断条件" class="headerlink" title="封装判断条件"></a>封装判断条件</h4><p><strong>反例</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span> (fsm.state === <span class="string">'fetching'</span> &amp;&amp; isEmpty(listNode)) &#123;</div><div class="line">  <span class="comment">/// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>正例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">shouldShowSpinner</span>(<span class="params">fsm, listNode</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> fsm.state === <span class="string">'fetching'</span> &amp;&amp; isEmpty(listNode);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (shouldShowSpinner(fsmInstance, listNodeInstance)) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="https://github.com/alivebao/clean-code-js/blob/master/README.md" target="_blank" rel="external">JavaScript风格指南</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello, 2017]]></title>
      <url>http://iminyao.com/2017/02/03/2017/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ES6 spread操作符、rest操作符、Destructuring解构赋值]]></title>
      <url>http://iminyao.com/2016/12/08/es6-spread-rest/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="spread-operator-单-gt-多"><a href="#spread-operator-单-gt-多" class="headerlink" title="spread operator 单 -&gt; 多"></a>spread operator 单 -&gt; 多</h2><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h4 id="1-将数组展开成函数的多个参数"><a href="#1-将数组展开成函数的多个参数" class="headerlink" title="1. 将数组展开成函数的多个参数"></a>1. 将数组展开成函数的多个参数</h4><figure class="highlight javascript"><figcaption><span>传统apply方法</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y, z</span>) </span>&#123;&#125;</div><div class="line"><span class="keyword">var</span> args = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">fn.apply(<span class="literal">null</span>,arg)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>ES6-spread</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y, z</span>)</span>&#123;&#125;</div><div class="line"><span class="keyword">var</span> args = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">fn(...args);</div></pre></td></tr></table></figure>
<p>而且支持多个数组的展开<br><figure class="highlight javascript"><figcaption><span>ES6-spread-plus</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">v, w, x, y, z</span>) </span>&#123; &#125;</div><div class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>];</div><div class="line">myFunction(<span class="number">-1</span>, ...args, <span class="number">2</span>, ...[<span class="number">3</span>]);</div></pre></td></tr></table></figure></p>
<h4 id="2-合并数组"><a href="#2-合并数组" class="headerlink" title="2. 合并数组"></a>2. 合并数组</h4><p>传统的合并两个数组要通过数组方法concat、splice、push等方法<br><figure class="highlight javascript"><figcaption><span>ES6-spread合并数组</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> parts = [<span class="string">'shoulder'</span>, <span class="string">'knees'</span>];</div><div class="line"><span class="keyword">var</span> lyrics = [<span class="string">'head'</span>, ...parts, <span class="string">'and'</span>, <span class="string">'toes'</span>];</div></pre></td></tr></table></figure></p>
<h4 id="3-类数组对象转数组"><a href="#3-类数组对象转数组" class="headerlink" title="3. 类数组对象转数组"></a>3. 类数组对象转数组</h4><figure class="highlight javascript"><figcaption><span>arrayLike to array</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> nodeList = <span class="built_in">document</span>.querySelectorAll(<span class="string">'div'</span>);</div><div class="line"><span class="keyword">var</span> array = [...nodeList];</div></pre></td></tr></table></figure>
<h4 id="4-数组深拷贝"><a href="#4-数组深拷贝" class="headerlink" title="4. 数组深拷贝"></a>4. 数组深拷贝</h4><figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>]</div><div class="line"><span class="selector-tag">var</span> arr2 = arr <span class="comment">// arr === arr2</span></div><div class="line"><span class="selector-tag">var</span> arr3 = [...arr] <span class="comment">// arr !== arr3</span></div></pre></td></tr></table></figure>
<h4 id="5-字符串转数组"><a href="#5-字符串转数组" class="headerlink" title="5. 字符串转数组"></a>5. 字符串转数组</h4><figure class="highlight lasso"><table><tr><td class="code"><pre><div class="line"><span class="built_in">var</span> str = <span class="string">'love'</span>;</div><div class="line"><span class="built_in">var</span> arr5 = <span class="meta">[</span><span class="params">...</span>str<span class="meta">]</span>;</div><div class="line">console.log(arr5);//<span class="meta">[</span> <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">'v'</span>, <span class="string">'e'</span> <span class="meta">]</span></div></pre></td></tr></table></figure>
<h3 id="rest-operator-多-gt-单"><a href="#rest-operator-多-gt-单" class="headerlink" title="rest operator 多 -&gt; 单"></a>rest operator 多 -&gt; 单</h3><p><code>const [x,...y] = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]; // x=&#39;a&#39; y=[&#39;b&#39;,&#39;c&#39;]</code></p>
<blockquote>
<p>剩余参数（rest parameter）允许长度不确定的实参表示为一个数组。</p>
<p>如果一个函数的最后一个形参是以 … 为前缀的，则在函数被调用时,该形参会成为一个数组,数组中的元素都是传递给该函数的多出来的实参的值。</p>
</blockquote>
<h4 id="剩余参数和arguments对象的区别"><a href="#剩余参数和arguments对象的区别" class="headerlink" title="剩余参数和arguments对象的区别"></a>剩余参数和arguments对象的区别</h4><ol>
<li>剩余参数只包含那些没有对应形参的实参，而 arguments 对象包含了传给函数的所有实参。</li>
<li>arguments 对象不是一个真实的数组,而剩余参数是真实的 Array</li>
<li>arguments 对象对象还有一些附加的属性 (比如callee属性)。</li>
</ol>
<figure class="highlight javascript"><figcaption><span>arguments模拟剩余数组</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>, f.length);</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>rest</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">a, b, ...args</span>)</span>&#123;&#125;</div></pre></td></tr></table></figure>
<h3 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h3><blockquote>
<p>解构赋值 语法是一个Javascript表达式，解构赋值允许你使用类似数组或对象字面量的语法将数组和对象的属性赋给各种变量。</p>
</blockquote>
<figure class="highlight stata"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 解构数组</span></div><div class="line"><span class="keyword">var</span> foo = [<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>];</div><div class="line"></div><div class="line"><span class="keyword">var</span> [<span class="keyword">one</span>, <span class="keyword">two</span>, three] = foo;</div><div class="line">console.<span class="built_in">log</span>(<span class="keyword">one</span>); <span class="comment">// "one"</span></div><div class="line">console.<span class="built_in">log</span>(<span class="keyword">two</span>); <span class="comment">// "two"</span></div><div class="line">console.<span class="built_in">log</span>(three); <span class="comment">// "three"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>对象的解构与数组有一个重要的不同。数组的元素是按次序排列的，变量的取值由它的位置决定；而对象的属性没有次序，变量必须与属性同名，才能取到正确的值。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 解构函数</span></div><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">p</span>: <span class="number">42</span>, <span class="attr">q</span>: <span class="literal">true</span>&#125;;</div><div class="line"><span class="keyword">var</span> &#123;p, q&#125; = o;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(p); <span class="comment">// 42</span></div><div class="line"><span class="built_in">console</span>.log(q); <span class="comment">// true </span></div><div class="line"></div><div class="line"><span class="comment">// 用新变量名赋值</span></div><div class="line"><span class="keyword">var</span> &#123;<span class="attr">p</span>: foo, <span class="attr">q</span>: bar&#125; = o;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// 42</span></div><div class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h4 id="常见用途"><a href="#常见用途" class="headerlink" title="常见用途:"></a>常见用途:</h4><ol>
<li><p>交换变量</p>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><div class="line">var a = <span class="number">1</span>, <span class="keyword">b </span>= <span class="number">2</span><span class="comment">;</span></div><div class="line">[a, <span class="keyword">b] </span>= [<span class="keyword">b, </span>a]</div></pre></td></tr></table></figure>
</li>
<li><p>从函数实参对象中提取数据</p>
<figure class="highlight qml"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">userId</span>(<span class="params">&#123;id&#125;</span>) </span>&#123;</div><div class="line"> <span class="keyword">return</span> id;</div><div class="line"> &#125;</div><div class="line"> <span class="built_in">var</span> user = &#123; </div><div class="line">     <span class="attribute">id:</span><span class="string"> 42, </span></div><div class="line">     displayName: <span class="string">"jdoe"</span>,</div><div class="line">     <span class="attribute">fullName</span>: &#123; </div><div class="line">         <span class="attribute">firstName</span>: <span class="string">"John"</span>,</div><div class="line">         <span class="attribute">lastName</span>: <span class="string">"Doe"</span></div><div class="line">     &#125;</div><div class="line"> &#125;;</div><div class="line"> <span class="built_in">console</span>.log(<span class="string">"userId: "</span> + userId(user)); <span class="comment">// "userId: 42"</span></div></pre></td></tr></table></figure>
</li>
<li><p>for循环解构</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><div class="line">var arr = [&#123;name: <span class="string">'chris'</span>, age: <span class="number">26</span>&#125;, &#123;name: <span class="string">'jack'</span>,    age: <span class="number">27</span>&#125;, &#123;name: <span class="string">'peter'</span>,age: <span class="number">28</span>&#125;];</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> &#123;age, name&#125; <span class="keyword">of</span> arr) &#123;</div><div class="line">    console.log(name + <span class="string">' '</span> + age);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>字符串解构</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><div class="line">const [a, b, c, d, e] = <span class="string">'hello'</span>;</div><div class="line"> a <span class="regexp">//</span> <span class="string">"h"</span></div><div class="line"> b <span class="regexp">//</span> <span class="string">"e"</span></div><div class="line"> c <span class="regexp">//</span> <span class="string">"l"</span></div><div class="line"> d <span class="regexp">//</span> <span class="string">"l"</span></div><div class="line"> e <span class="regexp">//</span> <span class="string">"o"</span></div></pre></td></tr></table></figure>
</li>
<li><p>从函数返回多个值</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="title">example</span>() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="type">&#123;</span></div><div class="line">        foo: <span class="number">1</span>,</div><div class="line">        bar: <span class="number">2</span></div><div class="line">&#125;;</div><div class="line">&#125;</div><div class="line">let &#123; foo, bar &#125; = example();</div></pre></td></tr></table></figure>
</li>
<li><p>函数参数默认值</p>
<figure class="highlight haxe"><table><tr><td class="code"><pre><div class="line">jQuery.ajax = <span class="function"><span class="keyword">function</span> </span>(url, &#123;</div><div class="line">async = <span class="literal">true</span>,</div><div class="line">beforeSend = <span class="function"><span class="keyword">function</span> </span>() &#123;&#125;,</div><div class="line">cache = <span class="literal">true</span>,</div><div class="line">complete = <span class="function"><span class="keyword">function</span> </span>() &#123;&#125;,</div><div class="line">crossDomain = <span class="literal">false</span>,</div><div class="line">global = <span class="literal">true</span>,</div><div class="line"><span class="comment">// ... more config</span></div><div class="line">&#125;) &#123;</div><div class="line"><span class="comment">// ... do stuff</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结:"></a>总结:</h3><ol>
<li>当…作为函数实参或=号右侧时用作spread运算符</li>
<li>当…作为函数形参或=号左侧时用作rest操作符</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank" rel="external">展开运算符</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Rest_parameters" target="_blank" rel="external">剩余参数（rest parameter）</a></li>
<li><a href="http://exploringjs.com/es6/ch_destructuring.html#sec_rest-operator" target="_blank" rel="external">Rest operator</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="external">解构赋值</a></li>
<li><a href="http://es6.ruanyifeng.com/#docs/destructuring" target="_blank" rel="external">变量的解构赋值</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[react中的表单]]></title>
      <url>http://iminyao.com/2016/12/08/react-form/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="表单的特殊性"><a href="#表单的特殊性" class="headerlink" title="表单的特殊性"></a>表单的特殊性</h3><blockquote>
<p>诸如 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code>、<code>&lt;option&gt;</code> 这样的表单组件不同于其他原生组件，因为他们可以通过用户交互发生变化。</p>
</blockquote>
<h4 id="交互属性："><a href="#交互属性：" class="headerlink" title="交互属性："></a>交互属性：</h4><ol>
<li>value(input、textarea)</li>
<li>checked(checkbox、radio)</li>
<li>selected(option)<h3 id="非约束性组件"><a href="#非约束性组件" class="headerlink" title="非约束性组件"></a>非约束性组件</h3><blockquote>
<p>HTML表单元素与React组件的行为方式是不一致的，React中组件更新都是由state和props来触发的，但是HTML的表单元素却不受React组件控制。</p>
</blockquote>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//  组件的value并非由父组件设置，而是由input自由设置</span></div><div class="line"><span class="keyword">var</span> MyForm = React.createClass(&#123;</div><div class="line">    <span class="attr">submitHandler</span>: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        event.preventDefault();</div><div class="line">        <span class="keyword">var</span> helloTo = <span class="keyword">this</span>.refs.helloTo.value;</div><div class="line">        alert(helloTo);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.submitHandler&#125;</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">"helloTo"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">defaultValue</span>=<span class="string">"Hello world!"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Speak<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">        );</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="约束性组件"><a href="#约束性组件" class="headerlink" title="约束性组件"></a>约束性组件</h3><blockquote>
<p>表单组件的状态交由React组件控制，状态值被存储在React组件的state中。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> MyFormLimit = React.createClass(&#123;</div><div class="line">    <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">helloTo</span>: <span class="string">"Hello world"</span></div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">handleChange</span>: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            <span class="attr">helloTo</span>: event.target.value.toUpperCase()</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">submitHandler</span>: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        event.preventDefault();</div><div class="line">        alert(<span class="keyword">this</span>.state.helloTo);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.submitHandler&#125;</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">"helloTo"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">&#123;this.state.helloTo&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Speak<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">        );</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这样React便可以控制数据流，在更新时进行一些额外操作，比如上面的将用户输入字符转成大写。</p>
<h3 id="3-select"><a href="#3-select" class="headerlink" title="3.select"></a>3.select</h3><blockquote>
<p>select需要检测DOM来更新（遍历每一个option的selected属性来更新）</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> MyFormMultiSelect = React.createClass(&#123;</div><div class="line">    <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">options</span>: [<span class="string">'B'</span>]</div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">handleChange</span>: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> checked = [];</div><div class="line">        <span class="keyword">var</span> sel = event.target;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; sel.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> option = sel.options[i]</div><div class="line">            <span class="keyword">if</span>(option.selected) &#123;</div><div class="line">                checked.push(option.value);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            <span class="attr">options</span>: checked</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">submitHandler</span>: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        event.preventDefault()</div><div class="line">        alert(<span class="keyword">this</span>.state.options)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.submitHandler&#125;</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span> <span class="attr">value</span>=<span class="string">&#123;this.state.options&#125;</span></span></div><div class="line">                    <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span>&gt;</div><div class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"A"</span>&gt;</span>A<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"B"</span>&gt;</span>B<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"C"</span>&gt;</span>C<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Speak<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">        );</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="自定义表单"><a href="#自定义表单" class="headerlink" title="自定义表单"></a>自定义表单</h3><h4 id="Radio-js"><a href="#Radio-js" class="headerlink" title="Radio.js"></a>Radio.js</h4><figure class="highlight javascript"><figcaption><span>key</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Radio = React.createClass(&#123;</div><div class="line">    <span class="attr">propTypes</span>: &#123;</div><div class="line">        <span class="attr">onChange</span>: React.PropTypes.func</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">value</span>: <span class="keyword">this</span>.props.defaultValue</div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">handleChange</span>: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.props.onChange) &#123;</div><div class="line">            <span class="keyword">this</span>.props.onChange(event);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            <span class="attr">value</span>: event.target.value</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> children = [];</div><div class="line">        <span class="keyword">var</span> value = <span class="keyword">this</span>.props.value || <span class="keyword">this</span>.state.value;</div><div class="line">        React.Children.forEach(<span class="keyword">this</span>.props.children,</div><div class="line">            <span class="function"><span class="keyword">function</span>(<span class="params">child, i</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> label =(</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">key</span>=<span class="string">&#123;</span>"<span class="attr">radio</span>" + <span class="attr">i</span>&#125;&gt;</span> // 生成unique key，标识组件，便于react更快的更新，没有key会warning</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span></span></div><div class="line">                        <span class="attr">type</span>=<span class="string">"radio"</span></div><div class="line">                        <span class="attr">name</span>=<span class="string">&#123;child.props.value&#125;</span> // <span class="attr">child.props</span>有两个值 &#123;<span class="attr">value:A</span>/<span class="attr">B</span>,<span class="attr">children:A</span>/<span class="attr">B</span>&#125;</div><div class="line">                        <span class="attr">checked</span>=<span class="string">&#123;child.props.value</span> === <span class="string">value&#125;</span></div><div class="line">                        <span class="attr">value</span>=<span class="string">&#123;child.props.value&#125;</span></div><div class="line">                        <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</div><div class="line">                    &#123;child.props.children&#125;</div><div class="line">                <span class="tag">&lt;/<span class="name">label</span>&gt;</span>)</div><div class="line"></div><div class="line">            children[i] = label;</div><div class="line">            &#125;.bind(this));</div><div class="line"></div><div class="line">        return <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>key</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Radio = <span class="built_in">require</span>(<span class="string">'./Radio'</span>);</div><div class="line"><span class="keyword">var</span> RadioForm = React.createClass(&#123;</div><div class="line">    <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">my_radio</span>: <span class="string">"B"</span></div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">handleChange</span>: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            <span class="attr">my_radio</span>: event.target.value</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">submitHandler</span>:<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        event.preventDefault()</div><div class="line">        alert(<span class="keyword">this</span>.state.my_radio)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.submitHandler&#125;</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">Radio</span></span></div><div class="line">                    <span class="attr">name</span>=<span class="string">"my_radio"</span></div><div class="line">                    <span class="attr">value</span>=<span class="string">&#123;this.state.my_radio&#125;</span></div><div class="line">                    <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span>&gt;</div><div class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"A"</span>&gt;</span>A<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"B"</span>&gt;</span>B<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">Radio</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Speak<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[github实用技巧]]></title>
      <url>http://iminyao.com/2016/12/06/github-tip/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="github小技巧"><a href="#github小技巧" class="headerlink" title="github小技巧"></a>github小技巧</h3><ol>
<li><p>issue中输入”:”添加表情</p>
</li>
<li><p>任意界面，shift + ？显示快捷键</p>
</li>
<li><p>issue中选中文字，R键快速引用</p>
</li>
<li><p>查看分支间差别 project-address/version1…version2</p>
</li>
<li><p><a href="https://github.com/rails/rails/compare" target="_blank" rel="external">issue设置模板</a></p>
</li>
<li><p>搜索文件 t </p>
</li>
<li><p><a href="https://github.com/cssmagic/blog/issues/49" target="_blank" rel="external">如何正确接收 GitHub 的消息邮件</a></p>
</li>
</ol>
<h3 id="tag-插件-github-star-tag"><a href="#tag-插件-github-star-tag" class="headerlink" title="tag 插件 -  github star tag"></a>tag 插件 -  github star tag</h3><p>不知不觉github上star的项目已经超过了70个，然而github官方并没有tag功能，只能看下&gt;有没有第三方的工具了。试用了一番最后选择了<a href="https://app.astralapp.com/，简洁，但功" target="_blank" rel="external">https://app.astralapp.com/，简洁，但功</a><br>能够用。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[react.js入门]]></title>
      <url>http://iminyao.com/2016/12/02/react-first/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-HTML标签-与-React组件"><a href="#1-HTML标签-与-React组件" class="headerlink" title="1.HTML标签 与 React组件"></a>1.HTML标签 与 React组件</h3><p>ReactDOM.render只能渲染HTML标签，无法直接渲染React组件，需要将组件以类似HTML标签的形式传入</p>
<blockquote>
<p>JSX 里约定分别使用首字母大、小写来区分本地组件的类和 HTML 标签</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> myHtml = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">ReactDOM.render(myHTML,<span class="built_in">document</span>.body);</div><div class="line"></div><div class="line"><span class="keyword">var</span> MyComponent  = React.createClass(&#123;&#125;);</div><div class="line">ReactDoM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyComponent</span> /&gt;</span>, document.body);</span></div></pre></td></tr></table></figure>
<h3 id="2-JSX延伸属性"><a href="#2-JSX延伸属性" class="headerlink" title="2.JSX延伸属性"></a>2.JSX延伸属性</h3><p>react中Props应该禁止被修改，如果一开始不知道设置哪些props，可以使用JSX的延伸属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> props = &#123;&#125;</div><div class="line">props.foo = x</div><div class="line">props.bar =y</div><div class="line"><span class="keyword">var</span> component = &lt;MyComponent &#123;...props&#125; /&gt;</div><div class="line">// 即 &lt;MyComponent foo=x bar=y /&gt;</div></pre></td></tr></table></figure>
<h3 id="3-HTML实体"><a href="#3-HTML实体" class="headerlink" title="3.HTML实体"></a>3.HTML实体</h3><p>即vue中的v-html<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">&lt;div dangerouslySetInnerHTML=&#123;&#123;<span class="attr">__html</span>: <span class="string">'First &amp;middot; Second'</span>&#125;&#125; /&gt;</div></pre></td></tr></table></figure></p>
<h3 id="4-命名组件"><a href="#4-命名组件" class="headerlink" title="4.命名组件"></a>4.命名组件</h3><p>组件支持命名空间，可以将组件挂在其他组件下面<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Form = MyFormComponent;</div><div class="line"><span class="keyword">var</span> FormRow = Form.Row;</div><div class="line"><span class="keyword">var</span> FormLabel = Form.Label;</div><div class="line"><span class="keyword">var</span> FormInput = Form.Input;</div><div class="line"></div><div class="line"><span class="keyword">var</span> App = (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Form</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">FormRow</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">FormLabel</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">FormInput</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">FormRow</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// namespaced component</span></div><div class="line"><span class="keyword">var</span> Form = MyFormComponent;</div><div class="line"><span class="keyword">var</span> App = (</div><div class="line">  &lt;Form&gt;</div><div class="line">    &lt;Form.Row&gt;</div><div class="line">      &lt;Form.Label /&gt;</div><div class="line">      &lt;Form.Input /&gt;</div><div class="line">    &lt;/Form.Row&gt;</div><div class="line">  &lt;/Form&gt;</div><div class="line">);</div><div class="line"></div><div class="line">var MyFormComponent = React.createClass(&#123; ... &#125;);</div><div class="line">MyFormComponent.Row = React.createClass(&#123; ... &#125;);</div><div class="line">MyFormComponent.Label = React.createClass(&#123; ... &#125;);</div><div class="line">MyFormComponent.Input = React.createClass(&#123; ... &#125;);</div></pre></td></tr></table></figure></p>
<h3 id="5-Prop验证"><a href="#5-Prop验证" class="headerlink" title="5. Prop验证"></a>5. Prop验证</h3><blockquote>
<p>为了性能考虑，只在开发环境中验证propTypes</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">React.createClass(&#123;</div><div class="line">  <span class="attr">propTypes</span>: &#123;</div><div class="line">    <span class="comment">// 可以声明 prop 为指定的 JS 基本类型。默认</span></div><div class="line">    <span class="comment">// 情况下，这些 prop 都是可传可不传的。</span></div><div class="line">    optionalArray: React.PropTypes.array,</div><div class="line">    <span class="attr">optionalBool</span>: React.PropTypes.bool,</div><div class="line">    <span class="attr">optionalFunc</span>: React.PropTypes.func,</div><div class="line">    <span class="attr">optionalNumber</span>: React.PropTypes.number,</div><div class="line">    <span class="attr">optionalObject</span>: React.PropTypes.object,</div><div class="line">    <span class="attr">optionalString</span>: React.PropTypes.string,</div><div class="line">    <span class="attr">optionalSymbol</span>: React.PropTypes.symbol,</div><div class="line"></div><div class="line">    <span class="comment">// 所有可以被渲染的对象：数字，字符串，DOM 元素或包含这些类型的数组(or fragment) 。</span></div><div class="line">    optionalNode: React.PropTypes.node,</div><div class="line"></div><div class="line">    <span class="comment">// React 元素</span></div><div class="line">    optionalElement: React.PropTypes.element,</div><div class="line"></div><div class="line">    <span class="comment">// 用 JS 的 instanceof 操作符声明 prop 为类的实例。</span></div><div class="line">    optionalMessage: React.PropTypes.instanceOf(Message),</div><div class="line"></div><div class="line">    <span class="comment">// 使用 enum 的方式确保 prop 被限定为指定值。</span></div><div class="line">    optionalEnum: React.PropTypes.oneOf([<span class="string">'News'</span>, <span class="string">'Photos'</span>]),</div><div class="line"></div><div class="line">    <span class="comment">// 指定的多个对象类型中的一个</span></div><div class="line">    optionalUnion: React.PropTypes.oneOfType([</div><div class="line">      React.PropTypes.string,</div><div class="line">      React.PropTypes.number,</div><div class="line">      React.PropTypes.instanceOf(Message)</div><div class="line">    ]),</div><div class="line"></div><div class="line">    <span class="comment">// 指定类型组成的数组</span></div><div class="line">    optionalArrayOf: React.PropTypes.arrayOf(React.PropTypes.number),</div><div class="line"></div><div class="line">    <span class="comment">// 指定类型的属性构成的对象</span></div><div class="line">    optionalObjectOf: React.PropTypes.objectOf(React.PropTypes.number),</div><div class="line"></div><div class="line">    <span class="comment">// 特定形状参数的对象</span></div><div class="line">    optionalObjectWithShape: React.PropTypes.shape(&#123;</div><div class="line">      <span class="attr">color</span>: React.PropTypes.string,</div><div class="line">      <span class="attr">fontSize</span>: React.PropTypes.number</div><div class="line">    &#125;),</div><div class="line"></div><div class="line">    <span class="comment">//  `isRequired`确保传递了 prop 如果 prop 没有提供 就会显示一个警告。</span></div><div class="line">    requiredFunc: React.PropTypes.func.isRequired,</div><div class="line"></div><div class="line">    <span class="comment">// 不可空的任意类型</span></div><div class="line">    requiredAny: React.PropTypes.any.isRequired,</div><div class="line"></div><div class="line">    <span class="comment">// 自定义一个验证器 如果验证失败需要返回一个 Error 对象。</span></div><div class="line">    <span class="comment">// 不要直接使用 `console.warn` 或抛异常，</span></div><div class="line">    customProp: <span class="function"><span class="keyword">function</span>(<span class="params">props, propName, componentName</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (!<span class="regexp">/matchme/</span>.test(props[propName])) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Validation failed!'</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="6-react中的循环"><a href="#6-react中的循环" class="headerlink" title="6.react中的循环"></a>6.react中的循环</h3><p>react为处理<code>this.props.children</code>这个封闭的数据结构提供了map和forEach两个循环方法</p>
<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h4><blockquote>
<p>forEach没有任何返回，所以需要自己手动保存到另外的变量中</p>
</blockquote>
<figure class="highlight javascript"><figcaption><span>forEach</span></figcaption><table><tr><td class="code"><pre><div class="line">render() &#123;</div><div class="line">  <span class="keyword">var</span> children = [];</div><div class="line">  React.Children.forEach(<span class="keyword">this</span>.props.children, (child, i) =&gt; &#123;</div><div class="line">  <span class="keyword">var</span> label =(</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">key</span>=<span class="string">&#123;</span>"<span class="attr">radio</span>" + <span class="attr">i</span>&#125;&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">input</span></span></div><div class="line">        <span class="attr">type</span>=<span class="string">"radio"</span></div><div class="line">        <span class="attr">name</span>=<span class="string">&#123;child.props.value&#125;</span></div><div class="line">        <span class="attr">checked</span>=<span class="string">&#123;child.props.value</span> === <span class="string">value&#125;</span></div><div class="line">        <span class="attr">value</span>=<span class="string">&#123;child.props.value&#125;</span></div><div class="line">        <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</div><div class="line">      &#123;child.props.children&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span>)</div><div class="line"></div><div class="line">  children[i] = label;</div><div class="line">  &#125;);</div><div class="line">  return <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><blockquote>
<p>map会返回保存结果的数组</p>
</blockquote>
<figure class="highlight javascript"><figcaption><span>map</span></figcaption><table><tr><td class="code"><pre><div class="line">render() &#123;</div><div class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">  // 或React.children.map(this.props.children,func)</div><div class="line">    &#123;this.props.children.map((child, index) =&gt; &#123;</div><div class="line">      return <span class="tag">&lt;<span class="name">label</span> <span class="attr">key</span>=<span class="string">&#123;</span>"<span class="attr">radio</span>" + <span class="attr">index</span>&#125;&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">input</span></span></div><div class="line">            <span class="attr">type</span>=<span class="string">"radio"</span></div><div class="line">            <span class="attr">name</span>=<span class="string">&#123;child.props.value&#125;</span></div><div class="line">            <span class="attr">checked</span>=<span class="string">&#123;child.props.value</span> === <span class="string">value&#125;</span></div><div class="line">            <span class="attr">value</span>=<span class="string">&#123;child.props.value&#125;</span></div><div class="line">            <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</div><div class="line">          &#123;child.props.children&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">    &#125;)&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="除此之外，也可以定义一个组件，组件接收一个数组，然后返回一个列表"><a href="#除此之外，也可以定义一个组件，组件接收一个数组，然后返回一个列表" class="headerlink" title="除此之外，也可以定义一个组件，组件接收一个数组，然后返回一个列表"></a>除此之外，也可以定义一个组件，组件接收一个数组，然后返回一个列表</h4><figure class="highlight"><figcaption><span>map</span><a href="https://facebook.github.io/react/docs/lists-and-keys.html#keys" target="_blank" rel="external">link</a></figcaption><table><tr><td class="code"><pre><div class="line">  function NumberList(props) &#123;</div><div class="line">  const numbers = props.numbers;</div><div class="line">  const listItems = numbers.map((number) =&gt;</div><div class="line">    &lt;li&gt;&#123;number&#125;&lt;/li&gt;</div><div class="line">  );</div><div class="line">  return (</div><div class="line">    &lt;ul&gt;&#123;listItems&#125;&lt;/ul&gt;</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line">const numbers = [1, 2, 3, 4, 5];</div><div class="line">ReactDOM.render(</div><div class="line">  &lt;NumberList numbers=&#123;numbers&#125; /&gt;,</div><div class="line">  document.getElementById('root')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>NumberLIst中参数以对象形式传入，此处 props = {numbers: numbers},如果要传递其他参数写法如下<br><figure class="highlight javascript"><figcaption><span>NumberList</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> other = <span class="number">123</span>;</div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">NumberList</span> <span class="attr">numbers</span> = <span class="string">&#123;numbers&#125;</span> <span class="attr">other</span> = <span class="string">&#123;other&#125;</span> /&gt;</span>,...</span></div><div class="line">  )</div></pre></td></tr></table></figure><br>详见 <a href="https://facebook.github.io/react/docs/lists-and-keys.html#embedding-map-in-jsx" target="_blank" rel="external">Embedding map() in JSX</a></p>
<h3 id="7-React-key"><a href="#7-React-key" class="headerlink" title="7.React key"></a>7.React key</h3><blockquote>
<p>如果我们动态地创建 React 元素，而且 React 元素内包含数量或顺序不确定的子元素时，我们就需要提供 key 这个特殊的属性。</p>
</blockquote>
<figure class="highlight javascript"><figcaption><span>key</span></figcaption><table><tr><td class="code"><pre><div class="line">  <span class="keyword">const</span> UserList = <span class="function"><span class="params">props</span> =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">    &#123;props.users.map(u =&gt; <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;u.id&#125;:&#123;u.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)&#125;  // 没有提供 key</div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">);</div></pre></td></tr></table></figure>
<p>这段代码运行之后控制台会报warning<br><figure class="highlight javascript"><figcaption><span>key</span></figcaption><table><tr><td class="code"><pre><div class="line">Warning: Each child <span class="keyword">in</span> an array or iterator should have a unique <span class="string">"key"</span> prop. Check the render method <span class="keyword">of</span> <span class="string">`App`</span>. See https:<span class="comment">//fb.me/react-warning-keys for more information.</span></div></pre></td></tr></table></figure><br>我们必须为数组中的元素提供唯一的key<br><figure class="highlight javascript"><figcaption><span>key</span><a href="http://taobaofed.org/blog/2016/08/24/react-key/" target="_blank" rel="external">link</a></figcaption><table><tr><td class="code"><pre><div class="line">  <span class="keyword">const</span> UserList = <span class="function"><span class="params">props</span> =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">    &#123;props.users.map(u =&gt; <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;u.id&#125;</span>&gt;</span>&#123;u.id&#125;:&#123;u.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)&#125;  // 提供了 key</div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">);</div></pre></td></tr></table></figure></p>
<h4 id="如何正确的使用key"><a href="#如何正确的使用key" class="headerlink" title="如何正确的使用key"></a>如何正确的使用key</h4><blockquote><p>Keys only make sense in the context of the surrounding array.<br>For example, if you extract a ListItem component, you should keep the key on the <listitem> elements in the array rather than on the root <li> element in the ListItem itself.</li></listitem></p>
<p>A good rule of thumb is that elements inside the map() call need keys.</p>
<footer><strong>Facebook ReactDocs</strong><cite><a href="https://facebook.github.io/react/docs/lists-and-keys.html#extracting-components-with-keys" target="_blank" rel="external">keys</a></cite></footer></blockquote>
<p>也就是说key要用于array的上下文中，而不能用到单个组件根元素上面<br>最后简单粗暴的总结一句就是key用在map循环的Elements的单个Element中</p>
<h3 id="8-深入React-Component"><a href="#8-深入React-Component" class="headerlink" title="8.深入React Component"></a>8.深入React Component</h3><blockquote><p>Conceptually, components are like JavaScript functions. They accept arbitrary inputs (called “props”) and return React elements describing what should appear on the screen.</p>
<footer><strong>Facebook ReactDocs</strong><cite><a href="https://facebook.github.io/react/docs/components-and-props.html#extracting-components" target="_blank" rel="external">Components</a></cite></footer></blockquote>
<p>翻译过来就是说在React中，组件就像特殊的函数一样，接收一个props变量，然后输出React Element。<br>我们可以用下面的代码定义一个组件：<br><figure class="highlight javascript"><figcaption><span>function</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ES6 class 版本<br><figure class="highlight javascript"><figcaption><span>ES6-class</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>&gt;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="JSX-Spread-Attributes-展开属性"><a href="#JSX-Spread-Attributes-展开属性" class="headerlink" title="JSX Spread Attributes(展开属性)"></a>JSX Spread Attributes(展开属性)</h3><p>在给组件传递props时需要一次把所有prop都传进去，我们有两种方式来传入:</p>
<h4 id="function写法"><a href="#function写法" class="headerlink" title="function写法"></a>function写法</h4><figure class="highlight javascript"><figcaption><span>function</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> props = &#123;&#125;;</div><div class="line">props.foo = x;</div><div class="line">props.bar = y;</div><div class="line"><span class="keyword">var</span> component = Component(props)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>JSX写法</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> component = <span class="xml"><span class="tag">&lt;<span class="name">Component</span> <span class="attr">foo</span>=<span class="string">&#123;x&#125;</span> <span class="attr">bar</span>=<span class="string">&#123;y&#125;</span> /&gt;</span></span></div></pre></td></tr></table></figure>
<p>JSX的写法有一个问题，就是没法像function写法一样传入props对象，而是要一个一个的传，这样当要传入的props太多的时候就要写很长的代码。</p>
<p>不过幸运的是,JSX推出了Spread Attributes<br><figure class="highlight javascript"><figcaption><span>JSX Spread Attributes写法</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> props = &#123;&#125;;</div><div class="line">props.foo = x;</div><div class="line">props.bar = y;</div><div class="line"><span class="keyword">var</span> component = <span class="xml"><span class="tag">&lt;<span class="name">Component</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span>;</span></div></pre></td></tr></table></figure></p>
<p>同时，JSX也支持传入多个attributes，重复的属性会自动merge掉<br><figure class="highlight javascript"><figcaption><span>JSX Spread Attributes merge</span><a href="https://gist.github.com/sebmarkbage/07bbe37bc42b6d4aef81" target="_blank" rel="external">JSX Spread Attributes</a></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> props = &#123; <span class="attr">foo</span>: <span class="string">'default'</span> &#125;;</div><div class="line"><span class="keyword">var</span> component = <span class="xml"><span class="tag">&lt;<span class="name">Component</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">foo</span>=<span class="string">&#123;</span>'<span class="attr">override</span>'&#125; /&gt;</span>;</span></div><div class="line">console.log(component.props.foo); // 'override'</div></pre></td></tr></table></figure></p>
<h3 id="对组件的引用（refs）"><a href="#对组件的引用（refs）" class="headerlink" title="对组件的引用（refs）"></a>对组件的引用（refs）</h3><p><a href="http://bbs.reactnative.cn/topic/608/%E5%AF%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E5%BC%95%E7%94%A8-refs" target="_blank" rel="external">http://bbs.reactnative.cn/topic/608/%E5%AF%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E5%BC%95%E7%94%A8-refs</a></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.cnblogs.com/vajoy/p/4631292.html" target="_blank" rel="external">ReactJS入门（三）—— 顶层API</a></li>
<li><a href="http://stackoverflow.com/questions/22876978/loop-inside-react-jsx" target="_blank" rel="external">loop inside React JSX</a></li>
<li><a href="http://taobaofed.org/blog/2016/08/24/react-key/" target="_blank" rel="external">React 实践心得：key 属性的原理和用法</a></li>
<li><a href="https://facebook.github.io/react/docs/lists-and-keys.html#extracting-components-with-keys" target="_blank" rel="external">Lists and Keys</a></li>
<li><a href="https://facebook.github.io/react/docs/components-and-props.html#extracting-components" target="_blank" rel="external">Components and Props</a></li>
<li><a href="https://gist.github.com/sebmarkbage/07bbe37bc42b6d4aef81" target="_blank" rel="external">JSX Spread Attributes</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[avalon.js入门]]></title>
      <url>http://iminyao.com/2016/11/28/avalon-first-md/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p> 1.data-xxx-yyy=”xxx”，辅助指令,例如data-duplex-event=”change” 双工绑定时change事件时才触发更新</p>
<p> 2.avalon在DOMReady时扫描树，所以不用包在avalon.ready中也可以正常运行，正确的写法为<br>    <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">avalon.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> vm = avalon.define(&#123;</div><div class="line">        &#125;)</div><div class="line">    avalon.scan() </div><div class="line">    &#125;)</div></pre></td></tr></table></figure></p>
<p>3.某些属性不想监听可以放在$skipArray数组,$skipArray是一个字符串数组，只能放当前对象的直接属性名，想禁止子对象的某个属性的监听，在那个子对象上再添加一个$skipAray数组就行</p>
<p>4.VM的某一个属性是对象（并且它是可监控的），也会转换为一个VM，这个子VM也会默认加上一个$id。 但只有用户添加的那个最外面的$id会注册到avalon.vmodels对象上。</p>
<p>5.计算属性，定义时为一个对象，并且只存在set(可选),get两个函数。它是监控属性的高级形式，表示它的值是通过函数计算出来的，是依赖于其他属性合成出来的。</p>
<p>6.avalon不允许在VM定义之后，再追加新属性与方法,也不允许在define里面直接调用方法或ajax,正确的写法是<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = avalon.define(&#123;</div><div class="line">   <span class="attr">$id</span>: <span class="string">"test"</span>,</div><div class="line">   <span class="attr">aaa</span>: <span class="string">""</span>, <span class="comment">//这里应该把所有AJAX都返回的数据都定义好</span></div><div class="line">   bbb: <span class="string">""</span>,</div><div class="line"> </div><div class="line">&#125;)</div><div class="line"> </div><div class="line">$.ajax(&#123;  <span class="comment">//这里会发出两次请来</span></div><div class="line">      <span class="keyword">async</span>:<span class="literal">false</span>,</div><div class="line">      <span class="attr">type</span>: <span class="string">"post"</span>,</div><div class="line">      <span class="attr">url</span>: <span class="string">"xxx"</span>,</div><div class="line">      <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">           <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> data)&#123;</div><div class="line">               <span class="keyword">if</span>(vm.hasOwnProperty(i))&#123;</div><div class="line">                  vm[i] = data[i]</div><div class="line">               &#125;</div><div class="line">           &#125;</div><div class="line">      &#125;</div><div class="line">   &#125;)</div></pre></td></tr></table></figure></p>
<p>7.vm属性更新: 简单数据类型（string, boolean, number）或Date类型可以直接更新;数组可以使用set方法更新\<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">第一个参数index 第二个参数新值 </div><div class="line">model.simpleArray.set(<span class="number">0</span>, <span class="number">1000</span>)</div></pre></td></tr></table></figure></p>
<p>更改对象数组中某对象的属性值可以直接赋值<code>model.objectArray[1].name = &quot;5555&quot;</code>，更新对象可以直接赋值<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">model.object = &#123;</div><div class="line">               <span class="attr">aaaa</span>: <span class="string">"aaaa"</span>,</div><div class="line">               <span class="attr">bbbb</span>: <span class="string">"bbbb"</span>,</div><div class="line">               <span class="attr">cccc</span>: <span class="string">"cccc"</span>,</div><div class="line">               <span class="attr">dddd</span>: <span class="string">"dddd"</span></div><div class="line">           &#125;</div></pre></td></tr></table></figure></p>
<p>8.少部分表示字符串类型的属性可以绑定属性可以包含插值表达式ms-attr-src=”xxx//yyy/“</p>
<p>9.avalon支持为同一事件绑定多个函数<code>ms-click-1=&quot;fn&quot; ms-click-2=&quot;fn&quot;</code></p>
<p>10.作用于绑定，ViewModel在DOM树的作用范围其实与CSS很相似，采取就近原则，如果当前ViewModel没有此字段 就找上一级ViewModel的同名字段，除了ms-important ms-important就相当于CSS的important语句，强制这个区域使用此ViewModel，不再往上查找同名属性或方法</p>
<p>11.页面闪屏<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.ms-controller</span>,<span class="selector-class">.ms-important</span>,<span class="selector-attr">[ms-controller]</span>,<span class="selector-attr">[ms-important]</span>&#123;</div><div class="line">     <span class="attribute">visibility</span>: hidden;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>12.忽略扫描ms-skip，只要元素定义了这个属性，便不会扫描其他属性及它的子节点<code>&lt;div ms-controller=&quot;test&quot; ms-skip&gt;&lt;/div&gt;</code>  </p>
<p>13.内部模板（模板与目标节点是位于同一个DOM树中，可以用一个MIME不明的script标签或者noscript标签保存它，然后通过ms-include=”id”引用它<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"avalon"</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span><span class="handlebars"><span class="xml"></span></span></div><div class="line">    here, <span class="template-variable">&#123;&#123; 3 + 6 * 5  &#125;&#125;</span><span class="xml"></span></div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-controller</span>=<span class="string">"test"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-include</span>=<span class="string">"'tpl'"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  <span class="comment">&lt;!-- output 33 --&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>14.ms-include辅助指令:data-include-loaded:指定加载后的回调;data-include-replace:由于ms-include绑定需要定义在一个元素节点上，它的作用仅仅是一个占位符，提供一个插入位置的容器。 如果用户想在插入内容后去掉容器，可以使用data-include-replace=”true”</p>
<p>15.外部模板，引用独立的外部文件，需要使用<code>ms-include-src</code></p>
<p>16.数据填充 ms-text,ms-html,如需配置自定义符号，可以使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">avalon.config(&#123;</div><div class="line">   <span class="attr">interpolate</span>:[<span class="string">""</span>,<span class="string">""</span>]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>17.事件绑定<code>ms-on-xxx</code>或<code>ms-xxx</code></p>
<p>18.显示隐藏<code>ms-visible</code>(display:none实现);<code>ms-if</code>(将元素移除DOM)</p>
<p>19.avalon扫描顺序<code>ms-skip --&gt; ms-important --&gt; ms-controller --&gt; ms-if --&gt; ms-repeat --&gt; ms-if-loop --&gt; ...--&gt;ms-each --&gt; ms-with --&gt; ms-duplex</code></p>
<p>20.HTML5 data-<em>属性 ms-data-</em></p>
<p>21.循环ms-repeat-<em> ms-each-</em>,ms-each, ms-repeat会生成一个新的代理VM对象放进当前的vmodels的前面，这个代理对象拥有el， $index, $first, $last, $remove, $outer等属性。<br>el: 不一定叫这个名字，比如说ms-each-item，它就变成item了。默认为el。指向当前元素。</p>
<pre><code>* el: 指向当前元素,默认为el。。
* $first: 判定是否为监控数组的第一个元素
* $last: 判定是否为监控数组的最后一个元素
* $index: 得到当前元素的索引值
* $outer: 得到外围循环的那个元素。
* $remove：这是一个方法，用于移除此元素
</code></pre><p>区别:<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- ms-each-* --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">ms-ecah-el</span>=<span class="string">"array"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; el &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- ms-repeat-* --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">ms-repeat-el</span>=<span class="string">"array"</span>&gt;</span>&#123;&#123; el &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>22.此外还可以通过data-repeat-rendered, data-each-rendered来指定这些元素都插入DOM被渲染后的回调，this指向元素节点， 有一个参数表示为当前的操作，是add, del, move, index还是clear<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ms-controller</span>=<span class="string">"test"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">data-repeat-rendered</span>=<span class="string">"rendered"</span> <span class="attr">ms-repeat</span>=<span class="string">"array"</span>&gt;</span>&#123;&#123;el&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line">    <span class="keyword">var</span>  vm = avalon.define(&#123;</div><div class="line">        $id: <span class="string">"test"</span>,</div><div class="line">        array: [],</div><div class="line">        rendered: <span class="function"><span class="keyword">function</span><span class="params">(action)</span></span>&#123;</div><div class="line">            <span class="keyword">if</span>(action === <span class="string">"add"</span>)&#123;</div><div class="line">                avalon.log(<span class="string">"渲染完毕"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">        vm.array.push(<span class="number">4</span>,<span class="number">5</span>) <span class="comment">//通过vm.array.push(4,5)添加元素，会连续两次触发rendered，第一次add，第二次为index</span></div><div class="line">    &#125;,<span class="number">3000</span>);</div><div class="line">    avalon.scan()</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>23.属性监控:$watch $unwatch $fire(模块间通信),另外还有一个$events对象。$events是用于储存各种回调，监控所以属性用$watch($all)<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// $watch</span></div><div class="line"><span class="keyword">var</span> vmodel = avalon.define(&#123;</div><div class="line">     <span class="attr">$id</span>: <span class="string">"test"</span>, </div><div class="line">     <span class="attr">aaa</span>: <span class="number">111</span></div><div class="line"> &#125;)</div><div class="line">  vmodel.$watch(<span class="string">"aaa"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">newValue, oldValue</span>)</span>&#123;</div><div class="line">       avalon.log(newValue) <span class="comment">//222</span></div><div class="line">       avalon.log(oldValue) <span class="comment">//111</span></div><div class="line">   &#125;)</div><div class="line"> setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">     vmodel.aaa = <span class="number">222</span></div><div class="line"> &#125;, <span class="number">1000</span>)</div><div class="line"> vmodel.$unwatch(<span class="string">"aaa"</span>)</div></pre></td></tr></table></figure></p>
<p>实现模块间通信可以通过在$fire自定义事件名前加<code>up!``down!``all</code>前缀即可<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">"ms-controller"</span>   <span class="attr">ms-controller</span>=<span class="string">"ancestor"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">ms-click</span>=<span class="string">"click"</span>&gt;</span></div><div class="line">    capture</div><div class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-controller</span>=<span class="string">"parent"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">ms-click</span>=<span class="string">"click"</span>&gt;</span>broadcast<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-controller</span>=<span class="string">"son"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">ms-click</span>=<span class="string">"click"</span>&gt;</span></div><div class="line">            bubble</div><div class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> vm1 = avalon.define(&#123;</div><div class="line">    <span class="attr">$id</span>: <span class="string">"ancestor"</span>,</div><div class="line">    <span class="attr">click</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        avalon.log(<span class="string">"向下广播"</span>)</div><div class="line">        vm1.$fire(<span class="string">"down!aaa"</span>, <span class="string">"capture"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">vm1.$watch(<span class="string">"aaa"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    avalon.log(v)</div><div class="line">    avalon.log(<span class="string">"ancestor.aaa事件被触发了"</span>)</div><div class="line">&#125;)</div><div class="line"><span class="keyword">var</span> vm2 = avalon.define(&#123;</div><div class="line">    <span class="attr">$id</span>: <span class="string">"parent"</span>,</div><div class="line">    <span class="attr">text</span> : <span class="string">"222222222"</span>,</div><div class="line">    <span class="attr">click</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"全局扩播"</span>)</div><div class="line">        vm2.$fire(<span class="string">"all!aaa"</span>, <span class="string">"broadcast"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">vm2.$watch(<span class="string">"aaa"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    avalon.log(v)</div><div class="line">    avalon.log(<span class="string">"parent.aaa事件被触发了"</span>)</div><div class="line">&#125;)</div><div class="line"><span class="keyword">var</span> vm3 = avalon.define(&#123;</div><div class="line">    <span class="attr">$id</span>: <span class="string">"son"</span>,</div><div class="line">    <span class="attr">click</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"向上冒泡"</span>)</div><div class="line">    vm3.$fire(<span class="string">"up!aaa"</span>, <span class="string">"bubble"</span>)</div><div class="line">&#125;</div><div class="line">&#125;)</div><div class="line">vm3.$watch(<span class="string">"aaa"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    avalon.log(v)</div><div class="line">    avalon.log(<span class="string">"son.aaa事件被触发了"</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>24.过滤器 只能用于插值表达式<br>    自带过滤器:</p>
<pre><code>1. html 文本绑定转换为html绑定
2. sanitize 去掉onclick, javascript:alert等可能引起注入攻击的代码。
3. uppercase 大写化 lowercase 小写化
4. truncate 对长字符串进行截短，truncate(number, truncation), number默认为30，truncation为“...”
5. camelize 驼峰化处理
6. escape 对类似于HTML格式的字符串进行转义，把尖括号转换为&amp;gt; &amp;lt;
7. currency 对数字添加货币符号，以及千位符， currency(symbol)
8. number 对数字进行各种格式化，这与与PHP的number_format完全兼容， number(decimals, dec_point, thousands_sep),
    * decimals  可选，规定多少个小数位。
    * dec_point 可选，规定用作小数点的字符串（默认为 . ）。
    * thousands_sep 可选，规定用作千位分隔符的字符串（默认为 , ），如果设置了该参数，那么所有其他参数都是必需的。
9. date 日期格式化 
自定义过滤器:
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"> avalon.filters.myfilter = <span class="function"><span class="keyword">function</span>(<span class="params">str, args, args2</span>)</span>&#123;<span class="comment">//str为管道符之前计算得到的结果，默认框架会帮你传入，此方法必须返回一个值</span></div><div class="line"><span class="keyword">return</span> ret;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>

25.$model var vm = avalon.define({})后返回的是一个添加了许多$方法与属性的对象，如果想得到纯净的对象需要使用vm.$model来获取，如果是传递给后端的数据还要使用`JSON.parse(JSON.stringify(vm.$model)`来过滤到其中的函数
</code></pre><h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><pre><code>1. [avalon入门教程](http://www.cnblogs.com/rubylouvre/p/3181291.html)
2. [avalon最佳实践](http://www.cnblogs.com/rubylouvre/p/3385373.html)
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chrome Dev Tools使用技巧总结(一) Console]]></title>
      <url>http://iminyao.com/2016/11/22/chrome-dev-tools-console/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="Console-API"><a href="#Console-API" class="headerlink" title="Console API"></a>Console API</h2><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><ul>
<li>console.log：普通信息</li>
<li>console.info：提示类信息</li>
<li>console.error：错误信息</li>
<li>console.warn：警示信息<h3 id="信息分组"><a href="#信息分组" class="headerlink" title="信息分组"></a>信息分组</h3>配合console.group 与console.groupEnd，可以在在大的项目时，将模块各自的log信息分组到以各自命名空间为名称的组里面。<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">console</span>.group(<span class="string">"app.foo"</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">"来自foo模块的信息 blah blah blah..."</span>);</div><div class="line"><span class="built_in">console</span>.groupEnd();</div><div class="line"><span class="built_in">console</span>.group(<span class="string">"app.bar"</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">"来自bar模块的信息 blah blah"</span>)</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="占位符"><a href="#占位符" class="headerlink" title="占位符"></a>占位符</h3><p>经常在一些网站(比如百度首页)的console看见一些酷炫的效果，这样得益于Chrome为console提供了占位符，console.log的第一个参数可以包含指令，支持的指令于C语言中类似，支持的有：字符（%s）、整数（%d或%i）、浮点数（%f）和对象（%o）、样式(%c)</p>
<p><code>console.log(&#39;%chello world&#39;,&#39;font-size:25px;color:red;&#39;);</code></p>
<h3 id="查看对象信息"><a href="#查看对象信息" class="headerlink" title="查看对象信息"></a>查看对象信息</h3><p>console.dir()可以显示一个对象所有的属性和方法,此方法更强大之处在于它不仅可以打印JavaScript对象，还可以打印DOM节点<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line"><span class="attr">a</span> : <span class="number">1</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.dir(obj);</div><div class="line"><span class="built_in">console</span>.dir(<span class="built_in">document</span>.body);</div></pre></td></tr></table></figure></p>
<h3 id="显示网页内容"><a href="#显示网页内容" class="headerlink" title="显示网页内容"></a>显示网页内容</h3><p>有时候我们需要打印页面某个节点的HTML结构，以前一直用console.log的，但是chrome提供了专门的方法console.dirxml<br><figure class="highlight excel"><table><tr><td class="code"><pre><div class="line"><span class="built_in">var</span> <span class="built_in">info</span> = document.getElementById('<span class="built_in">info</span>');</div><div class="line">console.dirxml(<span class="built_in">info</span>);</div></pre></td></tr></table></figure></p>
<h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><p>在调试的时候经常会有这样的需求：只有满足某个条件时才向控制台打印信息，通常我们要写if语句来实现，console.assert是一个很好的替代方案。它会先对传入的表达式进行断言，只有表达式为假时才输出相应信息到控制台。<br><figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> isDebug=<span class="keyword">false</span>;</div><div class="line">console.<span class="keyword">assert</span>(isDebug,<span class="string">'开发中的log信息。。。'</span>);</div></pre></td></tr></table></figure></p>
<h3 id="计数"><a href="#计数" class="headerlink" title="计数"></a>计数</h3><p>统计一段代码的执行次数也是debug中常见的需求，而通过console.count可以省去自己写统计代码<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="built_in">console</span>.count(<span class="string">'foo 被执行的次数：'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="计时"><a href="#计时" class="headerlink" title="计时"></a>计时</h3><p>console不止可以用来计数，还可以用来计时，可以用console.time和console.timeEnd来进行简单的代码执行时间检测。(这也是暴露自己电脑性能的一个方法)<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 手写计时代码</span></div><div class="line"><span class="keyword">var</span> start=<span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</div><div class="line"><span class="keyword">var</span> array= <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">array[i]() = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">&#125;;</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()-start);</div><div class="line"><span class="comment">// console.time计时</span></div><div class="line"><span class="built_in">console</span>.time(<span class="string">"Array initialize"</span>);</div><div class="line"><span class="keyword">var</span> array= <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">array[i]() = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">&#125;;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"Array initialize"</span>);</div></pre></td></tr></table></figure></p>
<h3 id="堆栈跟踪"><a href="#堆栈跟踪" class="headerlink" title="堆栈跟踪"></a>堆栈跟踪</h3><p>console.trace可以用来追踪代码调用过程，功能等同于设断点后的Call Stack面板。</p>
<h3 id="终极大招"><a href="#终极大招" class="headerlink" title="终极大招"></a>终极大招</h3><p>console.info(console)，所有Console API一览无余。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h2><ol>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/debug/console/console-reference?utm\_source=dcc&amp;utm\_medium=redirect&amp;utm\_campaign=2016q3#consolelogobject-object" target="_blank" rel="external"> Google Developers - Console </a></li>
<li><a href="http://www.cnblogs.com/Wayou/p/chrome-console-tips-and-tricks.html" target="_blank" rel="external">Chrome 控制台不完全指南</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Fetch API]]></title>
      <url>http://iminyao.com/2016/11/02/fetch-api/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>用fetch已经有一段时间了，一直没有好好整理一下，虽然用起来很简单很爽，但是还是有很多需要注意的地方。</p>
<p>fetch之前是XMLHttpRequest，但是由于XHR写起来太繁琐，基本上都被弃用，JQuery中ajax可能是用的最多的。直到fetch的出现彻底的改变了这一切。</p>
<p><a href="http://caniuse.com/#search=fetch" target="_blank" rel="external">can I use fetch</a> 看了下IE和Safari是不支持，不过幸好有polyfill, <a href="https://github.com/github/fetch" target="_blank" rel="external">fetch</a>  另外fetch API是基于Promise设计的所以还需要promise的polyfill <a href="https://github.com/stefanpenner/es6-promise" target="_blank" rel="external">es6-promise</a></p>
<p>可以在开始的时候先用window.fetch/Headers之类的检查下当前浏览器是否支持，不支持的时候再动态创建script标签引入pollyfill脚本。</p>
<p>下面正式开始</p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><figure class="highlight javascript"><figcaption><span>basic-fetch</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(url, [options])</div><div class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">    &#125;)</div><div class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<p>只有url这个参数是必须的，第二个参数传入的是一个可选对象，用于自定义请求，比较有用的几个参数：</p>
<ol>
<li>method</li>
<li>headers</li>
<li>mode - 可选值:cors, no-cors, same-origin</li>
<li>credentials - 是否携带cookie(之前社区里面没带，导致用户点赞操作异常)，可选值:omit, same-origin,include</li>
<li>body 请求主体</li>
</ol>
<h4 id="body示例："><a href="#body示例：" class="headerlink" title="body示例："></a>body示例：</h4><figure class="highlight javascript"><figcaption><span>提交表单</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(<span class="string">"/login"</span>, &#123;</div><div class="line">  <span class="attr">method</span>: <span class="string">"POST"</span>,</div><div class="line">  <span class="attr">body</span>: <span class="keyword">new</span> FormData(<span class="built_in">document</span>.getElementById(<span class="string">'login-form'</span>))</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>提交Json数据</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(<span class="string">'/'</span>, &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</div><div class="line">    <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line">        <span class="attr">email</span>: <span class="built_in">document</span>.getElementById(<span class="string">'email'</span>).value</div><div class="line">        answer: <span class="built_in">document</span>.getElementById(<span class="string">'answer'</span>).value</div><div class="line">    &#125;)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Request-Headers"><a href="#Request-Headers" class="headerlink" title="Request Headers"></a>Request Headers</h3><p>可以通过new Headers()来创建自定义请求头<br><figure class="highlight javascript"><figcaption><span>headers</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="comment">// 创建一个空的 Headers 对象,注意是Headers，不是Header</span></div><div class="line"><span class="keyword">var</span> headers = <span class="keyword">new</span> Headers();</div><div class="line"></div><div class="line"><span class="comment">// 添加(append)请求头信息</span></div><div class="line">headers.append(<span class="string">'Content-Type'</span>, <span class="string">'text/plain'</span>);</div><div class="line">headers.append(<span class="string">'X-My-Custom-Header'</span>, <span class="string">'CustomValue'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 判断(has), 获取(get), 以及修改(set)请求头的值</span></div><div class="line">headers.has(<span class="string">'Content-Type'</span>); <span class="comment">// true</span></div><div class="line">headers.get(<span class="string">'Content-Type'</span>); <span class="comment">// "text/plain"</span></div><div class="line">headers.set(<span class="string">'Content-Type'</span>, <span class="string">'application/json'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 删除某条请求头信息(a header)</span></div><div class="line">headers.delete(<span class="string">'X-My-Custom-Header'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 创建对象时设置初始化信息</span></div><div class="line"><span class="keyword">var</span> headers = <span class="keyword">new</span> Headers(&#123;</div><div class="line">    <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>,</div><div class="line">    <span class="string">'X-My-Custom-Header'</span>: <span class="string">'CustomValue'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><p>fetch中还可以传入一个Request对象来发起请求，Request对象的参数与fetch()中第二个参数中对象的值一样。使用示例：<br><figure class="highlight javascript"><figcaption><span>Request</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> request = <span class="keyword">new</span> Request(<span class="string">'/users.json'</span>, &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">    <span class="attr">mode</span>: <span class="string">'cors'</span>,</div><div class="line">    <span class="attr">redirect</span>: <span class="string">'follow'</span>,</div><div class="line">    <span class="attr">headers</span>: <span class="keyword">new</span> Headers(&#123;</div><div class="line">        <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">    &#125;)</div><div class="line">&#125;);</div><div class="line"></div><div class="line">fetch(request).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">/* handle response */</span> &#125;);</div></pre></td></tr></table></figure></p>
<p>既然直接fetch就可以了为什么还要搞个Request对象？因为这货有个clone方法，可以clone以后直接在另一个fetch中复用。问题又来了，为什么不能直接复用Request对象而是需要clone呢？因为Request代表的是stream。(过于啥是stream，见 <a href="https://streams.spec.whatwg.org/" target="_blank" rel="external">streams</a>,其实也看不懂。。。)</p>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><p>Response对象提供了许多方法用于处理返回的数据：</p>
<ol>
<li>clone()</li>
<li>error() 返回一个与网络错误相关的Response对象</li>
<li>arrayBuffer()</li>
<li>blob()</li>
<li>formData()</li>
<li>json()</li>
<li>text()</li>
</ol>
<h4 id="处理Json响应"><a href="#处理Json响应" class="headerlink" title="处理Json响应"></a>处理Json响应</h4><figure class="highlight javascript"><figcaption><span>json</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(url).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> response.json();</div><div class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">jsonData</span>)</span>&#123;</div><div class="line">        &#125;)</div></pre></td></tr></table></figure>
<h4 id="处理Text-HTML响应"><a href="#处理Text-HTML响应" class="headerlink" title="处理Text/HTML响应"></a>处理Text/HTML响应</h4><figure class="highlight javascript"><figcaption><span>txt/html</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(url).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> response.text();</div><div class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">txtData</span>)</span>&#123;</div><div class="line">        &#125;)</div></pre></td></tr></table></figure>
<h4 id="处理Blob响应"><a href="#处理Blob响应" class="headerlink" title="处理Blob响应"></a>处理Blob响应</h4><figure class="highlight javascript"><figcaption><span>blob</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(<span class="string">'xxx.jpeg'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> response.blob();</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">imageBlob</span>)</span>&#123;</div><div class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'myImg'</span>)[<span class="number">0</span>].src = URL.createObjectURL(imageBlob);</div><div class="line">        &#125;)</div></pre></td></tr></table></figure>
<p>最好是在这之前再加一步类型判断，类似这样<br><figure class="highlight javascript"><figcaption><span>content-type test</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(myRequest).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span>(response.headers.get(<span class="string">"content-type"</span>) === <span class="string">"application/json"</span>) &#123;</div><div class="line">    <span class="keyword">return</span> response.json().then(<span class="function"><span class="keyword">function</span>(<span class="params">json</span>) </span>&#123;</div><div class="line">      <span class="comment">// process your JSON further</span></div><div class="line">    &#125;);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"Oops, we haven't got JSON!"</span>);</div><div class="line">  &#125;</div><div class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>
<h3 id="最新方案-async-await"><a href="#最新方案-async-await" class="headerlink" title="最新方案 async/await"></a>最新方案 async/await</h3><blockquote>
<p>async/await属于ES7，貌似前两天已经出来了</p>
</blockquote>
<p>直接来看一下对比吧<br><figure class="highlight javascript"><figcaption><span>xhr</span></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">xhr.open(<span class="string">'GET'</span>, url);</div><div class="line">xhr.responseType = <span class="string">'json'</span>;</div><div class="line"></div><div class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(xhr.response);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">xhr.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"Oops, error"</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">xhr.send();</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><figcaption><span>fetch</span></figcaption><table><tr><td class="code"><pre><div class="line">fetch(url).then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</div><div class="line">.then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data))</div><div class="line">.then(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">"Oops, error"</span>), e)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>async/await</span><a href="https://github.com/camsong/blog/issues/2" target="_blank" rel="external">link</a></figcaption><table><tr><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(url);</div><div class="line">    <span class="keyword">let</span> data = <span class="keyword">await</span> response.json();</div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">&#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"Oops, error"</span>, e);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 注：这段代码如果想运行，外面需要包一个 async function</span></div></pre></td></tr></table></figure>
<h3 id="fetch常见坑"><a href="#fetch常见坑" class="headerlink" title="fetch常见坑"></a>fetch常见坑</h3><ol>
<li>上面说的默认值为omit，不带cookie，需要设置<code>{credentials: &#39;include&#39;}</code>(试了下<code>same-orign</code>也可以)</li>
</ol>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="https://developers.google.com/web/updates/2015/03/introduction-to-fetch" target="_blank" rel="external">Introduction to fetch</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="external">使用 Fetch - MDN</a></li>
<li><a href="http://blog.csdn.net/renfufei/article/details/51494396" target="_blank" rel="external">fetch简介: 新一代Ajax API</a></li>
<li><a href="https://fetch.spec.whatwg.org/" target="_blank" rel="external">https://fetch.spec.whatwg.org/</a></li>
<li><a href="https://github.com/camsong/blog/issues/2" target="_blank" rel="external">传统 Ajax 已死，Fetch 永生</a></li>
<li><a href="https://www.w3ctech.com/topic/854" target="_blank" rel="external">这个API很“迷人”</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo常用配置一览]]></title>
      <url>http://iminyao.com/2016/11/01/hexo-basic/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>前几天写Hexo音乐插件的时候到Hexo官网上找过资料，突然发现自己用Hexo已经一端时间了，这段时间一直安安静静的写文章，好像没有好好看看Hexo的文档。于是浏览了下它的官方文档，摘录了一些可能用到的点。</p>
</blockquote>
<h3 id="1-Config"><a href="#1-Config" class="headerlink" title="[1] Config"></a>[1] Config</h3><ol>
<li>language: 网站使用的语言，一定要设<code>zh-CN</code>,记得之前安装默认好像不是中文，结果显示就有问题。</li>
<li>highlight: 代码块高亮，其中还可以设置是否显示行号。</li>
</ol>
<h3 id="2-Directive"><a href="#2-Directive" class="headerlink" title="[2] Directive"></a>[2] Directive</h3><ol>
<li><code>hexo new [layout] &lt;title&gt;</code>,新建文章，通过命令新建可以自动添加模板中预设的格式，再也不用蛋疼的手动添加<code>date</code>了。</li>
<li><code>hexo list</code>列出网站资料，多种type可选</li>
<li><code>hexo --debug</code>调试模式，出问题的时候会很有用</li>
</ol>
<h3 id="3-Writing"><a href="#3-Writing" class="headerlink" title="[3] Writing"></a>[3] Writing</h3><ul>
<li>模版（Scaffold）</li>
</ul>
<blockquote>
<p>新建文章的时hexo会根据scaffolds中的对应的模板来新建文件，所以我们可以自定义自己的模板，比如这样<code>hexo new music &quot;mymusic&quot;</code>，hexo会从scaffolds中寻找music.md模板</p>
</blockquote>
<h3 id="4-Front-matter"><a href="#4-Front-matter" class="headerlink" title="[4] Front-matter"></a>[4] Front-matter</h3><ul>
<li>updated 更新日期，经常会改之前写的文章，但是一直苦于无法标注最新修改时间，原来hexo早已经考虑到这个问题了。</li>
<li>categories，必须吐槽hexo的一点就是不支持树状的分类，只能平级，很蛋疼。</li>
</ul>
<h3 id="5-Tag-Plugin"><a href="#5-Tag-Plugin" class="headerlink" title="[5] Tag Plugin"></a>[5] Tag Plugin</h3><blockquote>
<p>标签插件用于在文章中快速插入特定内容的插件。</p>
</blockquote>
<p>这玩意很有用，之前写的那个音乐就是用的这个，hexo支持自定义Tag Plugin。</p>
<h4 id="1-引用块"><a href="#1-引用块" class="headerlink" title="[1] 引用块"></a>[1] 引用块</h4><figure class="highlight twig"><table><tr><td class="code"><pre><div class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">blockquote</span> [author[, <span class="name">source</span>]] [link] [source_link_title] %&#125;</span><span class="xml"></span></div><div class="line">content</div><div class="line"><span class="template-tag">&#123;% <span class="name">endblockquote</span> %&#125;</span><span class="xml"></span></div></pre></td></tr></table></figure>
<p>直接来试下<br><blockquote><p>凭一种啊男人的直觉<br>去承受这份残缺</p>
<footer><strong>李宗盛, 虾米音乐</strong><cite><a href="http://www.xiami.com/play?ids=/song/playlist/id/388412" target="_blank" rel="external">www.xiami.com/play?ids=/song/playlist/id/388412</a></cite></footer></blockquote></p>
<h4 id="2-代码段"><a href="#2-代码段" class="headerlink" title="[2] 代码段"></a>[2] 代码段</h4><p>hexo中我们可以直接使用三个反引号来包含代码段<code>language] [title] [url] [link text] code snippet</code><br>之前只知道支持language，没想到还支持title url link，👍</p>
<p>除此之外，hexo还支持其他很多种类型，详见 <a href="https://hexo.io/zh-cn/docs/tag-plugins.html" target="_blank" rel="external">https://hexo.io/zh-cn/docs/tag-plugins.html</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[微信点歌模块代码更新及hexo音乐插件]]></title>
      <url>http://iminyao.com/2016/10/31/wechat-music-serach-module-update/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-搜索模块重写"><a href="#1-搜索模块重写" class="headerlink" title="[1] 搜索模块重写"></a>[1] 搜索模块重写</h3><p>由于云音乐那边接口的变动原本的音乐搜索功能没法使用了，于是就重写了一下。主要是关键词搜索的函数，其间发现其搜索的逻辑也发生了变化，所以相应的关键词分析匹配的地方也得重写。</p>
<p>核心的关键词搜索函数music_search<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="comment">// @param</span></div><div class="line"><span class="comment">// s:搜索关键词</span></div><div class="line"><span class="comment">// type: 类型(1:歌曲,100歌手)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">music_search</span><span class="params">($s,$type=<span class="number">1</span>)</span></span></div><div class="line">&#123;</div><div class="line">    $type||$type=<span class="number">1</span>;</div><div class="line">    $url= <span class="string">"http://music.163.com/api/search/get/web?csrf_token="</span>;</div><div class="line">    $curl = curl_init();</div><div class="line">    $post_data = <span class="string">'hlpretag=&amp;hlposttag=&amp;s='</span>. $s . <span class="string">'&amp;type='</span>.$type.<span class="string">'&amp;offset=0&amp;total=true&amp;limit=1'</span>;</div><div class="line">    curl_setopt($curl, CURLOPT_URL,$url);</div><div class="line">    curl_setopt($curl, CURLOPT_RETURNTRANSFER,<span class="number">1</span>);</div><div class="line">    $header =<span class="keyword">array</span>(</div><div class="line">        <span class="string">'Host: music.163.com'</span>,</div><div class="line">        <span class="string">'Origin: http://music.163.com'</span>,</div><div class="line">        <span class="string">'User-Agent: Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.90 Safari/537.36'</span>,</div><div class="line">        <span class="string">'Content-Type: application/x-www-form-urlencoded'</span>,</div><div class="line">        <span class="string">'Referer: http://music.163.com/search/'</span>,</div><div class="line">    );</div><div class="line">    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);</div><div class="line">    curl_setopt($curl, CURLOPT_POST, <span class="number">1</span>);</div><div class="line">    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);</div><div class="line">    $src = curl_exec($curl);</div><div class="line">    curl_close($curl);</div><div class="line">    <span class="keyword">return</span> $src;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>获取微信中需要数据函数getWechatFormatData(核心代码)<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWechatFormatData</span><span class="params">($word)</span></span></div><div class="line">&#123;</div><div class="line">    $result = json_decode(music_search($word), <span class="keyword">true</span>); <span class="comment">// 默认按歌曲先搜索一次（true转换为数组）</span></div><div class="line"></div><div class="line">    $is_Song = <span class="keyword">false</span>;   <span class="comment">// 搜索关键词是否为歌曲</span></div><div class="line">    $isEnglish = preg_match(<span class="string">"/^[a-zA-Z\s]+$/"</span>,$word);   <span class="comment">// 是否为英文歌/歌手</span></div><div class="line">    $arr = preg_split(<span class="string">"/[\s,]+/"</span>, $word);</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(!$isEnglish) &#123;</div><div class="line">        <span class="keyword">if</span>(count($arr) == <span class="number">1</span>) &#123; <span class="comment">// 非英文且只有一个搜索关键词</span></div><div class="line">        $is_Song = $result[<span class="string">'result'</span>][<span class="string">'songs'</span>][<span class="number">0</span>][<span class="string">'name'</span>] == $word; <span class="comment">// 如果返回的歌曲名与搜索关键词相同即表示关键词为歌曲</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 非英文且多个关键词</span></div><div class="line">        <span class="keyword">foreach</span> ($arr <span class="keyword">as</span> $key =&gt; $keyword) &#123;</div><div class="line">            $result = json_decode(music_search($keyword) ,<span class="keyword">true</span>);</div><div class="line">            <span class="keyword">if</span>($result[<span class="string">'result'</span>][<span class="string">'songs'</span>][<span class="number">0</span>][<span class="string">'name'</span>] == $keyword) &#123;</div><div class="line">                $is_Song = <span class="keyword">true</span>;    <span class="comment">//  如果搜索结果中的歌曲名与关键词中的某字段匹配则该字段为歌曲名</span></div><div class="line">                $result = json_decode(music_search($arr[$key]) , <span class="keyword">true</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;    <span class="comment">//  全英文</span></div><div class="line">        $is_Song = stristr($word,$result[<span class="string">'result'</span>][<span class="string">'songs'</span>][<span class="number">0</span>][<span class="string">'name'</span>]); <span class="comment">// 如果搜索结果中的歌曲名中有某个字段则按歌曲搜索，否则按歌手搜索</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> ($is_Song) &#123;</div><div class="line">        <span class="comment">// do operation</span></div><div class="line">        <span class="keyword">return</span> $info;</div><div class="line">    &#125;</div><div class="line">     <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// do operation</span></div><div class="line">        <span class="keyword">return</span> $info;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="2-hexo音乐插件"><a href="#2-hexo音乐插件" class="headerlink" title="[2] hexo音乐插件"></a>[2] hexo音乐插件</h3><p>前两天在微博上看到胡子歌在barretlee.com上做了一个歌单展示页，上面竟然李志，不行我也得整一个。看他说UI是用了一款开源的播放器<a href="https://github.com/DIYgod/APlayer" target="_blank" rel="external">APlayer</a>,于是简单看了下，巧的是已经有人写过一个基于APlayer的hexo插件 - <a href="https://github.com/grzhan/hexo-tag-aplayer" target="_blank" rel="external">hexo-tag-aplayer</a>。不过看了只能添加单曲，添加不了专辑或是歌单。正好刚重写了搜索的API，感觉可以搞一搞。</p>
<p>插件用的是利用了Hexo可以自定义标签插件自定义了歌单标签。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">hexo.extend.tag.register(<span class="string">'aplayerlist'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> albumlist_id = args[<span class="number">0</span>], narrow = <span class="literal">false</span>, autoplay = <span class="literal">false</span>, width = <span class="string">''</span>,</div><div class="line">        id = <span class="string">'aplayer'</span> + (counter++), raw = <span class="string">''</span>, content = <span class="string">''</span>;</div><div class="line">    <span class="comment">// Parse optional arguments</span></div><div class="line">    <span class="keyword">if</span> (args.length &gt; <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">var</span> options = args.slice(<span class="number">1</span>);</div><div class="line">        narrow = options.indexOf(<span class="string">'narrow'</span>) &lt; <span class="number">0</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div><div class="line">        autoplay = options.indexOf(<span class="string">'autoplay'</span>) &lt; <span class="number">0</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; options.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> option = options[i];</div><div class="line">            width = option.indexOf(<span class="string">'width:'</span>) == <span class="number">0</span> ? option + <span class="string">';'</span> : width;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    width = narrow ? <span class="string">''</span> : width;</div><div class="line">    <span class="keyword">var</span> album;</div><div class="line">    <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        req.open(<span class="string">'GET'</span>, <span class="string">"***/hexo_playlist.php?id="</span> + albumlist_id, <span class="literal">false</span>);</div><div class="line">        req.send();</div><div class="line">        <span class="keyword">if</span>(req.status === <span class="number">200</span>) &#123;</div><div class="line">            album = req.responseText;</div><div class="line">        &#125;</div><div class="line">        raw = <span class="string">'&lt;div id="'</span>+ id + <span class="string">'" class="aplayer" style="margin-bottom: 20px;display:inline-block;'</span>+ width + <span class="string">'"&gt;'</span>;</div><div class="line">        raw +=</div><div class="line">        <span class="string">'&lt;/div&gt;&lt;script&gt;var '</span>+ id + <span class="string">' = new APlayer(&#123;'</span>+</div><div class="line">                <span class="string">'element: document.getElementById("'</span>+ id +<span class="string">'"),'</span> +</div><div class="line">                <span class="string">'narrow: '</span> + (narrow ? <span class="string">'true'</span> : <span class="string">'false'</span>) + <span class="string">','</span> +</div><div class="line">                <span class="string">'autoplay: '</span> + (autoplay ? <span class="string">'true'</span> : <span class="string">'false'</span>) + <span class="string">','</span> +</div><div class="line">                <span class="string">'music : '</span> + album +</div><div class="line">            <span class="string">'&#125;);'</span> +</div><div class="line">        id + <span class="string">'.init();&lt;/script&gt;'</span>;</div><div class="line">    <span class="keyword">return</span> raw;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>然后在md文件中以<code><div id="aplayer0" class="aplayer" style="margin-bottom: 20px;display:inline-block;"></div><script>var aplayer0 = new APlayer({element: document.getElementById("aplayer0"),narrow: false,autoplay: false,music : 
Notice: Undefined index: id in /data/home/qxu1098560294/htdocs/wechat/hexo_playlist.php on line 3
});aplayer0.init();</script></code>的格式即可调用。<br>其中只有<code>album_id</code>这个参数是必须的，传入的是专辑的id，当然也可以传歌单id，只要在实现里面调歌单搜索的API即可。后面的参数都是可选的。</p>
<ul>
<li><code>narrow</code>是否显示歌曲列表，默认隐藏</li>
<li><code>autoplay</code> 是否自动播放<br>除此之外还可以配置大小，不过这个地方我直接设了固定的宽度。</li>
</ul>
<p>插件原本一个标签只能放一首歌，于是也重写了下<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">&#123;% aplayer [&#123;&#125;,&#123;&#125;]  [narrow, autoplay] %&#125;</div></pre></td></tr></table></figure></p>
<p>以数组的形式传入包含每首歌的信息的对象即可，代码如下:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">hexo.extend.tag.register(<span class="string">'aplayer'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> narrow = <span class="literal">false</span>, autoplay = <span class="literal">false</span>, width = <span class="string">''</span>,</div><div class="line">        id = <span class="string">'aplayer'</span> + (counter++), raw = <span class="string">''</span>, content = <span class="string">''</span>;</div><div class="line">    <span class="keyword">if</span> (args.length &gt; <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">var</span> options = args.slice(<span class="number">1</span>);</div><div class="line">        narrow = options.indexOf(<span class="string">'narrow'</span>) &lt; <span class="number">0</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div><div class="line">        autoplay = options.indexOf(<span class="string">'autoplay'</span>) &lt; <span class="number">0</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; options.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> option = options[i];</div><div class="line">            width = option.indexOf(<span class="string">'width:'</span>) == <span class="number">0</span> ? option + <span class="string">';'</span> : width;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    width = narrow ? <span class="string">''</span> : width;</div><div class="line">    <span class="keyword">var</span> album = [];</div><div class="line">    <span class="keyword">var</span> data = <span class="built_in">eval</span>(args[<span class="number">0</span>]);</div><div class="line">    data.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">song</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> song_info = &#123;</div><div class="line">            <span class="attr">title</span>: song[<span class="number">0</span>],</div><div class="line">            <span class="attr">author</span>: song[<span class="number">1</span>],</div><div class="line">            <span class="attr">url</span>: song[<span class="number">2</span>],</div><div class="line">            <span class="attr">pic</span>: song[<span class="number">3</span>]</div><div class="line">        &#125;;</div><div class="line">    album.push(song_info);</div><div class="line">    &#125;);</div><div class="line">    raw = <span class="string">'&lt;div id="'</span>+ id + <span class="string">'" class="aplayer" style="margin-bottom: 20px;'</span>+ width + <span class="string">'"&gt;'</span>;</div><div class="line">    raw +=</div><div class="line">        <span class="string">'&lt;/div&gt;&lt;script&gt;var '</span>+ id + <span class="string">' = new APlayer(&#123;'</span>+</div><div class="line">                <span class="string">'element: document.getElementById("'</span>+ id +<span class="string">'"),'</span> +</div><div class="line">                <span class="string">'narrow: '</span> + (narrow ? <span class="string">'true'</span> : <span class="string">'false'</span>) + <span class="string">','</span> +</div><div class="line">                <span class="string">'autoplay: '</span> + (autoplay ? <span class="string">'true'</span> : <span class="string">'false'</span>) + <span class="string">','</span> +</div><div class="line">                <span class="string">'music : '</span> + <span class="built_in">JSON</span>.stringify(album) +</div><div class="line">            <span class="string">'&#125;);'</span> +</div><div class="line">        id + <span class="string">'.init();&lt;/script&gt;'</span>;</div><div class="line">    <span class="keyword">return</span> raw;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="3-小结"><a href="#3-小结" class="headerlink" title="[3] 小结:"></a>[3] 小结:</h3><p>插件本身没什么技术含量，利用了之前写好的搜索接口，获取到数据后按照APlayer的格式生成APlayer对象即可。但还是出现了两个很蛋疼的事情：一个是从接口获取到数据后的转换，一个是node中的同步ajax。</p>
<h4 id="1-数据转换"><a href="#1-数据转换" class="headerlink" title="[1] 数据转换"></a>[1] 数据转换</h4><p>APlayer音乐信息部分的数据是这样的<code>[{title:, url:,xxx:...},{title:, url:,xxx:...}]</code>。但是php如果直接传数组过来根本没法用，因为php中的数组是这样的格式:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">array</span>(</div><div class="line">    [<span class="number">0</span>] =&gt; &#123;&#125;,</div><div class="line">    [<span class="number">1</span>] =&gt; &#123;&#125;</div><div class="line">    )</div></pre></td></tr></table></figure></p>
<p>这样的传过来根本没法解析(应该是解析起来麻烦)。json格式也试了，序列化的时候还是带php数组的那一坨。思来想去还是字符串靠谱，虽然拼字符串很烦，仿佛又回到了后端模板的时代，不过确实很管用。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">batch_get_song_info</span><span class="params">($album_id)</span></span></div><div class="line">&#123;</div><div class="line">    $result = json_decode(get_album_info($album_id), <span class="keyword">true</span>);</div><div class="line">    $result = $result[<span class="string">"album"</span>][<span class="string">"songs"</span>];</div><div class="line">    $song_list = <span class="string">"["</span>;</div><div class="line">    <span class="keyword">foreach</span> ($result <span class="keyword">as</span> $key =&gt; $song) &#123;</div><div class="line">        $result = json_decode(get_music_info($song[<span class="string">'id'</span>]), <span class="keyword">true</span>);</div><div class="line"></div><div class="line">        $result = $result[<span class="string">'songs'</span>][<span class="number">0</span>];</div><div class="line">        $info = <span class="string">"&#123;"</span>;</div><div class="line">        $music_name = $result[<span class="string">'name'</span>];</div><div class="line">        $artist_name = $result[<span class="string">'artists'</span>][<span class="number">0</span>][<span class="string">'name'</span>];</div><div class="line">        $music_url = $result[<span class="string">'mp3Url'</span>];</div><div class="line">        $music_pic = $result[<span class="string">'album'</span>][<span class="string">'picUrl'</span>];</div><div class="line">        $info .= <span class="string">"title:'"</span> .$music_name . <span class="string">"',author:'"</span> . $artist_name . <span class="string">"',url:'"</span> .$music_url . <span class="string">"',pic:'"</span> . $music_pic . <span class="string">"'&#125;,"</span>;</div><div class="line">        $song_list .= $info;</div><div class="line">    &#125;</div><div class="line">     $song_list = rtrim($song_list,<span class="string">","</span>);</div><div class="line">     $song_list .= <span class="string">"]"</span>;</div><div class="line">     <span class="keyword">return</span> $song_list;</div><div class="line">&#125;</div><div class="line"><span class="comment">// example</span></div><div class="line">$album_id = $_GET[<span class="string">'id'</span>];</div><div class="line">$result = get_album_detail($album_id);</div><div class="line">print_r($result);</div></pre></td></tr></table></figure>
<p>出入专辑id之后get_album_info获取专辑内所有歌曲的id(不得不佩服老东家，云音乐的大部分API都无法一次得到你想要的所有数据,当时MV和歌单那块还是我写的呢，唉…)，然后用get_music_info挨个搜一遍，最后就是蛋疼的拼字符串。</p>
<h4 id="2-node中的同步请求"><a href="#2-node中的同步请求" class="headerlink" title="[2] node中的同步请求"></a>[2] node中的同步请求</h4><p>一开始想用高大上的fetch，但是fetch好像没法同步请求，试了一大推其他的模块，最后还是回到了我熟悉的xhr<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// xmlhttprequest node中的XHR模块</span></div><div class="line">    XMLHttpRequest = <span class="built_in">require</span>(<span class="string">"xmlhttprequest"</span>).XMLHttpRequest;</div><div class="line">    <span class="keyword">var</span> album, req = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        req.open(<span class="string">'GET'</span>, <span class="string">"http://bgm.iminyao.com/wechat/hexo_playlist.php?id="</span> + albumlist_id, <span class="literal">false</span>);</div><div class="line">        req.send();</div><div class="line">        <span class="keyword">if</span>(req.status === <span class="number">200</span>) &#123;</div><div class="line">            album = req.responseText;</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>熟悉的感觉，还是原来味道。</p>
<p>这还不是关键，关键是发现自己对请求这块还不是很熟悉，包括XMLHttpRequest，更别说fetch了，特别是数据类型这一块，回头得好好总结一下。</p>
<p>还有一个大彩蛋，写完了往博客上添专辑的时候才想起来，虾米垄断了滚石的版权，小李的音乐包括《理性与感性作品音乐会》基本上都跪了。最蛋疼的是通过API还能搜到音乐资源，但是资源已经失效…专辑搜索的接口就是这么玩的，数据里面有MP3链接，但是全部是404…这个问题待解决。</p>
<p>有钱真好，马云爸爸，请收下我的膝盖😭</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[three.js入门]]></title>
      <url>http://iminyao.com/2016/10/27/three.js-first/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-正交投影与透视投影区别"><a href="#1-正交投影与透视投影区别" class="headerlink" title="[1] 正交投影与透视投影区别"></a>[1] 正交投影与透视投影区别</h3><ul>
<li>透视投影照相机获得的结果是类似人眼在真实世界中看到的有“近大远小”的效果</li>
<li>正交投影照相机获得的结果就像我们在数学几何学课上老师教我们画的效果，对于在三维空间内平行的线，投影到二维空间中也一定是平行的<br><img src="/images/three.js-2016-10-27-1.png" alt="three.js坐标系"><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><blockquote>
<p>一般说来，对于制图、建模软件通常使用正交投影，这样不会因为投影而改变物体比例；而对于其他大多数应用，通常使用透视投影，因为这更接近人眼的观察效果。</p>
</blockquote>
</li>
</ul>
<h3 id="2-正交投影相机（Orthographic-Camera）"><a href="#2-正交投影相机（Orthographic-Camera）" class="headerlink" title="[2] 正交投影相机（Orthographic Camera）"></a>[2] 正交投影相机（Orthographic Camera）</h3><p>构造函数<code>THREE.OrthographicCamera(left, right, top, bottom, near, far)</code></p>
<p>这六个参数分别代表正交投影照相机拍摄到的空间的六个面的位置，这六个面围成一个长方体，我们称其为视景体（Frustum）。只有在视景体内部（下图中的灰色部分）的物体才可能显示在屏幕上，而视景体外的物体会在显示之前被裁减掉。<br><img src="/images/three.js-2016-10-27-2.png" alt="Orthographic Camera"></p>
<p>这两天翻了下羡辙同学翻译的three.js,看完了感觉跟没看一样。正好京东图书搞活动买了本three.js的书，立个flag，年前整个元素周期表的那个特效出来，然后把元素都换成李老师专辑封面，献给我最爱的李老师。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[小谈vue-cli流程]]></title>
      <url>http://iminyao.com/2016/10/26/vue-cli/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>vue提供了非常便捷的官方脚手架，其中集成了webpack的很多东西，但和webpack也有一些不一样的地方，比如webpack中使用了webpack-dev-server，而vue-cli中用的是express。</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>webpack-dev-server官方的介绍:</p>
<blockquote>
<p>Use webpack with a development server that provides live reloading. This should be used for development only.</p>
<p>It uses webpack-dev-middleware under the hood, which provides fast in-memory access to the webpack assets.</p>
</blockquote>
<p>简单来说webpack-dev-server就是一个使用webpack-dev-middleware这个中间件来实现在dev模式下不用生成实际的文件也可以访问页面的这么一个东西。<br><a href="https://github.com/webpack/webpack-dev-server" target="_blank" rel="external">Github仓库地址</a></p>
<p>那webpack-dev-middleware又是什么呢，官方的介绍如下:</p>
<blockquote>
<p>It’s a simple wrapper middleware for webpack. It serves the files emitted from webpack over a connect server.<br>好像看完了还是不知道是啥，但是下面还有一个优势介绍:<br>No files are written to disk, it handle the files in memory<br>也就是上面说到的不用生成实际的文件即可访问页面就是由它来实现的。<br><a href="https://github.com/webpack/webpack-dev-middleware" target="_blank" rel="external">Github仓库地址</a></p>
</blockquote>
<h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><p>下面来看一下vue-cli到底是怎么运行的，我们在terminal中输入<code>npm run dev</code>后都执行了那些代码<br>首先是<code>npm run dev</code>的定义<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// package.json</span></div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"build"</span>: <span class="string">"node build/build.js"</span>,</div><div class="line">    <span class="string">"dev"</span>: <span class="string">"node build/dev-server.js"</span></div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>执行的是<code>build</code>目录下面的<code>dev-server.js</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>)</div><div class="line"><span class="keyword">var</span> opn = <span class="built_in">require</span>(<span class="string">'opn'</span>)</div><div class="line"><span class="keyword">var</span> proxyMiddleware = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>)</div><div class="line"><span class="keyword">var</span> webpackConfig = process.env.NODE_ENV === <span class="string">'testing'</span></div><div class="line">  ? <span class="built_in">require</span>(<span class="string">'./webpack.prod.conf'</span>)</div><div class="line">  : <span class="built_in">require</span>(<span class="string">'./webpack.dev.conf'</span>)</div><div class="line"></div><div class="line"><span class="comment">// default port where dev server listens for incoming traffic</span></div><div class="line"><span class="keyword">var</span> port = process.env.PORT || config.dev.port</div><div class="line"><span class="comment">// Define HTTP proxies to your custom API backend</span></div><div class="line"><span class="comment">// https://github.com/chimurai/http-proxy-middleware</span></div><div class="line"><span class="keyword">var</span> proxyTable = config.dev.proxyTable</div><div class="line"></div><div class="line"><span class="keyword">var</span> app = express()</div><div class="line"><span class="keyword">var</span> compiler = webpack(webpackConfig)</div><div class="line"></div><div class="line"><span class="keyword">var</span> devMiddleware = <span class="built_in">require</span>(<span class="string">'webpack-dev-middleware'</span>)(compiler, &#123;</div><div class="line">  <span class="attr">publicPath</span>: webpackConfig.output.publicPath,</div><div class="line">  <span class="attr">stats</span>: &#123;</div><div class="line">    <span class="attr">colors</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">chunks</span>: <span class="literal">false</span></div><div class="line">  &#125;,</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">var</span> hotMiddleware = <span class="built_in">require</span>(<span class="string">'webpack-hot-middleware'</span>)(compiler)</div><div class="line"><span class="comment">// force page reload when html-webpack-plugin template changes</span></div><div class="line">compiler.plugin(<span class="string">'compilation'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">compilation</span>) </span>&#123;</div><div class="line">  compilation.plugin(<span class="string">'html-webpack-plugin-after-emit'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data, cb</span>) </span>&#123;</div><div class="line">    hotMiddleware.publish(&#123;<span class="attr">action</span>: <span class="string">'reload'</span>&#125;)</div><div class="line">    cb()</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// proxy api requests</span></div><div class="line"><span class="built_in">Object</span>.keys(proxyTable).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> options = proxyTable[context]</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> options === <span class="string">'string'</span>) &#123;</div><div class="line">    options = &#123;<span class="attr">target</span>: options&#125;</div><div class="line">  &#125;</div><div class="line">  app.use(proxyMiddleware(context, options))</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// handle fallback for HTML5 history API</span></div><div class="line">app.use(<span class="built_in">require</span>(<span class="string">'connect-history-api-fallback'</span>)())</div><div class="line"></div><div class="line"><span class="comment">// serve webpack bundle output</span></div><div class="line">app.use(devMiddleware)</div><div class="line"></div><div class="line"><span class="comment">// enable hot-reload and state-preserving</span></div><div class="line"><span class="comment">// compilation error display</span></div><div class="line">app.use(hotMiddleware)</div><div class="line"></div><div class="line"><span class="comment">// serve pure static assets</span></div><div class="line"><span class="keyword">var</span> staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)</div><div class="line">app.use(staticPath, express.static(<span class="string">'./static'</span>))</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = app.listen(port, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (err) &#123;</div><div class="line">    <span class="built_in">console</span>.log(err)</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Listening at http://localhost:'</span> + port + <span class="string">'\n'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>大致流程用到了三个东西:express、webpack-dev-middleware、webpack-hot-middleware、http-proxy-middleware，创建了一个express服务，然后用webpack-dev-middleware、webpack-hot-middleware、http-proxy-middleware进行了一通配置，然后运行了这个服务。</p>
<p>先看一下webpack-dev-middleware:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> compiler = webpack(webpackConfig)</div><div class="line"></div><div class="line"><span class="keyword">var</span> devMiddleware = <span class="built_in">require</span>(<span class="string">'webpack-dev-middleware'</span>)(compiler, &#123;</div><div class="line">  <span class="attr">publicPath</span>: webpackConfig.output.publicPath,</div><div class="line">  <span class="attr">stats</span>: &#123;</div><div class="line">    <span class="attr">colors</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">chunks</span>: <span class="literal">false</span></div><div class="line">  &#125;,</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>其中webpackConfig就是我们webpack的那一套配置entry、output之类的，而webpackMiddleware的第二个参数就是自己的一通配置了，各个项是干啥的官方文档中都有。</p>
<p>这一步实现的就是让我们在dev模式下不生成静态文件也可以看到页面效果。</p>
<p>再来看webpack-hot-middleware，这个听名字就好动了，也就是近来一直很火的“hot reload”，来看下官方的介绍:</p>
<blockquote>
<p>Webpack hot reloading using only webpack-dev-middleware. This allows you to add hot reloading into an existing server without webpack-dev-server.</p>
<p>This module is only concerned with the mechanisms to connect a browser client to a webpack server &amp; receive updates. It will subscribe to changes from the server and execute those changes using webpack’s HMR api. Actually making your application capable of using hot reloading to make seamless changes is out of scope, and usually handled by another library.</p>
</blockquote>
<p>也就是说这个中间件可以让你在不依赖webpack-dev-server的情况下实现hot reloading。正如前面说到vue-cli没有使用webpack-dev-server而是用的express。<br><a href="https://github.com/glenjamin/webpack-hot-middleware" target="_blank" rel="external">Github官方仓库</a></p>
<p>要使用webpack-hot-middleware首先要在webpack的plugin配置中添加三个插件<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">plugins: [</div><div class="line">  <span class="comment">// https://github.com/glenjamin/webpack-hot-middleware#installation--usage</span></div><div class="line">  <span class="keyword">new</span> webpack.optimize.OccurenceOrderPlugin(),</div><div class="line">  <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</div><div class="line">  <span class="keyword">new</span> webpack.NoErrorsPlugin(),</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>然后再entry数组中添加<code>webpack-hot-middleware/client</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// dev-client.js</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'eventsource-polyfill'</span>)</div><div class="line"><span class="keyword">var</span> hotClient = <span class="built_in">require</span>(<span class="string">'webpack-hot-middleware/client?noInfo=true&amp;reload=true'</span>)</div><div class="line"></div><div class="line">hotClient.subscribe(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (event.action === <span class="string">'reload'</span>) &#123;</div><div class="line">    <span class="built_in">window</span>.location.reload()</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">Object</span>.keys(baseWebpackConfig.entry).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">  baseWebpackConfig.entry[name] = [<span class="string">'./build/dev-client'</span>].concat(baseWebpackConfig.entry[name])</div><div class="line">&#125;))</div></pre></td></tr></table></figure></p>
<p>接下来就是上面那步添加webpack-dev-middleware，最后就是像代码中那样在express中使用。</p>
<p>最后就是http-proxy-middleware。<br>这个在之前的文章中已经说过，是用来设置代理用的。这里就不说了。<br><a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="external">Github官方仓库</a></p>
<p>运行了这一大通之后就是运行express服务了<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">module.exports = app.listen(port, function (err) &#123;</div><div class="line">  if (err) &#123;</div><div class="line">    console.log(err)</div><div class="line">    return</div><div class="line">  &#125;</div><div class="line">  console.log(&apos;Listening at http://localhost:&apos; + port + &apos;\n&apos;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><p>首先就是上篇文章中说的跨域的问题，这个可以配置http-proxy-middleware来解决。结果今天又碰到问题了，页面用localhost可以访问，但是换ip就不行。</p>
<p>网上搜了下，问题大都是面向webpack-dev-server的解决方法， <a href="https://github.com/webpack/webpack-dev-server/issues/147" target="_blank" rel="external">Github issue地址</a></p>
<p>在webpack-dev-server中可以通过在命令后面加<code>--host 0.0.0.0</code>来解决，或者直接在webpack-dev-server配置文件中设置</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> server = <span class="keyword">new</span> WebpackDevServer(webpack(webpackConfig), &#123;</div><div class="line">    ...</div><div class="line">  &#125;);</div><div class="line">  <span class="comment">// server.listen(port, '0.0.0.0', function(err) &#123;&#125;</span></div></pre></td></tr></table></figure>
<p>然而这并没有什么卵用，vue-cli压根就没用webpack-dev-server用的express。但…是…，我发现webpack-dev-server和express运行服务的代码惊人的相似。都是xxx.listen(port, func)的形式，webpack-dev-server可以加个host参数来解决问题，那express是不是也行呢，于是在参数中加了host</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = app.listen(port, <span class="string">"0.0.0.0"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (err) &#123;</div><div class="line">    <span class="built_in">console</span>.log(err)</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Listening at http://localhost:'</span> + port + <span class="string">'\n'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>结果加了还是不行，最后没办法换成我电脑ip竟然好了。。。</p>
<p>但是…localhost的又坏了，什么鬼，早知道就直接连手机然后 port forwarding调了。。。<br>(到express官方文档中看了看确实可以有host这个可选参数，但就是不知道为啥0.0.0.0不行)<br>有时间得好好研究研究node了。。。</p>
<p>😌，感觉好多东西要学，苦逼的FEer。</p>
<h3 id="关于0-0-0-0"><a href="#关于0-0-0-0" class="headerlink" title="关于0.0.0.0"></a>关于0.0.0.0</h3><p>上面说到webpack-dev-server的解决办法是加个host参数<code>0.0.0.0</code>,但这个IP地址是什么鬼，为什么可以指代本地IP。搜索了下，找到一个很不错的解释<br><a href="http://serverfault.com/questions/78048/whats-the-difference-between-ip-address-0-0-0-0-and-127-0-0-1" target="_blank" rel="external">http://serverfault.com/questions/78048/whats-the-difference-between-ip-address-0-0-0-0-and-127-0-0-1</a></p>
<blockquote>
<p>0.0.0.0, in this context, means “all IP addresses on the local machine” (in fact probably, “all IPv4 addresses on the local machine”). So, if your webserver machine has two ip addresses, 192.168.1.1 and 10.1.2.1, and you allow a webserver daemon like apache to listen on 0.0.0.0, it will be reachable at both of those IPs. But only to what can contact those IPs and the web port(s).</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[交易产品模板化的一些记录]]></title>
      <url>http://iminyao.com/2016/10/24/prod-model/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-vue前后端联调"><a href="#1-vue前后端联调" class="headerlink" title="[1] vue前后端联调"></a>[1] vue前后端联调</h3><p>前后端联调最经常碰到的就是跨域问题了，vue-cli也考虑到了这一点，vue-cli的config文件里有一个参数叫proxyTable，可以通过配置这个参数来实现跨域的问题。vue-cli实现使用了<code>http-proxy-middleware</code>这个插件， <a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="external">Github地址</a>，里面有详细的配置。<br>最基本的配置大致如下:<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">  proxyTable: &#123;</div><div class="line">    <span class="string">'/detail'</span>: &#123;</div><div class="line">      <span class="attr">target</span>: <span class="string">'http://192.168.4.77:8084/mockjsdata/12/insurance/product'</span>,</div><div class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上述代码将<code>/detail</code>的url全部转到了<code>http://192.168.4.77:8084/mockjsdata/12/insurance/product</code>,此时请求<code>/detail/1</code>,实际会被转到<code>http://192.168.4.77:8084/mockjsdata/12/insurance/product/detail/1</code>。</p>
<p>除此之外还有一个参数<code>changeOrigin</code>,而跨域正是通过这个参数来设置的。<code>changeOrigin</code>参数接收一个布尔值，如果设置为true,那么本地会虚拟一个服务端接收你的请求并代你发送该请求。</p>
<h3 id="2-微信二次分享接口-config-invalid-signature问题"><a href="#2-微信二次分享接口-config-invalid-signature问题" class="headerlink" title="[2] 微信二次分享接口 config:invalid signature问题"></a>[2] 微信二次分享接口 config:invalid signature问题</h3><p>由于公司之前的项目都是依赖于JQuery写的，所以在像base-config(微信分享相关函数)这样的公共文件中也使用了JQuery，现在很多新的项目开始换vue了，所以就索性重写了下这个文件。<br>但是在重写涉及到微信二次分享的函数时一直报错<code>config:invalid signature</code>。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">initWechatShare</span>(<span class="params">wcShareCfg</span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> wx = <span class="built_in">window</span>.wx;</div><div class="line">      <span class="keyword">if</span> (!wx || !BASE.isWechat() || <span class="built_in">window</span>.Debug) &#123;</div><div class="line">          <span class="keyword">return</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">      req.open(<span class="string">'GET'</span>, baseUrl + <span class="string">'/weChat/jsApiTicket/get?url='</span> + <span class="built_in">encodeURIComponent</span>(<span class="built_in">window</span>.location.href));</div><div class="line">      req.send();</div><div class="line">      req.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (req.readyState === req.DONE) &#123;</div><div class="line">          <span class="keyword">if</span> (req.status === <span class="number">200</span>) &#123;</div><div class="line">      <span class="keyword">var</span> response = <span class="built_in">JSON</span>.parse(req.responseText);</div><div class="line">      wx.config(&#123;</div><div class="line">                  <span class="attr">debug</span>: <span class="literal">true</span>, <span class="comment">// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></div><div class="line">                  appId: response.data.appId, <span class="comment">// 必填，公众号的唯一标识</span></div><div class="line">                  timestamp: response.data.timestamp, <span class="comment">// 必填，生成签名的时间戳</span></div><div class="line">                  nonceStr: response.data.nonceStr, <span class="comment">// 必填，生成签名的随机串</span></div><div class="line">                  signature: response.data.signature, <span class="comment">// 必填，签名，见附录1</span></div><div class="line">                  jsApiList: [<span class="string">'onMenuShareTimeline'</span>, <span class="string">'onMenuShareAppMessage'</span>] <span class="comment">// 必填，需要使用的JS接口列表，所有JS接口列表见附录2</span></div><div class="line">              &#125;);</div><div class="line">      wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                  <span class="comment">// config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。</span></div><div class="line">                  <span class="comment">/**</span></div><div class="line">                   *分享到朋友圈</div><div class="line">                   */</div><div class="line">      wx.onMenuShareTimeline(&#123;</div><div class="line">                      <span class="attr">debug</span>: <span class="literal">true</span>,</div><div class="line">                      <span class="attr">title</span>: wcShareCfg.title, <span class="comment">// 分享标题</span></div><div class="line">                      link: wcShareCfg.link, <span class="comment">// 分享链接</span></div><div class="line">                      imgUrl: wcShareCfg.imgUrl, <span class="comment">// 分享图标</span></div><div class="line">                      success: wcShareCfg.success || NOOP</div><div class="line">                  &#125;);</div><div class="line">                  <span class="comment">/**</span></div><div class="line">                   *分享到好友</div><div class="line">                   */</div><div class="line">      wx.onMenuShareAppMessage(&#123;</div><div class="line">                      <span class="attr">debug</span>: <span class="literal">true</span>,</div><div class="line">                      <span class="attr">title</span>: wcShareCfg.title, <span class="comment">// 分享标题</span></div><div class="line">                      desc: wcShareCfg.desc, <span class="comment">// 分享描述</span></div><div class="line">                      link: wcShareCfg.link, <span class="comment">// 分享链接</span></div><div class="line">                      imgUrl: wcShareCfg.imgUrl, <span class="comment">// 分享图标</span></div><div class="line">                      success: wcShareCfg.success || NOOP</div><div class="line">                  &#125;);</div><div class="line">              &#125;);</div><div class="line">      wx.error(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</div><div class="line">                  <span class="comment">// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。</span></div><div class="line">              &#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>一开始没有用encodeURIComponent来编码GET请求中的参数，因为用Postman请求的时候不编码也可以返回正确的数据，所以开始并没有往这上面想。后来网上搜了下才知道原来微信二次分享的接口各种坑。</p>
<p><a href="https://segmentfault.com/q/1010000002520634" target="_blank" rel="external">segmentfault的一个问题</a>,<br><a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E9.99.84.E5.BD.951-JS-SDK.E4.BD.BF.E7.94.A8.E6.9D.83.E9.99.90.E7.AD.BE.E5.90.8D.E7.AE.97.E6.B3.95" target="_blank" rel="external">微信开发者文档中也有相关内容</a></p>
<p>最常见的有两个问题：一个是url完整性的问题，url中是不包括’#’hash后面的部分，还有一个就是我碰到的问题GET请求中的参数一定要用encodeURIComponent编码。</p>
<p>另外微信提供了一个在线的接口签名校验页面 <a href="http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign" target="_blank" rel="external">http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[APP 社区模块的一些记录]]></title>
      <url>http://iminyao.com/2016/10/09/app-community/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-单行、多行文本截断"><a href="#1-单行、多行文本截断" class="headerlink" title="[1] 单行、多行文本截断"></a>[1] 单行、多行文本截断</h3><p>单行文本的截断非常简单，代码如下:<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.f-ellipsis</span> &#123;</div><div class="line">    <span class="attribute">white-space</span>: nowrap;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">    <span class="attribute">text-overflow</span>: ellipsis;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后在具体元素中设置元素宽度即可。</p>
<p>纯CSS实现多行文本截断就比较困难了，搜索了一圈，最终还是发现了<a href="http://note.rpsh.net/posts/2014/10/14/css-multiple-line-overflow-ellipsis/" target="_blank" rel="external">实现的方法</a>，利用<code>-webkit-line-clamp</code>来控制文本截断行数，代码如下:<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">header</span> &#123;</div><div class="line">    <span class="attribute">display</span>: -webkit-box;</div><div class="line">    <span class="attribute">-webkit-line-clamp</span>: <span class="number">2</span>;</div><div class="line">    <span class="attribute">-webkit-box-orient</span>: vertical;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>除了文本截断外，单词的自动换行也是常见的需求，当英文单词过长时如果不处理会溢出到内容去外，这时需要设置<code>word-wrap</code>属性来解决。<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">p</span> &#123;</div><div class="line">    <span class="attribute">word-wrap</span>: break-word;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="2-去除Jquery-Mobile自动添加的样式"><a href="#2-去除Jquery-Mobile自动添加的样式" class="headerlink" title="[2] 去除Jquery Mobile自动添加的样式"></a>[2] 去除Jquery Mobile自动添加的样式</h3><blockquote>
<p>在需求中需要用到长按事件，于是引入了JQM，结果用于其为一些元素添加了样式，导致原本的布局出了问题。</p>
</blockquote>
<p>对于表单元素可以直接添加<code>data-role=&#39;none&#39;</code>来去除默认的样式。</p>
<h3 id="3-first-child、last-child选择器不起作用"><a href="#3-first-child、last-child选择器不起作用" class="headerlink" title="[3] first-child、last-child选择器不起作用"></a>[3] first-child、last-child选择器不起作用</h3><p>问题代码：<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">"comment-list"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dd</span> <span class="attr">v-for</span>=<span class="string">"comment in hotComments"</span> <span class="attr">track-by</span>=<span class="string">"$index"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left f-fl"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"comment.logoImg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-info"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-name f-fl"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>&#123;&#123; comment.userName &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>&#123;&#123; comment.commentTime &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"f-fr"</span>&gt;</span>&#123;&#123; comment.supportCount &#125;&#125;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"s-dianzan"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-text"</span>&gt;</span></div><div class="line">                &#123;&#123; comment.commentContent &#125;&#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"m-toast m-toast-self"</span> <span class="attr">:style</span>=<span class="string">"&#123; bottom : toastPos + 'px' &#125;"</span> <span class="attr">v-show</span>=<span class="string">"isShowingToast"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"s-reply"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>回复<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"s-copy"</span> @<span class="attr">click</span>=<span class="string">"copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>复制<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"s-report"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>举报<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.comment-list</span> <span class="selector-tag">dd</span> &#123;</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid gray;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.comment-list</span> <span class="selector-tag">dd</span><span class="selector-pseudo">:last-child</span> &#123;</div><div class="line">    <span class="attribute">border-bottom</span>:none;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如上代码在浏览器中最后一个dd元素依旧显示有边框。上网仔细看了下first-child和last-child规则，发现是原本自己认知的误差。</p>
<p>要想使选择器生效，必须要满足如下条件：</p>
<blockquote>
<p>E:last-child选择符，E必须是它的兄弟元素中的最后一个元素，换言之，E必须是父元素的最后一个子元素。与之类似的伪类还有E:first-child，只不过情况正好相反，需要它是第一个子元素。</p>
</blockquote>
<h3 id="4-sketch中的文本转SVG"><a href="#4-sketch中的文本转SVG" class="headerlink" title="[4] sketch中的文本转SVG"></a>[4] sketch中的文本转SVG</h3><p>iconfont中有一个带文字的图标，外面一个圆，里面俩字“更多”，结果从sketch转成iconfont以后只有圆没了文字。<br>第一反应的看sketch原稿，发现“更多”俩字是纯文字，复制出SVG代码看了下果然SVG代码中没有，应该是文本到SVG要一个转换步骤设计给忘了。<br>最终问了下设计那边，文本要转成SVG可以通过 “右键” - “convert to outline”轻松搞定。<br>现在的前端各种知识不了解点真的不行，出问题再找相关人员，再沟通，经常还说不明白，太浪费时间了…</p>
<h3 id="5-弹窗后原页面内容禁止滚动"><a href="#5-弹窗后原页面内容禁止滚动" class="headerlink" title="[5] 弹窗后原页面内容禁止滚动"></a>[5] 弹窗后原页面内容禁止滚动</h3><p>需求中很多地方需要用到弹窗，但是弹窗后发现遮罩下面原本的内容可以滚动，这不是我们想要的。<br>最简单的解决方法是在弹窗后设置<code>html{overflow:hidden;}</code>,将溢出内容截断，便不会有滚动条。</p>
<p>除此之外还可以通过禁用touchmove事件来实现，代码如下:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">preventScroll: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                    <span class="keyword">if</span>(<span class="keyword">this</span>.isShowOriginImg || <span class="keyword">this</span>.isShowDownload || <span class="keyword">this</span>.isShowReport) &#123;</div><div class="line">                        event.preventDefault();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> @<span class="attr">touchmove</span>=<span class="string">"preventScroll"</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>说到这里弹窗本身也是一种常见的需求，弹窗通常可以分为三部分：原本的内容、遮罩、弹窗内容。<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mask"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"dialog"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>对于原本的内容在弹窗时我们只需要像上面一样禁止其滚动即可。遮罩的话通常要填满整个屏幕,然后还要固定在当前视口:<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.mask</span> &#123;</div><div class="line">    <span class="attribute">position</span>: fixed;</div><div class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">opacity</span>: <span class="number">0.7</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#2C2D46</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而弹窗的内容通常会水平垂直居中显示在当前视口:<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.dialog</span> &#123;</div><div class="line">    <span class="attribute">position</span>: fixed;</div><div class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</div><div class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translate</span>(-50%, -50%);</div><div class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">translate</span>(-50%, -50%);</div><div class="line">    <span class="attribute">-ms-transform</span>: <span class="built_in">translate</span>(-50%, -50%);</div><div class="line">    <span class="attribute">-o-transform</span>: <span class="built_in">translate</span>(-50%, -50%);</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="6-fetch-API未携带cookie问题"><a href="#6-fetch-API未携带cookie问题" class="headerlink" title="[6] fetch API未携带cookie问题"></a>[6] fetch API未携带cookie问题</h3><p>fetch()接受第二个可选参数，可以自定义请求参数，开始的时候由于只是发起GET请求取数据所以没有添加自定义参数，直接fetch(url),结果发现当前登录用户操作关闭页面再进来时状态没有发生变化，排查后发现原来是fetch(url)这样的形式无法携带cookie，导致后台无法识别当前用户并记录操作。添加自定义参数后cookie可获得<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> parms = &#123;</div><div class="line">            <span class="attr">headers</span>: &#123;</div><div class="line">                <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">credentials</span>: <span class="string">"same-origin"</span>,</div><div class="line">            <span class="attr">method</span>: <span class="string">"GET"</span>,</div><div class="line">        &#125;;</div><div class="line">fetch(url,parms)</div></pre></td></tr></table></figure></p>
<h3 id="7-iconfont使用"><a href="#7-iconfont使用" class="headerlink" title="[7] iconfont使用"></a>[7] iconfont使用</h3><p>引入相应的CSS文件后，只要设置相应的font-size和color即可(font-size、color设置到元素本身和::before都可以)，对齐方式需要设置在::beforez中<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"s-report"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.s-report</span> &#123;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">1.25em</span>;</div><div class="line">    <span class="attribute">color</span>: red;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.s-report</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">    <span class="attribute">vertical-align</span>: midddle;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="8-微信二次分享"><a href="#8-微信二次分享" class="headerlink" title="[8] 微信二次分享"></a>[8] 微信二次分享</h3><p><code>appBridge.notifyShareInfo()</code>是APP内部的分享，分享到微信以后再分享需要用到<code>base.config.js</code>中的<code>base.initWechatShare(wcShareCfg)</code>函数，参数为要分享的内容，代码如下:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> BASE= <span class="built_in">window</span>.BASE; <span class="comment">// 需引入base.config.js</span></div><div class="line">wcShareCfg = &#123;</div><div class="line">                            <span class="attr">title</span>: ,</div><div class="line">                            <span class="attr">link</span>: ,</div><div class="line">                            <span class="attr">imgUrl</span>: ,</div><div class="line">                            <span class="attr">desc</span>:</div><div class="line">                        &#125;;</div><div class="line">BASE.initWechatShare(wcShareCfg);</div></pre></td></tr></table></figure></p>
<h3 id="9-n转-lt-br-gt"><a href="#9-n转-lt-br-gt" class="headerlink" title="[9] \n转&lt;br /&gt;"></a>[9] <code>\n</code>转<code>&lt;br /&gt;</code></h3><p>文章主体内容后端发过来的换行符<code>\n</code>，直接渲染没有效果，需要先通过正则转成<code>&lt;br /&gt;</code>然后再使用<code>v-html</code>指令绑定数据即可<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">uiData.post.artContent = uiData.post.artContent.replace(<span class="regexp">/[\n]/g</span>, <span class="string">'&lt;br /&gt;'</span>)</div></pre></td></tr></table></figure></p>
<h3 id="10-IOS数字自动识别为电话号码"><a href="#10-IOS数字自动识别为电话号码" class="headerlink" title="[10] IOS数字自动识别为电话号码"></a>[10] IOS数字自动识别为电话号码</h3><p>出错的情况是这样的<code>@xxx123456</code><br>在meta中添加了<code>&lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot; /&gt;</code>还是会出错，最后更改了HTML结构将@与后面数据隔离开便好了<code>@&lt;span&gt;username&lt;/span&gt;</code></p>
<h3 id="11-切换npm源"><a href="#11-切换npm源" class="headerlink" title="[11] 切换npm源"></a>[11] 切换npm源</h3><p>由于官方的npm源比较慢于是之前换了淘宝cnpm，官方文档中写的使用方式有两种,一种是安装cnpm<code>$ npm install -g cnpm --registry=https://registry.npm.taobao.org</code>，<br>还有一种是直接通过添加 npm 参数 alias 一个新命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alias cnpm=&quot;npm --registry=https://registry.npm.taobao.org \</div><div class="line">--cache=$HOME/.npm/.cache/cnpm \</div><div class="line">--disturl=https://npm.taobao.org/dist \</div><div class="line">--userconfig=$HOME/.cnpmrc&quot;</div></pre></td></tr></table></figure></p>
<p>当时应该用的第二种方法，结果现在突然淘宝的这个用不了了，一直显示什么证书错误，只能切换回官方的，搜了一下切回来很方便<code>npm config set registry https://r.cnpmjs.org</code>即可切回官方</p>
<p>另外看到有个专门的nrm来管理npm源，详细介绍见<a href="https://segmentfault.com/a/1190000000473869" target="_blank" rel="external">https://segmentfault.com/a/1190000000473869</a></p>
<h3 id="12-禁止IOS默认长按操作条"><a href="#12-禁止IOS默认长按操作条" class="headerlink" title="[12] 禁止IOS默认长按操作条"></a>[12] 禁止IOS默认长按操作条</h3><p>IOS中的页面长按会弹出长长的一个操作条，可以通过下面两个属性来禁止默认的行为。<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    (-prefix-)user-select: none;</div><div class="line">    -webkit-touch-callout:none;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>除此之外查资料的时候还看到一个属性 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/touch-action" target="_blank" rel="external">touch-action</a>,不过这个貌似权限会很大，可以禁止全部操作。</p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.zhangxinxu.com/wordpress/2009/09/%E5%85%B3%E4%BA%8E%E6%96%87%E5%AD%97%E5%86%85%E5%AE%B9%E6%BA%A2%E5%87%BA%E7%94%A8%E7%82%B9%E7%82%B9%E7%82%B9-%E7%9C%81%E7%95%A5%E5%8F%B7%E8%A1%A8%E7%A4%BA/#zxx_e" target="_blank" rel="external">关于文字内容溢出用点点点-省略号表示</a></li>
<li><a href="https://github.com/jquery/jquery-mobile/issues/2598" target="_blank" rel="external">$.mobile.page.prototype.options.keepNative not working</a></li>
<li><a href="http://www.css88.com/book/css/selectors/pseudo-classes/last-child.htm" target="_blank" rel="external">E:last-child</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="external">Fetch-MDN</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/user-select" target="_blank" rel="external">user-select</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[用Object literals替代switch-case]]></title>
      <url>http://iminyao.com/2016/09/15/javascript-nested-conditionals/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>条件语句是我们日常编程中最常用到了。对于条件判断，通常是先if-else，如果情况太多就用就用switch-case，但是if-else和swit-case要么代码太繁琐，要么调试起来困难。最近学到一种新的方法：Object literals。</p>
</blockquote>
<p>直接上具体的例子吧</p>
<p>之前有个活动需求，简单说就是根据链接里携带的不同type在页面加载不同的图片，so easy。按照惯性思维代码大概是这样的<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span>(type === xxx) &#123;</div><div class="line">    xxx</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>() &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>或者是这样的：<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">switch</span>(type) &#123;</div><div class="line">    <span class="keyword">case</span> xxx:</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">    ...</div><div class="line">    default:</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如何用对面字面量来实现相同的功能，代码其实很简单：<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDrink</span> (<span class="params">type</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'The drink I chose was '</span> + &#123;</div><div class="line">    <span class="string">'coke'</span>: <span class="string">'Coke'</span>,</div><div class="line">    <span class="string">'pepsi'</span>: <span class="string">'Pepsi'</span>,</div><div class="line">    <span class="string">'lemonade'</span>: <span class="string">'Lemonade'</span></div><div class="line">  &#125;[type] || <span class="keyword">default</span> value;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>通过将case作为对象的key，将每个case对应的项作为value，而对于default，可以通过<code>||</code> 操作符来实现，完美！</p>
<p>关于switch-case语句的问题看过一篇相关文章中有详细介绍：<br><a href="https://toddmotto.com/deprecating-the-switch-statement-for-object-literals/" target="_blank" rel="external">Replacing switch statements with Object literals</a></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.jstips.co/en/improve-nested-conditionals/" target="_blank" rel="external">Improve Nested Conditionals</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vue.js入门系列(三) 条件渲染及Vue页面加载闪烁的解决方案]]></title>
      <url>http://iminyao.com/2016/09/14/vuejs-first-03/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>v-if和v-show可能是日常开发中最常用的两个指令，虽然看上去两者功能是类似的，但是两者还是存在很大区别的。</p>
</blockquote>
<h2 id="v-if与v-show区别："><a href="#v-if与v-show区别：" class="headerlink" title="v-if与v-show区别："></a>v-if与v-show区别：</h2><blockquote>
<p>在切换 v-if 块时，Vue.js 有一个局部编译/卸载过程，因为 v-if 之中的模板也可能包括数据绑定或子组件。v-if 是真实的条件渲染，因为它会确保条件块在切换当中合适地销毁与重建条件块内的事件监听器和子组件。</p>
<p>v-if 也是惰性的：如果在初始渲染时条件为假，则什么也不做——在条件第一次变为真时才开始局部编译（编译会被缓存起来）。</p>
<p>相比之下，v-show 简单得多——元素始终被编译并保留，只是简单地基于 CSS 切换。</p>
</blockquote>
<p>简单来说二者最大的区别是v-if只会在满足条件时才会编译，而v-show不管是否满足条件始终会编译，v-show的显示与隐藏只是简单的切换CSS的display属性。</p>
<h3 id="适用场景："><a href="#适用场景：" class="headerlink" title="适用场景："></a>适用场景：</h3><p>明白了二者的本质区别后什么时候适合用v-if什么时候用v-show也变得简单了。</p>
<blockquote>
<p>一般来说，v-if 有更高的切换消耗而 v-show 有更高的初始渲染消耗。因此，如果需要频繁切换 v-show 较好，如果在运行时条件不大可能改变 v-if 较好。</p>
</blockquote>
<p>比如说现在很多页面在不同端表现是不同的，最常见的是很多的APP页面在微信端打开时页面上会显示下载的提示，而在APP内部则不会，像这样的情况每个端的状态在加载时就是确定的不会变的就适合用v-if，这样在APP内打开时显示下载的部分直接就不会编译。</p>
<p>而像页面上元素根据不同条件显示/隐藏这样的地方用v-show是最合适的了，因为像这种基本上两个状态要频繁切换，如上面所说，v-show的切换消耗是小于v-if的。</p>
<h3 id="多条件"><a href="#多条件" class="headerlink" title="多条件"></a>多条件</h3><blockquote>
<p>很多时候代码中需要多条件判断，但是vue中只有v-if和v-else，没有v-elseif这样的指令。虽然没有类似的指令，但依旧还是有几种方法可以解决这个问题。</p>
</blockquote>
<h4 id="方法一-template"><a href="#方法一-template" class="headerlink" title="方法一:template"></a>方法一:template</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">&lt;div v-<span class="keyword">if</span>=<span class="string">"xxx"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">&lt;template v-<span class="keyword">else</span>&gt;</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"yyy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">  &lt;div v-<span class="keyword">else</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">&lt;<span class="regexp">/template&gt;</span></div></pre></td></tr></table></figure>
<h4 id="方法二：partical"><a href="#方法二：partical" class="headerlink" title="方法二：partical"></a>方法二：partical</h4><blockquote>
<p><partial> 元素是已注册的 partial 的插槽，partial 在插入时被 Vue 编译。<partial> 元素本身会被替换。<partial> 元素需要指定 name 特性。</partial></partial></partial></p>
</blockquote>
<p>这货让人想起javaScript原生的fragement元素，但却不是一个东西。partial有静态和动态之分，而要解决上面的问题就要用到动态partial。</p>
<p>示例：<br><figure class="highlight django"><table><tr><td class="code"><pre><div class="line"><span class="xml">// 注册 partial</span></div><div class="line">Vue.partial('my-partial', '<span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a partial! <span class="template-variable">&#123;&#123;msg&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span>')</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 静态 partial --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">partial</span> <span class="attr">name</span>=<span class="string">"my-partial"</span>&gt;</span><span class="tag">&lt;/<span class="name">partial</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 动态 partial --&gt;</span></div><div class="line"><span class="comment">&lt;!-- 渲染 partial，id === vm.partialId --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">partial</span> <span class="attr">v-bind:name</span>=<span class="string">"partialId"</span>&gt;</span><span class="tag">&lt;/<span class="name">partial</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>要解决多个条件的问题，我们就可以为每种情况预先注册好各自的partial，然后将partial的name属性绑定到判断条件，这样就能实现多个条件判断。</p>
<h3 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h3><ol>
<li>v-if指令可以应用于template包装元素上，而v-show不支持templete</li>
<li>将v-show应用在组件上时，因为指令的优先级 v-else 会出现问题，解决办法就是用另一个 v-show 替换 v-else<br>官方给出的示例如下：<figure class="highlight html"><table><tr><td class="code"><pre><div class="line">   // 错误</div><div class="line">   <span class="tag">&lt;<span class="name">custom-component</span> <span class="attr">v-show</span>=<span class="string">"condition"</span>&gt;</span><span class="tag">&lt;/<span class="name">custom-component</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>这可能也是一个组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    // 正确做法</div><div class="line">    <span class="tag">&lt;<span class="name">custom-component</span> <span class="attr">v-show</span>=<span class="string">"condition"</span>&gt;</span><span class="tag">&lt;/<span class="name">custom-component</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"!condition"</span>&gt;</span>这可能也是一个组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Vue页面加载时v-show设置的隐藏元素出现导致页面闪烁问题"><a href="#Vue页面加载时v-show设置的隐藏元素出现导致页面闪烁问题" class="headerlink" title="Vue页面加载时v-show设置的隐藏元素出现导致页面闪烁问题"></a>Vue页面加载时v-show设置的隐藏元素出现导致页面闪烁问题</h2><p>在写APP社区页面的时候在一些地方用了v-show，在刷新页面的时候就发现即便在逻辑判断为false某些元素不该显示时也会露个脸，一闪而过，元素快小还好，如果是特别大的地方就看起来就很不爽，于是就上网搜了下看有没有解决方法，结果还真有。</p>
<h3 id="方法一-v-cloak"><a href="#方法一-v-cloak" class="headerlink" title="方法一: v-cloak"></a>方法一: <a href="http://cn.vuejs.org/api/#v-cloak" target="_blank" rel="external">v-cloak</a></h3><p>官方的解释就一句话：这个指令保持在元素上直到关联实例结束编译。<br>光看这句话一头雾水，后面紧接着说了用法：</p>
<blockquote>
<p>和 CSS 规则如 [v-cloak] { display: none } 一起用时，这个指令可以隐藏未编译的 Mustache 标签直到实例准备完毕。</p>
</blockquote>
<p>也就是说v-cloak指令可以像CSS选择器一样绑定一套CSS样式然后这套CSS会一直生效到实例编译结束。<br>示例代码：<br><figure class="highlight django"><table><tr><td class="code"><pre><div class="line"><span class="xml">// <span class="tag">&lt;<span class="name">div</span>&gt;</span> 不会显示，直到编译结束。</span></div><div class="line">[v-cloak] &#123;</div><div class="line">  display: none;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-cloak</span>&gt;</span></div><div class="line">  <span class="template-variable">&#123;&#123; message &#125;&#125;</span><span class="xml"></span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="方法二-v-text"><a href="#方法二-v-text" class="headerlink" title="方法二: v-text"></a>方法二: <a href="http://cn.vuejs.org/api/#v-text" target="_blank" rel="external">v-text</a></h3><p>vue中我们会将数据包在两个大括号中，然后放到HTML里，但是在vue内部，所有的双括号会被编译成textNode的一个v-text指令。<br>而使用v-text的好处就是永远更好的性能，更重要的是可以避免FOUC (Flash of Uncompiled Content) ，也就是上面与遇到的问题。</p>
<p>示例代码：<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- same as --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="http://vuejs.org.cn/guide/conditional.html" target="_blank" rel="external">条件渲染</a></li>
<li><a href="http://vuejs.org.cn/api/#partial" target="_blank" rel="external">partial</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[小谈html与body的height]]></title>
      <url>http://iminyao.com/2016/09/11/html-body-height/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>这两天PC新官网上线调整，之前各种bug都出来了，其中有一个是页面底部公司信息那一个模块之前就是简单的放到了其他内容的后面，这样导致当页面信息过少时底部信息就跑上来，下面留下很大的空白。</p>
<p>看似很简单的问题，但是引申开来就涉及到了html与body的区别了。</p>
</blockquote>
<p>先说BUG最终的解决方案：</p>
<p>让footer相对于html定位，然后设置html的高度最小为100%，这样当页面内容不够整个浏览器窗口时footer也能固定在最底部</p>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.footer</span> &#123;</div><div class="line"><span class="attribute">position</span>: absolute;</div><div class="line"><span class="attribute">bottom</span>:<span class="number">0</span>;</div><div class="line"><span class="attribute">witdh</span>:<span class="number">100%</span></div><div class="line">&#125;</div><div class="line"><span class="selector-tag">html</span> &#123;</div><div class="line">    <span class="attribute">min-height</span>:<span class="number">100%</span>;</div><div class="line">    <span class="attribute">position</span>:relative;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有一种方法:<br>其实是一样的，只不过要想让body的min-height生效要显式的声明html的高度。<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">html</span> &#123;</div><div class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">min-height</span>:<span class="number">100%</span>;</div><div class="line">    <span class="attribute">position</span>:relative;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>解决方法其实挺简单，但是其中的一些知识点还是值得深究一下的。</p>
<p>在这里常犯的一个错误是只在body上面设置height或是min-height，这是无效的。是什么原因呢？这就要说到百分比单位的参考物了，元素的height是相对于父元素来计算的，如果我们仅仅设置body的heigt而不设置html的height，父元素缺少了明确的height，在子元素上设置height就无意义了。</p>
<p>这个应该算是前端开发中最常见的问题了，因为像全屏幻灯片类似的需求都是需要用到这个的。</p>
<p>看起来到这应该告一段落了，但是上网的时无意间看到了一篇关于html与body文章，<a href="http://phrogz.net/css/htmlvsbody.html" target="_blank" rel="external">Understanding the HTML versus BODY Element in CSS</a>，html和body可能是前端中最常见的两个标签了，可是我们真的了解它们吗？不尽然。</p>
<ol>
<li>The html element’s height and width are controlled by the browser window.</li>
<li>It is the html element which has (by default) overflow:auto, causing scrollbars to appear when needed.(解释了为什么页面内容超出后会有滚动条)</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://phrogz.net/css/htmlvsbody.html" target="_blank" rel="external">Understanding the HTML versus BODY Element in CSS</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Flex Layout]]></title>
      <url>http://iminyao.com/2016/09/07/flex-layout/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>最近在做一个APP社区模块，里面各种布局，对齐等，用float和定位、inline-block写的蛋疼。之前有简单了解过flex布局，但是从来没有系统的总结过，也没有在实际的项目中使用，正好最近有时间，系统的学习一下，省的以后再搞的那么麻烦。</p>
</blockquote>
<h3 id="什么是flex"><a href="#什么是flex" class="headerlink" title="什么是flex"></a>什么是flex</h3><p>Flexbox布局官方称之为CSS Flexible Box布局模块,是CSS3中的一种新的布局模式。Flexbox可以控制未知容器元素的对齐方式，排列方向，排列顺序等，甚至是在未知大小的容器也能这样做。Flex容器的主要特点是能够修改其子元素（Flex item）的宽度或高度，使其在不同的屏幕尺寸中填补可用的空间。</p>
<p><img src="http://cdn.w3cplus.com/cdn/farfuture/UpKSK2E8X_KSE3WnsUazlyUPyQ85qas94rQE5rw_Ee0/mtime:1429346982/sites/default/files/blogs/2015/1504/CSS3-Flexbox-Model.jpg" alt="flex基本术语"></p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>一般来说，Flex容器以及其子元素决定其布局与尺寸主要经过以下三步：</p>
<ol>
<li>将元素切割到不同的行。首先会根据预测的元素尺寸将元素切分到不同的行。这主要是依赖flex-basis属性。</li>
<li>在每行中进行元素的缩放：对于每一行计算flex元素的最终尺寸</li>
<li>排列行与元素</li>
</ol>
<p>具体步骤：</p>
<ol>
<li>首先根据每个元素的flex-basis属性计算每个元素的可能的尺寸</li>
<li>基于flex-wrap属性分析应该将元素分配到几行中</li>
<li>根据flex-grow与flex-shrink属性计算元素的最终尺寸</li>
<li>根据justify-content属性计算元素在主轴上的排布</li>
<li>根据align-items、align-content、align-self属性计算元素在交叉轴上的排布</li>
</ol>
<h3 id="容器属性"><a href="#容器属性" class="headerlink" title="容器属性"></a>容器属性</h3><h4 id="display-设置容器"><a href="#display-设置容器" class="headerlink" title="display 设置容器"></a>display 设置容器</h4><p>将元素的display属性设置为flex，该元素将会成为一个flex容器。<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line">.flex-container &#123;</div><div class="line">  display: -webkit-flex; /* Safari */</div><div class="line">  display: flex;</div><div class="line">&#125;</div><div class="line">// 内联元素</div><div class="line">.flex-container &#123;</div><div class="line">  display: -webkit-inline-flex; /* Safari */</div><div class="line">  display: inline-flex;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="flex-direction-子元素方向"><a href="#flex-direction-子元素方向" class="headerlink" title="flex-direction 子元素方向"></a>flex-direction 子元素方向</h4><p>定义主轴元素排列的方向，值有row | row-reverse | column | column-reverse</p>
<h4 id="flex-wrap-行分割"><a href="#flex-wrap-行分割" class="headerlink" title="flex-wrap 行分割"></a>flex-wrap 行分割</h4><p>一个flex容器默认情况下是单行排布子元素的，即使会发生溢出的情况。而通过修改flex-wrap属性可以使flex容器变成多行，即把子元素分割到多行显示。类似于文本被分割到多行显示，一个子元素会尽可能的扩展来适应新的行。当一个新的行被创建之后，它会被对方到flex容器的交叉轴上。</p>
<p>flex-wrap值有nowrap | wrap | wrap-reverse</p>
<h4 id="flex-flow-简写"><a href="#flex-flow-简写" class="headerlink" title="flex-flow 简写"></a>flex-flow 简写</h4><p>flex-flow是对于flex-direction与flex-wrap的缩写，默认值是row nowrap</p>
<h4 id="justify-content-元素主轴对齐方式"><a href="#justify-content-元素主轴对齐方式" class="headerlink" title="justify-content 元素主轴对齐方式"></a>justify-content 元素主轴对齐方式</h4><p>值有 flex-start | flex-end | center | space-between | space-around</p>
<p><img src="https://segmentfault.com/image?src=https://cdn.css-tricks.com/wp-content/uploads/2013/04/justify-content.svg&amp;objectId=1190000004139009&amp;token=bdc7f6c45d1b2f07463401b1c8618341" alt="justify-content"></p>
<ul>
<li>flex-start (default): 元素被放置在行首</li>
<li>flex-end: 元素向行尾聚集</li>
<li>center:元素被放置在行中间</li>
<li>space-between: 元素被均衡分布，第一个元素被放置在行首，最后一个元素被放置在行尾。</li>
<li>space-around: 元素被均匀放置在行中，所有的空白空间被均衡分配，注意有些元素两边的空白不对等，那是因为左右两个元素的边空白叠加了。</li>
</ul>
<h4 id="align-items-元素交叉列对齐方式"><a href="#align-items-元素交叉列对齐方式" class="headerlink" title="align-items 元素交叉列对齐方式"></a>align-items 元素交叉列对齐方式</h4><p>值有 flex-satrt | flex-end | center | baseline | stretch</p>
<ul>
<li>flex-start: 元素被放置在交叉轴的首</li>
<li>flex-end: 元素向交叉轴尾聚集</li>
<li>center: 水平放置在交叉轴上</li>
<li>baseline: 基线对齐</li>
<li>stretch (default): 扩展以填充整个空间<h4 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h4>类似justify-content，只不过前者定义的是单个flex item的对齐方向，而align-content定义的是flex容器内整行在容器中的排列方式</li>
</ul>
<h4 id="flex容器无效属性"><a href="#flex容器无效属性" class="headerlink" title="flex容器无效属性"></a>flex容器无效属性</h4><ol>
<li>所有column-*属性在flex容器上都不生效</li>
<li>flex容器上不能使用::first-line和::first-letter伪元素</li>
</ol>
<h3 id="元素属性"><a href="#元素属性" class="headerlink" title="元素属性"></a>元素属性</h3><h4 id="flex-缩写"><a href="#flex-缩写" class="headerlink" title="flex 缩写"></a>flex 缩写</h4><p>flex是flex-grow、flex-shrink以及flex-basis的组合缩写，第二和第三个参数(flex-shrink、flex-basis)可以省略，默认值为0 1 auto</p>
<h4 id="flex-basis-初始基准"><a href="#flex-basis-初始基准" class="headerlink" title="flex-basis 初始基准"></a>flex-basis 初始基准</h4><p>flex元素的尺寸主要有以下三个约束：</p>
<ul>
<li>由width、flex-basis决定的基础尺寸</li>
<li>由flex-grow、flex-shrink决定的不同容器尺寸情况下的缩放尺寸</li>
<li>由max-<em>、min-</em>决定的尺寸的上限与下限</li>
</ul>
<p>flex basis是每个flex元素的初始尺寸，即在空白空间被分配到每个元素之前的尺寸。一般来说，flex-basis的取值有auto、content以及某个具体的值。</p>
<ul>
<li>flex-basis: 0 with width: 45px on each flex item results in the items having a 0px width.<br>flex-basis: 10px with width: 45px on each flex item results in the items having a 10px width.</li>
<li>flex-basis: auto with width: 45px on each flex item results in the items having a 45px width, and the items wrap because the sum of flex basis sizes exceeds the flex container’s width.</li>
<li>flex-basis: content with width: 45px on each flex item should result in the * flex items being sized exactly to their content, but this value is not supported as of the time I’m writing this.</li>
</ul>
<h4 id="align-self-单独交叉轴对齐方式"><a href="#align-self-单独交叉轴对齐方式" class="headerlink" title="align-self 单独交叉轴对齐方式"></a>align-self 单独交叉轴对齐方式</h4><p>值有 auto | flex-start | flex-end | center | baseline | stretch</p>
<h4 id="order"><a href="#order" class="headerlink" title="order"></a>order</h4><p>order属性是用来控制flex容器中flex项目的排列顺序,Flex项目可以使用这个简单的属性得新排序，而不需要重新修改HTML代码，默认值0<br><img src="http://cdn2.w3cplus.com/cdn/farfuture/9WkVou5V_yGWXuGuiVaTjhedWpEV4XP9ypCvW9osv6M/mtime:1429346983/sites/default/files/blogs/2015/1504/flexbox-order.jpg" alt="order"></p>
<h4 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h4><p>用来指定 flex项目的放大比例，其决定了flex项目相对flex容器自由空间进行放大,默认值0</p>
<h4 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h4><p>用来指定flex项目缩小比例。决定了flex项目将会相对于其他flex项目在flex容器空间不足之下自动收缩，默认值0（表示不会缩小）</p>
<h4 id="flex-item无效属性"><a href="#flex-item无效属性" class="headerlink" title="flex item无效属性"></a>flex item无效属性</h4><ol>
<li>float</li>
<li>clear</li>
<li>vertical-align</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://segmentfault.com/a/1190000004139009" target="_blank" rel="external">CSS实战之Flex详解</a></li>
<li><a href="http://www.w3cplus.com/css3/a-visual-guide-to-css3-flexbox-properties.html" target="_blank" rel="external">图解CSS3 Flexbox属性</a></li>
<li><a href="http://tutorialzine.com/2016/04/5-flexbox-techniques-you-need-to-know-about/" target="_blank" rel="external">5 Flexbox Techniques You Need to Know About</a></li>
<li><a href="https://www.w3.org/html/ig/zh/css-flex-1/" target="_blank" rel="external">CSS 伸缩盒布局模组</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac上一些常用的小技巧]]></title>
      <url>http://iminyao.com/2016/08/28/mac-skills/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="图片批量格式转换"><a href="#图片批量格式转换" class="headerlink" title="图片批量格式转换"></a>图片批量格式转换</h3><p>日常开发中经常会有png jppg互转的需求。网上有很多在线转换的网站，但是都不支持批量转换，无意间发现Mac本身就可以进行格式转换，而且是批量的。使用的是Mac自带的预览。</p>
<p>首先选中要转换的图片，右键 选择预览，在预览窗口中再次选中要转换的图片 然后 文件 导出为其他格式即可。</p>
<h3 id="音频提取"><a href="#音频提取" class="headerlink" title="音频提取"></a>音频提取</h3><p>Mac可以很方便的从视频直接提取出音频，右键 编码所选视频文件 仅音频 即可导出AAC格式音频。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ES6之对象字面量]]></title>
      <url>http://iminyao.com/2016/08/17/ES2015-Object/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-对象原型设置"><a href="#1-对象原型设置" class="headerlink" title="1. 对象原型设置"></a>1. 对象原型设置</h3><p>ES5中设置对象原型通常需要使用<code>Object.create</code>这个静态方法来设置对象原型，在ES6中可以直接在对象中设置<code>__proto__</code>属性来设置。<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> myProto = &#123;  </div><div class="line">  propertyExists: <span class="function"><span class="keyword">function</span><span class="params">(name)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> name <span class="keyword">in</span> <span class="keyword">this</span>;    </div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> myNumbers = &#123;  </div><div class="line">  __proto__: myProto,</div><div class="line">  array: [<span class="number">1</span>, <span class="number">6</span>, <span class="number">7</span>]</div><div class="line">&#125;;</div><div class="line">myNumbers.propertyExists(<span class="string">'array'</span>);      <span class="comment">// =&gt; true  </span></div><div class="line">myNumbers.propertyExists(<span class="string">'collection'</span>); <span class="comment">// =&gt; false</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>proto</strong>只允许出现一次，多次设置会报错；<strong>proto</strong>的值只允许是object和null，其他所有值都会被忽略。</p>
<h3 id="2-快速声明方法"><a href="#2-快速声明方法" class="headerlink" title="2. 快速声明方法"></a>2. 快速声明方法</h3><p>ES6中可以省略function关键词和冒号来快速声明方法。<br><figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> collection = &#123;  </div><div class="line">  items: [],</div><div class="line">  <span class="keyword">add</span>(item) &#123;</div><div class="line">    <span class="keyword">this</span>.items.push(item);</div><div class="line">  &#125;,</div><div class="line">  <span class="keyword">get</span>(index) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items[index];</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">collection.<span class="keyword">add</span>(<span class="number">15</span>);  </div><div class="line">collection.<span class="keyword">add</span>(<span class="number">3</span>);  </div><div class="line">collection.<span class="keyword">get</span>(<span class="number">0</span>); <span class="comment">// =&gt; 15</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="3-super关键字"><a href="#3-super关键字" class="headerlink" title="3. super关键字"></a>3. super关键字</h3><p>ES6中可以使用super来访问原型链上的属性<br><figure class="highlight kotlin"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> calc = &#123;  </div><div class="line">  sumArray (items) &#123;</div><div class="line">    <span class="keyword">return</span> items.reduce(function(a, b) &#123;</div><div class="line">      <span class="keyword">return</span> a + b;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> numbers = &#123;  </div><div class="line">  __proto__: calc,</div><div class="line">  numbers: [<span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>],</div><div class="line">  sumElements() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.sumArray(<span class="keyword">this</span>.numbers);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">numbers.sumElements(); <span class="comment">// =&gt; 17</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>super只能在快速方法声明中使用，普通的<code>name: function(){}</code>中会抛异常。</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[基于高德地图API开发的通用地点选择组件]]></title>
      <url>http://iminyao.com/2016/08/16/amap-javaScript-API/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>最近有个邀请函的需求，其中有一个地点选择的需求。大致的流程是：<br>信息填写页 - (点击) - 地图选择页面 -(搜索选择地点后返回) - 数据自动填充到信息页面</p>
</blockquote>
<p>之前没有接触过基于地图API的开发，目前国内的主流的两款地图软件也就高德和百度，简单看了下两个的API文档，最后选择高德，个人感觉高德的API文档写的要好点。</p>
<h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p>高德地图有很多，我们这里选择的是JavaScript API，要使用某个具体的首先要申请key，然后就可以在页面引入API文件了：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://webapi.amap.com/maps?v=1.3&amp;key=您申请的key值"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<h3 id="引入插件"><a href="#引入插件" class="headerlink" title="引入插件"></a>引入插件</h3><p>这里需要用到高德的三个插件:</p>
<ol>
<li>AMap.CitySearch 城市查询插件</li>
<li>AMap.Autocomplete 输入提示插件</li>
<li>AMap.PlaceSearch 地点选择插件</li>
</ol>
<h4 id="插件加载方式"><a href="#插件加载方式" class="headerlink" title="插件加载方式"></a>插件加载方式</h4><p>插件有两种加载方式，一种是在引入API时通过添加参数来实现</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span></div><div class="line">        src=<span class="string">"http://webapi.amap.com/maps?v=1.3&amp;key=54e484931a6a428c50da305c82bc709a&amp;plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.CitySearch"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>另外一种是在代码中通过AMap.plugin方法来使用(PlaceSearch用的是AMap.service方法,一些其他插件也有使用此方法的，搞不太明白差别)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">AMap.plugin(<span class="string">'AMap.Autocomplete'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//回调函数</span></div><div class="line">        <span class="comment">//实例化Autocomplete</span></div><div class="line">        <span class="keyword">var</span> autoOptions = &#123;</div><div class="line">            <span class="attr">city</span>: <span class="string">""</span>, <span class="comment">//城市，默认全国</span></div><div class="line">            input:<span class="string">"input_id"</span><span class="comment">//使用联想输入的input的id</span></div><div class="line">        &#125;;</div><div class="line">        autocomplete= <span class="keyword">new</span> AMap.Autocomplete(autoOptions);</div><div class="line">        <span class="comment">//<span class="doctag">TODO:</span> 使用autocomplete对象调用相关功能</span></div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<p>个人感觉还是第一种方式更灵活一些。</p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><h4 id="初始化地图容器"><a href="#初始化地图容器" class="headerlink" title="初始化地图容器"></a>初始化地图容器</h4><p>要使用地图需要指定页面中的某元素为地图容器，通过Amap.Map方法来创建容器<br><figure class="highlight lasso"><table><tr><td class="code"><pre><div class="line"><span class="built_in">var</span> <span class="built_in">map</span> = <span class="literal">new</span> AMap.<span class="built_in">Map</span>(<span class="string">'container'</span>,&#123;</div><div class="line">        zoom: <span class="number">10</span>,</div><div class="line">        center: <span class="meta">[</span><span class="number">116.39</span>,<span class="number">39.9</span><span class="meta">]</span></div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>
<blockquote>
<p>需要特别注意的是这里的map需要是全局的或者要暴露给全局，因为高德地图的<code>http://cache.amap.com/lbs/static/addToolbar.js</code>中需要使用map。所以最好的方法是在初始化后挂在window上<br><code>window.map = map;</code></p>
<h4 id="初始化输入提示"><a href="#初始化输入提示" class="headerlink" title="初始化输入提示"></a>初始化输入提示</h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> auto = <span class="keyword">new</span> AMap.Autocomplete(&#123;</div><div class="line">     input: <span class="string">'tipinput'</span> <span class="comment">// 绑定输入提示框元素id</span></div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="初始化搜索"><a href="#初始化搜索" class="headerlink" title="初始化搜索"></a>初始化搜索</h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> placeSearch = <span class="keyword">new</span> AMap.PlaceSearch(&#123; <span class="comment">//构造地点查询类</span></div><div class="line">        pageSize: <span class="number">5</span>,</div><div class="line">        pageIndex: <span class="number">1</span>,</div><div class="line">        city: <span class="string">"010"</span>, <span class="comment">//城市</span></div><div class="line">        map: map,</div><div class="line">        panel: <span class="string">"result"</span>         <span class="comment">// 搜索结果显示列表绑定元素的id</span></div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//关键字查询</span></div><div class="line">    placeSearch.search(<span class="string">'方恒'</span>, <span class="function"><span class="keyword">function</span><span class="params">(status, result)</span> </span>&#123;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>实际项目中更多的是输入提示和搜索结合起来使用，本项目中就是这样用的，在输入时使用输入提示插件，然后当点击提示列表中的某一项时调用搜索。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">AMap.plugin([<span class="string">'AMap.Autocomplete'</span>,<span class="string">'AMap.PlaceSearch'</span>],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">     <span class="keyword">var</span> autoOptions = &#123;</div><div class="line">          <span class="attr">city</span>: <span class="string">"北京"</span>, <span class="comment">//城市，默认全国</span></div><div class="line">          input: <span class="string">"input"</span><span class="comment">//使用联想输入的input的id</span></div><div class="line">     &#125;;</div><div class="line">     autocomplete= <span class="keyword">new</span> AMap.Autocomplete(autoOptions);</div><div class="line">     <span class="keyword">var</span> placeSearch = <span class="keyword">new</span> AMap.PlaceSearch(&#123;</div><div class="line">              <span class="attr">city</span>:<span class="string">'北京'</span>,</div><div class="line">              <span class="attr">map</span>:map</div><div class="line">     &#125;);</div><div class="line">     AMap.event.addListener(autocomplete, <span class="string">"select"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">           <span class="comment">//TODO 针对选中的poi实现自己的功能</span></div><div class="line">           placeSearch.search(e.poi.name)</div><div class="line">     &#125;);</div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
<h3 id="填充默认值"><a href="#填充默认值" class="headerlink" title="填充默认值"></a>填充默认值</h3><blockquote>
<p>邀请函填写页面的逻辑是用户切换到地点输入一栏时直接跳转到地图页面，也就是说初次跳到地图页面是没有带搜索关键词的，所以需要一个默认值，这里我选择的是当前城市名称作为默认关键词。而这就要先获取到当前城市。</p>
</blockquote>
<h4 id="定位到当前行政区"><a href="#定位到当前行政区" class="headerlink" title="定位到当前行政区"></a>定位到当前行政区</h4><p>关于定位到当前位置有许多种定位方式，大致看了一下每种定位方式的用法，最终选择选择了ip定位，因为相较其他之中没有过多限制，实现起来也相对简单。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//实例化城市查询类</span></div><div class="line"><span class="keyword">var</span> citysearch = <span class="keyword">new</span> AMap.CitySearch();</div><div class="line"><span class="comment">//自动获取用户IP，返回当前城市</span></div><div class="line">citysearch.getLocalCity(<span class="function"><span class="keyword">function</span>(<span class="params">status, result</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (status === <span class="string">'complete'</span> &amp;&amp; result.info === <span class="string">'OK'</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (result &amp;&amp; result.city &amp;&amp; result.bounds) &#123;</div><div class="line">            <span class="keyword">var</span> cityinfo = result.city;</div><div class="line">            <span class="keyword">var</span> citybounds = result.bounds;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="核心业务逻辑"><a href="#核心业务逻辑" class="headerlink" title="核心业务逻辑"></a>核心业务逻辑</h3><blockquote>
<p>大致的业务逻辑为首先一进来先解析URL，然后获取其中关键词进行搜索，搜索结果返回后为每一项绑定点击事件，点击后即进行新一轮搜索。</p>
</blockquote>
<p>核心代码:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 获取当前城市名称</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">currentCityInfo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">                <span class="comment">//实例化城市查询类</span></div><div class="line">                <span class="keyword">var</span> citysearch = <span class="keyword">new</span> AMap.CitySearch();</div><div class="line">                <span class="comment">//自动获取用户IP，返回当前城市</span></div><div class="line">                citysearch.getLocalCity(<span class="function"><span class="keyword">function</span> (<span class="params">status, result</span>) </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (status === <span class="string">'complete'</span> &amp;&amp; result.info === <span class="string">'OK'</span>) &#123;</div><div class="line">                        <span class="keyword">if</span> (result &amp;&amp; result.city) &#123;</div><div class="line">                            resolve(result);</div><div class="line">                        &#125;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        reject(<span class="keyword">new</span> <span class="built_in">Error</span>(result.infocode));</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 关键词搜索</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">chooseLocation</span>(<span class="params">keyword, adcode</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">                <span class="comment">//接收url中传入的搜索值</span></div><div class="line">                AMap.service([<span class="string">'AMap.PlaceSearch'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                    <span class="comment">//关键字查询</span></div><div class="line">                    <span class="keyword">var</span> placeSearch = initSearch();</div><div class="line">                    placeSearch.setCity(adcode || <span class="string">'100000'</span>);</div><div class="line">                    placeSearch.search(keyword, <span class="function"><span class="keyword">function</span> (<span class="params">status, result</span>) </span>&#123;</div><div class="line">                        <span class="keyword">if</span> (status === <span class="string">'complete'</span> &amp;&amp; result.info === <span class="string">'OK'</span>) &#123;</div><div class="line">                            resolve(result);</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            reject(<span class="keyword">new</span> <span class="built_in">Error</span>(result.info));</div><div class="line">                        &#125;</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line">            &#125;)</div><div class="line">        &#125;;        </div><div class="line">        </div><div class="line">    <span class="keyword">if</span> (location.search.indexOf(<span class="string">"&amp;"</span>) !== <span class="number">-1</span>)    <span class="comment">// 如果不是初次搜索，展示上次搜索结果</span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(location.search.substr(<span class="number">1</span>).split(<span class="string">"&amp;"</span>)[<span class="number">0</span>].split(<span class="string">'='</span>)[<span class="number">1</span>]);</div><div class="line">    <span class="keyword">else</span> &#123;  <span class="comment">// 首次搜索，首先获取当前城市</span></div><div class="line">            currentCityInfo()</div><div class="line">            .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                 <span class="keyword">return</span> data.city;</div><div class="line">            &#125;</div><div class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123; <span class="built_in">console</span>.log(error); &#125;)</div><div class="line">        .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">            chooseLocation(data())</div><div class="line">         .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> poiArr = data.poiList.pois,</div><div class="line">                        resultCount = poiArr.length;</div><div class="line">                markerPoints = []; <span class="comment">// 清空上次搜索的数据</span></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; resultCount; i++) &#123;</div><div class="line">                    addMarker(poiArr[i]);</div><div class="line">                &#125;</div><div class="line">                point = markerPoints[<span class="number">0</span>];</div><div class="line">                setStorage(poiArr[<span class="number">0</span>].name, getImgUrl());</div><div class="line">                <span class="comment">//注册监听，当选中某条记录时会触发</span></div><div class="line">                AMap.event.addListener(auto, <span class="string">"select"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                    chooseLocation(e.poi.name, e.poi.adcode).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">                        <span class="keyword">var</span> poiArr = data.poiList.pois,</div><div class="line">                                resultCount = poiArr.length;</div><div class="line">                        markerPoints = []; <span class="comment">// 清空上次搜索的数据</span></div><div class="line">                        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; resultCount; i++) &#123;</div><div class="line">                            addMarker(poiArr[i]);</div><div class="line">                        &#125;</div><div class="line">                    &#125;); <span class="comment">//  选中某条纪录后再次触发搜索,重新绘制地图</span></div><div class="line">                &#125;);</div><div class="line">                <span class="keyword">return</span> data;</div><div class="line">            &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(error);</div><div class="line">            &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="comment">//  panel列表项切换</span></div><div class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'panel'</span>).addEventListener(<span class="string">'click'</span>, clickItem, <span class="literal">false</span>);</div><div class="line">            &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(error);</div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h3 id="静态地图"><a href="#静态地图" class="headerlink" title="静态地图"></a>静态地图</h3><p>地图组件最终返回的具体的地点和一张静态地图。对于静态地图的获取需要用到高德地图的Web服务API，首先要申请Web服务API的key。然后要做的就是依照规范拼接出URL。</p>
<ol>
<li>服务地址：<a href="http://restapi.amap.com/v3/staticmap?parameters" target="_blank" rel="external">http://restapi.amap.com/v3/staticmap?parameters</a> 所有参数均使用和号字符(&amp;)进行分隔</li>
<li>常用的请求参数：<pre><code>* key: 用户申请的key
* location：地图的中心点坐标
* zoom：缩放级别，范围为［1，19］(官方文档中写的是[1,17],但实际最大可以到19)
* size：地图大小
* markers：标注
</code></pre></li>
<li>markers：<blockquote>
<p>在众多的参数中，最终决定地图绘制的即我们需要自己去通过一步步构造的为markers(labels和paths也很常用，但是项目中没有用到，原理类似不做讨论)</p>
</blockquote>
</li>
</ol>
<ul>
<li>格式:<br><code>markers=markersStyle1:location1;location2..|markersStyle2:location3;location4..|markersStyleN:locationN;locationM..</code><br>location为经纬度信息，经纬度之间使用”,”分隔，不同的点使用”;”分隔。 markersStyle可以使用系统提供的样式，也可以使用自定义图片。</li>
<li>markersStyle参数:<ul>
<li>size:值small mid large</li>
<li>color: 颜色</li>
<li>label: [0-9]、[A-Z]、[单个中文字] (当size为small时不展现标注名)<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3></li>
</ul>
</li>
</ul>
<ol>
<li><a href="http://lbs.amap.com/api/javascript-api/guide/quickstart/" target="_blank" rel="external">高德地图JavaScript API 参考文档</a></li>
<li><a href="http://lbs.amap.com/api/webservice/reference/staticmaps/" target="_blank" rel="external">静态地图</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[进城记]]></title>
      <url>http://iminyao.com/2016/08/15/2016-08-15/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>因为有急事，连夜买票去济南，这是23年来第一次去省城济南。期间遇到一些事，遂有此文。</p>
</blockquote>
<h3 id="赶火车"><a href="#赶火车" class="headerlink" title="赶火车"></a>赶火车</h3><p>由于某不可说的原因买了周三晚7点半到济南的卧铺。一段不平凡的旅途拉开帷幕。</p>
<p>下午5点半还没下班就匆匆打卡下班往火车站赶，尼玛因为有急事本来心里就急的不行，万一赶不上火车就真的傻眼了，结果果不出所料，这个点往火车站去的方向真的很堵，公交走走停停让人心急，结果这还只是开始，走了没一半突然下起了大雨，心里一万个草泥马，这还不是更倒霉的。公交走着走着突然停了，因为撞车了，公交车跟一边的小轿车撞上了，然后司机示意我们坐别的车。幸好边上就是地铁，赶紧转地铁最终赶上了火车。</p>
<blockquote>
<p>一开始嫌转车麻烦没坐地铁，结果最终发现在赶时间的时候地铁永远比公交靠谱，有时候嫌麻烦往往会让事情更麻烦。</p>
</blockquote>
<h3 id="长达16个小时的车程"><a href="#长达16个小时的车程" class="headerlink" title="长达16个小时的车程"></a>长达16个小时的车程</h3><p>因为是临时有事去济南，高铁动车都没票，只得买卧铺，结果运气出奇的好买到了下铺，心想终于可以睡的舒服点，结果是我想多了。</p>
<p>一上车赶紧往找自己的床位，结果尼玛到的时候上面已经躺了一个女的和一个小女孩。看我停在旁边还没等我开口那女的就问我能不能跟她换下床位她带着孩子不方便。之前很少买到下铺也是第一次遇到这样的问题，就下意识的答应了。</p>
<p>等躺下以后越想越不对劲，明明是我的床位你一声不吭没有经过我的同意就直接睡上面，就算是跟你换起码也等到我上车同意。而且更可气的是全程那个女的连一句谢谢都没说，16个小时呢连句谢谢都换不来，起码的礼貌都没有。当时我就想这可能是我为数不多的非常后悔的事。</p>
<blockquote>
<p>关于换床位这个事情我想不会是个例。对于这样的事我事后才想明白，换床位没什么，谁还没有有困难的时候，但是最起码的征求别人同意后再动别人东西这样最基本的准则还是要有的吧。以后再遇到这样的事情，你敬我一分，我让你三尺。对于那种不自觉的人再不方便也不会让座了，弱势不是不讲原则的理由。</p>
</blockquote>
<h3 id="省城济南"><a href="#省城济南" class="headerlink" title="省城济南"></a>省城济南</h3><p>其实之前好几次到过济南，但是都是坐车路过，算不上去过。记得小时候邻居家奶奶的妹夫在济南军区当司令，每次回来都是开车军区的那种越野车，而且每次回来都会带各种没吃过的东西，当时济南在心中的地位跟北京是一样的。当时就想着等长大了一定要出去看看，到济南看看。</p>
<p>不过时隔多年后真正到了济南的时候却发现心中的济南和现实中的济南完全不是一个样子。女朋友有句名言：山东济南，中国青岛。去过济南后我对此深信不疑，也得出了一个结论：山东只有两个地方，一个是青岛，一个是青岛以外的地方。作为人口和经济大省，要不是因为有青岛，就真的没有拿得出手的去了。即便是省城跟江浙一代随便的小城市也很难相比。刚到的第一样我还以为到了张店呢。济南的大部分地方和我们家所在的小县城没什么差别。经济的差异也带来了公民素质问题的差异，走在济南大街上，明显感觉出人们在文化和素质上跟大城市的差异。还有一件印象特别深刻的事就是济南路上的汽车，在杭州路上各种路虎保时捷，但是在济南连奔驰宝马都比较少见。我想在济南有钱人肯定不会在少数，因为即便在我们家那样小的地方也是会有一批特别有钱人，而且济南作为我省政治中心，当官的也不在少数，按理说应该不止于此。我想要么是因为我没碰见，要么只能说你所处的环境对个人的影响真的很大。</p>
<p>曾开玩笑的说过幸亏自己当时没考上山大，当时只是开个玩笑，但是仔细想想也并不无道理，在南京的这几年我所学到的很多东西是在济南学不到的，即便是排名如此靠前的山大，大环境的影响远比小环境来的深远。</p>
<blockquote>
<p>对于济南的落末我感到更多的是无奈，和东北的大多数城市一样，作为工业城市的济南，当然也包括淄博，在几十年前风光无限，而现在只剩下工业时代的斑斑锈迹。有些事情是你没法选择的。济南作为龙山文化的发源地，历史源远流长，而青岛只用了几十年时间就远远的把她摔在了身后。这再次印证了那就话：唯有变化是永远不变的，历史的车轮下我们只能选择接受。</p>
</blockquote>
<h3 id="第一次维权之路"><a href="#第一次维权之路" class="headerlink" title="第一次维权之路"></a>第一次维权之路</h3><p>住那么多酒店以来第一次遇到需要维权的情况。房型信息里写的4-6楼，到酒店给安排到主楼旁边的2层小楼的2楼。一开始没在意，但是等到屋里一看，感觉不对，屋子里卫生根本没法看，暖气片上面一层厚厚的灰，感觉明显不是我订的房型，于是又看了下订单信息，信息显示的是4-6层。于是先打电话给途牛客服，客服一开始提出补偿优惠券的方案，被女朋友拒绝后又客服又联系酒店，期间我也打电话给前台，前台就一句话，没房了。一开始入住的时候跟我们说我们下的订单就是1楼2楼的，客服联系以后又一口咬定没房。我不清楚房型的问题是酒店这边的问题还是途牛的问题，但是楼层对不上这个问题肯定不是一天两天了。以前住酒店也碰到过没房的情况，但是通常酒店都会给免费升级到其他房型，这次倒好，前台直接给安排到了一个更差的。对于这样的服务我也是呵呵，期间等待客服处理结果就让我们就傻傻站前台那里等着，从出问题到最后协商补差价整整等了一个多小时。<br>关于楼层和房型的问题肯定不是第一次出现，这之中可能涉及到酒店和途牛或者说携程的利益问题，但是你们之前的问题不要影响消费者的权益。</p>
<blockquote>
<p>唯一值得肯定的是途牛携程客服以及酒店全国客服处理问题的速度和态度还不错。希望酒店能说到做到，加强对服务人员的培训，杜绝类似事件的发生。也希望其他人在遇到此类问题时，不要嫌麻烦，通过合理的渠道维护自己的权益。</p>
</blockquote>
<h3 id="新专辑"><a href="#新专辑" class="headerlink" title="新专辑"></a>新专辑</h3><p>在这期间我们敬爱的偶像派歌手李志老师又出新专辑了，第一时间买了，回来立马听了下。<br>其中《结婚》是最印象深刻的，全曲李老师都没开口。08年《我爱南京》演唱会的时候李志和老狼万晓利曾经一起合唱过这首。我以为那会是最好的一个版本，但是不插电的这个版本也是另一番滋味。特别是全曲都是由乐队其他人来演唱的。<br>许多人都称赞李志乐队是国内顶尖，但具体到个人我想未必。可这么多年来李老师始终坚持用南京本地乐手，并且努力为乐队成员甚至其他南京乐队提供机会。很多人骂他崇洋媚外反xx之类的，他爱不爱国我不知道，但我看到过他为南京做过很多事情。</p>
<blockquote>
<p>曾看到过说侯牧人的一句话 正因为对这片土地爱的深沉，所以我才不满那些黑暗。用在李老师这也很合适。</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[待整理内容]]></title>
      <url>http://iminyao.com/2016/08/04/to-be-done/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li>HTML标准<ul>
<li><a href="http://www.w3.org/TR/html5/" target="_blank" rel="external">W3C官方HTML5标准</a></li>
<li><a href="https://html.spec.whatwg.org/multipage/" target="_blank" rel="external">Living HTML Standard(正在发展的HTML)</a></li>
<li><a href="http://r12a.github.io/apps/subtags/" target="_blank" rel="external">各国语言代码(meta lang)</a></li>
<li><a href="http://validator.w3.org/" target="_blank" rel="external">The W3C Markup Validation Service(HTML5在线验证)</a></li>
<li><a href="http://w3c.github.io/html-reference/" target="_blank" rel="external">HTML5完整元素列表</a></li>
<li><a href="http://caniuse.com/" target="_blank" rel="external">浏览器对HTML5支持检测</a></li>
<li><a href="http://html5doctor.com/" target="_blank" rel="external">HTML5 Doctor | HTML5语义使用技巧指南</a></li>
<li><a href="https://gsnedders.html5.org/outliner/" target="_blank" rel="external">HTML 5 Outliner | HTML5纲要在线生成器</a></li>
</ul>
</li>
<li>JavaScript扩展库<ul>
<li><a href="http://modernizr.com/" target="_blank" rel="external">HTML5浏览器支持情况JavaScript测试工具</a></li>
<li><a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills" target="_blank" rel="external">HTML5腻子脚本</a></li>
<li><a href="http://regexlib.com/" target="_blank" rel="external">Regular Expression Library | 正则表达式库</a></li>
<li><a href="http://www.useragentman.com/tests/html5Widgets/" target="_blank" rel="external">HTML5 Widgets(全面支持web表单的JavaScript补丁库)</a></li>
</ul>
</li>
<li>编码媒体文件工具(H.264即MP4)<ul>
<li><a href="http://audacity.sourceforge.net" target="_blank" rel="external">Audacity</a> WAV—&gt;MP3/Vorbis</li>
<li><a href="http://mirovideoconverter.com" target="_blank" rel="external">Miro Video Converter</a>  —&gt;WebM Theora H.264</li>
<li><a href="http://firefogg.org" target="_blank" rel="external">Firefogg</a> firefox插件：创建Theora/WebM</li>
<li><a href="http://handbrake.fr" target="_blank" rel="external">HandBrake</a> —&gt;H.264</li>
<li><a href="http://zendcoder.com" target="_blank" rel="external">Zendcoder</a> 专业处理工具</li>
</ul>
</li>
</ol>
<blockquote>
<p>视频格式其实包含三个标准</p>
</blockquote>
<ol>
<li>视频编解码器：<br>将视频压缩为数据流(H.264、Thera、WebM)</li>
<li>音频编解码器：压缩一个或多个音频文件(H.264使用MP3，Theora使用Vorbis)</li>
<li>容器(封装)格式：把音频、视频、描述性信息以及静态图片和字幕等填充物组合到一起。(.mp4——MPEG-4容器 .ogv——Ogg容器)</li>
</ol>
<h6 id="一般文件扩展名表示容器的格式"><a href="#一般文件扩展名表示容器的格式" class="headerlink" title="一般文件扩展名表示容器的格式"></a>一般文件扩展名表示容器的格式</h6><blockquote>
<p>HTML5浏览器支持标准</p>
</blockquote>
<table>
<thead>
<tr>
<th>格式</th>
<th>扩展名</th>
<th>MIME</th>
</tr>
</thead>
<tbody>
<tr>
<td>MP3</td>
<td>.mp3</td>
<td>audio/mp3</td>
</tr>
<tr>
<td>Ogg Vorbis</td>
<td>.ogg</td>
<td>audio/ogg</td>
</tr>
<tr>
<td>WAV</td>
<td>.wav</td>
<td>audio/wav</td>
</tr>
<tr>
<td>H.264</td>
<td>.mp4</td>
<td>audio/mp4</td>
</tr>
<tr>
<td>Ogg Theora</td>
<td>.ogv</td>
<td>audio/ogg</td>
</tr>
<tr>
<td>WebM</td>
<td>.webm</td>
<td>video/webm</td>
</tr>
</tbody>
</table>
<blockquote>
<p>MIME类型<br>MIME类型即所谓内容类型，就是一小段信息，表示某种Web资源的内容类型。<br>Web服务器把资源发给浏览器时会在前面发送MIME类型，用于浏览器判断如何处理后面的内容。<br>如果Web服务器发错MIME类型，即使是浏览器可以处理也会导致内容无法播放。</p>
</blockquote>
<h3 id="Flex布局"><a href="#Flex布局" class="headerlink" title="Flex布局"></a>Flex布局</h3><ul>
<li><a href="http://www.w3cplus.com/css3/a-visual-guide-to-css3-flexbox-properties.html" target="_blank" rel="external">图解CSS3 Flexbox属性</a></li>
<li><a href="http://www.w3.org/TR/css-flexbox/#box-model" target="_blank" rel="external">W3C</a></li>
<li><a href="http://www.w3cplus.com/css3/css3-flexbox-layout.html" target="_blank" rel="external">使用CSS3 Flexbox布局</a></li>
<li><p><a href="http://zh.learnlayout.com/flexbox.html" target="_blank" rel="external">flexbox</a></p>
</li>
<li><p><a href="http://www.w3cplus.com/css/creaet-equal-height-columns" target="_blank" rel="external">八种创建等高列布局</a></p>
<h3 id="瀑布流布局"><a href="#瀑布流布局" class="headerlink" title="瀑布流布局"></a>瀑布流布局</h3></li>
<li><p><a href="http://ued.taobao.org/blog/2011/09/waterfall/" target="_blank" rel="external">瀑布流布局浅析</a></p>
</li>
<li><a href="http://xiechengxiong.com/234.html" target="_blank" rel="external">瀑布流布局</a></li>
<li><a href="http://www.oschina.net/code/snippet_114440_10309" target="_blank" rel="external">原生JS实现的简单“瀑布流”布局</a></li>
<li><a href="http://www.htmleaf.com/ziliaoku/qianduanjiaocheng/201503091492.html" target="_blank" rel="external">使用纯CSS制作PINTEREST样式的瀑布流图片列布局</a></li>
</ul>
<h3 id="chrome-dev"><a href="#chrome-dev" class="headerlink" title="chrome dev"></a>chrome dev</h3><ol>
<li><a href="http://www.ibm.com/developerworks/cn/web/1410_wangcy_chromejs/" target="_blank" rel="external">使用 Chrome 开发者工具进行 JavaScript 问题定位与调试</a></li>
<li><a href="http://ued.taobao.org/blog/2012/06/debug-with-chrome-dev-tool/" target="_blank" rel="external">chrome developer tool 调试技巧</a></li>
<li><a href="http://www.cnblogs.com/wukenaihe/archive/2013/01/27/javascript%E8%B0%83%E8%AF%95.html" target="_blank" rel="external">Chrome developer tool介绍</a></li>
<li><a href="http://get.jobdeer.com/5982.get" target="_blank" rel="external">chrome调试工具常用功能整理</a></li>
<li><a href="http://ju.outofmemory.cn/entry/169407" target="_blank" rel="external">使用Chrome开发者工具断点调试JavaScript代码</a></li>
<li><a href="http://han.guokai.blog.163.com/blog/static/136718271201321402514114/" target="_blank" rel="external">Chrome 中的 JavaScript 断点设置和调试技巧</a></li>
</ol>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><ol>
<li><a href="https://github.com/v8/v8/blob/master/src/array.js" target="_blank" rel="external">V8-array.js</a></li>
<li><a href="http://www.zhouhua.info/2015/06/18/quicksort/" target="_blank" rel="external">深入了解javascript的sort方法</a></li>
</ol>
<h3 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h3><h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="https://www.ibm.com/developerworks/cn/web/1102_niugang_csrf/" target="_blank" rel="external">CSRF 攻击的应对之道</a></li>
<li><a href="http://www.cnblogs.com/hyddd/archive/2009/04/09/1432744.html" target="_blank" rel="external">浅谈CSRF攻击方式</a><h3 id="white-space"><a href="#white-space" class="headerlink" title="white-space"></a>white-space</h3><h5 id="white-space-属性设置如何处理元素内的空白。"><a href="#white-space-属性设置如何处理元素内的空白。" class="headerlink" title="white-space 属性设置如何处理元素内的空白。"></a><code>white-space</code> 属性设置如何处理元素内的空白。</h5><img src="http://images.cnitblog.com/blog/92003/201306/04082312-cfa7c89c9ee54967a2f2b82b9aa82964.jpg" alt="pic"><br><a href="http://code.w3ctech.com/detail/2009" target="_blank" rel="external">demo</a></li>
</ol>
<h3 id="参考：-1"><a href="#参考：-1" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://www.w3school.com.cn/cssref/pr_text_white-space.asp" target="_blank" rel="external">http://www.w3school.com.cn/cssref/pr_text_white-space.asp</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vue.js入门系列(二) 组件及组件间通信]]></title>
      <url>http://iminyao.com/2016/08/03/vuejs-first-02/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-组件树"><a href="#1-组件树" class="headerlink" title="[1] 组件树"></a>[1] 组件树</h3><p>注册vue组件<br><figure class="highlight less"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">Vue</span><span class="selector-class">.component</span>(<span class="string">'my-component'</span>, &#123;</div><div class="line">    <span class="comment">// 模板</span></div><div class="line">    <span class="attribute">template</span>: <span class="string">'&lt;div&gt;&#123;&#123;msg&#125;&#125; &#123;&#123;privateMsg&#125;&#125;&lt;/div&gt;'</span>,</div><div class="line">    <span class="comment">// 接受参数</span></div><div class="line">    <span class="attribute">props</span>: &#123;</div><div class="line">        <span class="attribute">msg</span>: String</div><div class="line"></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 私有数据，需要在函数中返回以避免多个实例共享一个对象</span></div><div class="line">    <span class="attribute">data</span>: function () &#123;</div><div class="line">        return &#123;</div><div class="line">            <span class="attribute">privateMsg</span>: <span class="string">'component!'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>父组件中以自定义元素形式调用<br><code>&lt;my-component msg=&quot;hello&quot;&gt;&lt;/my-component&gt;</code><br>组件核心：</p>
<ul>
<li>模板（template）：模板声明了数据和最终展现给用户的DOM之间的映射关系。</li>
<li>初始数据（data）：一个组件的初始数据状态。对于可复用的组件来说，这通常是私有的状态。</li>
<li>接受的外部参数(props)：组件之间通过参数来进行数据的传递和共享。参数默认是单向绑定（由上至下），但也可以显式地声明为双向绑定。</li>
<li>方法（methods）：对数据的改动操作一般都在组件的方法内进行。可以通过v-on指令将用户输入事件和组件方法进行绑定。</li>
<li>生命周期钩子函数（lifecycle hooks）：一个组件会触发多个生命周期钩子函数，比如created，attached，destroyed等等。在这些钩子函数中，我们可以封装一些自定义的逻辑。和传统的MVC相比，可以理解为 Controller的逻辑被分散到了这些钩子函数中。</li>
<li>私有资源（assets）：Vue.js当中将用户自定义的指令、过滤器、组件等统称为资源。由于全局注册资源容易导致命名冲突，一个组件可以声明自己的私有资源。私有资源只有该组件和它的子组件可以调用。</li>
</ul>
<h3 id="2-组件通信"><a href="#2-组件通信" class="headerlink" title="[2] 组件通信"></a>[2] 组件通信</h3><blockquote>
<p>在 Vue.js 中，父子组件的关系可以总结为 props down, events up 。父组件通过 props 向下传递数据给子组件，子组件通过 events 给父组件发送消息。</p>
</blockquote>
<p>vue中有3种实现通信的方式，上面的props和event是两种，还有一种是slot。</p>
<h4 id="1-Props"><a href="#1-Props" class="headerlink" title="[1] Props"></a>[1] Props</h4><p>类似于用 v-bind 绑定 HTML 特性到一个表达式，也可以用 v-bind 绑定动态 Props 到父组件的数据。每当父组件的数据变化时，也会传导给子组件：<br><figure class="highlight django"><table><tr><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"parentMsg"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">child</span> <span class="attr">:my-message</span>=<span class="string">"parentMsg"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">Vue.component('child', &#123;</div><div class="line">  props: ['myMessage'],</div><div class="line">  template: '<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="template-variable">&#123;&#123; myMessage &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span>'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h4 id="2-自定义事件"><a href="#2-自定义事件" class="headerlink" title="[2] 自定义事件"></a>[2] 自定义事件</h4><p>每个 Vue 实例都实现了事件接口 Events interface:</p>
<ul>
<li>使用 $on(eventName) 监听事件</li>
<li>使用 $emit(eventName) 触发事件</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"counter-event-example"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; total &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button-counter</span> <span class="attr">v-on:increment</span>=<span class="string">"incrementTotal"</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button-counter</span> <span class="attr">v-on:increment</span>=<span class="string">"incrementTotal"</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">Vue.component(<span class="string">'button-counter'</span>, &#123;</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;button v-on:click="increment"&gt;&#123;&#123; counter &#125;&#125;&lt;/button&gt;'</span>,</div><div class="line">  <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">counter</span>: <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">methods</span>: &#123;</div><div class="line">    <span class="attr">increment</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.counter += <span class="number">1</span></div><div class="line">      <span class="keyword">this</span>.$emit(<span class="string">'increment'</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">&#125;)</div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#counter-event-example'</span>,</div><div class="line">  <span class="attr">data</span>: &#123;</div><div class="line">    <span class="attr">total</span>: <span class="number">0</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">methods</span>: &#123;</div><div class="line">    <span class="attr">incrementTotal</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.total += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h4 id="3-slots分发内容"><a href="#3-slots分发内容" class="headerlink" title="[3] slots分发内容"></a>[3] slots分发内容</h4><h3 id="3-参考"><a href="#3-参考" class="headerlink" title="[3] 参考:"></a>[3] 参考:</h3><ol>
<li><a href="https://vuefe.cn/guide/components.html" target="_blank" rel="external">vue组件</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[做一个乐观的悲观主义者]]></title>
      <url>http://iminyao.com/2016/07/26/2016-07-26/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>从去年12月底实习开始到现在，踏入社会的时间差不多也有半年时间了。这段时间里经历过黑房东、恶心的HR、坑人的医院、各种黑心的小商小贩…<br>对这个社会失望过、厌倦过，痛恨过，但也感受过一丝温暖。这份温暖不是来自什么社会主义国家，更不是什么为人民服务的某某党派，而是来自这个社会最不被看起的社会底层。</p>
<p>收快递的时候快递小哥看我两个大包裹直接给我送到屋里<br>拿外卖的时候一位年龄与自己相当女骑手把外卖递到手里突然说了一句“祝您用餐愉快”<br>上厕所的时候差点滑倒保洁阿姨连忙叮嘱我小心别摔倒<br>公交车女司机每到一站开关门都贴心的提醒乘客<br>在某前端大牛博客留言请教问题 秒回 时间是凌晨<br>房东大晚上顶着39度的高温带人来修空调 热得汗流浃背 听人说他光收房租一年百万<br>Uber司机绕一大圈子来接我 心想明明我走两步过去就可以不用绕这么一大圈子 结果司机说天这么不好让我走路 绕一点 不远<br>大老远看着电梯要关了 跨马加鞭跑过去看到维修的工人使劲按着电梯开关<br>还是在电梯里 一身泥垢的建筑工人紧紧靠在墙角 电梯开了两个人连忙跑下去给人让路<br>还有太多太多…</p>
<p>十年前李志向世界发出质问：“这个世界会好吗？”<br>十年后他坦言 不知道这个世界会不好 只希望靠自己的努力可以让世界变好 哪怕一点点<br>而我，我从没想过自己有能力让这个世界变得更好<br>这个世界可能永远不会像我们期望的那么好，但也绝没想象中的糟</p>
<p>巧的是十年前当李志发行《这个世界会好吗》时，好友万晓利紧随其后发行了新专辑<a href="http://music.163.com/#/album?id=15686" target="_blank" rel="external">《这一切没有想象的那么糟》</a></p>
<p>那些带给我温暖的人，愿你们也被世界温柔的对待，谢谢你们！</p>
<blockquote>
<p>我做不到让他们过得好，然后我得自己找点乐子。  －－ 李志</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vue.js实战系列(一)  一次失败的重构案例]]></title>
      <url>http://iminyao.com/2016/07/21/vuejs-notes-01/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="碎碎叨"><a href="#碎碎叨" class="headerlink" title="碎碎叨"></a>碎碎叨</h3><p>因为项目需求最近一直在看vuejs，一开始看了下关于vuejs的介绍，作者的博客，然后把官方文档看了下。怎么说呢，很多东西看起来简单，真正的用起来的时候会各种问题的。特别是对于之前react和angular都不熟悉的人来说一开始还是感觉不是很顺手。后面看了下网上的一些实例教程，感觉光看还是很虚，于是就用vuejs重写下之前网易新人培训时的项目。<br>首先说明，这是一个失败的案例，vuejs单纯的语法什么数据绑定什么的其实很简单，但是如何合适的划分各个组件，保持最合理的结构却是需要一定经验的。组件划分(大小)不合理时很容易就造成各个组件直接数据传递起来很困难。当然vuejs有vux，但是比较简单的单页面的是不太需要vux的。<br>现在的前端真是越来越难做了，学习vuejs不仅仅要学习一个新的框架，还要去学习围绕框架的一整个生态：vue-router vue-resource webpack种种，更重要的是要去理解组件化开发这一全新的理念思想。</p>
<h3 id="失败案例全过程"><a href="#失败案例全过程" class="headerlink" title="失败案例全过程"></a>失败案例全过程</h3><p>一开始将列表数据放入List.vue组件，写着写着就发现出问题了，因为文章数据不止List.vue需要，newPost.vue同样可以改变数据，全选删除操作也可以改变数据。<br>所以一开始就是错误的思路。vue的核心在于<em>组件及数据在组件的传递</em>，所以一开始只考虑组件而抛开数据是大错特错的，自上而下的弄明白整个数据在组件间的流动才能把握整改应用的架构。</p>
<p>所以正确的做法是数据在App.vue中取得，List.vue newPost.vue和operation.vue都要从父组件取得数据，然后修改后dispatch到父元素，付元素更新数据，然后其他子元素由于通过props与父元素数据链接，所以父组件更新会自组件也自动完成更新。<br><img src="/images/vuejs-20160721.jpg" alt="" title="数据流向图"><br>从图中可以看出，核心的数据有两个:原本的文章数组，新创建的文章对象</p>
<h4 id="一些注意的地方："><a href="#一些注意的地方：" class="headerlink" title="一些注意的地方："></a>一些注意的地方：</h4><ol>
<li><p>vuejs的资源命名约定</p>
<pre><code>一开始命名组件用类似`myArticle`这样的形式，结果控制台老是各种警告，后面仔细看了下文档，vuejs中对资源命名有明确的约定。
</code></pre><blockquote>
<p>一些资源，如组件和指令，是以 HTML 特性或 HTML 自定义元素的形式出现在模板中。因为 HTML 特性的名字和标签的名字不区分大小写，所以资源的名字通常需使用 kebab-case 而不是 camelCase 的形式，这不大方便。<br>Vue.js 支持资源的名字使用 camelCase 或 PascalCase 的形式，并且在模板中自动将它们转为 kebab-case</p>
</blockquote>
<figure class="highlight dust"><table><tr><td class="code"><pre><div class="line"><span class="xml">// 在组件定义中</span></div><div class="line"> components: <span class="template-variable">&#123;</span></div><div class="line"> // 使用 camelCase 形式注册</div><div class="line"> myComponent: &#123; /*... */ &#125;<span class="xml"></span></div><div class="line"> &#125;</div><div class="line"><span class="comment">&lt;!-- 在模板中使用 kebab-case 形式 --&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="name">my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>vuejs的Props同样有类似的规定：</p>
<blockquote>
<p>HTML 特性不区分大小写。名字形式为 camelCase 的 prop 用作特性时，需要转为 kebab-case</p>
<figure class="highlight django"><table><tr><td class="code"><pre><div class="line"><span class="xml">Vue.component('child', &#123;</span></div><div class="line">  // camelCase in JavaScript</div><div class="line">  props: ['myMessage'](),</div><div class="line">  template: '<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="template-variable">&#123;&#123; myMessage &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span>'</span></div><div class="line">&#125;)</div><div class="line"><span class="comment">&lt;!-- kebab-case in HTML --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">my-message</span>=<span class="string">"hello!"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></div></pre></td></tr></table></figure>
</blockquote>
<ol>
<li><code>dispatch</code></li>
</ol>
<h4 id="常用知识点："><a href="#常用知识点：" class="headerlink" title="常用知识点："></a>常用知识点：</h4><ol>
<li>访问原生DOM事件：<br>  在对文章进行编辑等操作时，需要判断操作的类型，在<code>html</code>中设置了<code>data-type</code>来区别，通过vue的指令绑定的事件无法直接通过<code>event</code>来获取事件对象。不过vue提供了<code>$event</code>变量来获取元素DOM事件。</li>
</ol>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"> &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"f-fl"</span> href=<span class="string">"javascript:void(0)"</span> data-<span class="class"><span class="keyword">type</span></span>=<span class="string">"editor"</span> <span class="meta">@click</span>=<span class="string">"opt($event,data)"</span>&gt;编辑&lt;/a&gt;</div><div class="line"> <span class="comment">// ...</span></div><div class="line">methods: &#123;</div><div class="line">  opt($event,data) &#123;</div><div class="line">  let <span class="class"><span class="keyword">type</span> </span>= $event.target.dataset.<span class="keyword">type</span>;</div><div class="line">  &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li><p>事件修饰符<br> 对于经常用到的<code>event.preventDefault()</code>和<code>event.stopPropagation()</code> vue提供两个事件修饰符<code>.prevent</code>和<code>.stop</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop</span>=<span class="string">"doThis"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">"onSubmit"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 修饰符可以串联 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop.prevent</span>=<span class="string">"doThat"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>除此之外，还有：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">`<span class="comment">&lt;!-- 添加事件侦听器时使用 capture 模式 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.capture</span>=<span class="string">"doThis"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 只当事件在该元素本身（而不是子元素）触发时触发回调 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.self</span>=<span class="string">"doThat"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>$index</code></p>
<pre><code>`v-for`块内有一个特殊的变量`$index`指代当前数组的索引：
</code></pre></li>
</ol>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">`&lt;<span class="selector-tag">ul</span> id=<span class="string">"example-2"</span>&gt;</div><div class="line">  &lt;<span class="selector-tag">li</span> v-<span class="keyword">for</span>=<span class="string">"item in items"</span>&gt;</div><div class="line">    &#123;&#123; parentMessage &#125;&#125; - &#123;&#123; <span class="variable">$index</span> &#125;&#125; - &#123;&#123; item<span class="selector-class">.message</span> &#125;&#125;</div><div class="line">  &lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
<p>除此之外还可以为索引指定别名：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">`&lt;<span class="selector-tag">div</span> v-<span class="keyword">for</span>=<span class="string">"(index, item) in items"</span>&gt;</div><div class="line">  &#123;&#123; index &#125;&#125; &#123;&#123; item<span class="selector-class">.message</span> &#125;&#125;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vue.js实战系列(二)  - 无限加载与分页]]></title>
      <url>http://iminyao.com/2016/07/18/vuejs-notes-02/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="无限加载"><a href="#无限加载" class="headerlink" title="无限加载"></a>无限加载</h3><h4 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构"></a>页面结构</h4><p>整个页面只需要两部分，一个是信息列表，一个是加载更多的按钮。<br><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">// 根组件App.vue</div><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">list</span> <span class="attr">:page</span>=<span class="string">"page"</span>&gt;</span><span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"button"</span> @<span class="attr">click</span>=<span class="string">"next"</span> &gt;</span>GO NEXT<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>核心的业务逻辑都在信息列表组件中，根组件与信息列表组件的联系在于，点击NEXT改变page的值，然后通过<code>props</code>将值传入子组件，然后子组件再获取新的数据。</p>
<h4 id="异步请求"><a href="#异步请求" class="headerlink" title="异步请求"></a>异步请求</h4><p>异步请求用了第三方库<code>reqwest</code>，不过vue自带有用于异步请求的<code>vue-resource</code>。</p>
<h5 id="vue引入第三方库的方法"><a href="#vue引入第三方库的方法" class="headerlink" title="vue引入第三方库的方法"></a>vue引入第三方库的方法</h5><ol>
<li>将库文件放入<code>static</code>文件夹，然后在<code>index.html</code>中引入</li>
<li><p>然后修改build的配置 <code>webpack.base.conf.js</code>添加<code>externals</code>属性：</p>
<pre><code><figure class="highlight less"><table><tr><td class="code"><pre><div class="line">        <span class="attribute">externals</span>: &#123;</div><div class="line">  <span class="string">'reqwest'</span>: <span class="string">'reqwest'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre></li>
<li><p>在项目中加载<code>import reqwest from &#39;reqwest&#39;</code></p>
</li>
</ol>
<h4 id="信息列表组件"><a href="#信息列表组件" class="headerlink" title="信息列表组件"></a>信息列表组件</h4><p>List.vue中通过<code>get</code>方法来更新<code>list</code>数组的数据，<code>get</code>方法需要在两个地方调用：一是在组件初始化的时候，在组件生命后期函数<code>created</code>中调用，另一个是在<code>page</code>值发生变化的时候调用。</p>
<h4 id="Note："><a href="#Note：" class="headerlink" title="Note："></a>Note：</h4><ol>
<li>可以在<code>&lt;style&gt;</code>标签中传入<code>scoped</code>，<code>&lt;style scoped&gt;&lt;/style&gt;</code>来使样式只作用于组件内部</li>
<li>vue中可以通过<code>watch</code>来监听属性的变化，然后进行后续的操作。<pre><code><figure class="highlight kotlin"><table><tr><td class="code"><pre><div class="line">      watch: &#123;</div><div class="line">  page (<span class="keyword">val</span>) &#123;</div><div class="line">    <span class="keyword">this</span>.<span class="keyword">get</span>()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre></li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://segmentfault.com/a/1190000005351971" target="_blank" rel="external">https://segmentfault.com/a/1190000005351971</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[杂七杂八 － 日常阅读的一些纪录]]></title>
      <url>http://iminyao.com/2016/07/17/z7z8/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="教程类："><a href="#教程类：" class="headerlink" title="教程类："></a>教程类：</h2><h3 id="1-设置网站的theme-color"><a href="#1-设置网站的theme-color" class="headerlink" title="1. 设置网站的theme-color"></a>1. 设置网站的theme-color</h3><p><a href="https://developers.google.com/web/updates/2014/11/Support-for-theme-color-in-Chrome-39-for-Android" target="_blank" rel="external">https://developers.google.com/web/updates/2014/11/Support-for-theme-color-in-Chrome-39-for-Android</a><br>现在在Chrome中可以通过简单的一个<code>meta</code>来设置网站toolbar的颜色 <code>&lt;meta name=&quot;theme-color&quot; content=&quot;#db5945&quot;&gt;</code></p>
<h3 id="2-Android查看网页源代码："><a href="#2-Android查看网页源代码：" class="headerlink" title="2. Android查看网页源代码："></a>2. Android查看网页源代码：</h3><p>chrome 网址前加<code>view-source:</code></p>
<h3 id="3-Android手机查看APP页面是Web模式-HTML5-还是Native模式"><a href="#3-Android手机查看APP页面是Web模式-HTML5-还是Native模式" class="headerlink" title="3. Android手机查看APP页面是Web模式(HTML5)还是Native模式:"></a>3. Android手机查看APP页面是Web模式(HTML5)还是Native模式:</h3><ul>
<li>设置下「开发者选项 - 显示布局边界」</li>
<li>整个界面很多框框的是Native, 一个大框的就是webview</li>
</ul>
<p><img src="/images/webview-native-20160719.jpeg" alt="开发者模式"><br><img src="/images/webview-native-20160719-01.jpeg" alt="淘宝页面1"><br><img src="/images/webview-native-20160719-02.jpeg" alt="淘宝页面2"></p>
<h3 id="4-MIUI7-Google框架安装教程"><a href="#4-MIUI7-Google框架安装教程" class="headerlink" title="4. MIUI7 Google框架安装教程"></a>4. MIUI7 Google框架安装教程</h3><p><a href="http://tw.miui.com/thread-20157-1-1.html" target="_blank" rel="external">http://tw.miui.com/thread-20157-1-1.html</a><br>        如何开启Google Now<a href="https://zhuanlan.zhihu.com/p/22058052?refer=appsolution" target="_blank" rel="external">https://zhuanlan.zhihu.com/p/22058052?refer=appsolution</a></p>
<h3 id="5-MIUI系统私密相册无法设置密码-amp-amp-无法从小米商店外更新应用"><a href="#5-MIUI系统私密相册无法设置密码-amp-amp-无法从小米商店外更新应用" class="headerlink" title="5. MIUI系统私密相册无法设置密码&amp;&amp;无法从小米商店外更新应用"></a>5. MIUI系统私密相册无法设置密码&amp;&amp;无法从小米商店外更新应用</h3><blockquote>
<p>私密相册在设置手势密码后无法点击确定按钮，只能点击取消<br> 应用程序从小米商店外更新时同样只能点击取消，不能点击确定</p>
</blockquote>
<p>手机中装了蓝色广播过滤器，可能是由于这一类控制屏幕亮度的软件使确定按钮无法点击，关闭想过软件即可。</p>
<h2 id="问题类："><a href="#问题类：" class="headerlink" title="问题类："></a>问题类：</h2><h3 id="1-一个有趣的熟悉-pointer-events"><a href="#1-一个有趣的熟悉-pointer-events" class="headerlink" title="1. 一个有趣的熟悉 pointer-events"></a>1. 一个有趣的熟悉 pointer-events</h3><p>pointer-events用于设置元素是否能够成为鼠标事件目标(event.target)<br>将其值设置为none时，元素永远不会成为鼠标事件的target。但是，当其后代元素的pointer-events属性指定其他值时，鼠标事件可以指向后代元素，在这种情况下，鼠标事件将在捕获或冒泡阶触发父元素的事件侦听器。<br>更多:</p>
<ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/pointer-events" target="_blank" rel="external">pointer-events</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2011/12/css3-pointer-events-none-javascript/" target="_blank" rel="external">CSS3 pointer-events:none应用举例及扩展</a></li>
</ol>
<h3 id="2-textarea设置placeholder无法显示"><a href="#2-textarea设置placeholder无法显示" class="headerlink" title="2. textarea设置placeholder无法显示"></a>2. textarea设置placeholder无法显示</h3><blockquote>
<p>the opening and closing tags for the <code>&lt;textarea&gt;</code> element must be on the same line, otherwise a newline character occupies it. The placeholder will therefore not be displayed since the input area contains content</p>
</blockquote>
<p> Reference:</p>
<pre><code>1. [html5-textarea-placeholder-not-appearing](http://stackoverflow.com/questions/10186913/html5-textarea-placeholder-not-appearing)
</code></pre><h3 id="3-encodeURI与encodeURIComponent"><a href="#3-encodeURI与encodeURIComponent" class="headerlink" title="3. encodeURI与encodeURIComponent"></a>3. encodeURI与encodeURIComponent</h3><h4 id="1-区别"><a href="#1-区别" class="headerlink" title="1. 区别"></a>1. 区别</h4><table>
<thead>
<tr>
<th></th>
<th>encodeURI</th>
<th>encodeURIComponent</th>
</tr>
</thead>
<tbody>
<tr>
<td>不会编码字符</td>
<td>ASCII字母，数字，~!@#$&amp;*()=:/,;?+’</td>
<td>ASCII字母 数字 ~！*()’</td>
</tr>
</tbody>
</table>
<h4 id="2-用法："><a href="#2-用法：" class="headerlink" title="2. 用法："></a>2. 用法：</h4><pre><code>1.  编码整个URL，然后需要使用这个URL，那么用encodeURI
</code></pre>   <figure class="highlight perl"><table><tr><td class="code"><pre><div class="line">encodeURI(<span class="string">"http://www.cnblogs.com/season-huang/some other thing"</span>);</div><div class="line"><span class="regexp">//</span> 编码后</div><div class="line"><span class="string">"http%3A%2F%2Fwww.cnblogs.com%2Fseason-huang%2Fsome%20other%20thing"</span></div></pre></td></tr></table></figure>
<pre><code>2. 编码URL中的参数的时候，encodeURIComponent是最好方法
</code></pre>   <figure class="highlight qml"><table><tr><td class="code"><pre><div class="line">	<span class="built_in">var</span> param = <span class="string">"http://www.cnblogs.com/season-huang/"</span>; <span class="comment">//param为参数</span></div><div class="line">param = <span class="built_in">encodeURIComponent</span>(param);</div><div class="line"><span class="built_in">var</span> <span class="built_in">url</span> = <span class="string">"http://www.cnblogs.com?next="</span> + param;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">url</span>) <span class="comment">//"http://www.cnblogs.com?next=http%3A%2F%2Fwww.cnblogs.com%2Fseason-huang%2F"</span></div></pre></td></tr></table></figure>
<h3 id="3-CSS-input-type-file-样式美化"><a href="#3-CSS-input-type-file-样式美化" class="headerlink" title="3. CSS input[type=file]样式美化"></a>3. CSS input[type=file]样式美化</h3><blockquote>
<p>HTML中原始的<code>file</code>类型表单后面会带有上传提示的文字，而且表单中的文字无法更改，要想实现<code>file</code>表单的美化，通常的做法是将<code>file</code>控件包裹着一个可点击的<code>&lt;a&gt;</code>标签中，然后通过设置透明度为0来实现原本表单本身的样式。（通过<code>visibility:hidden</code>无法实现，因为设置后表单区域无法点击触发上传）</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">// html code</span></div><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"javascript:;"</span> class=<span class="string">"a-upload"</span>&gt;</div><div class="line">    &lt;<span class="selector-tag">input</span> type=<span class="string">"file"</span> name=<span class="string">""</span> id=<span class="string">""</span>&gt;上传文件</div><div class="line">&lt;/a&gt;</div><div class="line"></div><div class="line"><span class="comment">// css code</span></div><div class="line"><span class="selector-class">.a-upload</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">cursor</span>: pointer;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#888</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#fafafa</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">    <span class="attribute">display</span>: inline-block;</div><div class="line">    *<span class="attribute">display</span>: inline;	<span class="comment">// IE</span></div><div class="line">    *zoom: <span class="number">1</span></div><div class="line">&#125;</div><div class="line"><span class="selector-class">.a-upload</span>  <span class="selector-tag">input</span> &#123;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">100px</span>;</div><div class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">filter</span>: alpha(opacity=<span class="number">0</span>);	<span class="comment">// IE</span></div><div class="line">    <span class="attribute">cursor</span>: pointer</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="总结类："><a href="#总结类：" class="headerlink" title="总结类："></a>总结类：</h2><h3 id="1-移动端样式小技巧"><a href="#1-移动端样式小技巧" class="headerlink" title="1. 移动端样式小技巧"></a>1. <a href="https://segmentfault.com/a/1190000006237977" target="_blank" rel="external">移动端样式小技巧</a></h3><h3 id="2-移动端小技巧"><a href="#2-移动端小技巧" class="headerlink" title="2. 移动端小技巧"></a>2. <a href="http://www.w3cfuns.com/notes/18019/953b5e6ca9fe0553a645f926f3573fa8.html" target="_blank" rel="external">移动端小技巧</a></h3><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol>
<li><a href="http://www.haorooms.com/post/css_input_uploadmh" target="_blank" rel="external">css input[type=file] 样式美化</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[前端开发工具－Sublime Text配置和常用插件]]></title>
      <url>http://iminyao.com/2016/07/15/sublime-text/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>用ST有很长一段时间，记得一开始学习编程的时候用的编辑器就是ST，那个时候对于ST的使用和配置什么的基本上都是靠Google，然后照着一步步做，当时也没有好好整理下。现在刚换了电脑，要重新装下，正好把整个安装配置步骤和坑都记下来，省得以后再换电脑又要各种Google。</p>
<h3 id="2-or-3"><a href="#2-or-3" class="headerlink" title="2 or 3?"></a>2 or 3?</h3><p>之前用的2，因为当时很多插件在3上面都没法用，但是现在这么多年过去了，感觉3支持的插件应该也差不多了。</p>
<h3 id="Package-Control"><a href="#Package-Control" class="headerlink" title="Package Control"></a>Package Control</h3><p>要装插件首先要干嘛？当然是装插件管理插件。Package Control的安装是直接运行python代码的，`ctrol+``调出命令行粘贴代码即可。代码地址见:[<a href="https://packagecontrol.io/installation][1" target="_blank" rel="external">https://packagecontrol.io/installation][1</a>]</p>
<h3 id="插件列表"><a href="#插件列表" class="headerlink" title="插件列表"></a>插件列表</h3><ol>
<li>Emmet：[速查表][2] Tab键</li>
<li>JsFormat 右键或<code>Format:Javascript</code></li>
<li><p>SideBarEnhancements 菜单栏增强&amp;&amp;浏览器预览<br>preferences > package setting > side bar > Key Building-User，配置示例：</p>
 <figure class="highlight json"><table><tr><td class="code"><pre><div class="line">    [</div><div class="line">	&#123; <span class="attr">"keys"</span>: [<span class="string">"ctrl+shift+c"</span>], <span class="attr">"command"</span>: <span class="string">"copy_path"</span> &#125;,</div><div class="line">	//chrome</div><div class="line">	&#123; <span class="attr">"keys"</span>: [<span class="string">"f1"</span>], <span class="attr">"command"</span>: <span class="string">"side_bar_files_open_with"</span>,</div><div class="line">	         <span class="attr">"args"</span>: &#123;</div><div class="line">	            <span class="attr">"paths"</span>: [],</div><div class="line">	            <span class="attr">"application"</span>: <span class="string">"C:\\program files (x86)\\google\\chrome\\application\\chrome.exe"</span>,</div><div class="line">	            <span class="attr">"extensions"</span>:<span class="string">".*"</span> //匹配任何文件类型</div><div class="line">	        &#125;</div><div class="line">	&#125;,</div><div class="line">	//firefox</div><div class="line">	&#123; <span class="attr">"keys"</span>: [<span class="string">"f2"</span>], <span class="attr">"command"</span>: <span class="string">"side_bar_files_open_with"</span>,</div><div class="line">	        <span class="attr">"args"</span>: &#123;</div><div class="line">	            <span class="attr">"paths"</span>: [],</div><div class="line">	            <span class="attr">"application"</span>: <span class="string">"F:\\功能\\Firefox\\firefox.exe"</span>,</div><div class="line">	            <span class="attr">"extensions"</span>:<span class="string">".*"</span></div><div class="line">	        &#125;</div><div class="line">	 &#125;,</div><div class="line">	//ie</div><div class="line">	 &#123; <span class="attr">"keys"</span>: [<span class="string">"f3"</span>], <span class="attr">"command"</span>: <span class="string">"side_bar_files_open_with"</span>,</div><div class="line">	         <span class="attr">"args"</span>: &#123;</div><div class="line">	            <span class="attr">"paths"</span>: [],</div><div class="line">	            <span class="attr">"application"</span>: <span class="string">"C:\\program files (x86)\\Internet Explorer\\iexplore.exe"</span>,</div><div class="line">	            <span class="attr">"extensions"</span>:<span class="string">".*"</span></div><div class="line">	        &#125;</div><div class="line">	&#125;</div><div class="line">]</div></pre></td></tr></table></figure>
</li>
<li><p>TrailingSpaces  空格提示</p>
</li>
<li>CssComb CSS代码格式化  <code>ctrl shift C</code><br>插件依赖于node，需要配置node路径，<a href="https://github.com/csscomb/sublime-csscomb" target="_blank" rel="external">官方文档</a>中特别说明Mac中要改一下配置文件中的nodepath<blockquote>
<p><code>If node has been installed with NVM you need to make a symlink to node in /usr/local/bin. Using OS X, the binary path would typically be /Users/[your name]/.nvm/[node version]/bin/node</code></p>
<p>但是按照文档改了路径但是一直没生效，后来发现按上面的路径根本就没那个文件，正确路径为<code>/Users/vino/.nvm/versions/node/v4.4.4/bin/</code></p>
<pre><code>在线生成配置&lt;http://csscomb.com/config&gt;
</code></pre></blockquote>
</li>
<li>Autoprefixer CSS3似有前缀自动补全<pre><code>使用方法：在输入CSS3属性后（冒号前）按Tab键
</code></pre></li>
<li>BracketHighlighter 高亮显示匹配的括号、引号和标签,颜色配置见<a href="http://www.cnblogs.com/liu-l/p/3866458.html" target="_blank" rel="external">http://www.cnblogs.com/liu-l/p/3866458.html</a></li>
<li>Better Completion js库代码自动补全，支持自定义，需要配置Settings-User,复制Setting-default到里面然后即可自己定制</li>
<li>DocBlockr 快速添加代码注释</li>
<li>javascript next - ES6 syntax</li>
<li>SublimeLinter + Jshint + csshint</li>
<li>AutoFileName 文件路径自动补全</li>
<li>html-css-js-pretty 代码美化<pre><code>需要配置node.js路径 `/Users/vino/.nvm/versions/node/v4.4.4/bin/node`
</code></pre></li>
<li>markdown写作: markdown-editing + OmniMarkupPreviewer<ul>
<li>快捷键：<ul>
<li><code>mdi + tab</code> 插入图片</li>
<li><code>mdl + tab</code> 插入链接</li>
<li><code>ctl + cmd + 1~6</code> h1~h6</li>
<li><code>opt + cmd + o</code> 浏览器预览(实时刷新，牛逼)</li>
<li><code>opt + cmd + x</code> 导出为HTML</li>
</ul>
</li>
</ul>
</li>
<li>All Autocomplete 自动补全插件：<br>传统的Sublime Text自动补全插件仅仅在当前文件下工作。AllAutocomplete 可以搜索全部打开的标签页，这将极大的简化开发进程。</li>
<li>SublimeREPL 直接在编辑器中运行一个解释器</li>
<li>CanIUse</li>
<li>trimmer 删除空格</li>
<li>fileDiffs 文件差异比较</li>
<li><a href="https://github.com/facebookarchive/sublime-react" target="_blank" rel="external">ReactJS</a><br>插件依赖于 <a href="https://github.com/babel/babel-sublime" target="_blank" rel="external">babel</a>插件，配置也是在babel里面<br>配置:<br>Setting as the default syntax:<br><code>View -&gt; Syntax -&gt; Open all with current extension as... -&gt; Babel -&gt; JavaScript (Babel)</code><br>Setting a Color Scheme:<br><code>Preferences -&gt; Color Scheme -&gt; Babel</code></li>
</ol>
<h3 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h3><ol>
<li>Command+D向下同时选中下一个相同的文本</li>
<li>Ctrl+Command+G即可一次性选择全部的相同文本</li>
<li>Command+P切换文件 <code>@</code>搜索函数，<code>:</code>跳到指定行,<code>#</code>搜索文本。其实都有自己的快捷键，和Chrome devTools中差不多。</li>
<li>选择代码，command + / 注释(取消注释)</li>
</ol>
<h3 id="Sublime-Text自定制代码片段-Code-Snippets"><a href="#Sublime-Text自定制代码片段-Code-Snippets" class="headerlink" title="Sublime Text自定制代码片段(Code Snippets)"></a>Sublime Text自定制代码片段(Code Snippets)</h3><p><code>Tools -&gt; Developer -&gt; New Snipptes</code></p>
<figure class="highlight xhtml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">snippet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">content</span>&gt;</span>&lt;![CDATA[</div><div class="line">Hello, $&#123;1:this&#125; is a $&#123;2:snippet&#125;.</div><div class="line">]]&gt;<span class="tag">&lt;/<span class="name">content</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Optional: Set a tabTrigger to define how to trigger the snippet --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;tabTrigger&gt;hello&lt;/tabTrigger&gt; --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Optional: Set a scope to limit where the snippet will trigger --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;scope&gt;source.python&lt;/scope&gt; --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">snippet</span>&gt;</span></div></pre></td></tr></table></figure>
<p>我们只需把代码添加到<content>中的&lt;![CDATA[  ]]&gt;元素内即可<br><figure class="highlight django"><table><tr><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">content</span>&gt;</span>&lt;![CDATA[</span></div><div class="line">    <span class="template-tag">&#123;% <span class="name">codeblock</span> $&#123;1&#125; lang:javascript %&#125;</span><span class="xml"></span></div><div class="line">    <span class="template-tag">&#123;% <span class="name">endcodeblock</span> %&#125;</span><span class="xml"></span></div><div class="line">]]&gt;<span class="tag">&lt;/<span class="name">content</span>&gt;</span></div></pre></td></tr></table></figure></content></p>
<p>然后在<tabtrigger>中设置让Sublime Text自动补全代码片段的触发词（trigger keyword）<br><code>&lt;tabTrigger&gt;cb&lt;/tabTrigger&gt;</code><br>最后，我们定义代码片段的使用范围（scope）,多个scope用英文逗号隔开<br><code>&lt;scope&gt;source.md&lt;/scope&gt;</code></tabtrigger></p>
<h3 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h3><p>隔了两三年再来重新捣鼓ST的配置，发现依然有很多没彻底搞清楚的地方，同时也发现之前配置的时候觉得巨麻烦的地方其实一点也不麻烦，好好看下官方的文档是很容易理解的。还有就是之前的一些为CSS3 HTML5设计的插件基本上现在已经用不到了，只能说前端这个领域发展的太快了。前路漫漫，继续搬砖了</p>
<p>未完待续…</p>
<h3 id="2016-08-27-更"><a href="#2016-08-27-更" class="headerlink" title="2016.08.27 更"></a>2016.08.27 更</h3><p>试用了不下十个markdwon编辑器，最终还是转到了ST，Mac下专门的MD编辑器要么收费，要么做的垃圾，终于TM得不用再纠结了。</p>
<h3 id="2016-11-24-更"><a href="#2016-11-24-更" class="headerlink" title="2016.11.24 更"></a>2016.11.24 更</h3><p>之前Ubuntu上面用的2,昨天装了3。结果发现Ubuntu里面会自动把之前版本装的插件什么的同步到新装的版本里面，但是2和3的插件明显是不一样。<br>果不其然，打开包管理器install package一直显示没有可用的包，console里看了下显示错误<br><code>mnemonic XXX not found in menu XXX</code><br>于是upgrade package先更新了下package control就好了，然后把其他插件也更新下即可。</p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://packagecontrol.io/installation" target="_blank" rel="external">https://packagecontrol.io/installation</a></li>
<li><a href="http://docs.emmet.io/cheat-sheet/" target="_blank" rel="external">http://docs.emmet.io/cheat-sheet/</a></li>
<li><a href="http://www.jianshu.com/p/335b7d1be39e" target="_blank" rel="external">Sublime3下两款Markdown插件</a></li>
<li><a href="http://9iphp.com/web/html/sublime-text-code-snippets.html" target="_blank" rel="external">Sublime Text自定制代码片段</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vue.js入门系列(一) 学习资源篇]]></title>
      <url>http://iminyao.com/2016/07/13/vuejs-first/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="作者主页："><a href="#作者主页：" class="headerlink" title="作者主页："></a>作者主页：</h3><ol>
<li>尤雨溪专栏 <a href="https://zhuanlan.zhihu.com/p/20302927" target="_blank" rel="external">https://zhuanlan.zhihu.com/p/20302927</a></li>
<li>勾股博客 <a href="http://jiongks.name/" target="_blank" rel="external">http://jiongks.name/</a></li>
</ol>
<h3 id="vuejs介绍："><a href="#vuejs介绍：" class="headerlink" title="vuejs介绍："></a>vuejs介绍：</h3><ol>
<li><a href="https://zhuanlan.zhihu.com/p/20302927?refer=evanyou" target="_blank" rel="external">Vue.js：a (re)introduction</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/20814761?refer=evanyou" target="_blank" rel="external">https://zhuanlan.zhihu.com/p/20814761?refer=evanyou</a></li>
<li><a href="http://www.csdn.net/article/1970-01-01/2825439" target="_blank" rel="external">Vue.js：轻量高效的前端组件化方案</a></li>
<li><a href="https://github.com/vuejs/vuex/blob/master/docs/zh-cn/intro.md" target="_blank" rel="external">什么是Vuex</a></li>
<li><a href="https://github.com/vuejs/vue-resource/blob/master/docs/http.md" target="_blank" rel="external">vue-resource</a></li>
</ol>
<h3 id="实战demo："><a href="#实战demo：" class="headerlink" title="实战demo："></a>实战demo：</h3><ol>
<li><a href="https://segmentfault.com/a/1190000005009052" target="_blank" rel="external">Vue构建单页应用最佳实战-1</a></li>
<li><a href="https://segmentfault.com/a/1190000005268225" target="_blank" rel="external">Vue构建单页应用最佳实战-2</a></li>
<li><a href="https://segmentfault.com/a/1190000005351971" target="_blank" rel="external">Vue.js 开发实践：实现精巧的无限加载与分页功能</a></li>
<li><a href="https://segmentfault.com/a/1190000005891026" target="_blank" rel="external">使用 Vuex + Vue.js 构建单页应用</a></li>
<li><a href="http://www.cnblogs.com/keepfool/p/5657065.html" target="_blank" rel="external">vue-resource实战</a></li>
</ol>
<h3 id="数据绑定："><a href="#数据绑定：" class="headerlink" title="数据绑定："></a>数据绑定：</h3><ol>
<li><a href="http://jimliu.net/2016/04/29/a-brief-look-at-vue-2-reactivity/" target="_blank" rel="external">Vue 2.0数据绑定实现一瞥</a></li>
</ol>
<h3 id="源码："><a href="#源码：" class="headerlink" title="源码："></a>源码：</h3><ol>
<li><a href="http://jiongks.name/blog/vue-code-review/" target="_blank" rel="external">Vue.js 源码学习笔记</a></li>
</ol>
<h3 id="vue-js-webpack"><a href="#vue-js-webpack" class="headerlink" title="vue.js + webpack:"></a>vue.js + webpack:</h3><p><a href="http://jiongks.name/blog/just-vue/" target="_blank" rel="external">Vue + webpack 项目实践</a></p>
<h3 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h3><p><a href="https://github.com/vuejs/vue-devtools" target="_blank" rel="external">vue-devtools</a></p>
<h3 id="编辑器设置"><a href="#编辑器设置" class="headerlink" title="编辑器设置"></a>编辑器设置</h3><ol>
<li>webstorm无法识别<code>.vue</code>的文件，可以通过 设置－File Type － HTML －添加<code>*.vue</code></li>
<li>vue-syntax-hightlight：sublime text 的 vue 文件的高亮插件，Vuejs Snippets:代码提示</li>
</ol>
<h3 id="组件化："><a href="#组件化：" class="headerlink" title="组件化："></a>组件化：</h3><p>Vue.js 设计了一个 *.vue 格式的文件，令每一个组件的样式、模板和脚本集合成了一整个文件， 每个文件就是一个组件，同时还包含了组件之间的依赖关系<br><img src="http://vuejs.org/images/vue-component.png" alt="vue"></p>
<h3 id="vue-cli"><a href="#vue-cli" class="headerlink" title="vue-cli"></a>vue-cli</h3><p>Vue.js 提供一个官方命令行工具，可用于快速搭建大型单页应用。该工具提供开箱即用的构建工具配置，带来现代化的前端开发流程。只需一分钟即可启动带热重载、保存时静态检查以及可用于生产环境的构建配置的项目：<a href="https://github.com/vuejs/vue-cli" target="_blank" rel="external">https://github.com/vuejs/vue-cli</a><br><figure class="highlight gams"><table><tr><td class="code"><pre><div class="line"># 全局安装 vue-cli</div><div class="line"><span class="symbol">$</span> npm install -g vue-cli</div><div class="line"># 创建一个基于 <span class="string">"webpack"</span> 模板的新项目</div><div class="line"><span class="symbol">$</span> vue init webpack my-project</div><div class="line"><span class="symbol">$</span> cd my-project</div><div class="line"># 安装依赖</div><div class="line"><span class="symbol">$</span> npm install</div><div class="line"><span class="symbol">$</span> npm run dev   <span class="comment">// 开启本地服务器</span></div><div class="line"><span class="symbol">$</span> npm run build <span class="comment">// 构建项目</span></div></pre></td></tr></table></figure></p>
<h3 id="vue-router使用示例"><a href="#vue-router使用示例" class="headerlink" title="vue-router使用示例"></a>vue-router使用示例</h3><figure class="highlight xquery"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> VueRouter from <span class="string">'vue-router'</span></div><div class="line">//注册两个插件</div><div class="line">Vue.use(VueRouter)</div><div class="line">const router = new VueRouter()</div><div class="line">// 路由<span class="keyword">map</span></div><div class="line">router.<span class="keyword">map</span>(&#123;</div><div class="line">  <span class="string">'/hello'</span>: &#123;</div><div class="line">    component: Hello</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line">// 重定向，<span class="keyword">map</span>中没定义的路径全部重定向到此</div><div class="line">router.redirect(&#123;</div><div class="line">  <span class="string">'*'</span>: <span class="string">'/hello'</span></div><div class="line">&#125;,</div><div class="line"><span class="string">'/time-entries'</span>: &#123;</div><div class="line">    component: TimeEntries,</div><div class="line">    subRoutes: &#123;</div><div class="line">      <span class="string">'/log-time'</span>: &#123;</div><div class="line">        component: LogTime</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">router.<span class="keyword">start</span>(App, <span class="string">'#app'</span>)</div></pre></td></tr></table></figure>
<h3 id="周边工具"><a href="#周边工具" class="headerlink" title="周边工具"></a>周边工具</h3><p>vue-loader：与 Webpack 结合进行组件化开发</p>
<p>vueify：与 Gulp 结合进行组件化开发</p>
<p>vue-router：路由</p>
<p>vue-validator：表单验证库</p>
<p>vue-resource：网络请求库</p>
<p>vue-component-complier：与其他预编译器结合</p>
<p>vue-touch：事件模拟</p>
<p>meteor-vue：meteor 与 vue 结合开发</p>
<p>vue-typeahead：搜索输入提前查询补全</p>
<p>vue-i18n：i18n</p>
<p>vue-devtools：配合 chrome 的开发插件，调试时可用</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Github Page + Hexo搭建博客指南]]></title>
      <url>http://iminyao.com/2016/07/12/githubpage-hexo/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>12年高考结束的那个夏天开始接触博客，一开始接触的是<a href="http://blog.sina.com.cn/jzwmxz" target="_blank" rel="external">新浪博客</a>。大一的时候正逢个人博客兴起，网上铺天盖地的个人博客，那个时候狠了狠心花钱在GoDaddy上买了域名服务器，然后用worldpress搭建了自己的第一个博客，现在依然记得当时因为域名解析的问题好几个晚上没睡着觉。再后来国内的云服务商起步，于是用上了免费的SAE，后面阿里云又异军突起，于是又换上了阿里云。那个时候疯狂的喜欢上了独立音乐，于是在阿里云买了云服务器，搭起了<a href="http://www.iminyao.com" target="_blank" rel="external">爱民谣</a>。到这个时候自己也算是个老司机了。</p>
<p>随着不断的更换平台，随之而来的是博客迁移的问题。大一时候写的文章在后来换服务器的时候直接就丢弃了，后面换来换去也厌倦了，wordpress也过时了，个人建站也玩够了，索性就直接用Github issue来记东西，这样就免去了博客迁移的麻烦，这段时间也是自己不断学习快速成长的时候。虽然issue有很多限制，但是也一直没换。</p>
<p>而现在终于毕业了，这个毕业季经历了太多，从跟网易解约，到后面找工作，现在想想真的不知道这几个月是怎么熬过来的。可能真的要感谢女朋友，没有他的陪伴和鼓励，我想我很难熬过那段时光。<br>Anyway，一切都暂时告一段落了，现在也算稳定下来了，工作之余也有一些自己的时间了。正好前两天刷微博无意看到GitHub+Hexo建站的教程。很符合自己的需求：免费、不存在迁移问题也很cool。</p>
<p>下面是此博客搭建的完整过程。</p>
<h3 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h3><p>Hexo建站需要Node.js和Git，作为一个FEer，这个自不用说。</p>
<h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><figure class="highlight avrasm"><table><tr><td class="code"><pre><div class="line">npm install hexo-<span class="keyword">cli</span> -g</div></pre></td></tr></table></figure>
<p>切到本地Hexo目录，然后初始化：<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ hexo init</div><div class="line">$ npm install</div></pre></td></tr></table></figure></p>
<h3 id="部署运行命令"><a href="#部署运行命令" class="headerlink" title="部署运行命令"></a>部署运行命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ hexo g <span class="comment"># hexo generate 生成静态文件，保存在public目录下</span></div><div class="line">$ hexo s <span class="comment"># hexo server 启动本地服务器 localhost:4000</span></div><div class="line">$ hexo d <span class="comment"># hexo deploy 部署到远端</span></div><div class="line">$ hexo d -g <span class="comment">#生成部署</span></div><div class="line">$ hexo s -g <span class="comment">#生成预览</span></div></pre></td></tr></table></figure>
<h3 id="Github-Pages设置"><a href="#Github-Pages设置" class="headerlink" title="Github Pages设置"></a>Github Pages设置</h3><p>首先要创建博客的Repository，且项目名称必须为<code>&lt;username&gt;.github.io</code>。然后需要配置SSH密匙，平时用Github的话肯定已经配置过密匙了，这一步就可以省略了，具体的步骤见<a href="http://my.oschina.net/ryaneLee/blog/638440" target="_blank" rel="external">http://my.oschina.net/ryaneLee/blog/638440</a>。现在就已经和Github建立了连接。</p>
<h3 id="部署Hexo到Github"><a href="#部署Hexo到Github" class="headerlink" title="部署Hexo到Github"></a>部署Hexo到Github</h3><p>修改根目录下配置文件<code>_config.yml</code><br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">deploy:</div><div class="line">  <span class="built_in">type</span>: git</div><div class="line">  repository: https://github.com/vino24/vino24.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure></p>
<p>然后<code>hexo d -g</code>，按提示输入用户名和密码即可。</p>
<p>2016.12.24 更</p>
<p>在新的电脑中重新部署之后hexo d部署的时候每次都要输入用户名和密码，搜了下发现是repository设置的问题，把https改成git即可<br><code>repository: git@github.com:vino24/vino24.github.io.git</code></p>
<h3 id="绑定独立域名"><a href="#绑定独立域名" class="headerlink" title="绑定独立域名"></a>绑定独立域名</h3><h4 id="配置CNAME文件"><a href="#配置CNAME文件" class="headerlink" title="配置CNAME文件"></a><strong>配置CNAME文件</strong></h4><p>在source文件夹下创建CNAME文件，然后将域名添加进去</p>
<h4 id="DNS解析"><a href="#DNS解析" class="headerlink" title="DNS解析"></a><strong>DNS解析</strong></h4><p>跟之前一样，略。Github Page的IP地址见官方文档。<a href="https://help.github.com/articles/what-ip-addresses-does-github-use-that-i-should-whitelist/" target="_blank" rel="external">https://help.github.com/articles/what-ip-addresses-does-github-use-that-i-should-whitelist/</a></p>
<h3 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h3><p><a href="https://hexo.io/themes/" target="_blank" rel="external">hexo官方主题</a>，选择合适的主题然后themes目录下<code>git clone</code>下来，在根目录配置文件中修改<code>theme</code>参数即可。</p>
<h3 id="写文章"><a href="#写文章" class="headerlink" title="写文章"></a>写文章</h3><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ hexo new <span class="string">"文章标题"</span>  // 在source_posts下生成 `.md`文件，编辑文件即可。</div><div class="line">$ hexo new page <span class="string">"页面标题"</span> // 新建页面</div></pre></td></tr></table></figure>
<h3 id="附录："><a href="#附录：" class="headerlink" title="附录："></a>附录：</h3><ol>
<li>hexo目录结构<br>├── .deploy #需要部署的文件<br>├── node_modules #Hexo插件<br>├── public #生成的静态网页文件<br>├── scaffolds #模板<br>├── source #博客正文和其他源文件，404、favicon、CNAME 都应该放在这里<br>| ├── _drafts #草稿<br>| └── _posts #文章<br>├── themes #主题<br>├── _config.yml #全局配置文件<br>└── package.json</li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzI4MzE2MTQ5Mw==&amp;mid=401679929&amp;idx=1&amp;sn=bd752ae5ac550b4bf4dcccb1c12aa2b1&amp;scene=18#wechat_redirect" target="_blank" rel="external">全局配置_config.yml</a></li>
</ol>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ol>
<li><code>_config.yml</code>中所有配置项<code>:</code>和后面的值之间要空一格。</li>
<li>更换主题之类的可能会有缓存问题，可以先用<code>hexo clean</code>然后再生成部署。</li>
<li>某些版本的server模块可能没有预装，可以通过<code>hexo</code>来查看是否有<code>server</code>选项来判断，没有的话需要手动安装下<code>sudo npm install hexo-server --save</code></li>
<li>一开始有的地方出现乱码，后在设置<code>language</code>为<code>zh-CN</code>后问题自动解决。</li>
<li>主题的配置文件中<code>duoshuo</code>这一项填入的是新建的此站点域名部分，即<domain>.duoshuo.com中<code>domain</code>这部分。</domain></li>
<li>要使用自己的搜索需要安装<code>hexo-generator-search</code>插件</li>
<li>DNS解释的时候，官方文档上显示有两个IP，但是网站开始加载时一直很慢，很久才得到响应，后来删除了一个IP立马速度就快了。</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://my.oschina.net/ryaneLee/blog/638440" target="_blank" rel="external">http://my.oschina.net/ryaneLee/blog/638440</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzI4MzE2MTQ5Mw==&amp;mid=401679929&amp;idx=1&amp;sn=bd752ae5ac550b4bf4dcccb1c12aa2b1&amp;scene=18#wechat_redirect" target="_blank" rel="external">http://mp.weixin.qq.com/s?__biz=MzI4MzE2MTQ5Mw==&amp;mid=401679929&amp;idx=1&amp;sn=bd752ae5ac550b4bf4dcccb1c12aa2b1&amp;scene=18#wechat_redirect</a></li>
<li><a href="https://segmentfault.com/a/1190000004947261" target="_blank" rel="external">https://segmentfault.com/a/1190000004947261</a></li>
<li><a href="https://www.haomwei.com/technology/maupassant-hexo.html" target="_blank" rel="external">https://www.haomwei.com/technology/maupassant-hexo.html</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[实践中页面间信息交换的两种方式]]></title>
      <url>http://iminyao.com/2016/07/09/message-in-webview/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>最近在做一个基于高德地图的地点选择功能。大致的需求为：A页面输入关键词，然后跳转到B页面，B页面完成页面搜索，然后将所需数据传回给A。</p>
<p>考虑的方式有两种：localStorage和postMessage。由于第一种比较简单，所以首先用local Storage来实现需求。</p>
<h3 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h3><p>localStorage的核心在于A页面在B页面更改了localStorage时可以自动更新页面。用localStorage的方法实现只需在一个页面设置监听事件即可，另一个页面只需更改lcoalStorage中的值即可。</p>
<p>代码如下：<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">$(<span class="built_in">window</span>).on(<span class="string">'storage'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        $(<span class="string">'#img'</span>).attr(<span class="string">'src'</span>,localStorage.getItem(<span class="string">'imgUrl'</span>));</div><div class="line">        $(<span class="string">'#details'</span>).text(localStorage.getItem(<span class="string">'placeUrl'</span>));</div><div class="line">        $(<span class="string">'#name'</span>).text(localStorage.getItem(<span class="string">'placeName'</span>));</div><div class="line">    &#125;)</div></pre></td></tr></table></figure></p>
<p>在本地从文件打开访问是无法使用localStorage的，需要本地搭nginx服务器。</p>
<h3 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h3><p> 代码如下：<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">    <span class="comment">// 发送方</span></div><div class="line">    $(<span class="string">'input[type="button"]'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> mapWindow = <span class="built_in">window</span>.open(<span class="string">'d.html?s='</span> + $(<span class="string">'input[type="text"]'</span>).val() + <span class="string">'&amp;nw=1'</span>);</div><div class="line">        setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            mapWindow.postMessage(<span class="string">'hello'</span>, <span class="string">'http://192.168.199.191:8080'</span>);</div><div class="line">        &#125;,<span class="number">10000</span>);</div><div class="line">    &#125;)</div><div class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>,receiveMessage,<span class="literal">false</span>);</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">receiveMessage</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="comment">// if (e.origin ! = ) return;</span></div><div class="line">        $(<span class="string">'#name'</span>).text(e.data.placeName);</div><div class="line">        $(<span class="string">'#url'</span>).text(e.data.imgUrl);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 接收方</span></div><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>,receiveMessage,<span class="literal">false</span>);</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">receiveMessage</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="comment">// if (e.origin ! = ) return;</span></div><div class="line">        $(<span class="string">'#log'</span>).text(e.data);</div><div class="line">        e.source.postMessage(message,e.origin);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>postMessage方法的大致思路是:使用window.open()取得新window的引用，然后利用postMessage发送消息给接收页面，并且在自己的window上注册监听事件以处理接收页发过来的消息。在接收也要设置监听函数监听发送过来的消息。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ol>
<li>发送方在发送消息时需要设置计时器，因为发送消息时需要用到window.open()打开页面的mapWindow,如果立即发送消息的话由于新打开页面没有加载会导致取不到mapWindow的值，也就没法发出消息去。</li>
<li>由于在新页面有时会需要发送很多消息回去，所以在消息发过来时要将<code>e.source</code>保存下来，这样下次才能主动发消息回去。</li>
<li>localStorage方法在浏览器和Webview中都能正常运行，但是postMessage在Webview中可以发出消息（自身能收到消息），但是接收方无法接收到消息，有可能是容器本身的限制，至今也没有找到好的解决方法。</li>
<li>postMessage相较local Storage的优势在于其可以跨域使用，如果是同源的话可以直接使用window.open，两个页面之间可以直接相互操作彼此的DOM。除此之外iframe也可以实现通信，原理类似。详见<a href="http://www.cnblogs.com/codetker/p/4684240.html" target="_blank" rel="external">http://www.cnblogs.com/codetker/p/4684240.html</a></li>
</ol>
<h3 id="IOS-UIWebView中的坑"><a href="#IOS-UIWebView中的坑" class="headerlink" title="IOS UIWebView中的坑"></a>IOS UIWebView中的坑</h3><p>之前测试的时候没有测试过iPhone手机，结果应用到实际项目中时iPhone上面死活触发不了storageEvent事件，上网搜索后发现可能的情况有两种：</p>
<ol>
<li>UIWebView中是无法触发storageEvent的，<a href="https://bugs.webkit.org/show_bug.cgi?id=145565" target="_blank" rel="external">bug地址</a></li>
<li>WKWebView的config.xml中有一个配置项<code>DisableLocalStorageSyncWithUIWebView</code>，其值设置为true时storageEvent也是没法触发的。<br>咨询过其他同事后得知，虽然WKWebView出来很久了，但是在公司APP内使用的还是UIWebView，而由于UIWebView自身存在的bug导致了storageEvent事件无法触发。最终只得用内部的一些方法替代。</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank" rel="external">Web Storage API</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" target="_blank" rel="external">window.postMessage</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2012/02/html5-web-messaging-cross-document-messaging-channel-messaging/" target="_blank" rel="external">HTML5 web通信（跨文档通信/通道通信）简介</a></li>
<li><a href="http://blog.csdn.net/willspace/article/details/49003963" target="_blank" rel="external"> iframe父子页面间通信总结</a></li>
<li><a href="https://bugs.webkit.org/show_bug.cgi?id=145565" target="_blank" rel="external">[UIWebView] local storage event listeners are not triggered</a></li>
<li><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=525262" target="_blank" rel="external">storage event not fired to other tabs</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript中的bind方法]]></title>
      <url>http://iminyao.com/2016/07/02/Function-prototype-bind/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h2><blockquote>
<p>bind()方法会创建一个新函数,称为绑定函数.当调用这个绑定函数时,绑定函数会以创建它时传入 bind()方法的第一个参数作为 this,传入 bind() 方法的第二个以及以后的参数加上绑定函数运行时本身的参数按照顺序作为原函数的参数来调用原函数.</p>
</blockquote>
<h2 id="bind函数的应用："><a href="#bind函数的应用：" class="headerlink" title="bind函数的应用："></a>bind函数的应用：</h2><ol>
<li><p>创建绑定函数</p>
<blockquote>
<p>bind() 最简单的用法是创建一个函数，使这个函数不论怎么调用都有同样的 this 值。JavaScript新手经常犯的一个错误是将一个方法从对象中拿出来，然后再调用，希望方法中的 this 是原来的对象。（比如在回调中传入这个方法。）如果不做特殊处理的话，一般会丢失原来的对象。从原来的函数和原来的对象创建一个绑定函数，则能很漂亮地解决这个问题：</p>
</blockquote>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">this</span>.x = <span class="number">9</span>; </div><div class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;</div><div class="line">  <span class="attr">x</span>: <span class="number">81</span>,</div><div class="line">  <span class="attr">getX</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.x; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.getX(); <span class="comment">// 81</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> getX = <span class="built_in">module</span>.getX;</div><div class="line">getX(); <span class="comment">// 9, 因为在这个例子中，"this"指向全局对象</span></div><div class="line"></div><div class="line"><span class="comment">// 创建一个'this'绑定到module的函数</span></div><div class="line"><span class="keyword">var</span> boundGetX = getX.bind(<span class="built_in">module</span>);</div><div class="line">boundGetX(); <span class="comment">// 81</span></div></pre></td></tr></table></figure>
<ol>
<li><p>分部函数（柯里化）：</p>
<blockquote>
<p>bind()的另一个最简单的用法是使一个函数拥有预设的初始参数.这些参数(如果有的话)作为bind()的第二个参数跟在this(或其他对象)后边,之后它们会被插入到目标函数的参数列表的前边,传递给绑定函数的参数会跟在这些参数的后边.</p>
</blockquote>
</li>
</ol>
<figure class="highlight qml"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">list</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">var</span> list1 = <span class="built_in">list</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></div><div class="line"></div><div class="line"><span class="comment">// 创建函数并给函数预设的打头参数</span></div><div class="line"><span class="built_in">var</span> leadingThirtysevenList = <span class="built_in">list</span>.bind(<span class="literal">undefined</span>, <span class="number">37</span>);</div><div class="line"></div><div class="line"><span class="built_in">var</span> list2 = leadingThirtysevenList(); <span class="comment">// [37]</span></div><div class="line"><span class="built_in">var</span> list3 = leadingThirtysevenList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [37, 1, 2, 3]</span></div></pre></td></tr></table></figure>
<ol>
<li><p>配合<code>setTimeout</code></p>
<blockquote>
<p>在默认情况下, 使用window.setTimeout()时,this 关键字会指向window (或全局) 对象. 当使用类的方法时,需要 this 引用类的实例,你可能需要显式的把 this 绑定到回调函数以便继续使用实例.</p>
</blockquote>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">LateBloomer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.petalCount = <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random() * <span class="number">12</span>) + <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 1秒后声明bloom</span></div><div class="line">LateBloomer.prototype.bloom = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">window</span>.setTimeout(<span class="keyword">this</span>.declare.bind(<span class="keyword">this</span>), <span class="number">1000</span>); <span class="comment">// 直接this.declare也能行，为什么？</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">LateBloomer.prototype.declare = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'I am a beautiful flower with '</span> +</div><div class="line">    <span class="keyword">this</span>.petalCount + <span class="string">' petals!'</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[实践中从PSD到最终页面的一些心得(一)]]></title>
      <url>http://iminyao.com/2016/05/31/psd-page-01/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p><img src="https://cloud.githubusercontent.com/assets/4004044/15664929/4bb65d8e-273a-11e6-927c-491dc9a6ca24.png" alt="PSD"></p>
<p>psd如上图，起初拿到视觉稿，考虑到如果一整块切下来可能图片有点大(后来将主体部分一整块切出压缩后发现其实只有100Kb)，所以就考虑将整个页面分成几大块。<br><img width="532" alt="2016-05-27 9 34 34" src="https://cloud.githubusercontent.com/assets/4004044/15665065/4615a0fa-273b-11e6-92d8-972ffbd2f2b9.png"><br><img width="377" alt="2016-05-31 2 22 27" src="https://cloud.githubusercontent.com/assets/4004044/15665067/461aaac8-273b-11e6-9c4f-d4391966dee1.png"><br><img width="374" alt="2016-05-31 2 22 51" src="https://cloud.githubusercontent.com/assets/4004044/15665066/46182d98-273b-11e6-879f-a667e6568fda.png"><br><img width="376" alt="2016-05-31 2 23 03" src="https://cloud.githubusercontent.com/assets/4004044/15665068/4620dc04-273b-11e6-8915-3673ff43054e.png"><br><img width="376" alt="2016-05-31 2 23 11" src="https://cloud.githubusercontent.com/assets/4004044/15665069/462535b0-273b-11e6-864d-6a62e77fce73.png"><br><img width="374" alt="2016-05-31 2 23 21" src="https://cloud.githubusercontent.com/assets/4004044/15665070/464fa368-273b-11e6-99c8-a9627ba32704.png"></p>
<p>切之前首先检查了下整个的背景和1、2、3、4、5、6那几条部分的背景，结果都是纯色，不含渐变。于是先把这两部分背景去掉。</p>
<p>然后先将头部切出来，宽度为750px；接着切主体部分，但是主体部分宽度只有680px左右，后来仔细看了psd后发现，头部之所以有整个psd那么宽，是因为里面有很多三角形点缀，所以这部分内容撑起了宽度，而主体部分去除背景后只剩中间内容部分，psd中如图所示部分是没有内容的，导出后不算在宽度中<br><img width="44" alt="2016-05-31 2 30 34" src="https://cloud.githubusercontent.com/assets/4004044/15665245/70ca7978-273c-11e6-89a6-c950bbf5ce3d.png"></p>
<p>到此处，前面的切图基本上失败了。头部可以设置宽度为100%来填充屏幕宽度，但是主体内容两边是有空白的，所以没法像头部一样设置width＝100%来搞定，这样一来主体部分和头底部的宽度是没办法相等的，而psd中二者是相同的。所以前面的切图思路是失败的。</p>
<p>其实仔细看一下psd，头底部和主体是有联系的，如图</p>
<p>所以最简单的办法是把整个头部和内容作为一部分切出来。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac下常用工具]]></title>
      <url>http://iminyao.com/2016/05/18/mac-devtools/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-Alfred"><a href="#一-Alfred" class="headerlink" title="一. Alfred"></a>一. Alfred</h3><p>1、安装</p>
<p>2、基础快捷键：option+space</p>
<p>3、打开应用程序：Alfred 几乎是一切程序的入口，你再也不需要找妈妈要开始菜单了。用快捷键呼出Alfred，输入任何一款应用程序的中文或英文名称，即可快速定位程序，回车打开。</p>
<p>4、简单查找文件：用快捷键呼出Alfred，键入空格，输入你要查找文件名，即可定位文件，回车打开，command+回车打开文件所在文件夹。</p>
<p>5、复杂操作文件：通过find、open、in等关键词搜索文件。find是定位文件，open是定位并打开文件，in是在文件中进行全文检索，三种检索方式基本上可以找到任何你想找的文件。</p>
<p>6、计算器</p>
<h3 id="二-brew"><a href="#二-brew" class="headerlink" title="二. brew"></a>二. brew</h3><ol>
<li>安装：<code>ruby  -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code></li>
<li><p>常用命令：</p>
<p> brew install wget # 安装源码<br> brew info svn # 显示软件的各种信息，包括版本啊源码地址啊等等<br> brew uninstall wget # 卸载软件，很爽，一键静默卸载<br> brew search git # 模糊搜索brew 支持的软件。如果不加软件名，就会列出所有它支持的软件。多的很。<br> brew list # 列出本机通过brew安装的所有软件<br>brew update # 跟新brew软件自身<br>brew upgrade wget # 更新安装过的软件,如果不加软件名，就更新所有可以更新的软件<br>brew cleanup # 清除下载的各种缓存</p>
</li>
</ol>
<h3 id="三-oh-my-zsh"><a href="#三-oh-my-zsh" class="headerlink" title="三. oh-my-zsh"></a>三. oh-my-zsh</h3><p>OX中默认的shell是bash，可以通过<code>echo $SHELL</code>来查看当前使用的shell。<br>要安装oh－my－zsh，首先要安装zsh，OS X自带了zsh，可以通过<code>zsh --version</code>来检查，也可以<code>cat /etc/shells</code>查看电脑上安装的所有shell，确认后切换默认shell <code>chsh -s /bin/zsh</code>,重开下terminal即可生效。</p>
<p>然后安装oh－my－zsh，<code>sh -c &quot;$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;</code></p>
<p>配置文件在<code>~/.zshrc</code>中</p>
<h3 id="四-图形化diff工具-DiffMerge"><a href="#四-图形化diff工具-DiffMerge" class="headerlink" title="四. 图形化diff工具 DiffMerge"></a>四. 图形化diff工具 DiffMerge</h3><p>配置 <a href="https://sourcegear.com/diffmerge/webhelp/sec__git__mac.html" target="_blank" rel="external">https://sourcegear.com/diffmerge/webhelp/sec__git__mac.html</a></p>
<p><code>git difftool</code>命令进行比较，使用<code>git mergetool</code>命令进行合并或冲突解决</p>
<h3 id="五-Git图形化工具-sourceTree"><a href="#五-Git图形化工具-sourceTree" class="headerlink" title="五. Git图形化工具 sourceTree"></a>五. Git图形化工具 sourceTree</h3><p>使用文档 <a href="http://www.jianshu.com/p/be9f0484af9d" target="_blank" rel="external">http://www.jianshu.com/p/be9f0484af9d</a></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="http://www.cnblogs.com/chijianqiang/p/alfred.html" target="_blank" rel="external">神兵利器——Alfred</a></li>
<li><a href="http://macshuo.com/?p=676" target="_blank" rel="external">终极shell</a></li>
<li><a href="http://blog.jobbole.com/80620/" target="_blank" rel="external">关于 Zsh，我最喜欢的那些特性</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac常用快捷键]]></title>
      <url>http://iminyao.com/2016/05/18/mac-shortcut-key/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-快捷键"><a href="#一-快捷键" class="headerlink" title="一. 快捷键"></a>一. 快捷键</h3><h4 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h4><p>cmd+delete：删除当前行。选中文件的时候直接删除文件。<br>cmd+tab：切换应用。<br>ctrl+ tab: 切换同一应用的窗口<br>cmd+w：关闭当前窗口</p>
<p>cmd+q：关闭当前应用。</p>
<p>cmd+n：新建窗口，比如打开新的Finder窗口，配合cmd+w很实用。</p>
<p>cmd+t：新建tab，支持tab模式的应用一般都支持这个快捷键。比如在safari，firefox，chrome下新建tab。</p>
<p>cmd+i: 显示文件的信息，查看文件大小，图片宽高的时候有用。</p>
<p>选中文件按空格预览：预览图片或者pdf文件时有用。配合方向键可以快速预览多张图片。</p>
<p>短按电源键：可以关闭屏幕。</p>
<h4 id="截图"><a href="#截图" class="headerlink" title="截图"></a><strong>截图</strong></h4><p>屏幕部分画面：command + Shift + 4；</p>
<p>截取当前窗口：command + Shift + 4，然后按一下空格；</p>
<p>全屏截图      ：command + Shift + 3；</p>
<p>备注：保存格式为(.png)，路径是在桌面上面</p>
<h5 id="文本操作"><a href="#文本操作" class="headerlink" title="文本操作"></a><strong>文本操作</strong></h5><p>shift+方向键：选择文本。</p>
<p>cmd+shift+方向键：快速选择当前行</p>
<p>ctrl+a / cmd+ &lt;–：当前行的最前端 ctrl+e/ cmd+ –&gt;：当前行的最尾端</p>
<p>cmd    + 上下键，可以回到文本顶部或者底部，在网页浏览器也能用；</p>
<p>浏览器中，cmd + L，光标快速定位到地址栏，按“tab”取消。</p>
<p><strong>cmd+Z：撤销,Shift + Command + Z: 撤销刚才的“撤销”动作</strong></p>
<p>cmd ＋O 打开文件</p>
<h4 id="剪切"><a href="#剪切" class="headerlink" title="剪切"></a><strong>剪切</strong></h4><p>先点击复制文件，然后转到你需要粘贴的目录，右键单击，此时按住 Option 键，你会发现菜单中的「粘贴到此处」项变成了「移动到此处」。<br><img src="http://jbcdn2.b0.upaiyun.com/2016/05/5dcaeec0cfc984f72acb8023d4ebd38a.png" alt="pic1"></p>
<h3 id="二-手势"><a href="#二-手势" class="headerlink" title="二. 手势"></a>二. 手势</h3><p>单指轻触就可以完成鼠标的单击效果，<br>双指轻触右半部分显示菜单，<br>双指上下滑动可以完成页面的上下滚动，<br>双指从↔️划可以切换窗口，浏览器中左右化back forward<br>三指朝外扩散可以显示桌面，<br>四指朝内收缩可以显示应用面板<br>五指朝外可以将所有窗口移动到视窗外</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://group.jobbole.com/19082/" target="_blank" rel="external">Mac 使用技巧</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[移动开发基础之viewport]]></title>
      <url>http://iminyao.com/2016/05/10/viewport/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="1-layout-viewport-浏览器默认viewport"><a href="#1-layout-viewport-浏览器默认viewport" class="headerlink" title="[1]layout viewport(浏览器默认viewport)"></a>[1]layout viewport(浏览器默认viewport)</h2><p>通俗的讲，移动设备上的viewport就是设备的屏幕上能用来显示我们的网页的那一块区域，在具体一点，就是浏览器上(也可能是一个app中的webview)用来显示网页的那部分区域，但viewport又不局限于浏览器可视区域的大小，它可能比浏览器的可视区域要大，也可能比浏览器的可视区域要小。在默认情况下，一般来讲，移动设备上的viewport都是要大于浏览器可视区域的，这是因为考虑到移动设备的分辨率相对于桌面电脑来说都比较小，所以为了能在移动设备上正常显示那些传统的为桌面浏览器设计的网站，移动设备上的浏览器都会把自己默认的viewport设为980px或1024px（也可能是其它值，这个是由设备自己决定的），但带来的后果就是浏览器会出现横向滚动条，因为浏览器可视区域的宽度是比这个默认的viewport的宽度要小的。</p>
<p><code>layout viewport = document.documentElement.clientWidth</code></p>
<p><img src="http://images.cnitblog.com/blog/130623/201407/300958475557219.png" alt="默认viewport的宽度"></p>
<h3 id="layout-viewport有什么作用？"><a href="#layout-viewport有什么作用？" class="headerlink" title="layout viewport有什么作用？"></a>layout viewport有什么作用？</h3><p>viewport的作用是创建一个虚拟的窗口(viewport)，而且这个虚拟窗口的分辨率接近于桌面显示器，Apple将其定位为980px(默认值),然后页面会以合适比例进行缩放。<br> <img src="http://www.myexception.cn/img/2012/06/24/1602488955.jpeg" alt="pic"></p>
<h2 id="2-visual-viewport"><a href="#2-visual-viewport" class="headerlink" title="[2]visual viewport"></a>[2]visual viewport</h2><blockquote>
<p>layout viewport 的宽度是大于浏览器可视区域的宽度的，而我们还需要一个viewport来代表 浏览器可视区域的大小，这个viewport叫做 visual viewport</p>
</blockquote>
<p><code>visual viewport = window.innerWidth</code></p>
<h2 id="3-ideal-viewport"><a href="#3-ideal-viewport" class="headerlink" title="[3] ideal viewport"></a>[3] ideal viewport</h2><p><a href="http://www.quirksmode.org/mobile/metaviewport/" target="_blank" rel="external">http://www.quirksmode.org/mobile/metaviewport/</a></p>
<h3 id="viewport-meta"><a href="#viewport-meta" class="headerlink" title="viewport meta"></a>viewport meta</h3><blockquote>
<p>设置layout viewport的宽度</p>
</blockquote>
<p><code>&lt;meta name=”viewport” content=”width=device-width, initial-scale=1.0, user-scalable=no”/&gt;</code></p>
<p>这个是最常见的一条viewport meta代码，将viewport定义为：宽度为设备宽度，初始缩放比例为1倍，禁止用户缩放。</p>
<p>这样我们专为移动端设计的页面就可以正常显示了。</p>
<p>设置前：<br><img src="http://www.myexception.cn/img/2012/06/24/1602488956.png" alt="pic"><br>设置后：<br><img src="http://www.myexception.cn/img/2012/06/24/1602488957.png" alt="pic1"></p>
<h3 id="width-device-width的值"><a href="#width-device-width的值" class="headerlink" title="width=device-width的值"></a>width=device-width的值</h3><p>在实际中不同的浏览器都给出了个定值：320px；这个值还是源于 Apple，因为早期iphone的分辨率为320px × 480px，大量为iphone量身定制的网站都设置了viewport:width=device-width，并且按照宽度320px来设计制作，所 以其他浏览器加入viewport支持时为了兼容性也将device-width定义为了320px。</p>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><ol>
<li><p><strong>如果不是专为移动端设计的页面可以不用设置viewport，而是通过media query来使页面在移动端也能很好的显示。</strong></p>
</li>
<li><p><strong>如果是专为移动端设计的页面设置<code>width=device-width</code>,然后制定缩放比例为1:1，即可实现页面很好的显示。</strong></p>
</li>
</ol>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="http://www.cnblogs.com/2050/p/3877280.html" target="_blank" rel="external">移动前端开发之viewport的深入理解</a></li>
<li><a href="http://www.quirksmode.org/mobile/viewports.html" target="_blank" rel="external">A tale of two viewports — part one</a></li>
<li><a href="http://www.quirksmode.org/mobile/viewports2.html" target="_blank" rel="external">A tale of two viewports — part two</a></li>
<li><a href="http://www.quirksmode.org/mobile/metaviewport/" target="_blank" rel="external">Meta viewport</a></li>
<li><a href="http://iminyao.com/2016/05/10/viewport/">两个viewport的故事</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[移动开发基础之device-width]]></title>
      <url>http://iminyao.com/2016/05/09/deveice-width/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>这两天看了下之前的一些东西，发现自己对APP切图 webview 移动端适配等一些东西搞得比较混，于是仔细看了些文章，把之前混在一起的东西拆分开来，便于理解。</p>
<h3 id="media-query-中的device-width"><a href="#media-query-中的device-width" class="headerlink" title="media query 中的device-width"></a>media query 中的<code>device-width</code></h3><p>昨天看了一天关于像素尺寸一系列乱七八糟的东西，昨晚我就隐约的意识的问题的根源，media query中的<code>min-device-width</code>这里面的<code>deveice-width</code>和我们所说的<code>divice pixel</code>是完全不同的两个东西。css文件中的<code>px</code>是指的<code>css pixel</code>，所以像<code>@meida (max-device-width:320px)</code>中的<code>320px</code>绝对不是<code>device pixel</code>，而是<code>css pixel</code>，这个值要乘上DPR才是真正的<code>device pixel</code>。</p>
<p><img src="/images/device-width-2016-08-05.jpeg" alt="ip"></p>
<p>media query中的<code>divice-width</code>指代是图中 点 这一行，今天动手验证之前想法时看到chrome dev tools是有这项数据的，这个应该就是我们平时所说的<strong>屏幕尺寸。</strong></p>
<p>完整的尺寸表：</p>
<table>
<thead>
<tr>
<th>设备</th>
<th>屏幕物理尺寸 </th>
</tr>
</thead>
<tbody>
<tr>
<td>ip4</td>
<td>320*480</td>
</tr>
<tr>
<td>ip5</td>
<td>320*568</td>
</tr>
<tr>
<td>ip6</td>
<td>375*627</td>
</tr>
<tr>
<td>ip6 plus</td>
<td>414*736</td>
</tr>
<tr>
<td>iPad</td>
<td>768*1024</td>
</tr>
<tr>
<td>android480</td>
<td>320*480</td>
</tr>
<tr>
<td>android720</td>
<td>360*640</td>
</tr>
<tr>
<td>android1080</td>
<td>360*640</td>
</tr>
</tbody>
</table>
<h3 id="width与device-width区别："><a href="#width与device-width区别：" class="headerlink" title="width与device-width区别："></a><code>width</code>与<code>device-width</code>区别：</h3><blockquote>
<p>正常在PC端，CSS像素与物理像素是1:1的，但在apple的retina屏是1:1.5甚至1:2的关系，所以传统的<code>width</code>会出问题，此时可以通过设置<code>viewport width=device-width</code>来解决，如果不设置<code>viewport</code>的话还这个时候可以应用<code>device-width</code>来作为查询条件。</p>
</blockquote>
<figure class="highlight scss"><table><tr><td class="code"><pre><div class="line"><span class="comment">/*原始样式	*/</span></div><div class="line">@<span class="keyword">import</span> url(example.css) screen and (max-width:<span class="number">800px</span>); &lt;!--导入样式表 媒体查询--&gt;</div><div class="line">		<span class="selector-tag">article</span>&#123;</div><div class="line">			<span class="attribute">border</span>:solid <span class="number">1px</span> black;</div><div class="line">			<span class="attribute">padding</span>: <span class="number">15px</span>;</div><div class="line">			<span class="attribute">margin</span>: <span class="number">5px</span>;</div><div class="line">			<span class="attribute">background</span>: yellow;</div><div class="line">			<span class="attribute">float</span>: left;</div><div class="line">			<span class="attribute">width</span>: <span class="number">330px</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="selector-tag">aside</span>&#123;</div><div class="line">			<span class="attribute">border</span>:solid <span class="number">1px</span> black;</div><div class="line">			<span class="attribute">padding</span>: <span class="number">15px</span>;</div><div class="line">			<span class="attribute">margin</span>: <span class="number">5px</span>;</div><div class="line">			<span class="attribute">background</span>: yellow;</div><div class="line">			<span class="attribute">position</span>: absolute;</div><div class="line">			<span class="attribute">float</span>: left;</div><div class="line">			<span class="attribute">margin-left</span>: <span class="number">370px</span>;</div><div class="line">		&#125;</div><div class="line">	<span class="comment">/*	媒体适配	*/</span></div><div class="line">			@<span class="keyword">media</span>(max-device-width: 480px)&#123;</div><div class="line">			<span class="selector-tag">article</span>&#123;</div><div class="line">				<span class="attribute">float</span>: none;</div><div class="line">				<span class="attribute">width</span>: auto;</div><div class="line">			&#125;</div><div class="line">			<span class="selector-tag">aside</span>&#123;</div><div class="line">				<span class="attribute">position</span>: static;</div><div class="line">				<span class="attribute">float</span>: none;</div><div class="line">				<span class="attribute">background</span>: pink;</div><div class="line">				<span class="attribute">margin-left</span>: <span class="number">5px</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[React组件生命周期]]></title>
      <url>http://iminyao.com/2016/05/04/react-component-lifecycle/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一、首次render-实例化"><a href="#一、首次render-实例化" class="headerlink" title="一、首次render(实例化)"></a>一、首次render(实例化)</h3><p>组件在客户端第一次实例化时，依次调用：</p>
<ol>
<li>getDefaultProps</li>
<li>getInitialState</li>
<li>componentWillMount</li>
<li>render</li>
<li>componentDidMount</li>
</ol>
<h4 id="1-getDefaultProps"><a href="#1-getDefaultProps" class="headerlink" title="1.getDefaultProps"></a>1.getDefaultProps</h4><p>并不是在组件实例化时调用，而是在React.createClass调用时就被调用，因为是在实例初始化之前调用，所以方法里面不能依赖<code>this.props</code>,而且，任何引用类型的值都会在实例中共享，而不是每个组件拥有单独的副本。</p>
<h4 id="2-getInitialState"><a href="#2-getInitialState" class="headerlink" title="2.getInitialState"></a>2.getInitialState</h4><p>只在组件实例挂载之前调用一次，用于初始化每个实例的state，每次实例创建的时候都会调用一次，此时已经可以访问this.props。</p>
<h5 id="getDefaultProps与getInitialState区别："><a href="#getDefaultProps与getInitialState区别：" class="headerlink" title="getDefaultProps与getInitialState区别："></a>getDefaultProps与getInitialState区别：</h5><p>前者是对于组件类来说的，后者是对于组件实例来说的</p>
<h5 id="state与props的区别："><a href="#state与props的区别：" class="headerlink" title="state与props的区别："></a>state与props的区别：</h5><p>state只存在于组件内部，props可以在组件树中传递</p>
<h4 id="3-componentWillMount"><a href="#3-componentWillMount" class="headerlink" title="3.componentWillMount"></a>3.componentWillMount</h4><p>只在首次装载前调用一次，在render之前调用，这是在render方法调用前修改state最后的机会</p>
<h4 id="4-render"><a href="#4-render" class="headerlink" title="4.render"></a>4.render</h4><p>调用render时会检测this.props和this.state,创建的是虚拟本地DOM组件(<code>eg:&lt;div /&gt;</code>)或自定义复合组件，这是react之所以效率高的核心</p>
<p><strong>render函数应该是纯粹的，不能修改组件的state,每次调用都返回相同的结果，不读写DOM，不与浏览器交互(setTimeout等)</strong></p>
<h4 id="5-componentDidMount"><a href="#5-componentDidMount" class="headerlink" title="5.componentDidMount"></a>5.componentDidMount</h4><p>render后调用，此时已经渲染出真实的DOM，已经可以通过<code>this.getDOMNode</code>或<code>ReactDOM.findDOMNode</code>访问真实DOM。集成其他框架，设置定时器，Ajax请求等都可以在此方法中操作。</p>
<h3 id="二、存在期"><a href="#二、存在期" class="headerlink" title="二、存在期"></a>二、存在期</h3><blockquote>
<p>组件已经渲染完成可以与用户进行交互</p>
</blockquote>
<ol>
<li>componentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate</li>
</ol>
<h4 id="componentWillReceivePorps"><a href="#componentWillReceivePorps" class="headerlink" title="componentWillReceivePorps"></a>componentWillReceivePorps</h4><p>在组件接收到新的props（只能由父组件更改）时调用，可以在此更新state触发render方法</p>
<h4 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate"></a>shouldComponentUpdate</h4><p>如果确定props和state不需要重新渲染，返回false，则componentWillUpdate和componentDidUpdate及render都不会执行。</p>
<h4 id="componentWillUpdate"><a href="#componentWillUpdate" class="headerlink" title="componentWillUpdate"></a>componentWillUpdate</h4><p>在接收到新的props或state之前立刻调用，不能在此更新state，如果需要请在compentWillReceiveProps中更新，</p>
<h4 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate"></a>componentDidUpdate</h4><p>在组件更新DOM后执行，此时可以操作DOM</p>
<h3 id="三、组件销毁"><a href="#三、组件销毁" class="headerlink" title="三、组件销毁"></a>三、组件销毁</h3><p>componentWillUnmount:在组件从DOM中移除后调用，此处进行清理(定时器、事件监听器等)<br>事件监听器可以通过将回调函数赋值为空函数来清理，定时器在定义的时候赋值给变量，然后在此处清理。<br>可以像库那样定义一个<code>var noop = function(){};</code>全局变量，方便书写。</p>
<p><img src="https://sfault-image.b0.upaiyun.com/315/625/3156257312-56761eb64bbfc_articlex" alt="pic"></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://segmentfault.com/a/1190000004168886" target="_blank" rel="external">React：组件的生命周期</a></li>
<li><a href="http://reactjs.cn/react/docs/component-specs.html" target="_blank" rel="external">组件的详细说明和生命周期</a></li>
<li><a href="http://mp.weixin.qq.com/s?timestamp=1482051697&amp;src=3&amp;ver=1&amp;signature=NFP5UrfMaZEhOrc0Sev8EIsWOJ-gqLkFai9tfWiqPc2rkgfIHVgPiLPEzlBYaXc5mQpyqIaE5GMXgNeX0*803l0TVsYBoLooRo9S0h7mnUK*Yonq-uNPKavloEKOI9Ttl9rkiedi9YoyraFLoq6UEUb8959h1cuviKbxCgE5Zas=" target="_blank" rel="external">React 源码剖析系列－生命周期的管理艺术</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[BFC与浮动详解]]></title>
      <url>http://iminyao.com/2016/04/27/BFC-float/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="去浮动"><a href="#去浮动" class="headerlink" title="去浮动"></a>去浮动</h2><h3 id="一-产生原因："><a href="#一-产生原因：" class="headerlink" title="一. 产生原因："></a>一. 产生原因：</h3><blockquote>
<p>浮动框不属于文档中的普通流，当一个元素浮动之后，不会影响到块级框的布局而只会影响内联框（通常是文本）的排列，文档中的普通流就会表现得和浮动框不存在一样，当浮动框高度超出包含框的时候，也就会出现包含框不会自动伸高来闭合浮动元素（“高度塌陷”现象）。</p>
</blockquote>
<h3 id="二-去浮动方法："><a href="#二-去浮动方法：" class="headerlink" title="二. 去浮动方法："></a>二. 去浮动方法：</h3><ol>
<li><p>添加额外标签：增加无意义标签，不推荐</p>
 <figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">	<span class="comment">//	html code</span></div><div class="line">	&lt;<span class="selector-tag">div</span> class=<span class="string">"wrap"</span>&gt;</div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"main left"</span>&gt;.main&#123;<span class="attribute">float</span>:left;&#125;&lt;/div&gt;</div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"side left"</span>&gt;.side&#123;<span class="attribute">float</span>:right;&#125;&lt;/div&gt;</div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"clearfix"</span>&gt;&lt;/div&gt;</div><div class="line">（或&lt;br <span class="attribute">clear</span>=<span class="string">"all"</span> /&gt;）// clear为br自有属性</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"footer"</span>&gt;.footer&lt;/div&gt;</div><div class="line">	<span class="comment">//	css code</span></div><div class="line">	<span class="selector-class">.left</span> &#123;<span class="attribute">float</span>:left;&#125;</div><div class="line">	<span class="selector-class">.right</span> &#123;<span class="attribute">float</span>:right;&#125;</div><div class="line">	<span class="selector-class">.clearfix</span> &#123;<span class="attribute">clear</span>:both;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>父元素设置<code>overflow</code>为<code>hidden</code>或<code>auto</code>：溢出元素被隐藏，不推荐</p>
 <figure class="highlight cs"><table><tr><td class="code"><pre><div class="line">	<span class="comment">//	html code</span></div><div class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"wrap"</span>&gt;</div><div class="line">&lt;div <span class="keyword">class</span>=<span class="string">"main left"</span>&gt;.main&#123;<span class="keyword">float</span>:left;&#125;&lt;/div&gt;</div><div class="line">&lt;div <span class="keyword">class</span>=<span class="string">"side left"</span>&gt;.side&#123;<span class="keyword">float</span>:right;&#125;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div <span class="keyword">class</span>=<span class="string">"footer"</span>&gt;.footer&lt;/div&gt;</div><div class="line">	<span class="comment">//	css code</span></div><div class="line">	.wrap &#123; </div><div class="line">		overflow:hidden;(或auto)</div><div class="line">		*zoom:<span class="number">1</span>;	<span class="comment">//	IE6</span></div><div class="line">	&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>浮动父元素：影响原有布局，不推荐</p>
</li>
<li><p>设置父元素<code>display:table</code>:改变盒模型类型，不推荐</p>
 <figure class="highlight gams"><table><tr><td class="code"><pre><div class="line"><span class="comment">// css code</span></div><div class="line">.wrap &#123;<span class="keyword">display</span>:<span class="keyword">table</span>;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>after</code>伪元素：推荐</p>
 <figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">		<span class="comment">//	html code</span></div><div class="line">	<span class="params">&lt;div class="wrap clearfix"&gt;</span></div><div class="line"><span class="params">&lt;div class="main left"&gt;</span>.main&#123;float:left;&#125;<span class="params">&lt;/div&gt;</span></div><div class="line"><span class="params">&lt;div class="side left"&gt;</span>.side&#123;float:right;&#125;<span class="params">&lt;/div&gt;</span></div><div class="line"><span class="params">&lt;/div&gt;</span></div><div class="line"><span class="params">&lt;div class="footer"&gt;</span>.footer<span class="params">&lt;/div&gt;</span></div><div class="line">	<span class="comment">//	css code</span></div><div class="line">	.clearfix:<span class="class">after </span>&#123;</div><div class="line"><span class="symbol">		content:</span><span class="string">"."</span>;</div><div class="line"><span class="symbol">		display:</span>block;</div><div class="line"><span class="symbol">		height:</span><span class="number">0</span>;</div><div class="line"><span class="symbol">		visibility:</span>hidden;</div><div class="line"><span class="symbol">		clear:</span>both;</div><div class="line">	&#125;</div><div class="line">	.<span class="class">clearfix </span>&#123;*zoom:<span class="number">1</span>;&#125;	<span class="comment">// IE6不支持::after，触发hasLayout来去除</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="三-本质："><a href="#三-本质：" class="headerlink" title="三.本质："></a>三.本质：</h3><ol>
<li>在末尾添加空元素，然后通过<code>clear</code>去除浮动</li>
<li>通过触发BFC或hasLayout(IE)来去浮动<hr>

</li>
</ol>
<h2 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h2><h3 id="一、定义："><a href="#一、定义：" class="headerlink" title="一、定义："></a>一、定义：</h3><blockquote>
<p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with ‘overflow’ other than ‘visible’ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents. —<strong><a href="http://www.w3.org/TR/CSS21/visuren.html#block-formatting" target="_blank" rel="external">CSS 2.1</a></strong></p>
<p>通俗的说：创建了 BFC的元素就是一个独立的盒子，里面的子元素不会在布局上影响外面的元素，反之亦然，同时BFC任然属于文档中的普通流。 </p>
</blockquote>
<h3 id="二、如何触发BFC呢？"><a href="#二、如何触发BFC呢？" class="headerlink" title="二、如何触发BFC呢？"></a>二、如何触发BFC呢？</h3><ul>
<li><p>float 除了none以外的值 </p>
</li>
<li><p>overflow 除了visible 以外的值（hidden，auto，scroll ） </p>
</li>
<li><p>display (table-cell，table-caption，inline-block) </p>
</li>
<li><p>position（absolute，fixed） </p>
</li>
<li><p>fieldset元素</p>
</li>
</ul>
<h3 id="三、BFC的特性"><a href="#三、BFC的特性" class="headerlink" title="三、BFC的特性"></a>三、BFC的特性</h3><ol>
<li><p>块级格式化上下文会阻止外边距叠加</p>
<blockquote>
<p>当两个相邻的块框在同一个块级格式化上下文中时，它们之间垂直方向的外边距会发生叠加。换句话说，如果这两个相邻的块框不属于同一个块级格式化上下文，那么它们的外边距就不会叠加。</p>
</blockquote>
</li>
<li><p>块级格式化上下文不会重叠浮动元素</p>
<blockquote>
<p>浏览器将会给块级格式化上下文创建隐式的外边距来阻止它和浮动元素的外边距叠加。由于这个原因，当给一个挨着浮动的块级格式化上下文添加负的外边距时将会不起作用</p>
</blockquote>
</li>
</ol>
<h3 id="四、应用："><a href="#四、应用：" class="headerlink" title="四、应用："></a>四、应用：</h3><ol>
<li><p>自适应的两栏/三栏布局</p>
<ul>
<li><p>问题：如果一个浮动元素后面跟着一个非浮动的元素，由于两个box都处在同一个BFC中，都是以BFC边界为起点，所以就会产生一个覆盖的现象，进而导致自适应栏部分内容被浮动元素覆盖。</p>
</li>
<li><p>解决方法：为自适应的主栏创建BFC</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line">	<span class="comment">//	html code</span></div><div class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"aside"</span>&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div <span class="keyword">class</span>=<span class="string">"main"</span>&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">	<span class="comment">// css code</span></div><div class="line">	* &#123; padding:<span class="number">0</span>; margin:<span class="number">0</span>; color:<span class="meta">#fff; text-decoration:none; list-style:none; font-family:<span class="meta-string">"微软雅黑"</span> &#125;</span></div><div class="line">.aside&#123;<span class="built_in">background</span>:#f00;<span class="built_in">width</span>:<span class="number">170</span>px;<span class="keyword">float</span>:left;<span class="built_in">height</span>:<span class="number">300</span>px;&#125;</div><div class="line">.main&#123;</div><div class="line">	<span class="built_in">background</span>:#<span class="number">090</span>;</div><div class="line">	<span class="built_in">height</span>:<span class="number">100</span>%;</div><div class="line">	<span class="built_in">overflow</span>:<span class="keyword">auto</span>;	<span class="comment">//	通过overflow创建BFC</span></div><div class="line">	*zoom:<span class="number">1</span>;	<span class="comment">// IE触发hasLayout	</span></div><div class="line">	&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>清除浮动：</p>
<blockquote>
<p><a href="http://www.w3.org/TR/CSS2/visudet.html#root-height" target="_blank" rel="external">CSS2.1 规范</a>高度计算规则，<strong>在计算生成了 block formatting context 的元素的高度时，其浮动子元素应该参与计算。</strong></p>
</blockquote>
</li>
<li><p>垂直方向相邻元素外边距重叠</p>
<blockquote>
<p><a href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins" target="_blank" rel="external">CSS 2.1 Collapsing margins</a>，生成 block formatting context 的元素不会和在流中的子元素发生空白边折叠。所以解决这种问题的办法是要为两个容器添加具有BFC的包裹容器。</p>
</blockquote>
 <figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line">	<span class="comment">//	垂直方向外边距重叠</span></div><div class="line">	<span class="comment">//	html code</span></div><div class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"rowone"</span>&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div <span class="keyword">class</span>=<span class="string">"rowtow"</span>&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">	<span class="comment">// css code</span></div><div class="line">html,body &#123;<span class="built_in">height</span>:<span class="number">100</span>%; &#125;</div><div class="line">* &#123; padding:<span class="number">0</span>; margin:<span class="number">0</span>; color:<span class="meta">#fff; text-decoration:none; list-style:none; font-family:<span class="meta-string">"微软雅黑"</span> &#125;</span></div><div class="line">.rowone&#123;<span class="built_in">background</span>:#f00;<span class="built_in">height</span>:<span class="number">100</span>px;margin-bottom:<span class="number">20</span>px;<span class="built_in">overflow</span>:hidden;&#125;</div><div class="line">.rowtow&#123;<span class="built_in">background</span>:#<span class="number">090</span>;<span class="built_in">height</span>:<span class="number">100</span>px;margin-top:<span class="number">20</span>px;&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 添加BFC包裹层</span></div><div class="line">	<span class="comment">// html code</span></div><div class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"mg"</span>&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"rowone"</span>&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div <span class="keyword">class</span>=<span class="string">"mg"</span>&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"rowtow"</span>&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">	<span class="comment">// css code</span></div><div class="line">	html, body &#123; <span class="built_in">height</span>:<span class="number">100</span>%; &#125;</div><div class="line">* &#123; padding:<span class="number">0</span>; margin:<span class="number">0</span>; color:<span class="meta">#fff; text-decoration:none; list-style:none; font-family:<span class="meta-string">"微软雅黑"</span> &#125;</span></div><div class="line">.mg &#123;<span class="built_in">overflow</span>:hidden; &#125;</div><div class="line">.rowone &#123; <span class="built_in">background</span>:#f00; <span class="built_in">height</span>:<span class="number">100</span>px; margin-bottom:<span class="number">20</span>px; &#125;</div><div class="line">.rowtow &#123; <span class="built_in">background</span>:#<span class="number">090</span>; <span class="built_in">height</span>:<span class="number">100</span>px; margin-top:<span class="number">20</span>px; &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://www.iyunlu.com/view/css-xhtml/55.html" target="_blank" rel="external">那些年我们一起清除过的浮动</a></li>
<li><a href="http://www.cnblogs.com/pigtail/archive/2013/01/23/2871627.html" target="_blank" rel="external">关于Block Formatting Context－－BFC和IE的hasLayout</a></li>
<li><a href="http://www.w3.org/TR/CSS21/visuren.html#block-formatting" target="_blank" rel="external">Block formatting contexts - W3C</a></li>
<li><a href="http://www.w3.org/TR/css3-box/#block-level0" target="_blank" rel="external">Block-level boxes, containing blocks, flows and anonymous boxes</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[npm WARN optional dep failed, continuing fsevents@1.0.11]]></title>
      <url>http://iminyao.com/2016/04/18/npm-WARN-optional-dep-failed/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>卸载node的文章中说到，webpack的代码压缩等没法用是安装的webpack问题，通过npm2和npm3在项目目录下安装的webpack文件相差的是十万八千里，npm在安装webpack时会自动安装一系列的东西，如下图：</p>
</blockquote>
<p>这是npm版本导致的一个问题，在用npm install时，每次都会显示<code>npm WARN optional dep failed, continuing fsevents@1.0.11</code>这一堆东西，现在安装node时都会自动安装npm模块，我装的是node v4.4.3，对应的npm是2.15.1,我先直接把npm升到最新版3.3.X，结果更爆炸，<code>Couldn&#39;t install optional dependency: Unsupported</code>，更多问题，尝试了另外几个版本还是白搭，于是上网搜了下，原来和我一样蛋疼的大有人在，<a href="https://github.com/npm/npm/issues/9204" target="_blank" rel="external">https://github.com/npm/npm/issues/9204</a>, 挨个看了下面的评论，挨个试了下，最终找到了没有问题的版本<code>3.1.3</code>,也终于搞明白了原因。</p>
<p>当npm2时，<code>sudo npm install webpack --save-dev</code>结果如下：<br><figure class="highlight mel"><table><tr><td class="code"><pre><div class="line">jzwmxz@jzwmxz-ThinkPad-Edge-E531:~/gitCode/Daily/webpack$ npm -v</div><div class="line"><span class="number">2.15</span><span class="number">.3</span></div><div class="line">jzwmxz@jzwmxz-ThinkPad-Edge-E531:~/gitCode/Daily/webpack$ npm install webpack --save-dev</div><div class="line">npm WARN package.json webpack-react@1<span class="number">.0</span><span class="number">.0</span> No repository field.</div><div class="line">npm WARN package.json webpack-react@1<span class="number">.0</span><span class="number">.0</span> No README data</div><div class="line">npm WARN optional dep failed, continuing fsevents@1<span class="number">.0</span><span class="number">.11</span></div><div class="line">webpack@1<span class="number">.13</span><span class="number">.0</span> node_modules/webpack</div><div class="line">├── interpret@0<span class="number">.6</span><span class="number">.6</span></div><div class="line">├── tapable@0<span class="number">.1</span><span class="number">.10</span></div><div class="line">├── clone@1<span class="number">.0</span><span class="number">.2</span></div><div class="line">├── async@1<span class="number">.5</span><span class="number">.2</span></div><div class="line">├── supports-<span class="keyword">color</span>@3<span class="number">.1</span><span class="number">.2</span> (has-flag@1<span class="number">.0</span><span class="number">.0</span>)</div><div class="line">├── loader-utils@0<span class="number">.2</span><span class="number">.14</span> (object-assign@4<span class="number">.0</span><span class="number">.1</span>, big.js@3<span class="number">.1</span><span class="number">.3</span>, json5@0<span class="number">.5</span><span class="number">.0</span>, emojis-list@1<span class="number">.0</span><span class="number">.1</span>)</div><div class="line">├── acorn@3<span class="number">.0</span><span class="number">.4</span></div><div class="line">├── enhanced-resolve@0<span class="number">.9</span><span class="number">.1</span> (graceful-fs@4<span class="number">.1</span><span class="number">.3</span>, <span class="keyword">memory</span>-fs@0<span class="number">.2</span><span class="number">.0</span>)</div><div class="line">├── mkdirp@0<span class="number">.5</span><span class="number">.1</span> (minimist@0<span class="number">.0</span><span class="number">.8</span>)</div><div class="line">├── optimist@0<span class="number">.6</span><span class="number">.1</span> (wordwrap@0<span class="number">.0</span><span class="number">.3</span>, minimist@0<span class="number">.0</span><span class="number">.10</span>)</div><div class="line">├── node-libs-browser@0<span class="number">.5</span><span class="number">.3</span> (https-browserify@0<span class="number">.0</span><span class="number">.0</span>, tty-browserify@0<span class="number">.0</span><span class="number">.0</span>, constants-browserify@0<span class="number">.0</span><span class="number">.1</span>, punycode@1<span class="number">.4</span><span class="number">.1</span>, string_decoder@0<span class="number">.10</span><span class="number">.31</span>, os-browserify@0<span class="number">.1</span><span class="number">.2</span>, path-browserify@0<span class="number">.0</span><span class="number">.0</span>, process@0<span class="number">.11</span><span class="number">.2</span>, assert@1<span class="number">.3</span><span class="number">.0</span>, domain-browser@1<span class="number">.1</span><span class="number">.7</span>, querystring-es3@0<span class="number">.2</span><span class="number">.1</span>, timers-browserify@1<span class="number">.4</span><span class="number">.2</span>, stream-browserify@1<span class="number">.0</span><span class="number">.0</span>, events@1<span class="number">.1</span><span class="number">.0</span>, readable-stream@1<span class="number">.1</span><span class="number">.14</span>, util@0<span class="number">.10</span><span class="number">.3</span>, vm-browserify@0<span class="number">.0</span><span class="number">.4</span>, url@0<span class="number">.10</span><span class="number">.3</span>, console-browserify@1<span class="number">.1</span><span class="number">.0</span>, http-browserify@1<span class="number">.7</span><span class="number">.0</span>, buffer@3<span class="number">.6</span><span class="number">.0</span>, browserify-zlib@0<span class="number">.1</span><span class="number">.4</span>, crypto-browserify@3<span class="number">.2</span><span class="number">.8</span>)</div><div class="line">├── webpack-core@0<span class="number">.6</span><span class="number">.8</span> (<span class="keyword">source</span>-list-map@0<span class="number">.1</span><span class="number">.6</span>, <span class="keyword">source</span>-map@0<span class="number">.4</span><span class="number">.4</span>)</div><div class="line">├── <span class="keyword">memory</span>-fs@0<span class="number">.3</span><span class="number">.0</span> (errno@0<span class="number">.1</span><span class="number">.4</span>, readable-stream@2<span class="number">.1</span><span class="number">.0</span>)</div><div class="line">├── uglify-js@2<span class="number">.6</span><span class="number">.2</span> (async@0<span class="number">.2</span><span class="number">.10</span>, uglify-to-browserify@1<span class="number">.0</span><span class="number">.2</span>, <span class="keyword">source</span>-map@0<span class="number">.5</span><span class="number">.3</span>, yargs@3<span class="number">.10</span><span class="number">.0</span>)</div><div class="line">└── watchpack@0<span class="number">.2</span><span class="number">.9</span> (graceful-fs@4<span class="number">.1</span><span class="number">.3</span>, async@0<span class="number">.9</span><span class="number">.2</span>, chokidar@1<span class="number">.4</span><span class="number">.3</span>)</div></pre></td></tr></table></figure></p>
<p>而在正确版本下结果如下：<br><figure class="highlight mel"><table><tr><td class="code"><pre><div class="line">jzwmxz@jzwmxz-ThinkPad-Edge-E531:~/gitCode/Daily/webpack$ npm -v</div><div class="line"><span class="number">3.1</span><span class="number">.3</span></div><div class="line">jzwmxz@jzwmxz-ThinkPad-Edge-E531:~/gitCode/Daily/webpack$ npm install webpack --save-dev</div><div class="line"></div><div class="line">&gt; fsevents@1<span class="number">.0</span><span class="number">.11</span> install /home/jzwmxz/gitCode/Daily/webpack/node_modules/fsevents</div><div class="line">&gt; node-pre-gyp install --fallback-to-build</div><div class="line"></div><div class="line">make:进入目录<span class="string">'/home/jzwmxz/gitCode/Daily/webpack/node_modules/fsevents/build'</span></div><div class="line">  SOLINK_MODULE(target) Release/obj.target/.node</div><div class="line">  COPY Release/.node</div><div class="line">make:离开目录“/home/jzwmxz/gitCode/Daily/webpack/node_modules/fsevents/build”</div><div class="line">webpack-react@1<span class="number">.0</span><span class="number">.0</span> /home/jzwmxz/gitCode/Daily/webpack</div><div class="line">└─┬ webpack@1<span class="number">.13</span><span class="number">.0</span> </div><div class="line">  ├── acorn@3<span class="number">.0</span><span class="number">.4</span> </div><div class="line">  ├── async@1<span class="number">.5</span><span class="number">.2</span> </div><div class="line">  ├── clone@1<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  ├─┬ enhanced-resolve@0<span class="number">.9</span><span class="number">.1</span> </div><div class="line">  │ ├── graceful-fs@4<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │ └── <span class="keyword">memory</span>-fs@0<span class="number">.2</span><span class="number">.0</span> </div><div class="line">  ├── interpret@0<span class="number">.6</span><span class="number">.6</span> </div><div class="line">  ├─┬ loader-utils@0<span class="number">.2</span><span class="number">.14</span> </div><div class="line">  │ ├── big.js@3<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │ ├── emojis-list@1<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │ ├── json5@0<span class="number">.5</span><span class="number">.0</span> </div><div class="line">  │ └── object-assign@4<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  ├─┬ <span class="keyword">memory</span>-fs@0<span class="number">.3</span><span class="number">.0</span> </div><div class="line">  │ ├─┬ errno@0<span class="number">.1</span><span class="number">.4</span> </div><div class="line">  │ │ └── prr@0<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │ └─┬ readable-stream@2<span class="number">.1</span><span class="number">.0</span> </div><div class="line">  │   ├── core-util-is@1<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  │   ├── inherits@2<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   ├─┬ inline-process-browser@2<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │ ├─┬ falafel@1<span class="number">.2</span><span class="number">.0</span> </div><div class="line">  │   │ │ ├── acorn@1<span class="number">.2</span><span class="number">.2</span> </div><div class="line">  │   │ │ ├── foreach@2<span class="number">.0</span><span class="number">.5</span> </div><div class="line">  │   │ │ ├── isarray@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │ │ └── object-keys@1<span class="number">.0</span><span class="number">.9</span> </div><div class="line">  │   │ └─┬ through2@0<span class="number">.6</span><span class="number">.5</span> </div><div class="line">  │   │   ├─┬ readable-stream@1<span class="number">.0</span><span class="number">.34</span> </div><div class="line">  │   │   │ └── isarray@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   └── xtend@4<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   ├── isarray@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   ├── process-nextick-args@1<span class="number">.0</span><span class="number">.6</span> </div><div class="line">  │   ├─┬ unreachable-branch-transform@0<span class="number">.5</span><span class="number">.1</span> </div><div class="line">  │   │ ├── esmangle-evaluator@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   │ └─┬ recast@0<span class="number">.11</span><span class="number">.5</span> </div><div class="line">  │   │   ├── ast-types@0<span class="number">.8</span><span class="number">.16</span> </div><div class="line">  │   │   ├── esprima@2<span class="number">.7</span><span class="number">.2</span> </div><div class="line">  │   │   └── private@0<span class="number">.1</span><span class="number">.6</span> </div><div class="line">  │   └── util-deprecate@1<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  ├─┬ mkdirp@0<span class="number">.5</span><span class="number">.1</span> </div><div class="line">  │ └── minimist@0<span class="number">.0</span><span class="number">.8</span> </div><div class="line">  ├─┬ node-libs-browser@0<span class="number">.5</span><span class="number">.3</span> </div><div class="line">  │ ├── assert@1<span class="number">.3</span><span class="number">.0</span> </div><div class="line">  │ ├─┬ browserify-zlib@0<span class="number">.1</span><span class="number">.4</span> </div><div class="line">  │ │ └── pako@0<span class="number">.2</span><span class="number">.8</span> </div><div class="line">  │ ├─┬ buffer@3<span class="number">.6</span><span class="number">.0</span> </div><div class="line">  │ │ ├── base64-js@0<span class="number">.0</span><span class="number">.8</span> </div><div class="line">  │ │ └── ieee754@1<span class="number">.1</span><span class="number">.6</span> </div><div class="line">  │ ├─┬ console-browserify@1<span class="number">.1</span><span class="number">.0</span> </div><div class="line">  │ │ └── <span class="keyword">date</span>-now@0<span class="number">.1</span><span class="number">.4</span> </div><div class="line">  │ ├── constants-browserify@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │ ├─┬ crypto-browserify@3<span class="number">.2</span><span class="number">.8</span> </div><div class="line">  │ │ ├── pbkdf2-compat@2<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │ │ ├── ripemd160@0<span class="number">.2</span><span class="number">.0</span> </div><div class="line">  │ │ └── sha.js@2<span class="number">.2</span><span class="number">.6</span> </div><div class="line">  │ ├── domain-browser@1<span class="number">.1</span><span class="number">.7</span> </div><div class="line">  │ ├── events@1<span class="number">.1</span><span class="number">.0</span> </div><div class="line">  │ ├─┬ http-browserify@1<span class="number">.7</span><span class="number">.0</span> </div><div class="line">  │ │ └── Base64@0<span class="number">.2</span><span class="number">.1</span> </div><div class="line">  │ ├── https-browserify@0<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │ ├── os-browserify@0<span class="number">.1</span><span class="number">.2</span> </div><div class="line">  │ ├── path-browserify@0<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │ ├── process@0<span class="number">.11</span><span class="number">.2</span> </div><div class="line">  │ ├── punycode@1<span class="number">.4</span><span class="number">.1</span> </div><div class="line">  │ ├── querystring-es3@0<span class="number">.2</span><span class="number">.1</span> </div><div class="line">  │ ├─┬ readable-stream@1<span class="number">.1</span><span class="number">.14</span> </div><div class="line">  │ │ └── isarray@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │ ├─┬ stream-browserify@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │ │ └─┬ readable-stream@1<span class="number">.1</span><span class="number">.14</span> </div><div class="line">  │ │   └── isarray@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │ ├── string_decoder@0<span class="number">.10</span><span class="number">.31</span> </div><div class="line">  │ ├── timers-browserify@1<span class="number">.4</span><span class="number">.2</span> </div><div class="line">  │ ├── tty-browserify@0<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │ ├─┬ url@0<span class="number">.10</span><span class="number">.3</span> </div><div class="line">  │ │ ├── punycode@1<span class="number">.3</span><span class="number">.2</span> </div><div class="line">  │ │ └── querystring@0<span class="number">.2</span><span class="number">.0</span> </div><div class="line">  │ ├── util@0<span class="number">.10</span><span class="number">.3</span> </div><div class="line">  │ └─┬ vm-browserify@0<span class="number">.0</span><span class="number">.4</span> </div><div class="line">  │   └── indexof@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  ├─┬ optimist@0<span class="number">.6</span><span class="number">.1</span> </div><div class="line">  │ └── wordwrap@0<span class="number">.0</span><span class="number">.3</span> </div><div class="line">  ├─┬ supports-<span class="keyword">color</span>@3<span class="number">.1</span><span class="number">.2</span> </div><div class="line">  │ └── has-flag@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  ├── tapable@0<span class="number">.1</span><span class="number">.10</span> </div><div class="line">  ├─┬ uglify-js@2<span class="number">.6</span><span class="number">.2</span> </div><div class="line">  │ ├── async@0<span class="number">.2</span><span class="number">.10</span> </div><div class="line">  │ ├── <span class="keyword">source</span>-map@0<span class="number">.5</span><span class="number">.3</span> </div><div class="line">  │ ├── uglify-to-browserify@1<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  │ └─┬ yargs@3<span class="number">.10</span><span class="number">.0</span> </div><div class="line">  │   ├── camelcase@1<span class="number">.2</span><span class="number">.1</span> </div><div class="line">  │   ├─┬ cliui@2<span class="number">.1</span><span class="number">.0</span> </div><div class="line">  │   │ ├─┬ center-<span class="keyword">align</span>@0<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │   │ │ ├─┬ <span class="keyword">align</span>-<span class="keyword">text</span>@0<span class="number">.1</span><span class="number">.4</span> </div><div class="line">  │   │ │ │ ├── longest@1<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │ │ │ └── repeat-<span class="keyword">string</span>@1<span class="number">.5</span><span class="number">.4</span> </div><div class="line">  │   │ │ └── lazy-cache@1<span class="number">.0</span><span class="number">.3</span> </div><div class="line">  │   │ ├── right-<span class="keyword">align</span>@0<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │   │ └── wordwrap@0<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  │   ├── decamelize@1<span class="number">.2</span><span class="number">.0</span> </div><div class="line">  │   └── <span class="keyword">window</span>-<span class="keyword">size</span>@0<span class="number">.1</span><span class="number">.0</span> </div><div class="line">  ├─┬ watchpack@0<span class="number">.2</span><span class="number">.9</span> </div><div class="line">  │ ├── async@0<span class="number">.9</span><span class="number">.2</span> </div><div class="line">  │ └─┬ chokidar@1<span class="number">.4</span><span class="number">.3</span> </div><div class="line">  │   ├─┬ anymatch@1<span class="number">.3</span><span class="number">.0</span> </div><div class="line">  │   │ ├── arrify@1<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │ └─┬ micromatch@2<span class="number">.3</span><span class="number">.7</span> </div><div class="line">  │   │   ├─┬ arr-diff@2<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   │   │ └── arr-flatten@1<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   ├── array-unique@0<span class="number">.2</span><span class="number">.1</span> </div><div class="line">  │   │   ├─┬ braces@1<span class="number">.8</span><span class="number">.3</span> </div><div class="line">  │   │   │ ├─┬ expand-range@1<span class="number">.8</span><span class="number">.1</span> </div><div class="line">  │   │   │ │ └─┬ fill-range@2<span class="number">.2</span><span class="number">.3</span> </div><div class="line">  │   │   │ │   ├── is-number@2<span class="number">.1</span><span class="number">.0</span> </div><div class="line">  │   │   │ │   ├─┬ isobject@2<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   │   │ │   │ └── isarray@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   │ │   └── randomatic@1<span class="number">.1</span><span class="number">.5</span> </div><div class="line">  │   │   │ ├── preserve@0<span class="number">.2</span><span class="number">.0</span> </div><div class="line">  │   │   │ └── repeat-element@1<span class="number">.1</span><span class="number">.2</span> </div><div class="line">  │   │   ├─┬ expand-brackets@0<span class="number">.1</span><span class="number">.5</span> </div><div class="line">  │   │   │ └── is-posix-bracket@0<span class="number">.1</span><span class="number">.1</span> </div><div class="line">  │   │   ├── extglob@0<span class="number">.3</span><span class="number">.2</span> </div><div class="line">  │   │   ├── filename-regex@2<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   │   ├─┬ kind-of@3<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  │   │   │ └── is-buffer@1<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │   │   ├── <span class="keyword">normalize</span>-path@2<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   ├─┬ object.omit@2<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   │   │ ├─┬ <span class="keyword">for</span>-own@0<span class="number">.1</span><span class="number">.4</span> </div><div class="line">  │   │   │ │ └── <span class="keyword">for</span>-<span class="keyword">in</span>@0<span class="number">.1</span><span class="number">.5</span> </div><div class="line">  │   │   │ └── is-extendable@0<span class="number">.1</span><span class="number">.1</span> </div><div class="line">  │   │   ├─┬ parse-glob@3<span class="number">.0</span><span class="number">.4</span> </div><div class="line">  │   │   │ ├── glob-base@0<span class="number">.3</span><span class="number">.0</span> </div><div class="line">  │   │   │ └── is-dotfile@1<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  │   │   └─┬ regex-cache@0<span class="number">.4</span><span class="number">.3</span> </div><div class="line">  │   │     ├── is-equal-shallow@0<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │   │     └── is-primitive@2<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   ├── async-each@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   ├─┬ fsevents@1<span class="number">.0</span><span class="number">.11</span> </div><div class="line">  │   │ ├── nan@2<span class="number">.2</span><span class="number">.1</span> </div><div class="line">  │   │ └─┬ node-pre-gyp@0<span class="number">.6</span><span class="number">.25</span></div><div class="line">  │   │   ├─┬ mkdirp@0<span class="number">.5</span><span class="number">.1</span> </div><div class="line">  │   │   │ └── minimist@0<span class="number">.0</span><span class="number">.8</span> </div><div class="line">  │   │   ├─┬ request@2<span class="number">.69</span><span class="number">.0</span></div><div class="line">  │   │   │ ├─┬ form-data@1<span class="number">.0</span><span class="number">.0</span>-rc4</div><div class="line">  │   │   │ │ └── async@1<span class="number">.5</span><span class="number">.2</span> </div><div class="line">  │   │   │ └─┬ har-validator@2<span class="number">.0</span><span class="number">.6</span></div><div class="line">  │   │   │   └─┬ is-my-json-valid@2<span class="number">.13</span><span class="number">.1</span></div><div class="line">  │   │   │     └── xtend@4<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   ├─┬ rimraf@2<span class="number">.5</span><span class="number">.2</span></div><div class="line">  │   │   │ └─┬ glob@7<span class="number">.0</span><span class="number">.3</span></div><div class="line">  │   │   │   ├── inherits@2<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   │   ├─┬ minimatch@3<span class="number">.0</span><span class="number">.0</span></div><div class="line">  │   │   │   │ └─┬ brace-expansion@1<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │   │   │   │   ├── balanced-<span class="keyword">match</span>@0<span class="number">.3</span><span class="number">.0</span> </div><div class="line">  │   │   │   │   └── concat-map@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   │   └── path-is-absolute@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   │   ├─┬ tar@2<span class="number">.2</span><span class="number">.1</span></div><div class="line">  │   │   │ ├─┬ fstream@1<span class="number">.0</span><span class="number">.8</span></div><div class="line">  │   │   │ │ └── graceful-fs@4<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │   │   │ └── inherits@2<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │   └─┬ tar-pack@3<span class="number">.1</span><span class="number">.3</span></div><div class="line">  │   │     ├─┬ fstream-ignore@1<span class="number">.0</span><span class="number">.3</span></div><div class="line">  │   │     │ └─┬ minimatch@3<span class="number">.0</span><span class="number">.0</span></div><div class="line">  │   │     │   └─┬ brace-expansion@1<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │   │     │     ├── balanced-<span class="keyword">match</span>@0<span class="number">.3</span><span class="number">.0</span> </div><div class="line">  │   │     │     └── concat-map@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │     └─┬ readable-stream@2<span class="number">.0</span><span class="number">.6</span></div><div class="line">  │   │       ├── core-util-is@1<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  │   │       ├── isarray@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   │       ├── process-nextick-args@1<span class="number">.0</span><span class="number">.6</span> </div><div class="line">  │   │       ├── string_decoder@0<span class="number">.10</span><span class="number">.31</span> </div><div class="line">  │   │       └── util-deprecate@1<span class="number">.0</span><span class="number">.2</span> </div><div class="line">  │   ├── glob-<span class="keyword">parent</span>@2<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   ├─┬ is-binary-path@1<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │ └── binary-extensions@1<span class="number">.4</span><span class="number">.0</span> </div><div class="line">  │   ├─┬ is-glob@2<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  │   │ └── is-extglob@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   ├── path-is-absolute@1<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │   └─┬ readdirp@2<span class="number">.0</span><span class="number">.0</span> </div><div class="line">  │     └─┬ minimatch@2<span class="number">.0</span><span class="number">.10</span> </div><div class="line">  │       └─┬ brace-expansion@1<span class="number">.1</span><span class="number">.3</span> </div><div class="line">  │         ├── balanced-<span class="keyword">match</span>@0<span class="number">.3</span><span class="number">.0</span> </div><div class="line">  │         └── concat-map@0<span class="number">.0</span><span class="number">.1</span> </div><div class="line">  └─┬ webpack-core@0<span class="number">.6</span><span class="number">.8</span> </div><div class="line">    ├── <span class="keyword">source</span>-list-map@0<span class="number">.1</span><span class="number">.6</span> </div><div class="line">    └─┬ <span class="keyword">source</span>-map@0<span class="number">.4</span><span class="number">.4</span> </div><div class="line">      └── amdefine@1<span class="number">.0</span><span class="number">.0</span></div></pre></td></tr></table></figure></p>
<p>在代码一开始执行的时候需要用到<code>fsevents</code>(关于fsevents:<a href="https://www.npmjs.com/package/fsevents，" target="_blank" rel="external">https://www.npmjs.com/package/fsevents，</a> Mac上的东西)<br><figure class="highlight crystal"><table><tr><td class="code"><pre><div class="line">&gt; fsevents@<span class="number">1.0</span>.<span class="number">11</span> install /usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">node_modules</span>/<span class="title">webpack</span>/<span class="title">node_modules</span>/<span class="title">fsevents</span></span></div><div class="line">&gt; node-pre-gyp install --fallback-to-build</div><div class="line"></div><div class="line"><span class="symbol">make:</span>进入目录<span class="string">'/usr/local/lib/node_modules/webpack/node_modules/fsevents/build'</span></div><div class="line">  SOLINK_MODULE(target) Release/obj.target/.node</div><div class="line">  COPY Release/.node</div><div class="line"><span class="symbol">make:</span>离开目录“/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">node_modules</span>/<span class="title">webpack</span>/<span class="title">node_modules</span>/<span class="title">fsevents</span>/<span class="title">build</span>”</span></div><div class="line"></div><div class="line">&gt; fsevents@<span class="number">1.0</span>.<span class="number">11</span> install /usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">node_modules</span>/<span class="title">webpack</span>/<span class="title">node_modules</span>/<span class="title">fsevents</span></span></div><div class="line">&gt; node-pre-gyp install --fallback-to-build</div><div class="line"></div><div class="line"><span class="symbol">make:</span>进入目录<span class="string">'/usr/local/lib/node_modules/webpack/node_modules/fsevents/build'</span></div><div class="line">  SOLINK_MODULE(target) Release/obj.target/.node</div><div class="line">  COPY Release/.node</div><div class="line"><span class="symbol">make:</span>离开目录“/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">node_modules</span>/<span class="title">webpack</span>/<span class="title">node_modules</span>/<span class="title">fsevents</span>/<span class="title">build</span>”</span></div></pre></td></tr></table></figure></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://github.com/npm/npm/issues/9204" target="_blank" rel="external">https://github.com/npm/npm/issues/9204</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[webpack使用入门]]></title>
      <url>http://iminyao.com/2016/04/16/webpack-first/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p><img src="/images/webpack-20160718.png" alt="webpack"></p>
<h3 id="webpack优势"><a href="#webpack优势" class="headerlink" title="webpack优势"></a>webpack优势</h3><ol>
<li><p>webpack 是以 commonJS 的形式来书写脚本滴，但对 AMD/CMD 的支持也很全面，方便旧项目进行代码迁移。</p>
</li>
<li><p>能被模块化的不仅仅是 JS 了。</p>
</li>
<li><p>开发便捷，能替代部分 grunt/gulp 的工作，比如打包、压缩混淆、图片转base64等。</p>
</li>
<li><p>扩展性强，插件机制完善，特别是支持 react-hot-loader的功能让人眼前一亮。</p>
</li>
</ol>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>webpack 背后的原理其实就是把所有的非 js 资源都转换成 js (如把一个 css 文件转换成“创建一个 style 标签并把它插入 document”的脚本、把图片转换成一个图片地址的 js 变量或 base64 编码等)，然后用 CommonJS 的机制管理起来。</p>
<h3 id="一-安装"><a href="#一-安装" class="headerlink" title="一.安装"></a>一.安装</h3><p>1.安装node和npm,webpack是基于node的<br>2.安装 npm install webpack -g</p>
<h3 id="二-配置文件-webpack-config-js"><a href="#二-配置文件-webpack-config-js" class="headerlink" title="二.配置文件 webpack.config.js"></a>二.配置文件 webpack.config.js</h3><h4 id="配置文件组成："><a href="#配置文件组成：" class="headerlink" title="配置文件组成："></a>配置文件组成：</h4><ul>
<li>entry 入口文件 让webpack用哪个文件作为项目的入口</li>
<li>output 出口 让webpack把处理完成的文件放在哪里</li>
<li>module 模块 要用什么不同的模块来处理各种类型的文件</li>
</ul>
<h4 id="sample"><a href="#sample" class="headerlink" title="sample"></a>sample</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">var</span> HtmlwebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="comment">//定义了一些文件夹的路径</span></div><div class="line"><span class="keyword">var</span> ROOT_PATH = path.resolve(__dirname);</div><div class="line"><span class="keyword">var</span> APP_PATH = path.resolve(ROOT_PATH, <span class="string">'app'</span>);</div><div class="line"><span class="keyword">var</span> BUILD_PATH = path.resolve(ROOT_PATH, <span class="string">'build'</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="comment">//项目的文件夹 可以直接用文件夹名称 默认会找index.js 也可以确定是哪个文件名字</span></div><div class="line">  entry: APP_PATH,</div><div class="line">  <span class="comment">//输出的文件名 合并以后的js会命名为bundle.js</span></div><div class="line">  output: &#123;</div><div class="line">    <span class="attr">path</span>: BUILD_PATH,</div><div class="line">    <span class="attr">filename</span>: <span class="string">'bundle.js'</span></div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h4 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h4><ol>
<li><p>html-webpack-plugin:自动生成HTML</p>
<p><code>npm install html-webpack-plugin --save-dev</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"> <span class="comment">// webpack.config.js</span></div><div class="line"> <span class="built_in">module</span>.exports = &#123;</div><div class="line"> ...</div><div class="line"> <span class="comment">//添加我们的插件 会自动生成一个html文件</span></div><div class="line">plugins: [</div><div class="line">  <span class="keyword">new</span> HtmlwebpackPlugin(&#123;</div><div class="line">    <span class="attr">title</span>: <span class="string">'Hello World app'</span></div><div class="line">  &#125;)</div><div class="line">]</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>webpack-dev-server:代码更新时自动刷新浏览器</p>
<p><code>npm install webpack-dev-server --save-dev</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// webpack.config.js</span></div><div class="line">   <span class="built_in">module</span>.exports = &#123;</div><div class="line">  ....</div><div class="line">  devServer: &#123;</div><div class="line">    <span class="attr">historyApiFallback</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">hot</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">inline</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">progress</span>: <span class="literal">true</span>,</div><div class="line">  &#125;</div><div class="line">&#125; </div><div class="line">   <span class="comment">// package.json</span></div><div class="line">   <span class="string">"scripts"</span>: &#123;</div><div class="line">   <span class="string">"start"</span> : <span class="string">"webpack-dev-server --hot --inline"</span></div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   项目根目录运行 npm start即可启动服务器 ，浏览器地址 http:<span class="comment">//localhost:8080/webpack-dev-server/(更改config文件后需要重启才会生效)</span></div></pre></td></tr></table></figure>
</li>
<li><p>加载器</p>
<ol>
<li>样式加载器:<code>css-loader style-loader</code> :(css-loader用于处理url(),style-loader把所有的样式插入到你页面的style tag中)<figure class="highlight sql"><table><tr><td class="code"><pre><div class="line">npm <span class="keyword">install</span> css-loader <span class="keyword">style</span>-loader <span class="comment">--save-dev</span></div><div class="line">// config</div><div class="line"><span class="keyword">module</span>: &#123;</div><div class="line">  loaders: [</div><div class="line">      &#123;</div><div class="line">          <span class="keyword">test</span>: /\.css$/,</div><div class="line">          loaders:[<span class="string">'style'</span>,<span class="string">'css'</span>], //  处理顺序 从右到左</div><div class="line">          <span class="keyword">include</span>:</div><div class="line">      &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<ol>
<li><p>静态资源 <code>url-loader</code></p>
   <figure class="highlight sql"><table><tr><td class="code"><pre><div class="line">npm <span class="keyword">install</span> <span class="keyword">url</span>-loader <span class="comment">--save-dev</span></div><div class="line"></div><div class="line">//config</div><div class="line">&#123;</div><div class="line">   <span class="keyword">test</span>: /\.(png|jpg)$/,</div><div class="line">   loader:<span class="string">'url?limit=1024'</span> //  当图片大小小于<span class="keyword">limit</span>限制时会自动启用base64编码</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li><p>独立CSS样式  <code>extract-text-webpack-plugin</code></p>
<p>css-loader,style-loader会将样式打包成style内联样式，如果想要打包出单独的css文件需要<code>extract-text-webpack-plugin</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">        <span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>);</div><div class="line">        <span class="built_in">module</span>.exports = &#123;</div><div class="line">        <span class="comment">// ...省略各种代码</span></div><div class="line">        <span class="built_in">module</span>: &#123;</div><div class="line">        <span class="attr">loaders</span>: [</div><div class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">"babel"</span>&#125;,</div><div class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">"style-loader"</span>, <span class="string">"css-loader"</span>)&#125;,</div><div class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.(jpg|png|svg)$/</span>, <span class="attr">loader</span>: <span class="string">"url?limit=8192"</span>&#125;,</div><div class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">"style!css!sass"</span>&#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(<span class="string">'common.js'</span>),</div><div class="line">        <span class="keyword">new</span> ExtractTextPlugin(<span class="string">"[name].css"</span>)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>插件也支持所有独立样式打包成一个css文件<br><code>new ExtractTextPlugin(&quot;style.css&quot;, {allChunks: true})</code></p>
<h3 id="三-添加第三方库"><a href="#三-添加第三方库" class="headerlink" title="三.添加第三方库"></a>三.添加第三方库</h3><figure class="highlight perl"><table><tr><td class="code"><pre><div class="line">npm install jquery moment --save-dev</div><div class="line"></div><div class="line">var <span class="function"><span class="keyword">sub</span> = <span class="title">require</span></span>('./sub');</div><div class="line">var $ = <span class="keyword">require</span>(<span class="string">'jquery'</span>);</div><div class="line">var moment = <span class="keyword">require</span>(<span class="string">'moment'</span>);</div><div class="line">var app  = document.createElement(<span class="string">'div'</span>);</div><div class="line">app.innerHTML = <span class="string">'&lt;h1&gt;Hello World it&lt;/h1&gt;'</span>;</div><div class="line">document.body.appendChild(app);</div><div class="line">app.appendChild(<span class="function"><span class="keyword">sub</span></span>());</div><div class="line">$(<span class="string">'body'</span>).append(<span class="string">'&lt;p&gt;look at me! now is '</span> + moment().format() + <span class="string">'&lt;/p&gt;'</span>);</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="四-添加ES6支持"><a href="#四-添加ES6支持" class="headerlink" title="四. 添加ES6支持"></a>四. 添加ES6支持</h3><blockquote>
<p>Babel是一个转换编译器，它能将ES6转换成ES5,并内置了React JSX扩展,React自身用于JSX语法解析的编译器JSTransform已经过期,babel取而代之。</p>
</blockquote>
<p><code>npm install babel-loader babel-preset-es2015 --save-dev</code><br><figure class="highlight gradle"><table><tr><td class="code"><pre><div class="line"><span class="comment">// config</span></div><div class="line">&#123;</div><div class="line">        test: <span class="regexp">/\.jsx?$/</span>,</div><div class="line">        loader: <span class="string">'babel'</span>,</div><div class="line">        <span class="keyword">include</span>: APP_PATH,</div><div class="line">        query: &#123;</div><div class="line">          presets: [<span class="string">'es2015'</span>]</div><div class="line">        &#125;</div><div class="line">      &#125;</div></pre></td></tr></table></figure></p>
<h3 id="五-运行"><a href="#五-运行" class="headerlink" title="五.运行"></a>五.运行</h3><ol>
<li>根目录运行<code>webpack --display-error-details</code>:加<code>--display-error-details</code>显示依赖查找过程</li>
<li>webpack可以还可以指定多份配置文件，只需在运行时加上配置文件名称即可<code>webpack --config webpack.xxx.config.js</code></li>
<li><code>webpack -p</code>,<code>-p</code>会对代码进行压缩</li>
<li>webpack -w // 提供watch方法，实时进行打包更新</li>
<li>webpack -d // 提供source map，方便调试。<h3 id="六-开发"><a href="#六-开发" class="headerlink" title="六.开发"></a>六.开发</h3></li>
<li><p>启用source-map:</p>
<blockquote>
<p>合并以后的代码，不利于排错和定位，启用source-map，出错以后就会采用source-map的形式直接显示你出错代码的位置<br><code>devtool: &#39;eval-source-map&#39;,</code></p>
</blockquote>
</li>
<li><p>配置webpack-dev-server代理</p>
<figure class="highlight less"><table><tr><td class="code"><pre><div class="line"><span class="comment">// api/*的请求都代理到http://localhost:5000</span></div><div class="line"><span class="attribute">devServer</span>: &#123;</div><div class="line">     <span class="attribute">hot</span>: true,</div><div class="line">     <span class="attribute">inline</span>: true,</div><div class="line">     <span class="comment">//其实很简单的，只要配置这个参数就可以了</span></div><div class="line">     <span class="attribute">proxy</span>: &#123;</div><div class="line">       <span class="string">'/api/*'</span>: &#123;</div><div class="line">           <span class="attribute">target</span>: <span class="string">'http://localhost:5000'</span>,</div><div class="line">           <span class="attribute">secure</span>: false</div><div class="line">       &#125;</div><div class="line">     &#125;</div><div class="line"> &#125;,</div></pre></td></tr></table></figure>
</li>
<li><p>代码检查preLoaders postLoaders</p>
<blockquote>
<p>webpack处理顺序preLoaders - loaders -postLoaders<br><code>npm install jshint-loader --save-dev</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line"><span class="attr">   module:</span> &#123;</div><div class="line">    ...</div><div class="line">    //和loaders一样的语法，很简单</div><div class="line"><span class="attr">    preLoaders:</span> [</div><div class="line">        &#123;</div><div class="line"><span class="attr">            test:</span> /\.jsx?$/,</div><div class="line"><span class="attr">            include:</span> APP_PATH,</div><div class="line"><span class="attr">            loader:</span> <span class="string">'jshint-loader'</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">    ...</div><div class="line">//配置jshint的选项，支持es6的校验</div><div class="line"><span class="attr">jshint:</span> &#123;</div><div class="line"><span class="attr">  "esnext":</span> <span class="literal">true</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>加载老式三方库</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// jQuery plugin: plugin.js</span></div><div class="line">   (<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> shade = <span class="string">"#556b2f"</span>;</div><div class="line">    $.fn.greenify = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.css( <span class="string">"color"</span>, shade );</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;(jQuery));</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 方法一：使用webpack.ProvidePlugin</span></div><div class="line"></div><div class="line"><span class="comment">// config</span></div><div class="line"><span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">   <span class="attr">$</span>: <span class="string">"jquery"</span>,</div><div class="line">   <span class="attr">jQuery</span>: <span class="string">"jquery"</span>,</div><div class="line">   <span class="string">"window.jQuery"</span>: <span class="string">"jquery"</span></div><div class="line"> &#125;)</div><div class="line"> <span class="comment">// index.js</span></div><div class="line"> <span class="keyword">import</span> <span class="string">'./plugin.js'</span>;</div><div class="line"> ...</div><div class="line"> $(<span class="string">'p'</span>).greenify();</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><div class="line">// 方法二：使用imports-loader</div><div class="line">npm <span class="keyword">install</span> imports-loader <span class="comment">--save-dev</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">'imports?jQuery=jquery!./plugin.js'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>分离逻辑代码与第三方库</p>
   <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">    <span class="comment">// 修改entry入口文件</span></div><div class="line">  entry: &#123;</div><div class="line">  <span class="attr">app</span>: path.resolve(APP_PATH, <span class="string">'index.js'</span>),</div><div class="line">  <span class="comment">//添加要打包在vendors里面的库</span></div><div class="line">  vendors: [<span class="string">'jquery'</span>, <span class="string">'moment'</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">//  添加CommonsChunkPlugin</span></div><div class="line">  plugins: [</div><div class="line">  <span class="comment">//  把入口文件里面的数组打包成verdors.js</span></div><div class="line">  <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(<span class="string">'vendors'</span>, <span class="string">'vendors.js'</span>),</div><div class="line">]</div></pre></td></tr></table></figure>
</li>
<li><p>生成多页面<br>   index.html 引用app.js vendors.js<br>   mobile.html 引用mobile.js vendors.js</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">    <span class="comment">//    mobile.js</span></div><div class="line">    <span class="keyword">import</span> <span class="string">'./main.css'</span>;</div><div class="line">    <span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span>;</div><div class="line">    <span class="keyword">import</span> <span class="string">'imports?jQuery=jquery!./plugin.js'</span>;</div><div class="line"></div><div class="line">    $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> app  = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</div><div class="line">  app.innerHTML = <span class="string">'&lt;h1&gt;Hello World&lt;/h1&gt;'</span>;</div><div class="line">  <span class="built_in">document</span>.body.appendChild(app);</div><div class="line">  $(<span class="string">'h1'</span>).greenify();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">    <span class="comment">// config</span></div><div class="line">    <span class="keyword">var</span> TEM_PATH = path.resolve(ROOT_PATH, <span class="string">'tempaltes'</span>);</div><div class="line">    entry: &#123;</div><div class="line">  <span class="comment">//三个入口文件，app, mobile和 vendors</span></div><div class="line">  app: path.resolve(APP_PATH, <span class="string">'index.js'</span>),</div><div class="line">  <span class="attr">mobile</span>: path.resolve(APP_PATH, <span class="string">'mobile.js'</span>),</div><div class="line">  <span class="attr">vendors</span>: [<span class="string">'jquery'</span>, <span class="string">'moment'</span>]</div><div class="line">&#125;,</div><div class="line"><span class="attr">output</span>: &#123;</div><div class="line">  <span class="attr">path</span>: BUILD_PATH,</div><div class="line">  <span class="attr">filename</span>: <span class="string">'[name].js'</span></div><div class="line">&#125;,</div><div class="line"><span class="attr">plugins</span>: [</div><div class="line">...</div><div class="line"><span class="comment">//创建了两个HtmlWebpackPlugin的实例，生成两个页面</span></div><div class="line"><span class="keyword">new</span> HtmlwebpackPlugin(&#123;</div><div class="line">  <span class="attr">title</span>: <span class="string">'Hello World app'</span>,</div><div class="line">  <span class="attr">template</span>: path.resolve(TEM_PATH, <span class="string">'index.html'</span>),</div><div class="line">  <span class="attr">filename</span>: <span class="string">'index.html'</span>,</div><div class="line">  <span class="comment">//chunks这个参数告诉插件要引用entry里面的哪几个入口</span></div><div class="line">  chunks: [<span class="string">'app'</span>, <span class="string">'vendors'</span>],</div><div class="line">  <span class="comment">//要把script插入到标签里</span></div><div class="line">  inject: <span class="string">'body'</span></div><div class="line">&#125;),</div><div class="line"><span class="keyword">new</span> HtmlwebpackPlugin(&#123;</div><div class="line">  <span class="attr">title</span>: <span class="string">'Hello Mobile app'</span>,</div><div class="line">  <span class="attr">template</span>: path.resolve(TEM_PATH, <span class="string">'mobile.html'</span>),</div><div class="line">  <span class="attr">filename</span>: <span class="string">'mobile.html'</span>,</div><div class="line">  <span class="attr">chunks</span>: [<span class="string">'mobile'</span>, <span class="string">'vendors'</span>],</div><div class="line">  <span class="attr">inject</span>: <span class="string">'body'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line">      // tempates目录下</div><div class="line">      //    index.html</div><div class="line">      <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">o.htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Welcome to webpack<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div><div class="line">    //  mobile.html</div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">o.htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Welcome to mobile page<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<ol>
<li>webpack打包性能优化利器 - happypack</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 原配置</span></div><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">                <span class="attr">exclude</span>: <span class="regexp">/node_modules|vendor/</span>,</div><div class="line">                <span class="attr">loader</span>: <span class="string">'babel-loader'</span>,</div><div class="line">                <span class="attr">query</span>: &#123;</div><div class="line">                    <span class="attr">presets</span>: [<span class="string">'es2015'</span>, <span class="string">'react'</span>]</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// happypack</span></div><div class="line"><span class="keyword">var</span> HappyPack = <span class="built_in">require</span>(<span class="string">'happypack'</span>);</div><div class="line"><span class="keyword">var</span> happyThreadPool = HappyPack.ThreadPool(&#123; <span class="attr">size</span>: os.cpus().length &#125;);</div><div class="line"></div><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">                <span class="attr">exclude</span>: <span class="regexp">/node_modules|vendor/</span>,</div><div class="line">                <span class="attr">loader</span>: <span class="string">'happypack/loader?id=jsx'</span>,</div><div class="line">                <span class="attr">query</span>: &#123;</div><div class="line">                    <span class="attr">presets</span>: [<span class="string">'es2015'</span>, <span class="string">'react'</span>]</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">      <span class="keyword">new</span> HappyPack(&#123;</div><div class="line">        <span class="attr">id</span>: <span class="string">'jsx'</span>,</div><div class="line">        <span class="attr">loaders</span>: [<span class="string">'babel-loader?presets[]=es2015,presets[]=react'</span>],</div><div class="line">        <span class="attr">threadPool</span>: happyThreadPool</div><div class="line">      &#125;)</div><div class="line">  ]</div></pre></td></tr></table></figure>
<p>或者每个plugin单独设置线程数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> HappyPack = <span class="built_in">require</span>(<span class="string">'happypack'</span>);</div><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">                <span class="attr">exclude</span>: <span class="regexp">/node_modules|vendor/</span>,</div><div class="line">                <span class="attr">loader</span>: <span class="string">'happypack/loader?id=jsx'</span>,</div><div class="line">                <span class="attr">query</span>: &#123;</div><div class="line">                    <span class="attr">presets</span>: [<span class="string">'es2015'</span>, <span class="string">'react'</span>]</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">      <span class="keyword">new</span> HappyPack(&#123;</div><div class="line">            <span class="attr">id</span>: <span class="string">'jsx'</span>,</div><div class="line">            <span class="attr">threads</span>: <span class="number">4</span>,</div><div class="line">            <span class="attr">loaders</span>: [<span class="string">'babel-loader?presets[]=es2015,presets[]=react'</span>]  </div><div class="line">      &#125;)</div><div class="line">  ]</div></pre></td></tr></table></figure>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://zhuanlan.zhihu.com/p/20367175?columnSlug=FrontendMagazine" target="_blank" rel="external">Webpack傻瓜式指南（一）</a></li>
<li><a href="http://taobaofed.org/blog/2016/12/08/happypack-source-code-analysis/" target="_blank" rel="external">happypack原理分析</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SAE数据库跨应用授权]]></title>
      <url>http://iminyao.com/2016/04/16/sae-authorization/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>SAE最近更改的收费标准，共享型数据库开始按小时收费，因为应用比较多，每个都有自己的数据库，一天下来消耗近100云豆，一年下来也不少钱。不过幸亏有跨应用授权功能。</p>
<p>但是光在应用管理界面授权是无法生效的，还需要在代码中设置下参数。<br>在新建mysql类时设置一下<code>appname</code>,<code>akey</code>,<code>skey</code></p>
<p>代码如下:<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">// <span class="variable">$appname</span>,<span class="variable">$akey</span>,<span class="variable">$skey</span>为主动授权的app信息</div><div class="line"><span class="variable">$mysql</span> = new SaeMysql();</div><div class="line"></div><div class="line"><span class="variable">$mysql</span>-&gt;<span class="built_in">set</span>Appname(<span class="variable">$appname</span>);</div><div class="line"></div><div class="line"><span class="variable">$mysql</span>-&gt;<span class="built_in">set</span>Auth(<span class="variable">$akey</span>, <span class="variable">$skey</span>);</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript中的垃圾回收与内存泄漏]]></title>
      <url>http://iminyao.com/2016/04/10/gc/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-垃圾回收"><a href="#一-垃圾回收" class="headerlink" title="一.垃圾回收"></a>一.垃圾回收</h3><h4 id="引用："><a href="#引用：" class="headerlink" title="引用："></a>引用：</h4><blockquote>
<p>垃圾回收算法主要依赖于引用的概念。在内存管理的环境中，一个对象如果有访问另一个对象的权限（隐式或者显式），叫做一个对象引用另一个对象。例如，一个Javascript对象具有对它 原型 的引用（隐式引用）和对它属性的引用（显式引用）。</p>
</blockquote>
<h4 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h4><blockquote>
<p>当我们用js代码创建一个引用类型的时候（以下简称对象），js引擎会在内存中开辟一块空间来存放数据，并把指针引用交给那个变量。内存是有限的，js引擎必须保证当开辟的对象没用的时候，把所分配的内存空间释放出来，这个过程叫做垃圾回收，负责回收的叫做垃圾回收器（GC）。</p>
</blockquote>
<h4 id="Javascript中的垃圾回收方法："><a href="#Javascript中的垃圾回收方法：" class="headerlink" title="Javascript中的垃圾回收方法："></a>Javascript中的垃圾回收方法：</h4><ol>
<li><p>引用计数算法</p>
<blockquote>
<p>此算法把“对象是否不再需要”简化定义为“对象有没有其他对象引用到它”。如果没有引用指向该对象（零引用），对象将被垃圾回收机制回收。</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">var</span> o = &#123; </div><div class="line">  a: &#123;</div><div class="line">    b:<span class="number">2</span></div><div class="line">  &#125;</div><div class="line">&#125;; </div><div class="line"><span class="comment">// 两个对象被创建，一个作为另一个的属性被引用，另一个被分配给变量o</span></div><div class="line"><span class="comment">// 很显然，没有一个可以被垃圾收集</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> o2 = o; <span class="comment">// o2变量是第二个对“这个对象”的引用</span></div><div class="line">o = <span class="number">1</span>; <span class="comment">// 现在，“这个对象”的原始引用o被o2替换了</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> oa = o2.a; <span class="comment">// 引用“这个对象”的a属性</span></div><div class="line"><span class="comment">// 现在，“这个对象”有两个引用了，一个是o2，一个是oa</span></div><div class="line"></div><div class="line">o2 = <span class="string">"yo"</span>; <span class="comment">// 最初的对象现在已经是零引用了</span></div><div class="line"><span class="comment">// 他可以被垃圾回收了</span></div><div class="line"><span class="comment">// 然而它的属性a的对象还在被oa引用，所以还不能回收</span></div><div class="line"></div><div class="line">oa = <span class="literal">null</span>; <span class="comment">// a属性的那个对象现在也是零引用了</span></div><div class="line"><span class="comment">// 它可以被垃圾回收了</span></div></pre></td></tr></table></figure>
</li>
<li><p>标记清除算法</p>
<blockquote>
<p>算法把“对象是否不再需要”简化定义为“对象是否可以获得”。<br>算法假定设置一个叫做根的对象（在Javascript里，根是全局对象）。定期的，垃圾回收器将从根开始，找所有从根开始引用的对象，然后找这些对象引用的对象……从根开始，垃圾回收器将找到所有可以获得的对象和所有不能获得的对象。</p>
</blockquote>
</li>
</ol>
<h3 id="二-内存泄漏"><a href="#二-内存泄漏" class="headerlink" title="二.内存泄漏"></a>二.内存泄漏</h3><h4 id="定义：-1"><a href="#定义：-1" class="headerlink" title="定义："></a>定义：</h4><blockquote>
<p>内存泄漏是指我们已经无法再通过js代码来引用到某个对象，<em>(所以能导致内存泄漏的一定是引用类型的变量)</em>但垃圾回收器却认为这个对象还在被引用，因此在回收的时候不会释放它。导致了分配的这块内存永远也无法被释放出来。如果这样的情况越来越多，会导致内存不够用而系统崩溃。</p>
</blockquote>
<h4 id="产生原因"><a href="#产生原因" class="headerlink" title="产生原因:"></a>产生原因:</h4><blockquote>
<p>绝大部分的内存泄露都不是有 Javascript 自身引起的，大多数内存泄露总是源自于和外部 API 的交互，特别是 DOM，以及一些 HTML（5）提供的外部 API。</p>
</blockquote>
<h4 id="常见场景："><a href="#常见场景：" class="headerlink" title="常见场景："></a>常见场景：</h4><ol>
<li><p>IE6/7 DOM对象(仅限引用计数算法)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// obj有了一个引用指向事件处理属性onclick</span></div><div class="line">   <span class="comment">// 事件处理也有一个对div的引用可以在函数作用域中被访问到</span></div><div class="line">   <span class="comment">// 而Js函数和DOM之间相互不可控，即便DOM被移除，事件回调函数也依旧无法回收</span></div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params"></span>) </span></div><div class="line">&#123; </div><div class="line">    <span class="keyword">var</span> obj = <span class="built_in">document</span>.createElement(<span class="string">"XXX"</span>); </div><div class="line">    obj.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </div><div class="line">        <span class="comment">// ... </span></div><div class="line">    &#125; </div><div class="line">&#125;</div><div class="line"></div><div class="line">bindEvent();</div></pre></td></tr></table></figure>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// 同样的代码，因为otherObj本身是Javascript对象，是可控的，GC会自动回收，所以不会造成内存泄漏</span></div><div class="line">   <span class="keyword">var</span> otherJsObj = &#123;&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span><span class="params">()</span> </span></div><div class="line">&#123; </div><div class="line">    otherJsObj.func1 = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123; </div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125; </div><div class="line">&#125;</div><div class="line"></div><div class="line">bind();</div></pre></td></tr></table></figure>
</li>
<li><p>JavaScript循环引用</p>
 <figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">var</span> o = &#123;&#125;;</div><div class="line">  <span class="keyword">var</span> o2 = &#123;&#125;;</div><div class="line">  o.a = o2; <span class="comment">// o 引用 o2</span></div><div class="line">  o2.a = o; <span class="comment">// o2 引用 o</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="string">"azerty"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">f();</div><div class="line"><span class="comment">// 两个对象被创建，并互相引用，形成了一个循环</span></div><div class="line"><span class="comment">// 他们被调用之后不会离开函数作用域</span></div><div class="line"><span class="comment">// 所以他们已经没有用了，可以被回收了</span></div><div class="line"><span class="comment">// 然而，引用计数算法考虑到他们互相都有至少一次引用，所以他们不会被回收</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="编码原则："><a href="#编码原则：" class="headerlink" title="编码原则："></a>编码原则：</h3><ol>
<li><p>事件委托:</p>
<blockquote>
<p>JS事件基本上都绑定在 DOM 对象上，因此要尽可能的利用事件委托，把相关联的事件绑定在同一个 DOM 对象上，要记得善加利用事件的冒泡和传播特性。如果这些事件乱绑一气，又不会在合适的时刻对它们解绑或者把宿主销毁，那么这些回调函数的引用就会一直被保持着等待触发执行。</p>
</blockquote>
</li>
<li><p>显示标注为待销毁：</p>
<blockquote>
<p>可复用的对象（特别是 DOM 对象）应及早将其引用赋给变量，并保持使用该变量来进行进一步的操作，这样一来 GC 回收会变得更加高效,因为这些对象都能在恰当的时刻被主动销毁，比如说附个 null 给它的引用，一旦对象没有了任何引用，GC 会很快将其加入销毁队列。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params"></span>) </span></div><div class="line">&#123; </div><div class="line">    <span class="keyword">var</span> obj = <span class="built_in">document</span>.createElement(<span class="string">"XXX"</span>); </div><div class="line">    obj.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </div><div class="line">        <span class="comment">// 显示赋值为null</span></div><div class="line">        obj.onclick = <span class="literal">null</span>;</div><div class="line">        <span class="comment">// ... </span></div><div class="line">    &#125; </div><div class="line">&#125;</div><div class="line"></div><div class="line">bindEvent();</div></pre></td></tr></table></figure>
</li>
<li><p>避免使用匿名函数：</p>
<blockquote>
<p>使用命名函数也要比大量使用匿名函数要合理得多，还是上面那个例子，即使你非要用 click，那也不要用匿名函数，否则解绑的时候无法指明要接绑的函数。（IIFE 是安全的，它永远不会引起内存泄漏，因为没人引用它）</p>
</blockquote>
</li>
<li><p>事件命名空间机制： </p>
<blockquote>
<p>触发事件的时候别一股脑的都往默认事件类型身上丢，jQuery 提供了很好的事件命名空间机制，要善于利用。比如说 $(selector).on(‘click.my_event’, fn)，要比 $(selector).on(‘click’, fn) 漂亮得多。Why？因为你可以随时 $(selector).off(‘click.my_event’)，而 click 你就不敢随便解绑了，因为鬼知道还有谁在监听它？</p>
</blockquote>
</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management" target="_blank" rel="external">JavaScript内存管理</a></li>
<li><a href="https://segmentfault.com/q/1010000000414875" target="_blank" rel="external">内存泄漏</a></li>
<li><a href="https://github.com/CN-Chrome-DevTools/CN-Chrome-DevTools/blob/master/md/Performance-Profiling/javascript-memory-profiling.md" target="_blank" rel="external">JacaScript内存分析</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Git常用命令]]></title>
      <url>http://iminyao.com/2016/04/04/git-cmd/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-创建版本库"><a href="#一-创建版本库" class="headerlink" title="一.创建版本库"></a>一.创建版本库</h3><ol>
<li>创建版本库 <code>git init</code>:将当前目录变为Git版本库，自动创建<code>.git</code>目录(<code>ls -ah</code>)</li>
<li>添加文件到版本库<code>git add &lt;file&gt;</code>,特别的<code>git add .</code>添加当前目录下所有文件和子目录</li>
<li>提交文件到版本库<code>git commit -m &quot;提交说明&quot;</code></li>
</ol>
<h3 id="二-版本管理"><a href="#二-版本管理" class="headerlink" title="二.版本管理"></a>二.版本管理</h3><ol>
<li>版本库当前状态<code>git status</code></li>
<li>版本比较<code>git diff</code></li>
<li>查看提交历史<code>git log</code>:精简操作信息加<code>--pretty=oneline</code>,只显示版本号和提交说明</li>
<li><p>版本回退<code>git reset &lt;commit-id&gt;</code>:其中<code>HEAD</code>表示当前版本，<code>HEAD^</code>上一版本，以此类推，上10个版本，简写<code>HEAD~10</code>,<code>&lt;commit-id&gt;</code>无需写全，Git会自动查找。默认的<code>git reset会保留工作目录，修改的内容还在磁盘上</code>，<code>git reset --hard</code>会撤销提交以及修改的内容.</p>
<blockquote>
<p>回退工作原理：</p>
<p>Git在内部有个指向当前版本的HEAD指针，当你回退版本的时候，Git仅仅是把HEAD指向回退版本</p>
</blockquote>
<p> <img src="/images/git-head-20160721.jpeg" alt="HEAD"></p>
</li>
<li><p>恢复到新版本<code>git reflog</code>查看命令历史，找到版本号，然后<code>git reset</code>即可</p>
</li>
</ol>
<h3 id="三-工作区和暂缓区"><a href="#三-工作区和暂缓区" class="headerlink" title="三.工作区和暂缓区"></a>三.工作区和暂缓区</h3><ol>
<li>工作区(Working Directory)：电脑当前目录</li>
<li><p>版本库(Repository):工作区隐藏目录<code>.git</code>,包含称为stage（或者叫index）的暂存区还有自动创建的第一分支<code>master</code>以及<code>HEAD</code>指针<br> <img src="/images/git-add-20160721.jpeg" alt="工作区暂缓区"></p>
<blockquote>
<p>git往版本库添加分两步，<code>git add</code>,把文件修改添加到暂缓区，<code>git commit</code>把所有修改提交到当前分支</p>
</blockquote>
</li>
<li>撤销修改<code>git checkout --&lt;file&gt;</code>:撤销工作区的修改</li>
<li>删除文件<code>git rm &lt;file&gt;</code>，然后<code>git commit</code></li>
</ol>
<h3 id="四-远程仓库"><a href="#四-远程仓库" class="headerlink" title="四.远程仓库"></a>四.远程仓库</h3><ol>
<li>将本地仓库关联远程仓库：<br><code>git remote add origin git@github.com/username/repositoryname.git</code><br>然后提交本地代码<code>git push -u origin master</code></li>
<li>从远程库克隆: <code>git clone &lt;url&gt;</code>:<url>支持https协议和ssh协议(无需每次push都输密码)</url></li>
</ol>
<h3 id="五-分支管理"><a href="#五-分支管理" class="headerlink" title="五.分支管理"></a>五.分支管理</h3><ol>
<li><p>创建与合并分支过程：</p>
<ul>
<li><p><code>master</code>分支:主分支，<code>HEAD</code>指向当前分支<br> <img src="/images/git-dev-20160721.png" alt="DEV"></p>
</li>
<li><p><code>dev</code>分支:新建分支，git创建一个<code>dev</code>指针，指向<code>master</code>相同的提交，将<code>HEAD</code>指向<code>dev</code>，此时<code>dev</code>就是当前分支<br><img src="/images/git-master-20160721.png" alt="MASTER"></p>
</li>
<li>新的修改和提交将针对<code>dev</code>分支<br><img src="/images/git-branch-20160721.png" alt="BRANCH"></li>
<li>将<code>dev</code>合并到<code>master</code><br><img src="/images/git-checkout-20160721.png" alt="CHECKOUT"></li>
</ul>
</li>
<li>创建并切换分支:<code>git checkout -b &lt;branch-name&gt;</code>,相当与<code>git branch &lt;branch-name&gt; git checkout &lt;branch-name&gt;</code></li>
<li>查看分支:<code>git branch</code>，显示所有分支，前面带<code>*</code>的为当前分支</li>
<li>合并分支:<code>git merge &lt;branch-name&gt;</code>,合并指定分支到当前分支，合并前要先切会主分支</li>
<li>删除分支 <code>git branch -d &lt;branch-name&gt;</code>,强行删除<code>git branch -D &lt;branch-name&gt;</code></li>
<li>删除远端分支 <code>git push [远程名] :[分支名]</code>，例如<code>git push origin :serverfix</code></li>
</ol>
<h3 id="六-解决冲突"><a href="#六-解决冲突" class="headerlink" title="六.解决冲突"></a>六.<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000" target="_blank" rel="external">解决冲突</a></h3><h3 id="七-临时存放工作现场"><a href="#七-临时存放工作现场" class="headerlink" title="七.临时存放工作现场"></a>七.临时存放工作现场</h3><ol>
<li>保存当前工作现场:<code>git stash</code>(完整版命令是<code>git stash &#39;message&#39;</code>)</li>
<li>查看保存的工作现场:<code>git stash list</code></li>
<li>恢复现场:<code>git stash apply</code>,恢复后<code>stash</code>并没有删除，需要使用<code>git stash drop</code>删除;第二种方法<code>git stash pop</code>,恢复时<code>stash</code>也被删除，多个<code>stash</code>时，<code>git stash apply@{stash-id}</code></li>
<li>删除所以存储的进度<code>git stash clear</code></li>
</ol>
<h3 id="八-更新本地仓库分支"><a href="#八-更新本地仓库分支" class="headerlink" title="八.更新本地仓库分支"></a>八.更新本地仓库分支</h3><p>最近发现在本地分支列表里还会显示我很久之前在远端仓库早已删除的分支，这样分支切换起来比较麻烦，候选项老是出现之前已经删掉的分支。其实可以通过<code>git fetch -p</code>这个命令来删除本地仓库中远端仓库中不存在的分支。</p>
<p><strong>官方对命令的释义：</strong></p>
<blockquote>
<p>remove any remote tracking branches that no longer exist remotely</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">Git教程</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[301与302重定向区别]]></title>
      <url>http://iminyao.com/2016/04/03/redirect-301-302/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>301，302 都是HTTP状态的编码，都代表着某个URL发生了转移，不同之处在于：<br>301 redirect: 301 代表永久性转移(Permanently Moved)，<br>302 redirect: 302 代表暂时性转移(Temporarily Moved )</p>
</blockquote>
<h3 id="301重定向优势"><a href="#301重定向优势" class="headerlink" title="301重定向优势"></a>301重定向优势</h3><blockquote>
<p>用301跳转方式跳转的话，搜索引擎会把老地址的PageRank等信息带到新地址，同时在搜索引擎索引库中彻底废弃掉原先的老地址。</p>
</blockquote>
<h3 id="302重定向存在问题"><a href="#302重定向存在问题" class="headerlink" title="302重定向存在问题"></a>302重定向存在问题</h3><blockquote>
<p>302转向可能会有URL规范化及网址劫持的问题。可能被搜索引擎判为可疑转向，甚至认为是作弊。</p>
</blockquote>
<h4 id="网址劫持"><a href="#网址劫持" class="headerlink" title="网址劫持"></a>网址劫持</h4><blockquote>
<p>从定义来说，从网址A做一个302重定向到网址B时，主机服务器的隐含意思是网址A随时有可能改主意，重新显示本身的内容或转向其他的地方。大部分的搜索引擎在大部分情况下，当收到302重定向时，一般只要去抓取目标网址就可以了，也就是说网址B。</p>
<p>实际上如果搜索引擎在遇到302转向时，百分之百的都抓取目标网址B的话，就不用担心网址URL劫持了。问题就在于，有的时候搜索引擎，尤其是Google，并不能总是抓取目标网址。为什么呢？比如说，有的时候A网址很短，但是它做了一个302重定向到B网址，而B网址是一个很长的乱七八糟的URL网址，甚至还有可能包含一些问号之类的参数。很自然的，A网址更加用户友好，而B网址既难看，又不用户友好。这时Google很有可能会仍然显示网址A。</p>
<p>由于搜索引擎排名算法只是程序而不是人，在遇到302重定向的时候，并不能像人一样的去准确判定哪一个网址更适当，这就造成了网址URL劫持的可能性。也就是说，一个不道德的人在他自己的网址A做一个302重定向到你的网址B，出于某种原因， Google搜索结果所显示的仍然是网址A，但是所用的网页内容却是你的网址B上的内容，这种情况就叫做网址URL劫持。你辛辛苦苦所写的内容就这样被别人偷走了。</p>
</blockquote>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.seozac.com/seo/url-canonicalization/" target="_blank" rel="external">URL网址规范化</a></li>
<li><a href="#29">Apache重定向配置详解</a></li>
<li><a href="#4">iminyao重定向实例</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS选择器]]></title>
      <url>http://iminyao.com/2016/03/28/CSS-selector/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ul>
<li><p><strong>元素选择器:</strong></p>
<pre><code>h1,h2,h3{color:red; background:gray;}
</code></pre><ul>
<li>通配选择器:<br><code>* {color:red;}</code></li>
</ul>
</li>
<li><p><strong>类选择器：</strong></p>
<pre><code>.lsd{font-weight:blod;}
</code></pre><ul>
<li>配合元素选择器使用：<br>  <code>p.lsd{font-style:italic;}</code></li>
<li><p>多类选择器:</p>
<blockquote>
<p>仅匹配同时包含多个类名的元素</p>
</blockquote>
<pre><code>.lsd1.lsd2 {background:sliver;}
p.lsd1.lsd2 {background:sliver;}
</code></pre></li>
</ul>
</li>
<li><p><strong>ID选择器：</strong></p>
<p>  <code>#lsd {color:gray;}</code></p>
<ul>
<li>ID选择器会忽略通配选择器 <code>*</code></li>
<li>ID选择器不能跟类选择器那样结合使用，ID属性不允许有以空格分隔的词列表</li>
</ul>
</li>
<li><p><strong>属性选择器</strong></p>
<ul>
<li><p>简单属性选择：</p>
<blockquote>
<p>匹配所有有class属性的h1元素</p>
</blockquote>
<pre><code>h1[class]{color:red;}
</code></pre></li>
<li><p>根据具体属性选择：</p>
<pre><code>a[href=&quot;http://www.iminyao.com&quot;]{color:gray;}
</code></pre></li>
<li><p>根据部分属性值选择:</p>
<blockquote>
<p>匹配包含lsd类的p元素，eg. <code>&lt;p class=&quot;lsd rgb&quot;&gt;&lt;/P&gt;</code></p>
</blockquote>
<pre><code>p[class~=&quot;lsd&quot;]{color:red;}
</code></pre></li>
<li><p>子串匹配属性选择器：</p>
<pre><code>[foo^=&quot;bar&quot;] 匹配开头
[foo$=&quot;bar&quot;] 匹配结尾
[foo*=&quot;bar&quot;] 匹配包含子串&quot;bar&quot;的所有元素
</code></pre></li>
<li><p>特定属性选择器：</p>
<blockquote>
<p>匹配以<code>en</code>和<code>en-</code>开头的元素</p>
</blockquote>
<pre><code>*[lang|=&quot;en&quot;]{color:red;}
</code></pre></li>
<li><p><strong>应用：</strong></p>
<ul>
<li><p>对所有带有<code>alt</code>属性的图像应用特殊样式：</p>
<pre><code>`img[alt]{border:3px solid red;}`
</code></pre></li>
<li><p>对指向iminyao的所有链接应用特殊样式：</p>
<pre><code>`a[href*=&quot;http://www.iminyao.com&quot;]{font-weight:bold;}`
</code></pre></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>后代选择器：</strong></p>
<ul>
<li><p>根据上下文选择元素：(任意的后代元素)</p>
<pre><code>`h1 em{color:gray;} //匹配作为h1元素后代的任何em元素`
`blockquote b,p b {color:gray;} //匹配段落或块引用后代中b元素`
</code></pre></li>
<li><p>选择子元素：(特定后代元素)</p>
<pre><code>`h1 &gt; em{color:red;} //仅匹配h1后面紧跟的em`
</code></pre></li>
<li>兄弟选择器：<pre><code>`h1 ~ p{margin:0;}`
</code></pre></li>
<li>相邻兄弟选择器：<pre><code>`h1 + p{margin:0;} //仅匹配紧跟后面的兄弟元素，两个元素之间文本内容不影响选择器`
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li><p><strong>伪类选择器：</strong></p>
<ul>
<li><p>链接伪类(静态伪类)： <code>:link</code>、<code>:visited</code></p>
<p>  <code>a:link{color:red;}</code></p>
</li>
<li><p>动态伪类：<br>  <code>:focus</code>、<code>:hover</code>、<code>:active</code> </p>
<p>  <code>input:link,input:visited{font-size:13px;}</code></p>
</li>
<li><p><code>first-child</code>伪类：</p>
<p>  <code>p:first-child{font-size:13px;} // 选择作为某元素的第一个p子元素</code></p>
</li>
<li><p><code>not</code>伪类</p>
<pre><code>`div#columns:hover figure:not(:hover) { opacity: 0.4; }`
// 用户用鼠标滑过容器时，除了用户直接用鼠标滑过或悬停的那个figure元素之外，其它的figure元素的透明度为0.4。
</code></pre><p>   <a href="http://www.htmleaf.com/ziliaoku/qianduanjiaocheng/201503091492.html" target="_blank" rel="external">使用纯CSS制作PINTEREST样式的瀑布流图片列布局</a></p>
</li>
<li>结合伪类：<br>  <code>a:link:hover{color:red;}</code></li>
</ul>
</li>
<li><p><strong>伪元素选择器：</strong></p>
<ul>
<li><p>首字母选择器：</p>
<p><code>p:first-letter{color:red;} //设置块级元素的首字母样式</code></p>
</li>
<li><p>首行选择器：</p>
<p><code>p:first-line{color:red;}</code></p>
</li>
<li><code>:before</code>、<code>:after</code>元素：<br><code>h2:before{content:&quot;.&quot;;display:hidden;}</code> </li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS三种基本定位机制]]></title>
      <url>http://iminyao.com/2016/03/28/CSS-position/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="CSS常用的定位方法："><a href="#CSS常用的定位方法：" class="headerlink" title="CSS常用的定位方法："></a>CSS常用的定位方法：</h2><ol>
<li>相对定位</li>
<li>浮动</li>
<li>绝对定位：直接应用于body下元素最佳</li>
<li>margin</li>
</ol>
<h3 id="浮动定位劣势："><a href="#浮动定位劣势：" class="headerlink" title="浮动定位劣势："></a>浮动定位劣势：</h3><ol>
<li>浮动的破坏性在于切断line box链，致使高度塌陷，可修复</li>
</ol>
<h3 id="绝对定位劣势："><a href="#绝对定位劣势：" class="headerlink" title="绝对定位劣势："></a>绝对定位劣势：</h3><ol>
<li>破坏布局(降低了页面的扩展性和维护性)<blockquote>
<p>因为绝对定位的元素与文档流无关，所以他们不影响普通流中的框，如果扩大绝对定位的框(增加字号等)，周围的框不会重新定位。因此，尺寸的任何改变都会导致绝对定位的框产生重叠，从而破坏布局。</p>
</blockquote>
</li>
<li>高度宽度皆塌陷，不可修复</li>
<li><p>流动性差：</p>
<blockquote>
<p>由于absolute属性（尤其是带有left/top值）的破坏性，会导致高宽塌陷，于是，不得已，需要设定一个高度值（或是足以撑开高度的值）</p>
</blockquote>
<p><img src="http://image.zhangxinxu.com/image/blog/201012/2010-12-09_221942.png" alt="sina1"><br><img src="http://image.zhangxinxu.com/image/blog/201012/2010-12-09_222350.png" alt="sina2"></p>
<h4 id="测试代码："><a href="#测试代码：" class="headerlink" title="测试代码："></a>测试代码：</h4><figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">// HTML</span></div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"div"</span>&gt;</div><div class="line">    &lt;<span class="selector-tag">img</span> src=<span class="string">"http://image.zhangxinxu.com/image/study/s/s256/mm1.jpg"</span> /&gt;</div><div class="line">    &lt;p&gt;图片无absolute&lt;/p&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"div"</span>&gt;</div><div class="line">    &lt;<span class="selector-tag">img</span> class=<span class="string">"abs"</span> src=<span class="string">"http://image.zhangxinxu.com/image/study/s/s256/mm1.jpg"</span> /&gt;</div><div class="line">    &lt;p&gt;图片absolute后&lt;/p&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line"><span class="comment">// CSS</span></div><div class="line"><span class="selector-class">.div</span> &#123; <span class="attribute">padding</span>:<span class="number">20px</span>; <span class="attribute">margin</span>:<span class="number">10px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>; <span class="attribute">background-color</span>:<span class="number">#f0f3f9</span>; <span class="attribute">float</span>:left; &#125;</div><div class="line"><span class="selector-class">.abs</span> &#123; <span class="attribute">position</span>:absolute; &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="http://image.zhangxinxu.com/image/blog/201012/2010-12-09_233323.jpg" alt="pic"></p>
<h3 id="margin劣势："><a href="#margin劣势：" class="headerlink" title="margin劣势："></a>margin劣势：</h3><ol>
<li>margin-top值的改变会产生更强的回流(滚动播放效果时)</li>
</ol>
<h3 id="清理-clear-的本质："><a href="#清理-clear-的本质：" class="headerlink" title="清理(clear)的本质："></a>清理(clear)的本质：</h3><ul>
<li><p><strong>CSS2</strong>中，清理元素时，浏览器在元素顶上添加足够的外边距，使元素的顶边缘垂直下降到浮动框的下面。<br><img src="https://cloud.githubusercontent.com/assets/4004044/7001000/bc14e862-dc62-11e4-80ca-79efbd6f971a.png" alt="clear"></p>
</li>
<li><p><strong>CSS2.1</strong>中，引入一个清除区域(clearance),清除区域是在元素上外边距之上增加的额外间隔，不允许任何浮动元素进入这个范围内。也就是说元素设置<code>clear</code>属性时，它的外边距并不改变。之所以会向下移是这个清除区域造成的。</p>
</li>
</ul>
<h3 id="1-实例："><a href="#1-实例：" class="headerlink" title="1.实例："></a>1.实例：</h3><pre><code>img.sider{float:left; margin:0; }
h3{border:1px solid gray; clearleft; margin-top:15px; }

&lt;img src=&quot; &quot; class=&quot;sider&quot; height=&quot;50&quot; width=&quot;50&quot;&gt;
&lt;img src&quot; &quot; height=&quot;10&quot; width=&quot;50&quot;&gt;
&lt;h3&gt;Why....&lt;/h3&gt;
</code></pre><p><img src="https://cloud.githubusercontent.com/assets/4004044/7001001/c516e640-dc62-11e4-9b16-338c447b83fc.png" alt="clear_01"></p>
<blockquote>
<p>示例中h3上边框与浮动图像下边框之间没有间隔，因为在h3的上边距(15px)之上增加了25px的清除区域，将h3的上边距边界推到刚好越过浮动元素的下边界。一般都会这样，除非h3的上边距计算值<code>&gt;40px(50px-10px)</code>，在这种情况下,h3会很自然的放在浮动元素的下面，<code>clear</code>值是什么则无关紧要。</p>
</blockquote>
<ul>
<li><p><strong>解决方法：</strong><br>  要确保一个清除元素的顶端与一个浮动元素的低端之间有一定的空间，<strong>可以为浮动元素本身设置一个下外边距</strong>。</p>
<pre><code>img.sider{float:left; margin:0 0 15px; }
h3{border:1px solid gray; clear:left; }
</code></pre><ul>
<li><strong>原理：</strong>浮动元素的外边距边界定义了浮动框的边界。 <h3 id="2-实例："><a href="#2-实例：" class="headerlink" title="2.实例："></a>2.实例：</h3>.news{<br>  background-color:gray;<br>  border:solid 1px black;<br>  }<br>.news img{<br>  float:left;<br>  }<br>.news p{<br>  float:right;<br>  }<div class="news"><br>  <img src=" "><br>  <p>Some text</p><br></div>

</li>
</ul>
</li>
</ul>
<blockquote>
<p>因为浮动元素脱离了文档流，所以包围图片和文字的<code>div</code>不占据空间</p>
</blockquote>
<p><img src="https://cloud.githubusercontent.com/assets/4004044/7001009/dd6cac66-dc62-11e4-9496-e358787a0090.png" alt="clear_02"></p>
<ol>
<li><strong>解决方案1：</strong>在最后一段下面添加空元素并且清理它。</li>
</ol>
<pre><code>.clear{
clear:both;
}

&lt;div class=&quot;news&quot;&gt;
&lt;img src=&quot; &quot;&gt;
&lt;p&gt;Some text&lt;/p&gt;
&lt;br class=&quot;clear&quot; /&gt;
&lt;/div&gt;
</code></pre><ol>
<li><p><strong>解决方案2：</strong>直接选择浮动容器<code>div</code></p>
<pre><code>.news{
float:left;
} 
</code></pre></li>
<li><p><strong>解决方案3：</strong>设置<code>overflow</code>为<code>hidden</code>或<code>auto</code></p>
<pre><code>.news{
    overflow:hidden;
}
</code></pre></li>
<li><p><strong>解决方案4：</strong><code>:after</code>伪元素(CSS生成内容)</p>
<pre><code>&lt;div class=&quot;news clear&quot;&gt;
    &lt;img src=&quot;&quot; /&gt;
    &lt;p&gt;Some text&lt;/p&gt;
&lt;/div&gt;

.clear:after{
    content:&quot;.&quot;;
    height:0;
    visibility:hidden;
    display:block;    
    clear:both;
}
</code></pre></li>
<li>JavsScript方法</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.zhangxinxu.com/wordpress/2011/03/css-%E7%9B%B8%E5%AF%B9%E7%BB%9D%E5%AF%B9relativeabsolute%E5%AE%9A%E4%BD%8D%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="external">css-相对绝对relativeabsolute定位系列（一）</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2011/03/css-%E7%9B%B8%E5%AF%B9%E7%BB%9D%E5%AF%B9relativeabsolute%E5%AE%9A%E4%BD%8D%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89/" target="_blank" rel="external">css-相对绝对relativeabsolute定位系列（二）</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS3 盒子应用]]></title>
      <url>http://iminyao.com/2016/03/23/CSS3-box/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="透明盒子-通过设置不透明度实现"><a href="#透明盒子-通过设置不透明度实现" class="headerlink" title="透明盒子(通过设置不透明度实现)"></a>透明盒子(通过设置不透明度实现)</h3><blockquote>
<p>rgba 与opacity应用范围:<br>    1.使用多种颜色(元素)的半透明效果，使用opacity不仅背景颜色，连文本颜色，边框颜色也会变透明<br>    2.在不知道颜色的情况下，实现半透明效果(例如通过其他样式表或JavaScript代码来设置半透明效果的)应使用opacity<br>    3.实现图片半透明效果，应该用opacity<br>    4.实现渐变动画效果，应该用opacity</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.semitransparentBox</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">rgba</span>(170,240,0,0.5);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.semitransparentBox1</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">rgb</span>(170,240,0);</div><div class="line">	<span class="attribute">opacity</span>: <span class="number">0.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="圆角盒子（通过设置border-radius属性实现）"><a href="#圆角盒子（通过设置border-radius属性实现）" class="headerlink" title="圆角盒子（通过设置border-radius属性实现）"></a>圆角盒子（通过设置border-radius属性实现）</h3><figure class="highlight css"><table><tr><td class="code"><pre><div class="line">		<span class="selector-class">.roundBox</span>&#123;</div><div class="line">			<span class="attribute">text-align</span>: center;</div><div class="line">			<span class="attribute">background</span>: yellow;	</div><div class="line">			<span class="attribute">border-radius</span>: <span class="number">25px</span> <span class="number">50px</span> <span class="number">25px</span> <span class="number">85px</span>;</div><div class="line">		&#125;</div><div class="line"><span class="comment">/* 通过设置两个值（水平半径，垂直半径）可以实现把圆拉伸为椭圆，即让某一个轴向的圆弧更长 */</span></div><div class="line">		<span class="selector-class">.roundBox1</span>&#123;</div><div class="line">			<span class="attribute">background</span>: blue;</div><div class="line">			<span class="attribute">border-top-left-radius</span>: <span class="number">150px</span> <span class="number">30px</span>;</div><div class="line">			<span class="attribute">border-top-right-radius</span>: <span class="number">150px</span> <span class="number">30px</span>;</div><div class="line">		&#125;</div></pre></td></tr></table></figure>
<h3 id="背景盒子（借助CSS3支持多背景-新增的background-position属性）"><a href="#背景盒子（借助CSS3支持多背景-新增的background-position属性）" class="headerlink" title="背景盒子（借助CSS3支持多背景 新增的background-position属性）"></a>背景盒子（借助CSS3支持多背景 新增的background-position属性）</h3><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.decoratedBox</span>&#123;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">50px</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">50px</span>;</div><div class="line">	<span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"pen_blue.gif"</span>),<span class="built_in">url</span>(<span class="string">"pen_green.gif"</span>);</div><div class="line">	<span class="attribute">background-position</span>: left top,right bottom;</div><div class="line">	<span class="attribute">background-repeat</span>: no-repeat, no-repeat; </div><div class="line">&#125;</div><div class="line"><span class="selector-class">.decoratedBox1</span>&#123;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">50px</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">50px</span>;</div><div class="line">	<span class="attribute">background-image</span>: <span class="built_in">url</span>(pen_green.gif),<span class="built_in">url</span>(pen_blue.gif),<span class="built_in">url</span>(pen_medium.gif);</div><div class="line">	<span class="attribute">background-position</span>: left top,left top,right bottom;</div><div class="line">	<span class="attribute">background-repeat</span>: no-repeat,repeat-x,no-repeat;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="盒子阴影（box-shadow属性）"><a href="#盒子阴影（box-shadow属性）" class="headerlink" title="盒子阴影（box-shadow属性）"></a>盒子阴影（box-shadow属性）</h3><figure class="highlight css"><table><tr><td class="code"><pre><div class="line">	<span class="selector-class">.shadowedBox</span>&#123;</div><div class="line">		<span class="attribute">border</span>:thin <span class="number">#336699</span> solid;</div><div class="line">		<span class="attribute">border-radius</span>: <span class="number">25px</span>;</div><div class="line">		<span class="attribute">box-shadow</span>:<span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> <span class="number">5px</span> gray inset; </div><div class="line"><span class="comment">/*	前两个值是水平和垂直方向的偏移量 第三个是设置模糊距离（模糊程度） 第四个设置伸展范围（可选） 第五个设置阴影颜色(添加inset会在元素内部)  */</span></div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.textShadow</span>&#123;</div><div class="line">		<span class="attribute">font-size</span>: <span class="number">30px</span>;</div><div class="line">		<span class="attribute">font-weight</span>: bold;</div><div class="line">		<span class="attribute">text-shadow</span>:gray <span class="number">10px</span> <span class="number">10px</span> <span class="number">7px</span>; <span class="comment">/* 属性不同 先是颜色 然后水平垂直偏移量 最后设置模糊值*/</span></div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h3 id="渐变盒子（gradient属性）"><a href="#渐变盒子（gradient属性）" class="headerlink" title="渐变盒子（gradient属性）"></a>渐变盒子（gradient属性）</h3><blockquote>
<p>渐变是多种颜色混合而成的效果（本质上渐变就是两种或更多种颜色的混合）</p>
</blockquote>
<ol>
<li>线性渐变 linear-gradient</li>
<li>放射性渐变 radial-gradient<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.colorBlendBox</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">-ms-linear-gradient</span>(top,red 0%,orange 20%,yellow 80%, violet 100%); <span class="comment">/*	设置渐变点	*/</span></div><div class="line">	<span class="attribute">background</span>: <span class="built_in">-moz-linear-gradient</span>(top,white,blue);   <span class="comment">/*	从上至下渐变	*/</span></div><div class="line">	<span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(top left,white,lightblue); <span class="comment">/*	从左上到右下渐变	*/</span></div><div class="line">&#125;</div><div class="line"><span class="selector-class">.colorBlendBox1</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">-moz-radial-gradient</span>(circle,white,lightblue); <span class="comment">/* 白色圆心逐渐过渡到圆周的蓝色 */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS3 transition与transform]]></title>
      <url>http://iminyao.com/2016/03/23/CSS3-transition/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="背景"><a href="#背景" class="headerlink" title="背景:"></a>背景:</h3><blockquote>
<p>CSS引入伪类，CSS3新增<code>transition</code>属性</p>
</blockquote>
<h3 id="基本的颜色过渡"><a href="#基本的颜色过渡" class="headerlink" title="基本的颜色过渡"></a>基本的颜色过渡</h3><ul>
<li><p>实例1：按钮颜色过渡</p>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.slickButton</span>&#123;</div><div class="line">	<span class="attribute">color</span>: white;</div><div class="line">	<span class="attribute">font-weight</span>: bold;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">border</span>:solid <span class="number">1px</span> black;</div><div class="line">	<span class="attribute">cursor</span>: pointer;</div><div class="line">	<span class="attribute">transition</span>:background <span class="number">0.5s</span>,color <span class="number">5s</span>;	<span class="comment">/*设置背景、颜色过渡,时间分别为0.5秒 5秒 */</span>		</div><div class="line">	<span class="attribute">transition</span>:all <span class="number">0.5s</span>;  	                            <span class="comment">/* 方法二 设置过渡所有样式*/</span></div><div class="line">&#125;</div><div class="line"><span class="selector-class">.slickButton</span><span class="selector-pseudo">:hover</span>&#123;</div><div class="line">	<span class="attribute">color</span>: black;</div><div class="line">	<span class="attribute">background</span>: yellow;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>实例2：白天夜晚切换</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Transition Button<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">  <span class="attribute">position</span>: relative;</div><div class="line">  <span class="attribute">height</span>: <span class="number">240px</span>;               <span class="comment">/* 设置高度为240px 使两张图片重叠 */</span></div><div class="line">  <span class="attribute">margin</span>: <span class="number">5px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">button</span> &#123;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">img</span> &#123;</div><div class="line">  <span class="attribute">position</span>: absolute;</div><div class="line">  <span class="attribute">-webkit-transition</span>: opacity <span class="number">10s</span>;</div><div class="line">  <span class="attribute">transition</span>: opacity <span class="number">10s</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.transparent</span> &#123;</div><div class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.solid</span> &#123;</div><div class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toNight</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> nightImage = <span class="built_in">document</span>.getElementById(<span class="string">"nightImage"</span>);</div><div class="line">  nightImage.className = <span class="string">"solid"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toDay</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> nightImage = <span class="built_in">document</span>.getElementById(<span class="string">"nightImage"</span>);</div><div class="line">  nightImage.className = <span class="string">"transparent"</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"[day.png](http://prosetech.com/html5/Chapter%2006/day.png)"</span> <span class="attr">alt</span>=<span class="string">"Daytime view"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"nightImage"</span> <span class="attr">src</span>=<span class="string">"[night.png](http://prosetech.com/html5/Chapter%2006/night.png)"</span> <span class="attr">alt</span>=<span class="string">"Night-time view"</span> <span class="attr">class</span>=<span class="string">"transparent"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"toNight()"</span>&gt;</span>Go to Night<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"toDay()"</span>&gt;</span>Go to Day<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="变换（transform）"><a href="#变换（transform）" class="headerlink" title="变换（transform）"></a>变换（transform）</h3><ul>
<li>matrix(<number>,<number>,<number>,<number>,<number>,<number>)： 以一个含六值的(a,b,c,d,e,f)变换矩阵的形式指定一个2D变换，相当于直接应用一个[a,b,c,d,e,f]变换矩阵 </number></number></number></number></number></number></li>
<li>translate(<length>[, <length>])： 指定对象的2D（2D平移）。第一个参数对应X轴，第二个参数对应Y轴。如果第二个参数未提供，则默认值为0 </length></length></li>
<li>translateX(<length>)： 指定对象X轴（水平方向）的平移 </length></li>
<li>translateY(<length>)： 指定对象Y轴（垂直方向）的平移 </length></li>
<li>rotate(<angle>)： 指定对象的2D rotation（2D旋转），需先有transform-origin属性的定义 </angle></li>
<li>scale(<number>[, <number>])： 指定对象的2D scale（2D缩放）。第一个参数对应X轴，第二个参数对应Y轴。如果第二个参数未提供，则默认取第一个参数的值 </number></number></li>
<li>scaleX(<number>)： 指定对象X轴的（水平方向）缩放 </number></li>
<li>scaleY(<number>)： 指定对象Y轴的（垂直方向）缩放 </number></li>
<li>skew(<angle> [, <angle>])： 指定对象skew transformation（斜切扭曲）。第一个参数对应X轴，第二个参数对应Y轴。如果第二个参数未提供，则默认值为0 </angle></angle></li>
<li>skewX(<angle>)： 指定对象X轴的（水平方向）扭曲 </angle></li>
<li>skewY(<angle>)： 指定对象Y轴的（垂直方向）扭曲 <figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.rotatedElement</span>&#123;</div><div class="line">	<span class="attribute">transform</span>:<span class="built_in">rotate</span>(45deg);	<span class="comment">/*	旋转45度*/</span></div><div class="line">&#125;</div><div class="line"><span class="selector-class">.rotatedElement1</span>&#123;</div><div class="line">	<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(1.5) <span class="built_in">skew</span>(10deg);	<span class="comment">/*	先把元素增大一半  又斜切了10度*/</span></div><div class="line">	<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(1.5) <span class="built_in">skew</span>(10deg);</div><div class="line">	<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(1.5) <span class="built_in">skew</span>(10deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</angle></li>
</ul>
<h4 id="实例：在线数字影集"><a href="#实例：在线数字影集" class="headerlink" title="实例：在线数字影集"></a>实例：在线数字影集</h4><figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">	.gallery&#123;</div><div class="line">		<span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">30px</span> <span class="number">0px</span> <span class="number">30px</span>;</div><div class="line">		<span class="attribute">background</span>: <span class="number">#D8EEFE</span>;</div><div class="line">		<span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.gallery</span> img&#123;</div><div class="line">		<span class="attribute">margin</span>: <span class="number">5px</span>;</div><div class="line">		<span class="attribute">padding</span>: <span class="number">5px</span>;</div><div class="line">		<span class="attribute">width</span>: <span class="number">75px</span>;</div><div class="line">		<span class="attribute">border</span>: solid <span class="number">1px</span> black;</div><div class="line">		<span class="attribute">background</span>: white;</div><div class="line">		<span class="attribute">transition</span>:all <span class="number">1s</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.gallery</span> <span class="selector-tag">img</span>:hover&#123;</div><div class="line">		-webkit-<span class="attribute">transform</span>:scale(<span class="number">2.2</span>) rotate(<span class="number">10deg</span>);</div><div class="line">		-moz-<span class="attribute">transform</span>:scale(<span class="number">2.2</span>) rotate(<span class="number">10deg</span>);</div><div class="line">		-o-<span class="attribute">transform</span>:scale(<span class="number">2.2</span>) rotate(<span class="number">10deg</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"gallery"</span>&gt;</div><div class="line">	&lt;<span class="selector-tag">img</span> src=<span class="string">"pen_blue.gif"</span>&gt;</div><div class="line">	&lt;<span class="selector-tag">img</span> src=<span class="string">"pen_medium.gif"</span>&gt;</div><div class="line">	&lt;<span class="selector-tag">img</span> src=<span class="string">"pen_green.gif"</span>&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Netease实习第九周周报]]></title>
      <url>http://iminyao.com/2016/03/06/netease-weekly-09/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-本地开发环境搭建"><a href="#一-本地开发环境搭建" class="headerlink" title="一. 本地开发环境搭建"></a>一. 本地开发环境搭建</h3><ol>
<li><a href="http://112.74.88.97/webdoc/#其他/搭建本地开发环境.html" target="_blank" rel="external">搭建本地开发环境</a></li>
<li><a href="http://doc.hz.netease.com/pages/viewpage.action?pageId=54432443" target="_blank" rel="external">详细配置</a></li>
<li><a href="http://wiki.hz.netease.com/VPN" target="_blank" rel="external">idc-VPN</a></li>
<li><a href="http://doc.hz.netease.com/pages/viewpage.action?pageId=47982625" target="_blank" rel="external">hzb_music VPN</a>(VPN双开此处下，附带安装指南)</li>
<li>编译错误:Properties-&gt; Java Build Path -&gt;导入jar(保留JRE Junit，maven无法使用去掉pom后缀的)</li>
<li>用Eclipse SVN拉下的Project可能需要新配置Java Compiler然后重新编译 Properties-&gt; Java Compiler -&gt; 选择合适版本</li>
<li>Eclipse SVN直接拉下来CSS编码有问题…</li>
</ol>
<h3 id="二-考拉广告位"><a href="#二-考拉广告位" class="headerlink" title="二. 考拉广告位"></a>二. 考拉广告位</h3><ol>
<li>import的重名冲突时，一个import，另一个可以在使用时直接用像<code>org.apache.http.client.methods.HttpGet;</code>包含全路径的。</li>
<li><p>前后端分离前发起HTTP请求用<code>MusicHttpClient.httpGet</code>:首页直接写在<code>DiscoverController</code>里，资源页将公共函数<code>fillAdData</code>放入<code>ShareDataAssembler</code>中(存放一系列数据读取函数)</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; params = <span class="keyword">new</span> HashMap&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt;();</div><div class="line">	params.put(<span class="string">"type_ids"</span>, <span class="string">"['100_0']"</span>);</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		HttpResponseMeta httpGet = MusicHttpClient.httpGet(<span class="string">"http://"</span> + environmentService.getHostName() + <span class="string">"/api/ad/get"</span>, <span class="string">"utf8"</span>, params);</div><div class="line">		<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt; ads= MusicJsonUtils.readObject(httpGet.getResponseTxt(), <span class="keyword">new</span> TypeReference&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt;()&#123;&#125;);</div><div class="line">		<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt; ad= (<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;) ((<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;) ads.<span class="keyword">get</span>(<span class="string">"ads"</span>)).<span class="keyword">get</span>(<span class="string">"100_0"</span>);</div><div class="line">		modelMap.put(<span class="string">"ad"</span>, ad);</div><div class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">		MusicUtils.webRedirect500();</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>500</code>错误:一开始以为是服务器问题，重启了问题还是存在，console中显示未获取到<code>ad</code>数据，试了一下<code>/api/ad/get</code>接口发现当前时间段没有广告，找到上述发起请求代码，发现当当前时间段没有广告时异常处理直接重定向到了500页面。删掉<code>MusicUtils.webRedirect500()</code>,没有广告时不需要任何操作，CSS代码已设置相应样式。</p>
</li>
<li>广告样式问题：<ul>
<li>一开始为广告图片显示设置宽高(并将display也设置block，消除3px空隙，详见<a href="https://www.zhihu.com/question/26821863" target="_blank" rel="external">为什么a标签中使用img后的高度多了几个像素</a>)，同时为了增大可点击区域直接在<code>a</code>标签页添加了<code>display：block</code>，这样导致即便没有广告时广告图片位置依旧会空出图片大小的空白。</li>
<li>同时一开始将<code>margin-bottom</code>直接设置到父元素，这样导致没有广告不加载图片的情况下广告区域依旧会与其他模块存在间距，利用属性选择器<code>img[src]</code>，只有当有广告是才会有<code>margin-bottom</code>。</li>
</ul>
</li>
<li>资源页广告中的电台ftl不在<code>frame</code>中，在<code>djradio</code>与<code>program</code>中(<code>program</code>即<code>dj</code>)</li>
<li>artist页面另外有三个子页面，分别为:<code>artistAlbum.ftl、artistDesc.ftl、artistMv.ftl</code></li>
<li>JavaScript中打log的时候将功能函数添加到<code>module.js</code>，<code>module.js</code>在每个页面都会调用。</li>
<li>share分享页在<code>ResourceController</code><br>9.NEJ中通过<code>_$request</code>POST出去的数据要通过<code>_u._$object2query</code>来处理一下</li>
</ol>
<h3 id="三-广告后台"><a href="#三-广告后台" class="headerlink" title="三.广告后台:"></a>三.广告后台:</h3><ol>
<li>广告type混乱引起的一系列问题：一开始参照mv的代码，给pc和web两个也添加了<code>getType</code>方法，结果发现无论怎么操作，type永远都是2，调试后发现三个广告代码走的都是mv的getType,其他两个都被覆盖掉了，只得为每个广告位定义自己单独的getType。</li>
<li>入口在<code>app.js</code>，Controller与模板的对应关系都是在此注册</li>
<li>在ftl中判别广告类型时使用angular中的<code>ng-switch-when</code></li>
<li>过滤规则中判断输入是否为正则表达式的正则表达式为<code>/^\/\S+\/*[\/igm]$/</code></li>
</ol>
<h2 id="兑换码后台"><a href="#兑换码后台" class="headerlink" title="兑换码后台"></a>兑换码后台</h2><ol>
<li><p>兑换码生成状态轮询:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> hasAudited = data.couponData.filter(<span class="function"><span class="keyword">function</span><span class="params">(i)</span></span>&#123;</div><div class="line">                <span class="keyword">return</span> i.status==<span class="number">1</span> &amp;&amp; i.type==<span class="number">1</span>;</div><div class="line">            &#125;);</div><div class="line">            hasAudited.<span class="keyword">forEach</span>(<span class="function"><span class="keyword">function</span><span class="params">(i)</span></span>&#123;</div><div class="line">                <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">                    $http.post(<span class="string">'/store/backend/redeemCode/createStatus'</span>, jQuery.param(&#123;couponId:i.id&#125;), &#123;headers:&#123;<span class="string">'Content-Type'</span>:<span class="string">'application/x-www-form-urlencoded'</span>&#125;&#125;)</div><div class="line">                        .success(<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>&#123;</div><div class="line">                            <span class="keyword">if</span>(data.code==<span class="number">200</span> &amp;&amp; 			data.createStatus==<span class="number">2</span>)&#123;</div><div class="line">                                clearInterval		(timer);</div><div class="line">                            &#125;</div><div class="line">                        &#125;);</div><div class="line">                &#125;,<span class="number">10000</span>);</div><div class="line">            &#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>angular阻止默认事件、阻止冒泡:angular的事件处理函数中可以传递<code>$event</code>这一常量，此常量即触发事件的元素</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><div class="line"><span class="comment">// ftl</span></div><div class="line">ng-click="checkIsCreaterAndValidity(i,<span class="variable">$event</span>)</div><div class="line"><span class="comment">// js</span></div><div class="line">    <span class="variable">$scope</span>.checkIsCreaterAndValidity = function(i,<span class="variable">$event</span>)&#123;</div><div class="line">      	<span class="variable">$event</span>.preventDefault(); <span class="comment">// 阻止默认事件</span></div><div class="line">	<span class="variable">$event</span>.stoppropagation(); <span class="comment">// 阻止冒泡</span></div><div class="line">  	&#125;</div><div class="line">  &#125;;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="五-其他"><a href="#五-其他" class="headerlink" title="五.其他"></a>五.其他</h3><ol>
<li>Eclipse自动导入依赖<code>ctrl+Shift+O</code></li>
<li>Nginx工作原理</li>
<li>搜索文件<code>ctrl+Shift+R</code>，支持<code>*/web2/index.js</code>形式的搜索</li>
<li>切云音乐卡通形象设计大赛的mail页面时，将整张图切成两块用的切片工具(裁切栏里面的第三个)</li>
<li>邮件中所有样式要写在style内联样式中，text-align在怪异模式下可能失效，需要显示设置元素<code>width</code></li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://weibo.com/ttarticle/p/show?id=2309403949643745620312" target="_blank" rel="external">Nginx工作原理</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[图片优化之Data URI Scheme]]></title>
      <url>http://iminyao.com/2016/02/26/data-URI/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>data URIs是由RFC 2397定义, 允许将一个小文件进行编码后嵌入到另外一个文档里.</p>
</blockquote>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><p><code>data:[mediatype][;&lt;encoding&gt;],&lt;data&gt;</code></p>
<ul>
<li>data:协议名称</li>
<li><mediatype>(opt):MIME类型字符串，默认为<code>text/plain;charset=US-ASCII</code>(缺省时值为HTTP Header 中Content-Type的字段值，客户端也会以这个 MIME 类型来解析数据)</mediatype></li>
<li>encoding:数据编码方式(默认为US-ASCII，BASE64两种，二进制数据需要进行base64编码再嵌入)</li>
<li>data:编码后的数据</li>
</ul>
<h3 id="应用：Data-URL：图片base64编码的Data-URI"><a href="#应用：Data-URL：图片base64编码的Data-URI" class="headerlink" title="应用：Data URL：图片base64编码的Data URI"></a>应用：Data URL：图片base64编码的Data URI</h3><h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><p><code>&lt;img src=&quot;data:image/gif;base64,R0lGODlhMwAxAIAAAAAAAP///
yH5BAAAAAAALAAAAAAzADEAAAK8jI+pBr0PowytzotTtbm/DTqQ6C3hGX
ElcraA9jIr66ozVpM3nseUvYP1UEHF0FUUHkNJxhLZfEJNvol06tzwrgd
LbXsFZYmSMPnHLB+zNJFbq15+SOf50+6rG7lKOjwV1ibGdhHYRVYVJ9Wn
k2HWtLdIWMSH9lfyODZoZTb4xdnpxQSEF9oyOWIqp6gaI9pI1Qo7BijbF
ZkoaAtEeiiLeKn72xM7vMZofJy8zJys2UxsCT3kO229LH1tXAAAOw==&quot;&gt;</code></p>
<blockquote>
<p>Data URI 最大的好处，减少 HTTP 请求。通常情况下我们在 HTML 页面中表示一张图片，会用一个 img 标签，然后将其 src 属性指向服务端的一个地址，每个 img 标签都会是一次请求；但是用了 Data URI 技术，将图片编码成字符串 “内嵌” 入 HTML 代码中（inline），然后在客户端完成解码工作，就不用进行 HTTP 请求了。</p>
</blockquote>
<h4 id="优："><a href="#优：" class="headerlink" title="优："></a>优：</h4><ol>
<li>减少 HTTP 请求</li>
<li>当访问外部资源很麻烦或受限时（比如服务器 ip 被墙）</li>
<li>当图片是在服务器端用程序动态生成，每个访问用户显示的都不同时</li>
<li>当图片的体积太小，占用一个 HTTP 会话不是很值得时</li>
</ol>
<h3 id="弊："><a href="#弊：" class="headerlink" title="弊："></a>弊：</h3><ol>
<li>Base64 编码的数据体积通常是原数据的体积 4/3</li>
<li>不会被浏览器缓存起来</li>
<li>移动端不宜使用 Data URI 技术（解码耗 CPU）</li>
</ol>
<h3 id="解决无法被缓存的问题："><a href="#解决无法被缓存的问题：" class="headerlink" title="解决无法被缓存的问题："></a>解决无法被缓存的问题：</h3><blockquote>
<p>CSS中的url操作符是用来指定网页元素的背景图片的，而浏览器并不在意URL里写的是什么——只要能通过它获取需要的数据。所以，我们就有了可以将Data URL形式的图片存储在CSS样式表中的可能。而所有浏览器都会积极的缓存CSS文件来提高页面加载效率。</p>
</blockquote>
<p><code>.div1 {
background-image: url(&quot;data:image/gif;base64,R0lGODlhAwADAIAAAP///8zMzCH5BAAAAAAALAAAAAADAAMAAAIEBHIJBQA7&quot;);
}</code></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/data_URIs" target="_blank" rel="external">data URIs-MDN</a></li>
<li><a href="http://www.cnblogs.com/fsjohnhuang/p/3903688.html" target="_blank" rel="external">Data URI Scheme</a></li>
<li><a href="http://www.webhek.com/data-url" target="_blank" rel="external">Data URL和图片</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[APP切图常用操作总结]]></title>
      <url>http://iminyao.com/2016/02/25/app-cut/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li>ctrl+E 合并为位图,ctrl+G合并组</li>
<li>样式加在父图层的需要负责父元素图层效果然后挨个添加到子图层</li>
<li>在制作黑胶唱片时中间的圆圈要扣空，首先需要将矢量图转化为位图(Ctrl+e)，然后拉出辅助线，用椭圆选框工具选择口空区域，然后delete删除</li>
<li>黑胶上面跳针顶端只有一半的圆，是因为启用了图层蒙阴，右键选择停用图层蒙阴即可。</li>
<li>切播放进度条和音量进度条是需要切其中的一小段，要将整个进度条缩短，通过直接选择工具(快捷键A)，然后shift/ctrl+方向键来完成(如果按A后选不中可以先选择钢笔工具，在图层上点一下，然后删除钢笔痕迹，再按A进行操作)</li>
<li>按钮中的文字不用切(类似云音乐签到的按钮)</li>
<li>系统自带按钮不用切(切之前手机查看一下是否为系统自带按钮)</li>
<li>iphone图标标注要标1x的尺寸(开发可以直接用)，图标间距在5中为2倍，6中3倍(即图中实际尺寸)，5中间距必须为2的倍数，6中必须为3的倍数;Android图标标注标1080(单位为px)，间距单位用xxhdpi，允许出现小数点。</li>
<li>标注的单个单词之间不能换行</li>
<li>模块本身就要具有区分，是公共模块，还是私有模块</li>
<li>在切蒙层的时候只需截取包含完整渐变过程的一块即可，在用矩形工具选取区块后如果按Ctrl+C复制没有反应，需要先Ctrl+G合并然后Ctrl+E转化为位图再操作。</li>
<li>从某个图层中切一部分出来(类似歌曲更多的三个小点，每首歌的三个小点被合并为了一个图层)，按V选中然后A，框选需要切出来的部分，Ctrl+J拷贝出来即可。</li>
<li>.9图不需要压缩</li>
<li>Android按钮在制作.9图时，需要先导出1080的图，然后手动放到相应目录下，然后通过直接选择工具(A)来将图层缩小1倍，此时可能边上会糊掉，需要Ctrl+T然后来回移动一下，然后导出为.9，再依次手动放到相应目录下。</li>
<li>操作切出的位图可以先用矩形选框工具选择要操作的边，然后<code>ctrl</code>+方向键，移到合适的位置，然后<code>ctrl+Alt+C</code>调整画布大小。</li>
<li>标注的时候图片水平居中的时候左右间距可以不用标，同理，垂直居中的时候上下距离不用标，标注原则是能不用标的就不用标。</li>
</ol>
<h3 id="more"><a href="#more" class="headerlink" title="more:"></a>more:</h3><ol>
<li><p><a href="https://github.com/vino24/blog/files/145791/APP.docx" target="_blank" rel="external">APP切图方法介绍.docx</a></p>
</li>
<li><p><a href="https://github.com/vino24/blog/files/145792/APP.docx" target="_blank" rel="external">APP切图和标注说明.docx</a></p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Netease实习第六周周报]]></title>
      <url>http://iminyao.com/2016/01/31/netease-weekly-06/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li><p>在用fadeOut实现好友日志栏滚动的时候，一直提示<code>NEJ is not define</code>这样的错误，开始在<code>define</code>的依赖数组中把所有能加的都加上了,却依旧不起作用，当时压根没考虑过是浏览器的问题，也没有换个浏览器试一下，到最后原因竟然处在chrome插件上面，不知道某个插件请求的某个不存在文件还是说插件的存在导致依赖加载顺序出错，到最后在IE和Firefox中一试是好的。当初在一开始试过很多方法仍然没有解决时，就应该考虑可能是环境的原因，应该早点换个浏览器试试。</p>
</li>
<li><p>Chrome Console调试：设置断点后可以在控制台直接输入断点之前初始化的变量来进行输出调试。</p>
</li>
<li>z-index详解&amp;&amp;IE下的bug </li>
<li>webView中的大图通常可以直接设置<code>height:auto</code>，不同机型会自动计算合适的高度</li>
<li><p>检测psd中图片是否有阴影效果时，可以直接通过图层来分辨，有阴影效果的图层下面会包含[效果栏]</p>
</li>
<li><p>手机端调试本地服务器代码时要通过端口转发（Port forwarding）的方法，设置转发监听端口后页面一直显示无法访问，最后发现是服务器的原因，在Port forwarding设置的端口一定要在nginx的配置文件中增加同样的监听端口 </p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	监听localhost这个域下的80和8080两个端口</span></div><div class="line">   <span class="keyword">server</span> &#123;</div><div class="line">       listen       <span class="number">80</span>;</div><div class="line">       server_name  localhost;</div><div class="line"></div><div class="line">       <span class="meta">#charset koi8-r;</span></div><div class="line"></div><div class="line">       <span class="meta">#access_log  logs/host.access.log  main;</span></div><div class="line"></div><div class="line">       location / &#123;</div><div class="line">           root   html;</div><div class="line">           <span class="keyword">index</span>  <span class="keyword">index</span>.html <span class="keyword">index</span>.htm;</div><div class="line">       &#125;</div><div class="line">   <span class="keyword">server</span> &#123;</div><div class="line">       listen       <span class="number">8080</span>;</div><div class="line">       server_name  localhost;</div><div class="line"></div><div class="line">       <span class="meta">#charset koi8-r;</span></div><div class="line"></div><div class="line">       <span class="meta">#access_log  logs/host.access.log  main;</span></div><div class="line"></div><div class="line">       location / &#123;</div><div class="line">           root   html;</div><div class="line">           <span class="keyword">index</span>  <span class="keyword">index</span>.html <span class="keyword">index</span>.htm;</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>height:100%</code>与<code>height:auto</code>区别：</p>
<blockquote>
<p><code>height:100%</code> implies the element is going to have the 100% height of its parent container.</p>
<p><code>height:auto</code> means, the element will have flexible height i.e. its height will depend upon the height of children elements of it</p>
</blockquote>
<h4 id="eg"><a href="#eg" class="headerlink" title="eg:"></a>eg:</h4><figure class="highlight axapta"><table><tr><td class="code"><pre><div class="line">    <span class="comment">// #innerDiv is going to have height:50px</span></div><div class="line">     &lt;<span class="keyword">div</span> style=<span class="string">"height:50px"</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> id=<span class="string">"innerDiv"</span> style=<span class="string">"height:100%"</span>&gt;</div><div class="line">    &lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;/<span class="keyword">div</span>&gt;</div><div class="line">   </div><div class="line">    <span class="comment">// now the #innerDiv is going to have height:10px</span></div><div class="line">    &lt;<span class="keyword">div</span> style=<span class="string">"height:50px"</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> id=<span class="string">"innerDiv"</span> style=<span class="string">"height:auto"</span>&gt;</div><div class="line">          &lt;<span class="keyword">div</span> id=<span class="string">"evenInner"</span> style=<span class="string">"height:10px"</span>&gt;</div><div class="line">          &lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;/<span class="keyword">div</span>&gt;</div><div class="line">&lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="https://segmentfault.com/a/1190000002407912" target="_blank" rel="external">常用的<code>meta</code>属性</a></p>
</li>
<li><a href="https://blog.mariusschulz.com/2016/02/03/ecmascript-2016-array-prototype-includes" target="_blank" rel="external">Array.prototype.includes</a></li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://wiki.jikexueyuan.com/project/chrome-devtools/remote-debugging-on-android.html#virtual-host-mapping" target="_blank" rel="external">在安卓设备上使用 Chrome 远程调试功能</a></li>
<li><a href="https://segmentfault.com/a/1190000005964730" target="_blank" rel="external">移动端调试</a></li>
<li><a href="http://yujiangshui.com/multidevice-frontend-debug/" target="_blank" rel="external">移动端前端开发调试</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[z-index属性详解]]></title>
      <url>http://iminyao.com/2016/01/27/ie-z-index/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-不含z-index的堆叠"><a href="#一-不含z-index的堆叠" class="headerlink" title="一. 不含z-index的堆叠"></a>一. 不含z-index的堆叠</h3><blockquote>
<p>z-index定义的定位元素在z轴的层叠顺序，所以只能应用于定位元素(position不为static)</p>
</blockquote>
<h4 id="1-不含浮动堆叠顺序-从低到顶-："><a href="#1-不含浮动堆叠顺序-从低到顶-：" class="headerlink" title="1. 不含浮动堆叠顺序(从低到顶)："></a>1. 不含浮动堆叠顺序(从低到顶)：</h4><ol>
<li>根元素的背景和边界</li>
<li>普通流(无定位)里的块元素(没有position或position:static;)按HTML中的出现顺序堆叠</li>
<li>定位元素按HTML中的出现顺序堆叠</li>
</ol>
<h4 id="2-含浮动堆叠顺序："><a href="#2-含浮动堆叠顺序：" class="headerlink" title="2 . 含浮动堆叠顺序："></a>2 . 含浮动堆叠顺序：</h4><ol>
<li>根元素的背景与边框</li>
<li>位于普通流中的后代块元素按照它们在 HTML 中出现的顺序堆叠</li>
<li>浮动块元素</li>
<li>常规流中的后代行内元素</li>
<li>后代中的定位元素按照它们在 HTML 中出现的顺序堆叠</li>
</ol>
<h3 id="二-层叠上下文-The-stacking-context"><a href="#二-层叠上下文-The-stacking-context" class="headerlink" title="二. 层叠上下文(The stacking context)"></a>二. 层叠上下文(The stacking context)</h3><h4 id="1-触发条件"><a href="#1-触发条件" class="headerlink" title="1. 触发条件"></a>1. 触发条件</h4><ol>
<li>根元素 (HTML),</li>
<li>绝对（absolute）定位或相对（relative）定位且 z-index 值不为”auto”，</li>
<li>一个 flex 项目(flex item)，且 z-index 值不为 “auto”，也就是父元素 display: flex|inline-flex，</li>
<li>元素的 opacity 属性值小于 1</li>
<li>元素的 transform 属性值不为 “none”，</li>
<li>元素的 isolation 属性被设置为 “isolate”，</li>
</ol>
<p><img src="https://developer.mozilla.org/@api/deki/files/913/=Understanding_zindex_04.png" alt="pic"></p>
<ul>
<li>Root<ul>
<li>DIV#1</li>
<li>DIV#2</li>
<li>DIV#3<ul>
<li>DIV#4</li>
<li>DIV#5</li>
<li>DIV#6</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-层叠顺序"><a href="#2-层叠顺序" class="headerlink" title="2. 层叠顺序"></a>2. 层叠顺序</h4><ol>
<li>父级层叠上下文的背景和边框；</li>
<li>层叠级别为负值的层叠上下文（越小越在下）；</li>
<li>非行内、非定位的子元素；</li>
<li>非定位的浮动子元素和它们的内容；</li>
<li>行内非定位子元素；</li>
<li>‘z-index:auto’ 的定位子元素，和任何 ‘z-index:0’ 的层级上下文；</li>
<li>层叠级别为正值的层叠上下文（越大越在上）。<h4 id="3-轻松理清渲染顺序的方法"><a href="#3-轻松理清渲染顺序的方法" class="headerlink" title="3. 轻松理清渲染顺序的方法"></a>3. 轻松理清渲染顺序的方法</h4></li>
</ol>
<blockquote>
<p>分辨出层叠的元素在 Z 轴上的渲染顺序的一个简单方法是将它们想象成一系列的版本号，子元素是其父元素版本号之下的次要版本。</p>
</blockquote>
<ul>
<li>Root<ul>
<li>DIV#2 2</li>
<li>DIV#3 4<ul>
<li>DIV#4 4.1</li>
<li>DIV#5 4.3</li>
<li>DIV#6 4.6</li>
</ul>
</li>
<li>DIV#1 5</li>
</ul>
</li>
</ul>
<h3 id="三-IE6-7-8-Q-下z-index未设置-默认值auto-时创建新层叠上下文"><a href="#三-IE6-7-8-Q-下z-index未设置-默认值auto-时创建新层叠上下文" class="headerlink" title="三.  IE6/7/8(Q)下z-index未设置(默认值auto)时创建新层叠上下文"></a>三.  IE6/7/8(Q)下z-index未设置(默认值auto)时创建新层叠上下文</h3><h4 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1. 问题描述"></a>1. 问题描述</h4><blockquote>
<p>当定位元素的 ‘z-index’ 未设置时（默认为 auto），在 IE6 IE7 IE8(Q) 下将会创建一个新的局部层叠上下文。而在其它浏览器下，则严格按照规范，不产生新的局部层叠上下文。</p>
</blockquote>
<h4 id="2-示例代码"><a href="#2-示例代码" class="headerlink" title="2. 示例代码"></a>2. 示例代码</h4><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">  <span class="selector-tag">body</span> &#123; <span class="attribute">margin</span>:<span class="number">0</span>; &#125;</div><div class="line">  <span class="selector-class">.p1</span>&#123; <span class="attribute">top</span>:<span class="number">20px</span>; <span class="attribute">height</span>:<span class="number">50px</span>; <span class="attribute">width</span>:<span class="number">150px</span>; <span class="attribute">background-color</span>:blue;&#125;</div><div class="line">  <span class="selector-class">.p2</span>&#123; <span class="attribute">top</span>:<span class="number">10px</span>; <span class="attribute">left</span>:<span class="number">20px</span>; <span class="attribute">height</span>:<span class="number">30px</span>; <span class="attribute">width</span>:<span class="number">100px</span>; <span class="attribute">background-color</span>:yellow;&#125;</div><div class="line">  <span class="selector-class">.p3</span>&#123; <span class="attribute">top</span>:<span class="number">0px</span>; <span class="attribute">left</span>:<span class="number">50px</span>; <span class="attribute">height</span>:<span class="number">100px</span>; <span class="attribute">width</span>:<span class="number">50px</span>; <span class="attribute">background-color</span>:red;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position:relative;"</span> <span class="attr">class</span>=<span class="string">"p1"</span>&gt;</span>1</div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position:absolute; z-index:1;"</span> <span class="attr">class</span>=<span class="string">"p2"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position:absolute;"</span> <span class="attr">class</span>=<span class="string">"p3"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="http://w3help.org/tests/RM8015/zi_1.gif" alt="p1"><br><img src="http://w3help.org/tests/RM8015/zi_2.gif" alt="p2"></p>
<blockquote>
<p>正常情况下，由于p1和p3未设置z-index，所以没有创建新的上下文，整个页面只有html根一个上下文，p1 p2 p3都处在同一上下文，而p2设置了z-index，所以会出现在上层。</p>
<p>在IE6、7、8(Q)下，z-index：auto的p1 p3都创建了新的层叠上下文，在同一根层叠上下文中，它们的层叠级别相同，但【p3】在【p1】之后，所以在 Z 轴上【p3】比【p1】靠前显示。此时，由于【p2】处于【p1】的层叠上下文中，所以【p2】在 Z 轴上要比【p3】靠后。</p>
</blockquote>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context" target="_blank" rel="external">层叠上下文</a></li>
<li><a href="http://w3help.org/zh-cn/causes/RM8015" target="_blank" rel="external">IE6 IE7 IE8(Q) 中定位元素 ‘z-index’ 为默认值在某些情况下会产生新的层叠上下文</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[圣杯布局]]></title>
      <url>http://iminyao.com/2016/01/25/Holy-Grail-Layout/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><pre><code>1. 三列布局，中间宽度自适应，两边定宽；
2. 中间栏要在浏览器中优先展示渲染；
3. 允许任意列的高度最高；
4. 要求只用一个额外的DIV标签；
5. 要求用最简单的CSS、最少的HACK语句
</code></pre><h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line"><span class="comment">// HTML</span></div><div class="line">&lt;div <span class="keyword">class</span>=<span class="string">"wrapper"</span>&gt;</div><div class="line">    &lt;div id=<span class="string">"main"</span> <span class="keyword">class</span>=<span class="string">"column"</span>&gt;&lt;/div&gt;</div><div class="line">    &lt;div id=<span class="string">"lc"</span> <span class="keyword">class</span>=<span class="string">"column"</span>&gt;&lt;/div&gt;</div><div class="line">    &lt;div id=<span class="string">"rc"</span> <span class="keyword">class</span>=<span class="string">"column"</span>&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line"><span class="comment">// CSS</span></div><div class="line">        body &#123;</div><div class="line">            padding: <span class="number">0</span>;</div><div class="line">            margin: <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        .wrapper &#123;</div><div class="line">            <span class="built_in">height</span>: <span class="number">100</span>%;</div><div class="line">            zoom: <span class="number">1</span>;</div><div class="line">            <span class="built_in">overflow</span>: hidden;</div><div class="line">            <span class="built_in">background</span>: black;</div><div class="line">            padding: <span class="number">0</span> <span class="number">150</span>px <span class="number">0</span> <span class="number">200</span>px; <span class="comment">/*预留空位：左内补丁=LC栏宽度  右内补丁=LR栏宽度*/</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        .wrapper:after &#123;</div><div class="line">            <span class="built_in">clear</span>: both;</div><div class="line">            content: <span class="string">'\20'</span>;</div><div class="line">            <span class="built_in">height</span>: <span class="number">0</span>;</div><div class="line">            visibility: hidden;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        .column &#123;</div><div class="line">            <span class="keyword">float</span>: left;</div><div class="line">            <span class="built_in">position</span>: relative;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/*三列浮动并相对定位，便于使用样式将三列拉到同一行中*/</span></div><div class="line"></div><div class="line">        <span class="meta">#main &#123;</span></div><div class="line">            <span class="built_in">width</span>: <span class="number">100</span>%;</div><div class="line">            <span class="built_in">min</span>-<span class="built_in">height</span>: <span class="number">500</span>px;</div><div class="line">            <span class="built_in">background</span>: gray;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">#lc &#123;</span></div><div class="line">            <span class="built_in">width</span>: <span class="number">200</span>px;</div><div class="line">            <span class="built_in">min</span>-<span class="built_in">height</span>: <span class="number">500</span>px;</div><div class="line">            <span class="built_in">background</span>: red;</div><div class="line">            margin-left: <span class="number">-100</span>%; <span class="comment">/*把LC拉到main的同一行，左上角对齐*/</span></div><div class="line">            right: <span class="number">200</span>px; <span class="comment">/*使LC向左相对平移到边界空出来的空位上*/</span></div><div class="line">            _left: <span class="number">150</span>px;</div><div class="line">            <span class="comment">/*针对IE6对margin-left:-100%的计算BUG，这里的100%宽度等于浏览器的宽度而不</span></div><div class="line">           是width，因此要向右偏移出相应的值，即RC的宽度值*/</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">#rc &#123;</span></div><div class="line">            <span class="built_in">width</span>: <span class="number">150</span>px;</div><div class="line">            <span class="built_in">min</span>-<span class="built_in">height</span>: <span class="number">500</span>px;</div><div class="line">            <span class="built_in">background</span>: yellow;</div><div class="line">            margin-right: <span class="number">-150</span>px; <span class="comment">/*RC 向右拉到和main同一行边界的空位*/</span></div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h3 id="图解步骤："><a href="#图解步骤：" class="headerlink" title="图解步骤："></a>图解步骤：</h3><p><img src="http://www.alistapart.com/d/holygrail/diagram_01.gif" alt="step1"><br><img src="http://www.alistapart.com/d/holygrail/diagram_02.gif" alt="step2"><br><img src="http://www.alistapart.com/d/holygrail/diagram_03.gif" alt="step3"><br><img src="http://www.alistapart.com/d/holygrail/diagram_05.gif" alt="step4"></p>
<h3 id="flex实现圣杯布局"><a href="#flex实现圣杯布局" class="headerlink" title="flex实现圣杯布局"></a><a href="https://github.com/vino24/Collection/blob/master/Interview/layOut/flex%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%9C%A3%E6%9D%AF%E5%B8%83%E5%B1%80.html" target="_blank" rel="external">flex实现圣杯布局</a></h3><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://www.elonglau.com/33.html" target="_blank" rel="external">重温经典布局-圣杯Holy Grail of Layout</a></li>
<li><a href="http://www.imooc.com/wenda/detail/254035" target="_blank" rel="external">双飞翼布局介绍-始于淘宝UED</a></li>
<li><a href="http://alistapart.com/article/holygrail" target="_blank" rel="external">In Search of the Holy Grail</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Netease实习第五周周报]]></title>
      <url>http://iminyao.com/2016/01/24/netease-weekly-05/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li><p>textarea去除默认样式 resize:none;（<a href="http://www.daqianduan.com/3490.html）" target="_blank" rel="external">http://www.daqianduan.com/3490.html）</a></p>
</li>
<li><p>文字截断(<a href="http://acgtofe.com/posts/2014/04/text-truncation/" target="_blank" rel="external">http://acgtofe.com/posts/2014/04/text-truncation/</a>)</p>
</li>
<li><p>回调函数中使用setTimeout/setInterval需要绑定两次this，回调函数原本的this为触发事件的元素；setTimeout中原本的this为window</p>
</li>
<li><p>顶部横排导航栏的垂直居中时，可以直接设置wrap元素的line-height，因为line-height会继承，单行元素只要line-height比其height高就会垂直居中排列，对于其中几个导航栏目左侧有border而且比li高度小的情况，可以直接设置li标签子元素a的border。</p>
</li>
<li><p>对于检测到背景渐变的部分，由于无法确定渐变的类型，最好直接使用背景图来解决，而通常背景图也是要制作成雪碧图的，对于背景图制作的雪碧图，一般垂直排列，每个部分宽度应该相同，制成的雪碧图也应该与单张的宽度相同，这样在填充背景的时候才不会产生间隔。</p>
</li>
<li><p>在处理XHR请求时，应该将请求成功的操作放在callback函数中，因为XHR通常为异步请求，如果直接将成功请求的后续操作放在发送操作之后，发送操作执行之后会立即执行成功后的操作，由于callback函数是异步的所以很可能还未完成检测就已经执行了请求成功的代码，导致callback中的检测失效。</p>
</li>
<li><p>抽取去文字按钮:将带文字的按钮复制粘贴至新建的图片中，然后矩形工具选择空白区域，Ctrl+T，然后移动鼠标抹除文字。</p>
</li>
<li><p>元素设置inline-block以后会产生空白间距，需要通过对父元素设置font-size=0，然后在子元素重设font-size来解决。</p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Netease实习第四周周报]]></title>
      <url>http://iminyao.com/2016/01/16/netease-weekly-04/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li><p>一般基础Js文件命名为<code>base.js</code>或<code>core.js</code>，而逻辑可以用<code>main.js</code>或<code>index.js</code>,虽然命名是不受约束的但随意命名容易让他人误解。<code>$()</code>方法也一样，不要试图定义其为Id或其他选择器，因为在多数人认知里<code>$()</code>就是JQuery中的通用选择器。</p>
</li>
<li><p><code>base.js</code>中不要以<code>var base={}</code>这样的对象的形式来定义，这样的形式约束性很多，连基本的<code>var</code>申明在其中都无法使用，通常定义为<code>var base=(function(){}());</code>这样的立即执行函数，在其中添加消除浏览器差异的操作等，而对于在具体的逻辑Js文件中要用到的方法，可以以<code>return {fn:function(){},fn2:function(){}};</code>的形式暴露出来。</p>
</li>
<li><p><code>IeFixed</code>的代码要在<code>base.js</code>中生效，<code>base</code>本身作用就是为了当逻辑代码运行时可以不用考虑浏览器差异的问题，所以最好不要在逻辑中调用来消除差异。</p>
</li>
<li><p>对于代码中要通过很多<code>getElementsByClassName</code>这样的方法来获取元素时，可以给要用的元素添加一个统一的类名，然后这样只需执行一次dom操作取得所有元素，然后在用的时候通过数组来获取<br><img src="https://cloud.githubusercontent.com/assets/4004044/12371431/62c8e668-bc6e-11e5-928e-832b1518fc56.PNG" alt="default"><br><img src="https://cloud.githubusercontent.com/assets/4004044/12371433/69631084-bc6e-11e5-8ed7-3a832fd07e15.PNG" alt="1"></p>
</li>
<li><p>在XHR的onreadystatechange的方法中判断请求是否成功是不能将<code>readystate</code>和<code>status</code>放一起判断，因为<code>status</code>在响应过程中是会经历几个状态的，因此这样就无法添加异常处理了。</p>
<figure class="highlight fortran"><table><tr><td class="code"><pre><div class="line"> xhr.onreadystatechange = <span class="function"><span class="keyword">function</span></span> () &#123;</div><div class="line">     <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123; </div><div class="line">             <span class="keyword">if</span> (xhr.<span class="keyword">status</span> === <span class="number">200</span> || xhr.<span class="keyword">status</span> === <span class="number">304</span>) callback(xhr.responseText);</div><div class="line">            <span class="keyword">else</span> console.<span class="built_in">log</span>(<span class="string">"Request was unsuccessful:"</span> + xhr.<span class="keyword">status</span>);</div><div class="line">        &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p><code>new Date()</code>返回的为时间戳（日期对象），<code>Date.now()</code>返回的为毫秒数，在应用日期格式转换时，日期对象可以转换，时间戳无法转换。时间戳转换为毫秒数的方  法<code>var time=+new Date()</code> </p>
</li>
<li><p>JavaScript设计模式(#88)、继承机制(#90)</p>
</li>
<li><p>常用图片格式与优化(#109)</p>
</li>
<li><p><code>input</code>按钮美化方案(#110)</p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[图片格式与优化]]></title>
      <url>http://iminyao.com/2016/01/11/pic-format/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="一-矢量图与位图"><a href="#一-矢量图与位图" class="headerlink" title="一. 矢量图与位图"></a>一. 矢量图与位图</h3><table>
<thead>
<tr>
<th>矢量图</th>
<th>位图</th>
</tr>
</thead>
<tbody>
<tr>
<td>点线面等基本元素组成</td>
<td>像素</td>
</tr>
<tr>
<td>通过边框粗细颜色等来填充</td>
<td>记录每个点的颜色深度透明度来存储</td>
</tr>
<tr>
<td>文件小，不失真，但难表现自然度高的图像</td>
<td>文件大，失真，能显示色彩丰富的图片</td>
</tr>
</tbody>
</table>
<p><img src="https://cloud.githubusercontent.com/assets/4004044/12261342/6a55fc7e-b95b-11e5-8e2b-fec21844b2fc.PNG" alt="pic"><br><img src="https://cloud.githubusercontent.com/assets/4004044/12261343/6a5ba304-b95b-11e5-9ce8-0c4c8d5cff2d.PNG" alt="pic1"></p>
<h3 id="二-有损压缩与无损压缩"><a href="#二-有损压缩与无损压缩" class="headerlink" title="二. 有损压缩与无损压缩"></a>二. 有损压缩与无损压缩</h3><table>
<thead>
<tr>
<th>有损压缩</th>
<th>无损压缩</th>
</tr>
</thead>
<tbody>
<tr>
<td>存储图像时不完全真实记录像素点数据，会对图像数据进行处理，去掉那些图像上会被人眼忽略的细节，然后使用附近的颜色通过渐变或其他形式进行填充。这样既能大大降低图像信息的数据量，又不会影响图像的还原效果。</td>
<td>真实记录图像像素点数据，但会利用特殊算法将颜色等相同的数据进行压缩记录,将图像颜色进行索引(即索引色，类似调色板)</td>
</tr>
<tr>
<td>JPG(不支持透明)</td>
<td>PNG(支持透明)、GIF</td>
</tr>
</tbody>
</table>
<h3 id="三-JPG与PNG"><a href="#三-JPG与PNG" class="headerlink" title="三. JPG与PNG"></a>三. JPG与PNG</h3><h4 id="JPG"><a href="#JPG" class="headerlink" title="JPG"></a>JPG</h4><ol>
<li>支持摄影图像或写实图像的高级压缩，并且可利用压缩比例控制图像文件大小。</li>
<li>有损压缩会使图像数据质量下降，并且在编辑和重新保存JPG格式图像时，这种下降损失会累积。</li>
<li>JPG不适用于所含颜色很少、具有大块颜色相近的区域或亮度差异十分明显的较简单的图片。</li>
</ol>
<h4 id="应用："><a href="#应用：" class="headerlink" title="应用："></a>应用：</h4><ol>
<li>图像上颜色较少，并且主要以纯色或者平滑的渐变色进行填充。</li>
<li>具备较大亮度差异以及强烈对比的简单图像</li>
</ol>
<h4 id="PNG"><a href="#PNG" class="headerlink" title="PNG"></a>PNG</h4><ol>
<li>能在保证最不失真的情况下尽可能压缩图像文件的大小</li>
<li>PNG用来存储灰度图像时，灰度图像的深度可多到16位，存储彩色图像时，彩色图像的深度可多到48位，并且还可存储多到16位的α通道数据。</li>
<li>对于需要高保真的较复杂的图像，PNG虽然能无损压缩，但图片文件较大，不适合应用在Web页面上。</li>
</ol>
<h4 id="应用：-1"><a href="#应用：-1" class="headerlink" title="应用："></a>应用：</h4><blockquote>
<p>写实的摄影图像或是颜色层次非常丰富的图像</p>
</blockquote>
<h3 id="四-PNG8与PNG24"><a href="#四-PNG8与PNG24" class="headerlink" title="四. PNG8与PNG24"></a>四. PNG8与PNG24</h3><blockquote>
<p>NG采用无损压缩是通过索引色去存储和还原图像的，PNG8和PNG24后面的数字则是代表这种PNG格式最多可以索引和存储的颜色值。”8″代表2的8次方也就是256色，而24则代表2的24次方大概有1600多万色。</p>
</blockquote>
<table>
<thead>
<tr>
<th>PNG8</th>
<th>PNG24</th>
<th>PNG32</th>
</tr>
</thead>
<tbody>
<tr>
<td>支持布尔透明，要么透明要么不透明</td>
<td>不支持</td>
<td>支持256阶的alpha通道透明</td>
</tr>
</tbody>
</table>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://ued.taobao.org/blog/2010/12/jpg_png/" target="_blank" rel="external">图片格式与设计那点事儿</a></li>
<li><a href="http://www.html-js.com/article/Web-performance-optimization" target="_blank" rel="external">Web性能优化：图片优化</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Netease实习第三周周报]]></title>
      <url>http://iminyao.com/2016/01/09/netease-weekly-03/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li><p>String.replace()会产生新的字符串，元字符串不变，replace的第二个参数可以接收一个函数，函数的第一个参数为匹配的字符串，后面的参数为匹配圆括号子表达式的字符串，返回值为替换值，如果正则表达式是全局搜索，则可以批量替换。借此可以实现一个简单的模板引擎。</p>
</li>
<li><p>要实现日志滚动然后每滚动完一篇后停两秒再滚动，需要两个计时器，一个setInterval计时器来控制日志滚动，然后通过监听滚动条scrollTop的值来确定是否完成一条日志的滚动，完成后首先通过clearInterval立即停止控制日志滚动的计时器，紧接着setTimeout设置2s后重新启用控制日志的计时器。</p>
</li>
<li><p>滚动日志通过给滚动条目父元素设置overflow:hidden和控制其滚动条位置（scrollTop）来实现</p>
</li>
<li><p>在做if判断时，判断条件不能为语句内要执行的代码。比如判断是否支持JSON.parse时，不能用if(JSON.parse)，因为IE6、7本身就不支持JSON.parse，在IE6、7中直接是错误代码，所以JSON.parse是不能作为判断条件的，而应该用window.JSON</p>
</li>
<li><p>不要试图赋予一个变量或函数太多功能，在判断是否为已有日志时，一开始只用了一个全局的DailyId来区分，而编辑已有日志时DailyId不会像新建日志一样改变，导致如果是编辑操作DailyId值没有更改进而导致始终编辑的是第一篇编辑的已有日志。在这里Daily只是用来设置新建日志的id，而要区分日志是否已有需要添加一个flag标识，默认为某个值，在点编辑时更改，编辑完成后重置flag的值。</p>
</li>
<li><p>在实现页面基本功能同时也要时刻考虑网站的安全性问题，尽可能的在前端负责的部分就过滤组织一些错误/非法的输入。比如表单项的非空输入检测，XSS过滤等一些常见的问题是可以通过简单的代码来完成过滤的;同时时刻注意的还有程序的健壮性，要尽可能的考虑到程序可能异常的部分，做好异常处理。</p>
</li>
<li><p>在实现判断IE6版本的时候，以往的判断方法大都是通过IE对JavaScript代码的解析错误来判断，在这个方向上不断的寻找最优的方案，但最终最优的方案却是通过HTML代码中的IE HACK这一简单的方法来判断，不再需要通过各版本之间的微小差异来写复杂的逻辑代码。很多时候想不到在某个方向上想不到好的解决方案时可以试着换个思路换个角度考虑一下问题。(#105)</p>
</li>
<li><p>对于低版本IE，会异常不支持的特性常见的是有限的，将其单独写入一个文件中，需要时引入即可。对于很多IE下不支持的属性和方法，可以参考属性方法的定义，按照其逻辑思路编写简单的替代函数，这中间可能会存在性能上的差异，所以要做好判断，尽量少执行到自己编写的替代代码。</p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[IE pollyfills汇总]]></title>
      <url>http://iminyao.com/2015/12/27/IE-pollyfills/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-element-dataset"><a href="#1-element-dataset" class="headerlink" title="1. element.dataset"></a>1. element.dataset</h3><figure class="highlight maxima"><table><tr><td class="code"><pre><div class="line">function getDataSet(<span class="built_in">elem</span>)&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="built_in">elem</span>.dataset)&#123;</div><div class="line">      <span class="built_in">return</span> <span class="built_in">elem</span>.dataset;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">var</span> datas = &#123;&#125;;</div><div class="line">    <span class="built_in">var</span> attrs = <span class="built_in">elem</span>.attributes;</div><div class="line">    <span class="built_in">var</span> nodeName,nodeNames;</div><div class="line">    <span class="keyword">for</span>(<span class="built_in">var</span> i = <span class="number">0</span>,attr;attr = attrs[i];i++)&#123;</div><div class="line">      nodeName = attr.nodeName;</div><div class="line">      <span class="keyword">if</span>(nodeName.indexOf('data-')!==-<span class="number">1</span>)&#123;</div><div class="line">        nodeNames = nodeName.slice(<span class="number">5</span>).<span class="built_in">split</span>(<span class="string">"-"</span>);</div><div class="line">        nodeName = nodeNames[<span class="number">0</span>];</div><div class="line">      &#125; <span class="keyword">else</span>&#123;</div><div class="line">        continue;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">for</span>(<span class="built_in">var</span> j=<span class="number">1</span>;j&lt;nodeNames.<span class="built_in">length</span>;j++)&#123;</div><div class="line">        nodeName += nodeNames[j].slice(<span class="number">0</span>,<span class="number">1</span>).toUpperCase + nodeNames[j].slice(<span class="number">1</span>);</div><div class="line">      &#125;</div><div class="line">      datas[nodeName] = attr.nodeValue;</div><div class="line">      <span class="built_in">return</span> datas;</div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="2-JSON-stringify"><a href="#2-JSON-stringify" class="headerlink" title="2. JSON.stringify"></a>2. JSON.stringify</h3><ol>
<li><p>自定义stringify函数</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">     * method : stringify(obj);</div><div class="line">     * return : json string</div><div class="line">     * source : https://gist.github.com/754454</div><div class="line">*/</div><div class="line"> </div><div class="line">        <span class="keyword">var</span> stringify = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">            <span class="comment">//如果是IE8+ 浏览器(ff,chrome,safari都支持JSON对象)，使用JSON.stringify()来序列化</span></div><div class="line">            <span class="keyword">if</span> (<span class="built_in">window</span>.JSON) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(obj);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">var</span> t = <span class="keyword">typeof</span> (obj);</div><div class="line">            <span class="keyword">if</span> (t != <span class="string">"object"</span> || obj === <span class="literal">null</span>) &#123;</div><div class="line">                <span class="comment">// simple data type</span></div><div class="line">                <span class="keyword">if</span> (t == <span class="string">"string"</span>) obj = <span class="string">'"'</span> + obj + <span class="string">'"'</span>;</div><div class="line">                <span class="keyword">return</span> <span class="built_in">String</span>(obj);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// recurse array or object</span></div><div class="line">                <span class="keyword">var</span> n, v, json = [], arr = (obj &amp;&amp; obj.constructor == <span class="built_in">Array</span>);</div><div class="line"> </div><div class="line">                <span class="comment">// fix.</span></div><div class="line">                <span class="keyword">var</span> self = <span class="built_in">arguments</span>.callee;</div><div class="line"> </div><div class="line">                <span class="keyword">for</span> (n <span class="keyword">in</span> obj) &#123;</div><div class="line">                    v = obj[n];</div><div class="line">                    t = <span class="keyword">typeof</span>(v);</div><div class="line">                    <span class="keyword">if</span> (obj.hasOwnProperty(n)) &#123;</div><div class="line">                        <span class="keyword">if</span> (t == <span class="string">"string"</span>) v = <span class="string">'"'</span> + v + <span class="string">'"'</span>; <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">"object"</span> &amp;&amp; v !== <span class="literal">null</span>)</div><div class="line">                            <span class="comment">// v = jQuery.stringify(v);</span></div><div class="line">                            v = self(v);</div><div class="line">                        json.push((arr ? <span class="string">""</span> : <span class="string">'"'</span> + n + <span class="string">'":'</span>) + <span class="built_in">String</span>(v));</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> (arr ? <span class="string">"["</span> : <span class="string">"&#123;"</span>) + <span class="built_in">String</span>(json) + (arr ? <span class="string">"]"</span> : <span class="string">"&#125;"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div></pre></td></tr></table></figure>
</li>
<li><p><code>eval</code></p>
 <figure class="highlight maxima"><table><tr><td class="code"><pre><div class="line"><span class="built_in">var</span> jsonStr = '&#123;<span class="string">"name"</span>: <span class="string">"w3help"</span>, <span class="string">"url"</span>: <span class="string">"www.w3help.org"</span>, <span class="string">"tech"</span>: [<span class="string">"js"</span>, <span class="string">"HTML"</span>, <span class="string">"CSS"</span>, <span class="number">5</span>, <span class="number">4.01</span>, <span class="number">2.1</span>],'</div><div class="line">          + '<span class="string">"online"</span>: <span class="literal">true</span>, <span class="string">"category"</span>: &#123;<span class="string">"RCA"</span>: <span class="string">"Root Cause Artical"</span>, <span class="string">"KB"</span>:<span class="string">"Knowledge Base"</span>&#125;,'</div><div class="line">          + '<span class="string">"version"</span>: <span class="number">1</span>&#125;';</div><div class="line"><span class="built_in">var</span> obj=<span class="built_in">eval</span>(<span class="string">"("</span>+jsonStr+<span class="string">")"</span>);</div></pre></td></tr></table></figure>
</li>
<li><p><code>new Function</code></p>
 <figure class="highlight php"><table><tr><td class="code"><pre><div class="line">json2 = (<span class="keyword">new</span> <span class="function"><span class="keyword">Function</span><span class="params">(<span class="string">"return "</span> + jsonStr)</span>)<span class="params">()</span></span>;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.cnblogs.com/anychem/archive/2012/04/02/2429793.html" target="_blank" rel="external">IE6、7下的JSON.stringify</a></li>
<li><a href="https://gist.github.com/chicagoworks/754454" target="_blank" rel="external">jQuery.stringify</a></li>
<li><a href="http://w3help.org/zh-cn/causes/SJ9012" target="_blank" rel="external">W3-helo</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[IE hasLayout渲染引擎]]></title>
      <url>http://iminyao.com/2015/12/27/IE-hasLayout/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="1-概念："><a href="#1-概念：" class="headerlink" title="1. 概念："></a>1. 概念：</h2><blockquote>
<p>IE6-7的显示引擎使用的是一个称为布局（layout）的内部概念来<em>控制元素的尺寸和定位</em>，那些拥有布局（have layout）的元素负责本身及其子元素的尺寸设置和定位。如果一个元素的 hasLayout 为false，那么它的尺寸和位置由<em>最近拥有布局的祖先元素控制</em>。</p>
<p>由于这个显示引擎自身存在很多的缺陷，直接导致了IE6-7的很多显示bug。</p>
</blockquote>
<h2 id="2-hasLayout默认为true的元素："><a href="#2-hasLayout默认为true的元素：" class="headerlink" title="2. hasLayout默认为true的元素："></a>2. <code>hasLayout</code>默认为<code>true</code>的元素：</h2><pre><code><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>, <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>, <span class="tag">&lt;<span class="name">tr</span>&gt;</span>, <span class="tag">&lt;<span class="name">th</span>&gt;</span>, <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span>&gt;</span>,<span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span>, <span class="tag">&lt;<span class="name">button</span>&gt;</span>, <span class="tag">&lt;<span class="name">select</span>&gt;</span>, <span class="tag">&lt;<span class="name">textarea</span>&gt;</span>, <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span>, <span class="tag">&lt;<span class="name">legend</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span>&gt;</span>, <span class="tag">&lt;<span class="name">embed</span>&gt;</span>, <span class="tag">&lt;<span class="name">object</span>&gt;</span>, <span class="tag">&lt;<span class="name">applet</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">marquee</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><h2 id="3-能够触发hasLayout的CSS属性"><a href="#3-能够触发hasLayout的CSS属性" class="headerlink" title="3. 能够触发hasLayout的CSS属性"></a>3. 能够触发<code>hasLayout</code>的CSS属性</h2><figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line"><span class="built_in">position</span>: absolute </div><div class="line"> </div><div class="line"><span class="keyword">float</span>: left|right </div><div class="line"> </div><div class="line"><span class="built_in">display</span>: <span class="keyword">inline</span>-block </div><div class="line"> </div><div class="line"><span class="built_in">width</span>: 除 “<span class="keyword">auto</span>” 外的任意值 </div><div class="line"> </div><div class="line"><span class="built_in">height</span>: 除 “<span class="keyword">auto</span>” 外的任意值</div><div class="line"> </div><div class="line">zoom: 除 “normal” 外的任意值 </div><div class="line"> </div><div class="line">writing-mode: tb-rl</div><div class="line"><span class="comment">// IE 7新增</span></div><div class="line"><span class="built_in">overflow</span>: hidden|scroll|<span class="keyword">auto</span></div><div class="line"><span class="built_in">overflow</span>-x|-y: hidden|scroll|<span class="keyword">auto</span></div><div class="line"><span class="built_in">position</span>: fixed</div><div class="line"></div><div class="line"><span class="built_in">min</span>-<span class="built_in">width</span>: any value</div><div class="line">Even the value <span class="number">0</span> lets the element gain layout.</div><div class="line"><span class="built_in">max</span>-<span class="built_in">width</span>: any value other than <span class="string">'none'</span></div><div class="line"></div><div class="line"><span class="built_in">min</span>-<span class="built_in">height</span>: any value</div><div class="line">Even the value <span class="number">0</span> sets haslayout=true</div><div class="line"><span class="built_in">max</span>-<span class="built_in">height</span>: any value other than <span class="string">'none'</span></div></pre></td></tr></table></figure>
<h2 id="4-hasLayout常用触发CSS-Hack"><a href="#4-hasLayout常用触发CSS-Hack" class="headerlink" title="4. hasLayout常用触发CSS Hack"></a>4. <code>hasLayout</code>常用触发CSS Hack</h2><figure class="highlight scss"><table><tr><td class="code"><pre><div class="line"><span class="comment">// IE 6</span></div><div class="line"><span class="selector-class">.gainlayout</span> &#123; <span class="attribute">height</span>: <span class="number">1%</span>; &#125; <span class="comment">// Holly hack</span></div><div class="line"><span class="comment">// IE 7</span></div><div class="line"><span class="selector-class">.gainlayout</span> &#123; _height: <span class="number">0</span>; &#125;</div></pre></td></tr></table></figure>
<h2 id="5-调试"><a href="#5-调试" class="headerlink" title="5.调试"></a>5.调试</h2><blockquote>
<p>。通过 IE Developer Toolbar 可以查看 IE 下 HTML 元素是否拥有haslayout，在 IE Developer Toolbar 下，拥有 haslayout 的元素，通常显示为“haslayout = -1”。</p>
</blockquote>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://www.satzansatz.de/cssd/onhavinglayout.html" target="_blank" rel="external">On having layout</a></li>
<li><a href="http://baike.baidu.com/item/hasLayout" target="_blank" rel="external">hasLayout</a></li>
<li><a href="http://www.iyunlu.com/view/css-xhtml/55.html" target="_blank" rel="external">BFC与hasLayout</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Netease实习第一周周报]]></title>
      <url>http://iminyao.com/2015/12/26/netease-weekly-01/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="一、布局"><a href="#一、布局" class="headerlink" title="一、布局"></a>一、布局</h2><ol>
<li><p>父元素宽度固定设置与子元素间距</p>
<blockquote>
<p>父元素宽度固定且子元素很多时，要控制父元素与子元素之间的距离，通常要通过设置父元素的padding来控制其距离，但父元素宽度固定下再添加padding后改变父元素盒模型宽度,通常要在在子元素外添加包裹层</p>
</blockquote>
 <figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	html code</span></div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"bd"</span>&gt;</div><div class="line">	&lt;<span class="selector-tag">div</span> class=<span class="string">"container"</span>&gt;</div><div class="line">		&lt;<span class="selector-tag">div</span> class=<span class="string">"left"</span>&gt;&lt;/div&gt;</div><div class="line">		&lt;<span class="selector-tag">div</span> class=<span class="string">"right"</span>&gt;&lt;/div&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"><span class="comment">// css code</span></div><div class="line">.bd&#123;<span class="attribute">width</span>:<span class="number">100px</span>;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>hover</code>显示隐藏导航栏</p>
<blockquote>
<p><code>ul li a</code>结构的导航栏中，通常要将<code>a</code>标签<code>display</code>设置为<code>inline-block</code>以扩大可点击区域；通过<code>hover</code>显示隐藏导航栏时隐藏栏通常要作为触发<code>hover</code>元素的子元素，这样才可以在触发<code>hover</code>控制隐藏元素显示</p>
</blockquote>
  <figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">// html code</div><div class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"netease"</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>网易<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">              <span class="comment">&lt;!-- 隐藏导航栏 --&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"m-subnav"</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>新闻<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>微博<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>邮箱<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">              <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">// css code</div><div class="line">.netease a &#123;</div><div class="line">	display:inline-block;    </div><div class="line">	*display: inline; /* IE6、7 通过zoom:1触发haslayout */</div><div class="line">  		*zoom: 1;&#125;		  </div><div class="line">.m-nav&#123;display:none;&#125;</div><div class="line">	.netease:hover .m-subnav&#123;display:block;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>效果图到代码</p>
<blockquote>
<p>通过效果图来构建布局时要先整体后局部，首先分析整体的结构布局，通过效果图了解设计者意图，不要直接就盲目写代码，也不要过于纠结于效果图，还是要看懂设计者的要表达的意思。具体到某个模块的时候，很多时候层层嵌套的结构同一个效果可以在外层实现也可以在里层元素实现，通常也是要整体考虑，更多的时候是在外层设置。到某个组件是也是要着眼于整体，不要一上来就直接<code>padding/margin</code> <code>top/left</code>来设置位置，更多时候上下左右是都要设置的。</p>
</blockquote>
</li>
<li><p><code>margin</code>还是<code>padding</code>(#75)</p>
<blockquote>
<p>margin是用来隔开元素与元素的间距；padding是用来隔开元素与内容的间隔。margin用于布局分开元素使元素与元素互不相干；padding用于元素与内容之间的间隔，让内容（文字）与（包裹）元素之间有一段“呼吸距离”。</p>
</blockquote>
</li>
<li><p><code>margin</code>在块元素与行内元素的区别</p>
<blockquote>
<p>在块元素可以完全应用;在行内元素中由于<code>margin-top/bottom</code>对高度(只由<code>line-height font-size vertical-align</code>影响)没有影响，视觉上不会有任何效果，但<code>margin-left/right</code>效果与块元素相同;另外，对于<em>非可置换inline元素</em>(img|input|select|textarea|button|label),虽然是内联元素，但margin依旧可以影响到他的上下左右！</p>
</blockquote>
  <figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">         <span class="comment">// html code</span></div><div class="line">         &lt;div&gt;</div><div class="line">   &lt;span&gt;Hello&lt;/world&gt;</div><div class="line">   &lt;<span class="selector-tag">input</span> type=<span class="string">"text"</span> /&gt;</div><div class="line"> &lt;div&gt;</div><div class="line">        <span class="comment">// css code</span></div><div class="line">       <span class="selector-tag">div</span> &#123;</div><div class="line">  <span class="attribute">width</span>:<span class="number">200px</span>;   </div><div class="line">  <span class="attribute">height</span>:<span class="number">50px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">span</span> &#123;</div><div class="line">  <span class="attribute">margin-top</span>:<span class="number">10px</span>; <span class="comment">// 无效果</span></div><div class="line">  <span class="attribute">margin-left</span>:<span class="number">10px</span>; <span class="comment">// 有效</span></div><div class="line">  <span class="attribute">background-color</span>:blue;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">input</span> &#123;</div><div class="line">  <span class="attribute">margin-top</span>:<span class="number">10px</span>; <span class="comment">// 有效</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="二、PS"><a href="#二、PS" class="headerlink" title="二、PS"></a>二、PS</h2><ol>
<li>测量尺寸：放大缩小后使用矩形选框工具</li>
<li>检查颜色变化：纵向直接鼠标从上往下直线下滑；横向可以拖动标尺到指定元素区域，然后沿标尺滑动检查。</li>
<li>抠图：用矩形选框工具选择图片大致区域，然后通过按住<code>Alt</code>和鼠标来清除多余的区域；然后<code>ctrl+c</code>复制，<code>ctrl+n</code>新建图层粘贴即可。 </li>
</ol>
<h2 id="三、IE下-bug"><a href="#三、IE下-bug" class="headerlink" title="三、IE下 bug"></a>三、IE下 bug</h2><ul>
<li><p>概述：</p>
<blockquote>
<p>IE CSS hack,IE6可识别<code>_ *</code>,IE7仅识别<code>*</code>;IE6/7下很大一部分bug是由于<code>hasLayout</code>造成的，通常通过<code>zoom:1;</code>来无影响的触发<code>hasLayout</code>来解决问题</p>
</blockquote>
</li>
<li><p>IE私有属性：</p>
<ul>
<li><p>zoom:</p>
<blockquote>
<p>IE专有属性，作用是设置或检索对象的缩放比例。现在更多的是用来无副作用的触发<code>hasLayout（zoom:1;）</code>来清除浮动、防止margin重叠等。(<a href="http://www.iyunlu.com/demo/enclosing-float-and-clearing-float/index.html#float3" target="_blank" rel="external">demo1</a> <a href="http://www.iyunlu.com/demo/enclosing-float-and-clearing-float/index.html#float7" target="_blank" rel="external">demo2</a>)</p>
</blockquote>
</li>
<li><p>hasLayout:(#103)</p>
<blockquote>
<p>IE6-7的显示引擎使用的是一个称为布局（layout）的内部概念来<em>控制元素的尺寸和定位</em>，那些拥有布局（have layout）的元素负责本身及其子元素的尺寸设置和定位。如果一个元素的 hasLayout 为false，那么它的尺寸和位置由<em>最近拥有布局的祖先元素控制</em>。</p>
<p>由于这个显示引擎自身存在很多的缺陷，直接导致了IE6-7的很多显示bug。</p>
</blockquote>
<ul>
<li><p>expression：</p>
<blockquote>
<p>IE5 及其以后版本支持在 CSS 中使用 expression，用来把 CSS 属性和 Javas cript 表达式关联起来，这里的 CSS 属性可以是元素固有的属性，也可以是自定义属性。就是说 CSS 属性后面可以是一段Javas cript表达式，CSS属性的值等于 Javas cript 表达式计算的结果。 在表达式中可以直接引用元素自身的属性和方法，也可以使用其他浏览器对象。 </p>
</blockquote>
</li>
<li><p>IE filter：(待详细了解)   </p>
<hr>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol>
<li><p>IE6浮动元素双边距</p>
<ul>
<li>问题：  <pre><code>第一个左浮动元素的margin-left加倍;第一个右浮动元素的margin-right加倍
</code></pre></li>
<li>解决方案：由于内联元素没有此问题，所以可以通过设置display:inline解决</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">	<span class="comment">// html code</span></div><div class="line">	&lt;<span class="selector-tag">div</span> class=<span class="string">"m-demo"</span>&gt;</div><div class="line">        &lt;<span class="selector-tag">div</span> class=<span class="string">"itm itm-left"</span>&gt;<span class="number">1</span>&lt;/div&gt;</div><div class="line">        &lt;<span class="selector-tag">div</span> class=<span class="string">"itm itm-left"</span>&gt;<span class="number">2</span>&lt;/div&gt;</div><div class="line">        &lt;<span class="selector-tag">div</span> class=<span class="string">"itm itm-left"</span>&gt;<span class="number">3</span>&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">	&lt;<span class="selector-tag">div</span> class=<span class="string">"m-demo m-demo-fix"</span>&gt;</div><div class="line">        &lt;<span class="selector-tag">div</span> class=<span class="string">"itm itm-left"</span>&gt;<span class="number">1</span>&lt;/div&gt;</div><div class="line">        &lt;<span class="selector-tag">div</span> class=<span class="string">"itm itm-left"</span>&gt;<span class="number">2</span>&lt;/div&gt;</div><div class="line">        &lt;<span class="selector-tag">div</span> class=<span class="string">"itm itm-left"</span>&gt;<span class="number">3</span>&lt;/div&gt;</div><div class="line">    &lt;/div&gt; </div><div class="line">	<span class="comment">// css code</span></div><div class="line">	<span class="comment">/* IE6中浮动双边距 */</span></div><div class="line">.m-demo&#123;<span class="attribute">width</span>:<span class="number">400px</span>;<span class="attribute">height</span>:<span class="number">20px</span>;<span class="attribute">margin</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;<span class="attribute">background</span>:<span class="number">#ddd</span>;&#125;</div><div class="line"><span class="selector-class">.m-demo</span> .itm&#123;<span class="attribute">width</span>:<span class="number">20px</span>;<span class="attribute">height</span>:<span class="number">20px</span>;<span class="attribute">line-height</span>:<span class="number">20px</span>;<span class="attribute">text-align</span>:center;<span class="attribute">color</span>:<span class="number">#fff</span>;<span class="attribute">background</span>:<span class="number">#ff0097</span>;&#125;</div><div class="line"><span class="selector-class">.m-demo</span> .itm-<span class="attribute">left</span>&#123;float:left;<span class="attribute">margin-left</span>:<span class="number">20px</span>;&#125;</div><div class="line"><span class="selector-class">.m-demo-fix</span> .itm&#123;*<span class="attribute">display</span>:inline;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>IE定位位置错误</p>
<ul>
<li>问题：相对定位的父元素绝对定位的子元素，如果父元素没有触发<code>haslayout</code>，子元素定位会出问题</li>
<li>解决方案：触发父元素<code>hasLayout</code>(zoom:1;);通常我们在设置一个容器为position:relative的时候，都会加上zoom:1来解决很多ie下的问题 </li>
</ul>
<figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line"><span class="comment">// html code</span></div><div class="line">   &lt;div <span class="keyword">class</span>=<span class="string">"m-demo"</span>&gt;</div><div class="line">   &lt;div <span class="keyword">class</span>=<span class="string">"content"</span>&gt;&lt;/div&gt;</div><div class="line">   &lt;div <span class="keyword">class</span>=<span class="string">"absolute"</span>&gt;&lt;/div&gt;</div><div class="line">   &lt;/div&gt;</div><div class="line">   &lt;div <span class="keyword">class</span>=<span class="string">"m-demo m-demo-fix"</span>&gt;</div><div class="line">   &lt;div <span class="keyword">class</span>=<span class="string">"content"</span>&gt;&lt;/div&gt;</div><div class="line">   &lt;div <span class="keyword">class</span>=<span class="string">"absolute"</span>&gt;&lt;/div&gt;  </div><div class="line">    &lt;/div&gt;</div><div class="line"><span class="comment">// css code</span></div><div class="line"><span class="comment">/* IE6中定位位置错误 */</span> </div><div class="line">   .m-demo&#123;<span class="built_in">position</span>:relative;margin:<span class="number">0</span> <span class="number">0</span> <span class="number">10</span>px;padding:<span class="number">20</span>px;<span class="built_in">background</span>:<span class="meta">#ddd;color:#fff;font-size:12px;&#125;</span></div><div class="line">   .m-demo .content&#123;<span class="built_in">width</span>:<span class="number">100</span>%;<span class="built_in">height</span>:<span class="number">20</span>px;<span class="built_in">background</span>:#ff0097;<span class="keyword">word</span>-wrap:<span class="built_in">break</span>-<span class="keyword">word</span>;&#125;</div><div class="line">   .m-demo .absolute&#123;<span class="built_in">position</span>:absolute;bottom:<span class="number">0</span>;left:<span class="number">0</span>;<span class="built_in">width</span>:<span class="number">50</span>px;<span class="built_in">height</span>:<span class="number">50</span>px;<span class="built_in">background</span>:#<span class="number">4</span>eb3b9;<span class="keyword">word</span>-wrap:<span class="built_in">break</span>-<span class="keyword">word</span>;&#125;</div><div class="line">   .m-demo-fix&#123;zoom:<span class="number">1</span>;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>IE 6、7中定位元素溢出后不随滚动条移动</p>
<ul>
<li>问题：定位元素移除后，拉动滚动条定位元素不会移动</li>
<li>解决方案：将有滚动条的父元素也设置为相对定位</li>
</ul>
<figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line">	<span class="comment">// html code</span></div><div class="line">	    &lt;div <span class="keyword">class</span>=<span class="string">"m-demo"</span>&gt;</div><div class="line">        &lt;div <span class="keyword">class</span>=<span class="string">"content1"</span>&gt;在ie67下，红色区域溢出，拖动垂直或水平滚动条时，红色区域不会动&lt;/div&gt;</div><div class="line">        &lt;div <span class="keyword">class</span>=<span class="string">"relative"</span>&gt;<span class="built_in">position</span>:relative;&lt;/div&gt;</div><div class="line">        &lt;div <span class="keyword">class</span>=<span class="string">"content2"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line"></div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"m-demo m-demo-fix"</span>&gt;</div><div class="line">        &lt;div <span class="keyword">class</span>=<span class="string">"content1"</span>&gt;只需要在有滚动条的容器上也设置相对定位即可。&lt;/div&gt;</div><div class="line">        &lt;div <span class="keyword">class</span>=<span class="string">"relative"</span>&gt;<span class="built_in">position</span>:relative;&lt;/div&gt;</div><div class="line">        &lt;div <span class="keyword">class</span>=<span class="string">"content2"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">	<span class="comment">// css code</span></div><div class="line">	<span class="comment">/* IE67中定位元素溢出不动  */</span></div><div class="line">.m-demo&#123;<span class="built_in">width</span>:<span class="number">300</span>px;<span class="built_in">height</span>:<span class="number">250</span>px;margin-top:<span class="number">10</span>px;<span class="built_in">overflow</span>:<span class="keyword">auto</span>;border:<span class="number">1</span>px solid #<span class="number">666</span>;&#125;</div><div class="line">.m-demo .content1&#123;<span class="built_in">height</span>:<span class="number">100</span>px;padding-top:<span class="number">5</span>px;&#125;</div><div class="line">.m-demo .content2&#123;<span class="built_in">height</span>:<span class="number">500</span>px;&#125;</div><div class="line">.m-demo .relative&#123;<span class="built_in">position</span>:relative;<span class="built_in">width</span>:<span class="number">400</span>px;<span class="built_in">background</span>:#f00;&#125;</div><div class="line">.m-demo-fix&#123;<span class="built_in">position</span>:relative;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>IE6绝对定位1px偏差</p>
<ul>
<li>问题：IE6中参照物宽高为IE6下参照物宽高为奇数时，绝对定位元素设置了位置为0或100%时，仍会有1px的空隙</li>
<li>解决方案：将参照物宽高设为偶数</li>
</ul>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line">	<span class="comment">// html code</span></div><div class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"m-demo"</span>&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-1"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-2"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-3"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-4"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">	&lt;/div&gt;    </div><div class="line"></div><div class="line">	&lt;div <span class="keyword">class</span>=<span class="string">"m-demo m-demo-fix"</span>&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-1"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-2"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-3"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">    &lt;div <span class="keyword">class</span>=<span class="string">"itm itm-4"</span>&gt;&amp;nbsp;&lt;/div&gt;</div><div class="line">	&lt;/div&gt; </div><div class="line">	<span class="comment">// css cpde</span></div><div class="line">	<span class="comment">/* IE6中绝对定位1像素偏差 */</span> </div><div class="line">.m-demo&#123;position:relative;width:<span class="number">501</span>px;height:<span class="number">101</span>px;margin:<span class="number">0</span> <span class="number">0</span> <span class="number">20</span>px;background:<span class="meta">#ff0097;&#125;</span></div><div class="line">.m-demo .itm&#123;position:absolute;width:<span class="number">20</span>px;height:<span class="number">20</span>px;overflow:hidden;background:<span class="meta">#4eb3b9;&#125;</span></div><div class="line">.m-demo .itm<span class="number">-1</span>&#123;top:<span class="number">0</span>;left:<span class="number">0</span>;background:<span class="meta">#999;&#125;</span></div><div class="line">.m-demo .itm<span class="number">-2</span>&#123;top:<span class="number">0</span>;right:<span class="number">0</span>;&#125;</div><div class="line">.m-demo .itm<span class="number">-3</span>&#123;left:<span class="number">100</span>%;top:<span class="number">100</span>%;&#125;</div><div class="line">.m-demo .itm<span class="number">-4</span>&#123;left:<span class="number">0</span>;bottom:<span class="number">0</span>;&#125;</div><div class="line">.m-demo-fix&#123;width:<span class="number">500</span>px;height:<span class="number">100</span>px;&#125;</div><div class="line">   ``` </div><div class="line"></div><div class="line"><span class="number">5.</span> IE6浮动<span class="number">3</span>px空隙</div><div class="line">   * 问题：浮动元素右侧文本左侧<span class="number">3</span>px空隙</div><div class="line">   * 解决方案：负边距</div></pre></td></tr></table></figure>
<p> // html code<br> <div class="m-demo"> </div></p>
<pre><code>&lt;div class=&quot;float&quot;&gt;XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX&lt;/div&gt;
&lt;div&gt;XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX&lt;/div&gt;
</code></pre><p> </p>
<pre><code>&lt;div class=&quot;m-demo m-demo-fix&quot;&gt; 
&lt;div class=&quot;float&quot;&gt;XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX&lt;/div&gt;
&lt;div&gt;XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX&lt;/div&gt;
</code></pre><p> // css code</p>
<pre><code>/* IE6中浮动3像素空隙 */ 
</code></pre><p>.m-demo{width:400px;margin:0 0 10px;background:#ddd;}<br>.m-demo .float{float:left;width:200px;background:#ff0097;}<br>.m-demo-fix .float{_margin-right:-3px;}</p>
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="number">6</span>. IE `hover`无效</div><div class="line">   * 问题：IE6中除`a`标签以外不支持`hover`等伪类</div><div class="line">   * 解决方案：引入`csshover.htc`文件</div></pre></td></tr></table></figure>
 <!--[if lte IE 6]>
    <style type="text/css">
    body { behavior:url("csshover.htc"); }
    </style>
    <![endif]-->
 <figure class="highlight clean"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="number">7.</span> IE `first-child last-child`无效</div><div class="line">   * 问题：IE6不支持`first-child/last-child`</div><div class="line">   * 解决方案：`expression`</div></pre></td></tr></table></figure>
<p> //    html code<br> <div class="pics"><br><a href="#"><img src="a.jpg" alt=""></a><br><a href="#"><img src="b.jpg" alt=""></a><br><a href="#"><img src="c.jpg" alt=""></a><br></div><br> //    css code<br> a { margin-left: 10px; }　<br>a:first-child { margin-left: 0; }<br>a { * margin-left: expression        (this.previousSibling==null?’0’:’10px’); }    // IE6 fixed</p>
 <figure class="highlight clean"><table><tr><td class="code"><pre><div class="line"><span class="number">8.</span> IE6 `<span class="keyword">inline</span>-block`无效</div><div class="line">    * 问题：IE6的`<span class="keyword">inline</span>-block`与CSS2<span class="number">.1</span>中的定义不同导致设置`<span class="keyword">inline</span>-block`无法实现效果。</div><div class="line">    * 解决方案：</div></pre></td></tr></table></figure>
<p>   <em>display:inline; //  先设置为行内元素
   </em>zoom:1;    // 然后触发haslayout使元素可以设置宽高</p>
  <figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line"></div><div class="line">## 三、基础/实用知识 ##</div><div class="line"><span class="number">1.</span> `<span class="built_in">line</span>-<span class="built_in">height</span>`继承</div><div class="line">  &gt; 如果<span class="built_in">line</span>-<span class="built_in">height</span>属性值有单位或百分比，那么继承的值则是换算后的一个具体的px级别的值；而如果属性值没有单位，则浏览器会直接继承这个**因子（数值）**，而非计算后的具体值，此时它的<span class="built_in">line</span>-<span class="built_in">height</span>会根据本身的font-<span class="built_in">size</span>值重新计算得到新的<span class="built_in">line</span>-<span class="built_in">height</span> 值。</div></pre></td></tr></table></figure>
<p> //    html code<br> <div class="parent"></div></p>
<pre><code>&lt;div class=&quot;child&quot;&gt;Web前端开发&lt;br /&gt;
line-height行高问题
&lt;/div&gt;
</code></pre><p> <br> //    css code<br> .parent {line-height:150%;font-size:16px;}<br> .child {font-size:30px;}</p>
 <figure class="highlight markdown"><table><tr><td class="code"><pre><div class="line"></div><div class="line">![<span class="string">result</span>](<span class="link">https://pic2.zhimg.com/cd8d76c78e80e3183a1c241dfb39f2c5_b.jpg</span>)</div></pre></td></tr></table></figure>
<p> // css code</p>
<pre><code>.parent {line-height:150%;font-size:16px;}
</code></pre> <figure class="highlight less"><table><tr><td class="code"><pre><div class="line">	!<span class="selector-attr">[result]</span>(<span class="attribute">https</span>:<span class="comment">//pic1.zhimg.com/1a56e5fabcf173ae074e0f4ed9e61e3c_b.jpg)</span></div><div class="line">    </div><div class="line"><span class="number">2</span>. <span class="built_in">`placeholder`</span>设置样式</div></pre></td></tr></table></figure>
<pre><code>input::-webkit-input-placeholder {color:gray;} //    Chrome、Safari
input::-moz-placeholder {color;red;} //    Firefox
input:-ms-input-placeholder {color:red;}    // IE10+
</code></pre> <figure class="highlight vim"><table><tr><td class="code"><pre><div class="line"><span class="number">3</span>. `<span class="symbol">&lt;textarea&gt;</span>`设置`placeholder`无效</div><div class="line"></div><div class="line">	&gt;  the opening <span class="built_in">and</span> closing <span class="keyword">tags</span> <span class="keyword">for</span> the `<span class="symbol">&lt;textarea&gt;</span>` element must <span class="keyword">be</span> <span class="keyword">on</span> the same <span class="built_in">line</span>, otherwise <span class="keyword">a</span> newline character occupies it. The placeholder will therefore not <span class="keyword">be</span> displayed since the <span class="built_in">input</span> area contains content.</div></pre></td></tr></table></figure>
<p> //    Good<br> <textarea></textarea><br> //     Bad<br> <textarea><br> </textarea><br> ```</p>
</li>
</ol>
<h2 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h2><ol>
<li>在虚拟机下面测IE6时突然页面某个模块显示异常，通过测试发现其全部CSS样式都无法应用，困惑了好久，最后发现竟然是编码问题，windows平台下Webstorm中CSS的编码格式为<code>GBK</code>，导致CSS注释出现乱码，进而导致其模块所有代码失效…(PHP中也会经常遇到编码导致异常的问题，有待好好看一下编码方面的知识。)</li>
</ol>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://stackoverflow.com/questions/10186913/html5-textarea-placeholder-not-appearing" target="_blank" rel="external">textarea placeholder now show</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/line-height" target="_blank" rel="external">line-height-MDN</a></li>
<li><a href="http://ichov.com/design/ie6-first-child-and-last-child.html" target="_blank" rel="external">让IE6支持first-child/last-child</a></li>
<li><a href="https://msdn.microsoft.com/en-us/library/ms531189(v=vs.85" target="_blank" rel="external">zoom-MDN</a>.aspx)</li>
<li><a href="http://nec.netease.com/library/category/#bug" target="_blank" rel="external">NEC-bug</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[HTTP请求信息之Referer]]></title>
      <url>http://iminyao.com/2015/12/22/HTTP-referer/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="什么是referer？"><a href="#什么是referer？" class="headerlink" title="什么是referer？"></a>什么是referer？</h3><blockquote>
<p>HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器我是从哪个页面链接过来的，服务器籍此可以获得一些信息用于处理。HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器我是从哪个页面链接过来的，服务器籍此可以获得一些信息用于处理。</p>
</blockquote>
<h3 id="Https中的referer"><a href="#Https中的referer" class="headerlink" title="Https中的referer"></a>Https中的referer</h3><blockquote>
<p>从一个https页面上的链接访问到一个非加密的http页面的时候，在http页面上是检查不到HTTP Referer的</p>
</blockquote>
<h4 id="原因：rfc文档中有如下定义"><a href="#原因：rfc文档中有如下定义" class="headerlink" title="原因：rfc文档中有如下定义"></a>原因：rfc文档中有如下定义</h4><blockquote>
<p>Clients SHOULD NOT include a Referer header field in a (non-secure)<br>   HTTP request if the referring page was transferred with a secure<br>   protocol.</p>
<p>出于安全的考虑，访问非加密页时，如果来源是加密页，客户端不发送Referer</p>
</blockquote>
<h3 id="referer的应用："><a href="#referer的应用：" class="headerlink" title="referer的应用："></a>referer的应用：</h3><ol>
<li>图片防盗链：<a href="http://blog.soueasy.net/post/80.htm" target="_blank" rel="external">Apache配置</a></li>
<li>CSRF</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://zh.wikipedia.org/wiki/HTTP%E5%8F%83%E7%85%A7%E4%BD%8D%E5%9D%80" target="_blank" rel="external">wiki</a></li>
<li><a href="http://www.fwolf.com/blog/post/320" target="_blank" rel="external">HTTP Referer二三事</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Web Audio API基础知识]]></title>
      <url>http://iminyao.com/2015/09/09/web-audio-first/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-音频上下文（AudioContext）"><a href="#1-音频上下文（AudioContext）" class="headerlink" title="1. 音频上下文（AudioContext）"></a>1. 音频上下文（AudioContext）</h3><blockquote>
<p>Web Audio API 是一套以音频上下文（AudioContext）为基础的接口系统；基本上每一次的开发都需要第一个用到。</p>
<p>一个<code>AudioContext</code>代表一系列音频节点以及节点之间的连接方式，它允许一个或以上的音频信号在经过任意的连接之后最终连接在音频播放设备节点上；节点都是可以通过音频上下文对象然后连接到了一起；通常一个文档中只需要一个一个音频上下文对象即可。</p>
<p>它不仅能够创建各种类型的音频节点，还规范了音频节点跟节点之间的连接式，规范了音频流在节点之间的传达方式。</p>
</blockquote>
<ul>
<li><p>实例:</p>
<figure class="highlight haxe"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	实例化一个音频上下文对象</span></div><div class="line"><span class="keyword">var</span> audioCtx = <span class="keyword">new</span> <span class="type">AudioContext</span>();</div><div class="line"><span class="comment">// 创建音源节点</span></div><div class="line"><span class="keyword">var</span> sourceNode = audioCtx.createBufferSource();</div><div class="line"><span class="comment">// 创建分析节点</span></div><div class="line"><span class="keyword">var</span> analyserNode = audioCtx.createAnalyser();</div><div class="line"><span class="comment">// 创建增益节点</span></div><div class="line"><span class="keyword">var</span> gainNode = audioCtx.createGain();</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-音频节点（AudioNode）"><a href="#2-音频节点（AudioNode）" class="headerlink" title="2. 音频节点（AudioNode）"></a>2. 音频节点（AudioNode）</h3><blockquote>
<p>AudioNode是AudioContext的基石，它可以是<strong>音频音源模块</strong>，<strong>音频播放设备模块</strong>，也可以是中间<strong>音频处理模块</strong>。</p>
</blockquote>
<ul>
<li><p>实例： </p>
<p><img src="http://cdn.alloyteam.com/wp-content/uploads/2015/01/modular-routing1.png" alt="1"><br><img src="http://cdn.alloyteam.com/wp-content/uploads/2015/01/modular-routing2.png" alt="2"></p>
</li>
</ul>
<h4 id="音源节点分类："><a href="#音源节点分类：" class="headerlink" title="音源节点分类："></a>音源节点分类：</h4><ul>
<li><p><strong>音源节点</strong>：主要用于产生或引入一段音频信号</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><div class="line">  <span class="comment">// 音频原始数据节点，可通过ajax、input方式引入音频格式文件</span></div><div class="line">AudioBufferSourceNode</div><div class="line"><span class="comment">// 音频媒体标签节点，可通过关联&lt;audio&gt;标签</span></div><div class="line">MediaElementAudioSourceNode</div><div class="line"><span class="comment">// 实时音频流节点，可通过getUserMedia获取实时输入的音频流数据</span></div><div class="line">MediaStreamAudioSourceNode</div><div class="line"><span class="comment">// 波形产生器节点，可产生自定义的波形/频率的音频信号</span></div><div class="line">OscillatorNode</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>分析节点</strong>：主要用于对频谱数据的读取，以便可以实现一些可视化的交互</p>
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><div class="line">   // 音频信号分析节点</div><div class="line">AnalyserNode</div><div class="line">// js处理节点，该节点因性能问题，目前处于废弃状态，后续逐步由`AudioWorkerNode`代替</div><div class="line">ScriptProcessorNode</div><div class="line">// 能实现与`ScriptProcessorNode`一样的功能，不过音频处理代码会放到单独的一个外部文件由浏览器端引入，而该文件的执行也由浏览器端新开独立进行去执行，不会影响主线程</div><div class="line">AudioWorkerNode</div></pre></td></tr></table></figure>
</li>
<li><p><strong>音频处理节点</strong>:该类节点大都是具有某种效果的处理能力，可以对输入的音频信号进行一些处理</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><div class="line">  <span class="comment">// 增益节点</span></div><div class="line">GainNode</div><div class="line"><span class="comment">// 滤波器节点</span></div><div class="line">BiquadFilterNode</div><div class="line"><span class="comment">// 延时节点</span></div><div class="line">DelayNode</div></pre></td></tr></table></figure>
</li>
<li><p><strong>播放设备节点</strong>:主要用于播放最终处理完的音频信号</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// 实时音频流播放设备节点</span></div><div class="line">MediaStreamAudioDestinationNode</div><div class="line">AudioDestinationNode</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><pre><code>// 前缀兼容
[&apos;&apos;,&apos;webkit&apos;,&apos;moz&apos;,&apos;ms&apos;].forEach(function (pre) {
    var prefix = pre + &apos;AudioContext&apos;;
    if ( !window.AudioContext &amp;&amp; window[prefix] ) {
        window.AudioContext = window[prefix];
    }
});

// 通过Ajax请求音频文件
function fetchAudioSource (url, successCallback) {
    if ( url &amp;&amp; typeof url === &apos;string&apos; ) {
        var request = new XMLHttpRequest();
        request.open(&apos;GET&apos;, url, true);
        // 以二进制缓冲的方式存储音频文件数据
        request.responseType = &apos;arraybuffer&apos;;
        request.onload = function() {
            successCallback(request.response);
        }
        request.send();
    }
}

//    将缓冲区的文件(arraybuffer)数据解码成音频RAW数据
function decodeAudio (audioCtx, audioData, callback) {
    if ( audioData ) {
        audioCtx.decodeAudioData(
            audioData,
            // on success
            function (buffer) {
                callback &amp;&amp; callback(buffer);
            },
            // on fail
            function(e) {
                console.log(&apos;Fail to decode the file!&apos;);
            }
        )
    }
}

    //    创建播放器
    if ( AudioContext ) {
    fetchAudioSource(&apos;./somemusic.mp3&apos;, function (re) {
        // 创建音频上下文对象
        var audioCtx = new AudioContext();
        // 创建音源节点
        var sourceNode = audioCtx.createBufferSource();
        // 加一个增益节点，用于控制音量
        var gainNode = audioCtx.createGain();
        // 设置音量大小，默认值为1 - 无增益或衰减
        gainNode.gain.value = 0.8;
        // 解码
        decodeAudio(audioCtx, re, function (sourceBuffer) {
            sourceNode.buffer = sourceBuffer;
        });
        // 连接各节点
        // source node -&gt; gain node -&gt; destination node
        sourceNode.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        // 播放
        (sourceNode.start || sourceNode.noteOn)(0);
    });
}
</code></pre><h2 id="附录：Web-Audio发展史"><a href="#附录：Web-Audio发展史" class="headerlink" title="附录：Web Audio发展史"></a>附录：Web Audio发展史</h2><h3 id="1-lt-embed-gt"><a href="#1-lt-embed-gt" class="headerlink" title="1. &lt;embed&gt;"></a>1. <code>&lt;embed&gt;</code></h3><ol>
<li>有界面交互，可以让用户控制播放/暂停（该属性可选）；</li>
<li>不止能播放音频格式文件，还能播放VRML Live3D图形动画。</li>
</ol>
<h3 id="2-lt-object-gt"><a href="#2-lt-object-gt" class="headerlink" title="2. &lt;object&gt;"></a>2. <code>&lt;object&gt;</code></h3><blockquote>
<p>随着web的快速发展，标准变得越来越重要，这时就有了W3C存在的理由，1997年伴随着HTML4的到来，W3C引入了<code>&lt;object&gt;</code>标签，囊括了图片、音频、视频等格式文件，可以说非常彪悍；作为第一款可以跨浏览器间播放音频的标签，基本能满足我们当时对嵌入媒体的欲望，但<object>同样存在自己的弊端，例如<strong>标签臃肿，依赖插件，SEO困难</strong>等；</object></p>
</blockquote>
<h3 id="3-lt-audio-gt"><a href="#3-lt-audio-gt" class="headerlink" title="3. &lt;audio&gt;"></a>3. <code>&lt;audio&gt;</code></h3><blockquote>
<p>最大目的还是为了减少web富媒体应用对插件的依赖。仅从标签名来说就能很好区分各自的功能，这点无疑是非常有利于搜索引擎去索引资源的</p>
</blockquote>
<p><strong>相比<code>&lt;object&gt;</code>来说，最明显的特色即是:</strong></p>
<ol>
<li>标签语义化，结构更简单；</li>
<li>脱离插件；</li>
<li>简单的javascript内置方法以及事件交互。</li>
</ol>
<h5 id="不足："><a href="#不足：" class="headerlink" title="不足："></a>不足：</h5><blockquote>
<p>开发者缺少了对音频数据的访问权限，在很多更动感的交互，更复杂的音效需求面前就显得力不从心了。</p>
</blockquote>
<h3 id="4-Web-Audio-API"><a href="#4-Web-Audio-API" class="headerlink" title="4. Web Audio API"></a>4. Web Audio API</h3><blockquote>
<p>Web Audio API 是一套全新的相对独立的接口系统，对音频文件拥有<strong>更高的处理权限</strong>以及<strong>内置相关的音频专业效果处理</strong>，可以完全独立于 <code>&lt;audio&gt;</code> 标签而存在。</p>
</blockquote>
<h5 id="Web-Audio-API新特点："><a href="#Web-Audio-API新特点：" class="headerlink" title="Web Audio API新特点："></a>Web Audio API新特点：</h5><ol>
<li>更精准的时间控制；</li>
<li>可完全独立<code>&lt;audio&gt;</code>，允许更多音频文件同时播放，用于游戏或者复杂音频应用场景；</li>
<li>模块化路由连接方式，让音频操作更加灵活形象；</li>
<li>实时的频域、时域数据访问/操作；</li>
<li>更多专业的音频处理方法<ul>
<li>音道分离/合并；</li>
<li>音频延时效果；</li>
<li>内置频率滤波器；</li>
<li>音频空间感效果以及多普勒效应模拟；</li>
<li>音频卷积运算（用于声场环境模拟）；</li>
<li>自定义波形生成器；</li>
<li>波形非线性失真处理。</li>
</ul>
</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.alloyteam.com/2014/12/web-audio-api-na-xie-nian-di-web-audio/" target="_blank" rel="external">Alloy Team - Web Audio API系列</a></li>
<li><a href="http://www.alloyteam.com/2015/01/web-audio-api-yin-pin-shang-xia-wen-yu-yin-pin-jie-dian-di-shi-yong-fang-shi/" target="_blank" rel="external">Web Audio初探</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript实现跨域的几种方案]]></title>
      <url>http://iminyao.com/2015/09/03/cross-source/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-Ajax的跨域-CORS"><a href="#1-Ajax的跨域-CORS" class="headerlink" title="1.Ajax的跨域: CORS"></a>1.<a href="http://iminyao.com/2015/07/01/CORS/">Ajax的跨域: CORS</a></h3><h3 id="2-JSONP"><a href="#2-JSONP" class="headerlink" title="2. JSONP"></a>2. <a href="http://iminyao.com/2015/07/01/JSONP/">JSONP</a></h3><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">//	需要获取数据的页面 index.html</div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getWeather</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(data);</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://x.y.com/xx.js"</span>&gt;</span><span class="undefined"></span></div></pre></td></tr></table></figure>
<figure class="highlight elixir"><table><tr><td class="code"><pre><div class="line">/<span class="regexp">/	http:/</span><span class="regexp">/x.y.com/xx</span>.js 文件内容</div><div class="line">getWeather(&#123;</div><div class="line">    <span class="string">"城市"</span>: <span class="string">"北京"</span>,</div><div class="line">    <span class="string">"天气"</span>: <span class="string">"大雾"</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="3-document-domain-主要用在控制-lt-iframe-gt-的情况中"><a href="#3-document-domain-主要用在控制-lt-iframe-gt-的情况中" class="headerlink" title="3. document.domain(主要用在控制 &lt;iframe&gt; 的情况中)"></a>3. document.domain(主要用在控制 <code>&lt;iframe&gt;</code> 的情况中)</h3><h4 id="使用条件："><a href="#使用条件：" class="headerlink" title="使用条件："></a>使用条件：</h4><ol>
<li>有其他页面 window 对象的引用。</li>
<li>二级域名相同。</li>
<li>协议相同。</li>
<li>端口相同。</li>
</ol>
<figure class="highlight livescript"><table><tr><td class="code"><pre><div class="line"><span class="regexp">//	打开 http://</span>wwww.iminyao.com/，在 <span class="built_in">console</span> 中输入代码：</div><div class="line"><span class="built_in">document</span>.domain = <span class="string">'iminyao.com'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> otherWindow = <span class="built_in">window</span>.open(<span class="string">'http://bgm.iminyao.com/'</span>);</div></pre></td></tr></table></figure>
<figure class="highlight livescript"><table><tr><td class="code"><pre><div class="line"><span class="regexp">//	在http://</span>bgm.iminyao.com的<span class="built_in">console</span>中输入代码：</div><div class="line"><span class="built_in">document</span>.domain = <span class="string">'iminyao.com'</span>;</div></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	回到百度文库的网页，我们就可以使用百度知道网页的 window 对象来操作百度知道的网页了。例如：</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> divs = otherWindow.<span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>);</div></pre></td></tr></table></figure>
<h3 id="4-window-name"><a href="#4-window-name" class="headerlink" title="4. window.name"></a>4. window.name</h3><h3 id="5-HTML5-postMessage"><a href="#5-HTML5-postMessage" class="headerlink" title="5. HTML5 postMessage"></a>5.<a href="http://iminyao.com/2016/07/09/message-in-webview/"> HTML5 postMessage</a></h3><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://segmentfault.com/a/1190000003642057" target="_blank" rel="external">http://segmentfault.com/a/1190000003642057</a></li>
<li><a href="https://imququ.com/post/cross-origin-resource-sharing.html" target="_blank" rel="external">也谈跨域数据交互解决方案</a></li>
<li><a href="http://www.php-note.com/article/detail/875" target="_blank" rel="external">JS跨域（ajax跨域、iframe跨域）解决方法及原理详解(jsonp)</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[XMLHttpRequest 2.0中的响应数据类型]]></title>
      <url>http://iminyao.com/2015/09/03/XHR2-data-type/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-DOMString"><a href="#1-DOMString" class="headerlink" title="1. DOMString"></a>1. DOMString</h3><blockquote>
<p><code>DOMString</code>指的是UTF-16字符串，而JavaScript正是使用了这种编码的字符串，因此，在Ajax中，<code>DOMString</code>就等同于JS中的普通字符串。</p>
<p><code>XMLHttpRequest</code>中数据返回属性<code>responseText</code>,返回的数据是常规字符串。</p>
</blockquote>
<h3 id="2-Document数据类型"><a href="#2-Document数据类型" class="headerlink" title="2. Document数据类型"></a>2. Document数据类型</h3><blockquote>
<p>实际上就是<code>XMLHttpRequest</code>中数据返回属性之<code>responseXML</code>，也就是可以解析为XML的数据。因此，这里的<code>Document</code>数据类似你就可以近似看成XML数据类型。</p>
</blockquote>
<h3 id="3-FormData对象"><a href="#3-FormData对象" class="headerlink" title="3. FormData对象"></a>3. FormData对象</h3><blockquote>
<p><code>XMLHttpRequest Level 2</code>添加了一个新的接口<code>FormData</code>. 利用<code>FormData</code>对象，我们可以通过JavaScript用一些键值对来模拟一系列表单控件，我们还可以使用<code>XMLHttpRequest</code>的<code>send()</code>方法来异步的提交这个”表单”。比起普通的ajax, 使用<code>FormData</code>的最大优点就是我们可以异步上传一个二进制文件。</p>
<p><code>FormData</code>对象的作用就类似于这里的<code>serialize()</code>方法(作用就是表单序列化，也就是以查询字符串形式获得类表单post/get的数据给Ajax请求)，不过FormData是浏览器原生的，且支持二进制文件。</p>
</blockquote>
<ul>
<li>语法：<code>var newFormData = new FormData(FormElement);</code><blockquote>
<p>FormElement这个参数可选，可有可无。表示form表单元素，就是我们要序列化，要提交的那个表单元素。newFormData就是FormElement这个表单元素中所有键值对数据了。</p>
</blockquote>
</li>
<li><p>实例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#formData"</span>).addEventListener(<span class="string">"submit"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">   <span class="keyword">var</span> myFormData = <span class="keyword">new</span> FormData(<span class="keyword">this</span>);</div><div class="line">   <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">   xhr.open(<span class="keyword">this</span>.method, <span class="keyword">this</span>.action);</div><div class="line">   xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">       <span class="keyword">if</span> (xhr.status == <span class="number">200</span> &amp;&amp; xhr.responseText === <span class="number">4</span>) &#123;</div><div class="line">           <span class="comment">// 显示：'欢迎你，' + xhr.responseText;</span></div><div class="line">           <span class="keyword">this</span>.reset();</div><div class="line">       &#125;</div><div class="line">   &#125;.bind(<span class="keyword">this</span>);</div><div class="line">   <span class="comment">// 发送FormData对象数据</span></div><div class="line">   xhr.send(myFormData);</div><div class="line">   <span class="comment">// 阻止默认的表单提交</span></div><div class="line">   event.preventDefault();</div><div class="line">&#125;, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">   $username = $_POST[<span class="string">'email'</span>];</div><div class="line">   <span class="keyword">if</span> (<span class="keyword">isset</span>($username) == <span class="keyword">true</span>) &#123;</div><div class="line">       <span class="keyword">echo</span> $username;</div><div class="line">   &#125; <span class="keyword">else</span> &#123;</div><div class="line">       <span class="keyword">echo</span> <span class="string">''</span>;    </div><div class="line">   &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>FormData对象还有一个方法，为append()方法，可以人为的给当前FormData对象添加一个键/值对。</p>
</blockquote>
<ul>
<li><p>语法如下：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">append</span><span class="params">(DOMString 键, Blob 值, [可选] DOMString 文件名)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">append</span><span class="params">(DOMString 键, DOMString 值)</span></span>;</div></pre></td></tr></table></figure>
</li>
<li><p>实例：<br><code>myFormData.append(&quot;token&quot;, &quot;ce509193050ab9c2b0c518c9cb7d9556&quot;);</code></p>
</li>
</ul>
<h3 id="4-Blob数据对象"><a href="#4-Blob数据对象" class="headerlink" title="4. Blob数据对象"></a>4. Blob数据对象</h3><blockquote>
<p>一个<code>Blob</code>对象就是一个包含有只读原始数据的类文件对象。<code>Blob</code>对象中的数据并不一定得是JavaScript中的原生形式。<code>File</code>接口基于<code>Blob</code>, 继承了<code>Blob</code>的功能，并且扩展支持了用户计算机上的本地文件。</p>
<p>创建Blob对象的方法有几种，可以调用Blob构造函数，还可以使用一个已有Blob对象上的<code>slice()</code>方法切出另一个Blob对象，还可以调用<code>canvas</code>对象上的<code>toBlob</code>方法。</p>
<p>实际上，Blob是计算机界通用术语之一，全称写作：BLOB (binary large object)，表示二进制大对象。MySql/Oracle数据库中，就有一种Blob类型，专门存放二进制数据。</p>
<p>在实际Web应用中，Blob更多是图片二进制形式的上传与下载，虽然其可以实现几乎任意文件的二进制传输。</p>
</blockquote>
<ul>
<li><p>语法： <code>var myBlob= new Blob(arrayBuffer);</code></p>
</li>
<li><p>实例：使用Blob从服务器上GET某mm的图片</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();    </div><div class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"mm1.jpg"</span>, <span class="literal">true</span>);</div><div class="line">xhr.responseType = <span class="string">"blob"</span>;</div><div class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.status == <span class="number">200</span>) &#123;</div><div class="line">        <span class="keyword">var</span> blob = <span class="keyword">this</span>.response;  <span class="comment">// this.response也就是请求的返回就是Blob对象</span></div><div class="line">        <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</div><div class="line">        img.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">          <span class="built_in">window</span>.URL.revokeObjectURL(img.src); <span class="comment">// 清除释放</span></div><div class="line">        &#125;;</div><div class="line">        img.src = <span class="built_in">window</span>.URL.createObjectURL(blob);</div><div class="line">        eleAppend.appendChild(img);    </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">xhr.send();</div></pre></td></tr></table></figure>
<h3 id="5-File对象"><a href="#5-File对象" class="headerlink" title="5. File对象"></a>5. File对象</h3><blockquote>
<p>通常而言，表示我们使用file控件(<code>&lt;input type=&quot;file&quot;&gt;</code>)选择的FileList对象，或者是使用拖拽操作搞出的DataTransfer对象。</p>
<p>这里的File对象也是二进制对象，因此，从属于Blob对象，Blob对象的一些属性与方法，File对象同样适合，且推荐使用Blob对象的属性与方法。</p>
</blockquote>
<ul>
<li><p>FileReader对象:</p>
<p>  将图片转换成<code>Data base64 url</code>格式，其中一个方法就是<code>FileReader.readAsDataURL()</code>方法（还有就是canvas元素的<code>toDataURL()</code>和<code>toDataURLHD()</code>方法）</p>
</li>
</ul>
<h3 id="6-ArrayBuffer对象"><a href="#6-ArrayBuffer对象" class="headerlink" title="6. ArrayBuffer对象"></a>6. ArrayBuffer对象</h3><blockquote>
<p><code>ArrayBuffer</code>表示二进制数据的原始缓冲区，该缓冲区用于存储各种类型化数组的数据。</p>
<p><code>ArrayBuffer</code>是二进制数据通用的固定长度容器。</p>
<p>所谓<code>ArrayBuffer</code>就是个装着2进制数据的对象。</p>
<p><code>ArrayBuffer</code>本身是不能读写的，需要借助<em>类型化数组</em>或<em><code>DataView</code>对象</em>来解释原始缓冲区</p>
</blockquote>
<ul>
<li><p><code>Blob</code>和<code>ArrayBuffer</code>有啥区别呢？</p>
<blockquote>
<p>Blob可以append ArrayBuffer数据，也就是Blob是个更高一级的大分类，ArrayBuffer存在的意义就是作为数据源提前写入在内存中，就是提前钉死在某个区域，长度也固定，万年不变。</p>
</blockquote>
</li>
</ul>
<p><hr></p>
<h2 id="延伸阅读："><a href="#延伸阅读：" class="headerlink" title="延伸阅读："></a>延伸阅读：</h2><h3 id="类型化数组"><a href="#类型化数组" class="headerlink" title="类型化数组"></a>类型化数组</h3><blockquote>
<p>类型化数组(<code>Typed Arrays</code>)是JavaScript中新出现的一个概念，专为访问原始的二进制数据而生。</p>
<p>本质上，类型化数组和ArrayBuffer是一样的。不过一个可读写（脱掉buffer限制），一个当数据源。</p>
</blockquote>
<figure class="highlight haxe"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 创建一个8字节的ArrayBuffer  </span></div><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="type">ArrayBuffer</span>(<span class="number">8</span>);  </div><div class="line">  </div><div class="line"><span class="comment">// 创建一个指向b的视图v1，采用Int32类型，开始于默认的字节索引0，直到缓冲区的末尾  </span></div><div class="line"><span class="keyword">var</span> v1 = <span class="keyword">new</span> <span class="type">Int32Array</span>(b);  </div><div class="line">  </div><div class="line"><span class="comment">// 创建一个指向b的视图v2，采用Uint8类型，开始于字节索引2，直到缓冲区的末尾  </span></div><div class="line"><span class="keyword">var</span> v2 = <span class="keyword">new</span> <span class="type">Uint8Array</span>(b, <span class="number">2</span>);  </div><div class="line">  </div><div class="line"><span class="comment">// 创建一个指向b的视图v3，采用Int16类型，开始于字节索引2，长度为2  </span></div><div class="line"><span class="keyword">var</span> v3 = <span class="keyword">new</span> <span class="type">Int16Array</span>(b, <span class="number">2</span>, <span class="number">2</span>);</div></pre></td></tr></table></figure>
<blockquote>
<p>由于类型化数组直接访问固定内存，因此，速度很赞，比传统数组要快！因为普通Javascript数组使用的是Hash查找方式。同时，类型化数组天生处理二进制数据，这对于XMLHttpRequest 2、canvas、webGL等技术有着先天的优势。</p>
</blockquote>
<h3 id="DataView对象"><a href="#DataView对象" class="headerlink" title="DataView对象"></a>DataView对象</h3><blockquote>
<p>DataView对象在可以在ArrayBuffer中的任何位置读取和写入不同类型的二进制数据。</p>
</blockquote>
<p><code>var dataView = new DataView(buffer, byteOffset[可选], byteLength[可选]);</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendArrayBuffer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">  xhr.open(<span class="string">'POST'</span>, <span class="string">'/server'</span>, <span class="literal">true</span>);</div><div class="line">  xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; ... &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> uInt8Array = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</div><div class="line"></div><div class="line">  xhr.send(uInt8Array.buffer);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 使用了类型化数组，发送的是类型化数组(uInt8Array)的buffer属性，也就是ArrayBuffer对象。</span></div></pre></td></tr></table></figure>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.zhangxinxu.com/wordpress/2013/10/understand-domstring-document-formdata-blob-file-arraybuffer/" target="_blank" rel="external">理解DOMString、Document、FormData、Blob、File、ArrayBuffer数据类型</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[小谈重排与重绘]]></title>
      <url>http://iminyao.com/2015/08/29/repaint-reset/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-重排与重绘"><a href="#1-重排与重绘" class="headerlink" title="1. 重排与重绘"></a>1. 重排与重绘</h3><blockquote>
<p>当DOM的变化影响了元素的几何属性（宽或高），浏览器需要重新计算元素的几何属性，同样其他元素的几何属性和位置也会因此受到影响。浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树。这个过程称为重排。完成重排后，浏览器会重新绘制受影响的部分到屏幕，该过程称为重绘。</p>
<p>并不是所有的DOM变化都会影响几何属性，比如改变一个元素的背景色并不会影响元素的宽和高，这种情况下只会发生重绘。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> times = <span class="number">15000</span>;</div><div class="line"> </div><div class="line"><span class="comment">// code1 重排+重绘</span></div><div class="line"><span class="built_in">console</span>.time(<span class="number">1</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; times; i++) &#123;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'myDiv1'</span>).innerHTML += <span class="string">'a'</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="number">1</span>);</div><div class="line"> </div><div class="line"><span class="comment">// code2 </span></div><div class="line"><span class="built_in">console</span>.time(<span class="number">2</span>);</div><div class="line"><span class="keyword">var</span> str = <span class="string">''</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; times; i++) &#123;</div><div class="line">  <span class="keyword">var</span> tmp = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv2'</span>).innerHTML;</div><div class="line">  str += <span class="string">'a'</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'myDiv2'</span>).innerHTML = str;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="number">2</span>);</div><div class="line"> </div><div class="line"><span class="comment">// code3 </span></div><div class="line"><span class="built_in">console</span>.time(<span class="number">3</span>);</div><div class="line"><span class="keyword">var</span> _str = <span class="string">''</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; times; i++) &#123;</div><div class="line">  _str += <span class="string">'a'</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'myDiv3'</span>).innerHTML = _str;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="number">3</span>);</div><div class="line"></div><div class="line">输出：</div><div class="line"><span class="comment">// 1: 2874.619ms</span></div><div class="line"><span class="comment">// 2: 11.154ms</span></div><div class="line"><span class="comment">// 3: 1.282ms</span></div></pre></td></tr></table></figure>
<h3 id="2-重排触发条件（重排必然引发重绘）"><a href="#2-重排触发条件（重排必然引发重绘）" class="headerlink" title="2. 重排触发条件（重排必然引发重绘）"></a>2. 重排触发条件（重排必然引发重绘）</h3><ol>
<li>添加或者删除可见的DOM元素</li>
<li>元素位置改变</li>
<li>元素尺寸改变</li>
<li>元素内容改变（例如：一个文本被另一个不同尺寸的图片替代）</li>
<li>页面渲染初始化</li>
<li>浏览器窗口尺寸改变</li>
</ol>
<h3 id="3-渲染树变化的排队和刷新"><a href="#3-渲染树变化的排队和刷新" class="headerlink" title="3. 渲染树变化的排队和刷新"></a>3. 渲染树变化的排队和刷新</h3><figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>);</div><div class="line">ele.style.borderLeft = <span class="string">'1px'</span>;</div><div class="line">ele.style.borderRight = <span class="string">'2px'</span>;</div><div class="line">ele.style.padding = <span class="string">'5px'</span>;</div></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// 重写style</span></div><div class="line">ele.style.cssText = <span class="string">'border-left: 1px; border-right: 2px; padding: 5px;'</span>;</div></pre></td></tr></table></figure>
<blockquote>
<p>元素的样式改变了三次，每次改变都会引起重排和重绘，所以总共有三次重排重绘过程，但是浏览器会把三次修改“保存”起来（大多数浏览器通过队列化修改并批量执行来优化重排过程）但是，有些时候你可能会强制刷新队列并要求计划任务立即执行。<strong>获取布局信息的操作会导致队列刷新。尽量不要在布局信息改变时做查询。</strong></p>
</blockquote>
<ul>
<li>队列强制刷新条件<ul>
<li>offsetTop, offsetLeft, offsetWidth, offsetHeight</li>
<li>scrollTop, scrollLeft, scrollWidth, scrollHeight</li>
<li>clientTop, clientLeft, clientWidth, clientHeight</li>
<li>getComputedStyle() (currentStyle in IE)</li>
</ul>
</li>
</ul>
<h3 id="4-DocumentFragment"><a href="#4-DocumentFragment" class="headerlink" title="4. DocumentFragment"></a>4. DocumentFragment</h3><figure class="highlight stata"><table><tr><td class="code"><pre><div class="line">&lt;ul id='fruit'&gt;</div><div class="line">  &lt;<span class="keyword">li</span>&gt; apple &lt;/<span class="keyword">li</span>&gt;</div><div class="line">  &lt;<span class="keyword">li</span>&gt; orange &lt;/<span class="keyword">li</span>&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line"></div><div class="line"><span class="comment">//	重排了两次</span></div><div class="line"><span class="keyword">var</span> <span class="keyword">lis</span> = document.getElementById('fruit');</div><div class="line"><span class="keyword">var</span> <span class="keyword">li</span> = document.createElement('<span class="keyword">li</span>');</div><div class="line"><span class="keyword">li</span>.innerHTML = 'apple';</div><div class="line"><span class="keyword">lis</span>.appendChild(<span class="keyword">li</span>);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> <span class="keyword">li</span> = document.createElement('<span class="keyword">li</span>');</div><div class="line"><span class="keyword">li</span>.innerHTML = 'watermelon';</div><div class="line"><span class="keyword">lis</span>.appendChild(<span class="keyword">li</span>);</div></pre></td></tr></table></figure>
<blockquote>
<p>文档片段是个轻量级的document对象，它的设计初衷就是为了完成这类任务——更新和移动节点。文档片段的一个便利的语法特性是当你附加一个片断到节点时，实际上被添加的是该片断的子节点，而不是片断本身。只触发了一次重排，而且只访问了一次实时的DOM。</p>
</blockquote>
<figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</div><div class="line"> </div><div class="line"><span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</div><div class="line">li.innerHTML = <span class="string">'apple'</span>;</div><div class="line">fragment.appendChild(li);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</div><div class="line">li.innerHTML = <span class="string">'watermelon'</span>;</div><div class="line">fragment.appendChild(li);</div><div class="line"> </div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'fruit'</span>).appendChild(fragment);</div></pre></td></tr></table></figure>
<h3 id="5-让元素脱离文档流"><a href="#5-让元素脱离文档流" class="headerlink" title="5. 让元素脱离文档流"></a>5. 让元素脱离文档流</h3><blockquote>
<p>用展开/折叠的方式来显示和隐藏部分页面是一种常见的交互模式。它通常包括展开区域的几何动画，并将页面其他部分推向下方。</p>
<p>一般来说，重排只影响渲染树中的一小部分，但也可能影响很大的部分，甚至整个渲染树。浏览器所需要重排的次数越少，应用程序的响应速度就越快。因此当页面顶部的一个动画推移页面整个余下的部分时，会导致一次代价昂贵的大规模重排，让用户感到页面一顿一顿的。渲染树中需要重新计算的节点越多，情况就会越糟。</p>
</blockquote>
<ul>
<li>解决办法：<ul>
<li>使用绝对位置定位页面上的动画元素，将其脱离文档流</li>
<li>让元素动起来。当它扩大时，会临时覆盖部分页面。但这只是页面一个小区域的重绘过程，不会产生重排并重绘页面的大部分内容。</li>
<li>当动画结束时恢复定位，从而只会下移一次文档的其他元素</li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[DOM优化一览]]></title>
      <url>http://iminyao.com/2015/08/29/DOM-Optimize/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-DOM访问与修改"><a href="#1-DOM访问与修改" class="headerlink" title="1. DOM访问与修改"></a>1. DOM访问与修改</h3><blockquote>
<p>访问DOM元素是有代价的，修改元素代价更高，因为它会导致浏览器重新计算页面的几何变化（重排和重绘）。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> times = <span class="number">15000</span>;</div><div class="line"> </div><div class="line"><span class="comment">// code1:在循环中访问或者修改元素</span></div><div class="line"><span class="built_in">console</span>.time(<span class="number">1</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; times; i++) &#123;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'myDiv1'</span>).innerHTML += <span class="string">'a'</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="number">1</span>);</div><div class="line"> </div><div class="line"><span class="comment">// code2</span></div><div class="line"><span class="built_in">console</span>.time(<span class="number">2</span>);</div><div class="line"><span class="keyword">var</span> str = <span class="string">''</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; times; i++) &#123;</div><div class="line">  str += <span class="string">'a'</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'myDiv2'</span>).innerHTML = str;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="comment">//	输出</span></div><div class="line"><span class="number">1</span>: <span class="number">2846.700</span>ms</div><div class="line"><span class="number">2</span>: <span class="number">1.046</span>ms</div></pre></td></tr></table></figure>
<blockquote>
<p>第一段代码的问题在于，每次循环迭代，该元素都会被访问两次：一次读取innerHTML的值，另一次重写它,每次循环都会重排和重绘！结果充分表明，访问DOM的次数越多，代码的运行速度越慢。因此，能减少DOM访问的次数则尽量减少，尽量留在ECMAScript这端处理。</p>
</blockquote>
<h3 id="2-遍历DOM"><a href="#2-遍历DOM" class="headerlink" title="2. 遍历DOM"></a>2. 遍历DOM</h3><blockquote>
<p>操作DOM另一个耗能点就是遍历DOM，比如用getElementsByTagName()等,结果是一个类似数组的对象，它处于一种“实时状态”实时存在，这意味着当底层文档对象更新时，它也会自动更新。这样就好导致低效。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">console</span>.time(<span class="number">0</span>);</div><div class="line"><span class="keyword">var</span> lis0 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</div><div class="line"><span class="keyword">var</span> str0 = <span class="string">''</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis0.length; i++) &#123;</div><div class="line">  str0 += lis0[i].innerHTML;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="number">0</span>);</div><div class="line"> </div><div class="line"><span class="built_in">console</span>.time(<span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> lis1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</div><div class="line"><span class="keyword">var</span> str1 = <span class="string">''</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = lis1.length; i &lt; len; i++) &#123;</div><div class="line">  str1 += lis1[i].innerHTML;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="number">1</span>);</div><div class="line"></div><div class="line">输出：</div><div class="line"><span class="number">0</span>: <span class="number">0.974</span>ms</div><div class="line"><span class="number">1</span>: <span class="number">0.664</span>ms</div></pre></td></tr></table></figure>
<blockquote>
<p>跟数组的优化操作一样，缓存个length变量即可</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript实现继承的几种模式]]></title>
      <url>http://iminyao.com/2015/08/27/javascript-design-mode/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-最初"><a href="#1-最初" class="headerlink" title="1. 最初"></a>1. 最初</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">person.name = <span class="string">"vino24"</span>;</div><div class="line">person.age = <span class="number">22</span>;</div><div class="line">person.job = <span class="string">"FE Engineer"</span>;</div><div class="line"></div><div class="line">person.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	alert(<span class="keyword">this</span>.name);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="缺陷："><a href="#缺陷：" class="headerlink" title="缺陷："></a>缺陷：</h5><blockquote>
<p>创建很多对象时，会产生大量重复代码</p>
</blockquote>
<h3 id="2-工厂模式"><a href="#2-工厂模式" class="headerlink" title="2. 工厂模式"></a>2. 工厂模式</h3><blockquote>
<p>抽象出创建具体对象的过程，在JavaScript中以函数来封装特定接口创建对象的细节。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name,age,job</span>) </span>&#123;</div><div class="line"><span class="keyword">var</span> o= <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">o.name = name;</div><div class="line">o.age = age;</div><div class="line">o.job = job;</div><div class="line">o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	alert(<span class="keyword">this</span>.name);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">return</span> o;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> person1=createPerson(<span class="string">"vino24"</span>,<span class="number">22</span>,<span class="string">"FE"</span>);</div><div class="line">person1.sayName();</div></pre></td></tr></table></figure>
<h5 id="缺陷：-1"><a href="#缺陷：-1" class="headerlink" title="缺陷："></a>缺陷：</h5><blockquote>
<p>没有解决对象识别的问题</p>
</blockquote>
<h3 id="3-构造函数模式"><a href="#3-构造函数模式" class="headerlink" title="3. 构造函数模式"></a>3. 构造函数模式</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name,age,job)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.name = name;</div><div class="line">	<span class="keyword">this</span>.age = age;</div><div class="line">	<span class="keyword">this</span>.job = job;</div><div class="line">	<span class="keyword">this</span>.sayName=<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">		alert(<span class="keyword">this</span>.name);</div><div class="line">	&#125;;</div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"vino24"</span>,<span class="number">22</span>,<span class="string">"FE"</span>);</div><div class="line">person1.sayName();</div></pre></td></tr></table></figure>
<h5 id="·-构造函数模式与工厂模式区别："><a href="#·-构造函数模式与工厂模式区别：" class="headerlink" title="· 构造函数模式与工厂模式区别："></a>· 构造函数模式与工厂模式区别：</h5><ul>
<li>没有显式的创建对象</li>
<li>直接将属性方法赋值给了this对象</li>
<li>没有return语句</li>
</ul>
<h4 id="使用new操作符创建对象的过程："><a href="#使用new操作符创建对象的过程：" class="headerlink" title="使用new操作符创建对象的过程："></a>使用new操作符创建对象的过程：</h4><ul>
<li>创建一个新对象</li>
<li>将构造函数的作用于赋值给新对象（this便指向了新对象）</li>
<li>执行构造函数中的代码（为新对象添加属性）</li>
<li>返回新对象</li>
</ul>
<h5 id="·-缺陷："><a href="#·-缺陷：" class="headerlink" title="· 缺陷："></a>· 缺陷：</h5><blockquote>
<p>构造函数中的方法都要在每个实例上创建一遍</p>
</blockquote>
<h3 id="4-原型模式"><a href="#4-原型模式" class="headerlink" title="4.原型模式"></a>4.原型模式</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Person.prototype = &#123;</div><div class="line">constructor:Person,</div><div class="line">name:<span class="string">"vino24"</span>,</div><div class="line">age:<span class="number">22</span>;</div><div class="line">job:<span class="string">"FE"</span>,</div><div class="line">sayName:<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">	alert(<span class="keyword">this</span>.name);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> person1=<span class="keyword">new</span> Person();</div><div class="line">Person.sayName();</div></pre></td></tr></table></figure>
<h5 id="缺陷：-2"><a href="#缺陷：-2" class="headerlink" title="缺陷："></a>缺陷：</h5><blockquote>
<p>所有的实例都会共享其属性和方法</p>
</blockquote>
<pre><code><figure class="highlight haxe"><table><tr><td class="code"><pre><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">SuperType</span></span>() &#123;</div><div class="line">		<span class="built_in">this</span>.colors = [<span class="string">"red"</span>,<span class="string">"blue"</span>,<span class="string">"green"</span>];</div><div class="line">	&#125;		</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">SubType</span></span>() &#123;</div><div class="line">	&#125;</div><div class="line">	SubType.prototype = <span class="keyword">new</span> <span class="type">SuperType</span>();</div><div class="line"></div><div class="line">	<span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="type">SubType</span>();</div><div class="line">	obj.colors.push(<span class="string">"black"</span>);	<span class="comment">//	red,blue,green,black</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> obj2 = <span class="keyword">new</span> <span class="type">SubType</span>();</div><div class="line">	alert(obj2.colors);		<span class="comment">//	red,blue,green,black;</span></div><div class="line">	</div><div class="line">    ```	</div><div class="line"> * 创建子类型实例时，不能向超类型构造函数传递参数(由此衍生出借用构造函数)</div><div class="line"><span class="meta">### 5.组合使用构造函数模式和原型模式</span></div><div class="line"></div><div class="line">&gt; 构造函数用于定义实例属性，而原型模式用于定义方法和共享属性</div></pre></td></tr></table></figure>
</code></pre><p>function Person(name,age,job) {<br>    this.name = name;<br>    this.age = age;<br>    this.job = job;<br>    this.friends = [“vino”,”kobe”];<br>}</p>
<p>Person.prototype = {<br>    constructor : Person,<br>    sayName : function() {<br>        alert(this.name);<br>    }<br>}</p>
<p>var Person1 = new Person(“vino24”,22,”FE”);<br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line"></div><div class="line">### <span class="number">6.</span>动态原型模式</div></pre></td></tr></table></figure></p>
<p>function Person(name,age,job) {<br>    this.name = name;<br>    this.age = age;<br>    this.job = job;</p>
<pre><code>if(typeof this.sayName != &quot;function&quot;) {
    Person.prototype.sayName = function() {
        alert(this.name);
    };
}
</code></pre><p>}<br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line"></div><div class="line">#### <span class="number">2.</span> 借用构造函数</div><div class="line">&gt; 在子类型构造函数内部调用超类型构造函数</div></pre></td></tr></table></figure></p>
<p>function SuperType() {<br>    this.colors = [“red”,”blue”,”green”];<br>}</p>
<p>function SubType() {<br>    SuperType.call(this);<br>}</p>
<p>var obj1 = new SubType();<br>obj1.colors.push(“black”);<br>alert(obj1.colors);    //    red,blue,green,black</p>
<p>var obj2 = new SubType();<br>alert(obj2.colors);    //    red,blue,green<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>function SuperType(name) {<br>    this.name = name;<br>}</p>
<p>function SubType() {<br>    SuperType.call(this,”vino24”);<br>    this.age = 22;<br>}</p>
<p>var obj1 = new SubType();<br>alert(obj1.name);    //    vino24<br>alert(obj1.age);    //    22<br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line"></div><div class="line">##### 缺陷：</div><div class="line">&gt; 方法在构造函数中定义，函数无法复用；而且在超类型的原型中定义的方法对子类型不可见。</div><div class="line"></div><div class="line">### <span class="number">3.</span> 组合继承(伪经典继承)</div><div class="line">&gt; 原型链与借用构造函数组合；使用原型链实现对原型属性和方法的继承，通过借用构造函数实现对实例属性的继承</div></pre></td></tr></table></figure></p>
<p>function SuperType(name) {<br>    this.name = name;<br>    this.colors = [“red”,”blue”,”green”];<br>}</p>
<p>SuperType.prototype.sayName = function() {<br>    alert(this.name);<br>}</p>
<p>function SubType(name,age) {<br>    SuperType.call(this,name);<br>    this.age = age;<br>}</p>
<p>SubType.prototype = new SuperType();</p>
<p>SubType.prototype.sayAge = function() {<br>    alert(this.age);<br>}</p>
<p>var obj=new SubType(“vino24”,22);<br>obj.colors.push(“black”);<br>alert(obj.colors);    //    red,blue,green,black</p>
<p>var obj2 = new SubType(“Svn”,23);<br>alert(obj2.colors);    // red,blue,green<br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">### <span class="number">4.</span> 原型式继承</div></pre></td></tr></table></figure></p>
<p>function inherit(p) {<br>    if (p === null) throw TypeError();<br>    if (Object.create)      //  ES5<br>        return Object.create(p);<br>    var t = typeof p;<br>    if (t !== “object” &amp;&amp; t !== “function”) throw TypeError();<br>    function f() {};<br>    f.prototype = p;<br>    return new f();<br>}<br><figure class="highlight mipsasm"><table><tr><td class="code"><pre><div class="line">```</div><div class="line">var person = &#123;</div><div class="line"><span class="symbol">	name:</span><span class="string">"vino24"</span>,</div><div class="line"><span class="symbol">	friends:</span>[<span class="string">"svn"</span>,<span class="string">"git"</span>,<span class="string">"filter"</span>]</div><div class="line">&#125;<span class="comment">;</span></div><div class="line"></div><div class="line">var anotherPerson = inherit(person)<span class="comment">;</span></div><div class="line">anotherPerson.friends.push(<span class="string">"SublimeText"</span>)<span class="comment">;</span></div><div class="line"></div><div class="line">var thirdPerson = inherit(person)<span class="comment">;</span></div><div class="line">thirdPerson.friends.push(<span class="string">"WebStorm"</span>)<span class="comment">;</span></div><div class="line"></div><div class="line">alert(person.friends)<span class="comment">;	//	svn,git,filter,SumlimeText,WebStorm</span></div></pre></td></tr></table></figure></p>
<h3 id="5-寄生式继承"><a href="#5-寄生式继承" class="headerlink" title="5. 寄生式继承"></a>5. 寄生式继承</h3><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span><span class="params">(orig)</span> </span>&#123;</div><div class="line">	<span class="keyword">var</span> <span class="keyword">clone</span> = inherit(orig);</div><div class="line">	<span class="keyword">clone</span>.sayHi = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">		alert(<span class="string">"Hi"</span>);</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">clone</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> person = &#123;</div><div class="line">	name:<span class="string">"vino24"</span>,</div><div class="line">	friends:[<span class="string">"svn"</span>,<span class="string">"git"</span>,<span class="string">"filter"</span>]</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> anotherPerson = createAnother(person);</div><div class="line">anotherPerson.sayHi();	<span class="comment">//	"hi"</span></div><div class="line">``` </div><div class="line"></div><div class="line"><span class="comment">### 6. 寄生组合式继承(模拟继承)</span></div><div class="line">&gt; 借用构造函数来继承属性，通过原型链来继承方法</div></pre></td></tr></table></figure>
<p>function inheritPrototype(subType, superType) {<br>    var prototype = inherit(superType.prototype);   //  创建对象<br>    prototype.constructor = subType;    //  增强对象<br>    subType.prototype = prototype;  //  指定对象<br>}<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>function SuperType(name) {<br>    this.name = name;<br>    this.colors = [“red”,”blue”,”green”];<br>}</p>
<p>SuperType.prototype.sayName = function() {<br>    alert(this.name);<br>}</p>
<p>function SubType(name,age) {<br>    SuperType.call(this,name);<br>    this.age = age;<br>}</p>
<p>inheritPrototype(subType,SuperType);</p>
<p>SubType.prototype.sayAge = function() {<br>    alert(this.age);<br>}<br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line"></div><div class="line">### ES5:自由操控原型链</div><div class="line"></div><div class="line">&gt; 原型链本质上只是建立对象之间的关联，于是可以直接操作对象的原型</div><div class="line"></div><div class="line">#### 可用函数：</div><div class="line"></div><div class="line">* `Object.create`</div><div class="line">* `isPrototypeOf`</div><div class="line">* `Object.getPrototypeOf`</div><div class="line">* `Object.setPrototypeOf`(ES6)</div><div class="line"></div><div class="line">##### 实例一：</div></pre></td></tr></table></figure></p>
<p>var parent = {<br>  _name: ‘David’,<br>  getName: function() { return this._name },<br>}</p>
<p>var child = Object.create(parent)</p>
<p>Object.getPrototypeOf(child)           // parent<br>parent.isPrototypeOf(child)            // true<br>Object.prototype.isPrototypeOf(child)  // true<br>child instanceof Object                // true<br><figure class="highlight lua"><table><tr><td class="code"><pre><div class="line"></div><div class="line">&gt; Object.create 创建 child 对象，并把 <span class="string">[[Prototype]]</span> 设置为 parent 对象。Object.getPrototypeOf 可以直接获取对象的 <span class="string">[[Prototype]]</span>。isPrototypeOf 能够判断一个对象是否在另一个对象的原型链上。</div><div class="line"></div><div class="line">#### 实例二：</div></pre></td></tr></table></figure></p>
<p>var anotherParent = {<br>  name: ‘Alex’<br>}</p>
<p>Object.setPrototypeOf(child, anotherParent)<br>Object.getPrototypeOf(child)  // anotherParent<br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">&gt; 修改child的原型</div><div class="line"></div><div class="line">#### 模拟继承：</div></pre></td></tr></table></figure></p>
<p>function Parent() {}<br>function Child() {}</p>
<p>Child.prototype = Object.create(Parent.prototype)<br>Child.prototype.constructor = Child<br>```</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[关于BOM中的坐标位置]]></title>
      <url>http://iminyao.com/2015/08/26/BOM-position/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h4 id="1-查询窗口滚动条位置"><a href="#1-查询窗口滚动条位置" class="headerlink" title="1.查询窗口滚动条位置"></a>1.查询窗口滚动条位置</h4><ol>
<li>window对象的 <code>pageXOffset、pageYoffset</code></li>
<li>文档根节点(<code>document.documentElement</code>)的<code>scrollLeft</code> <code>scrollTop</code></li>
<li>怪异模式下(<code>document.body</code>)</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="code"><pre><div class="line"><span class="comment">//  查询窗口滚动条位置</span></div><div class="line">function getScrollOffsets(w) &#123;</div><div class="line">    <span class="comment">//  可以传入iframe</span></div><div class="line">    w = w || window;</div><div class="line"></div><div class="line">    <span class="comment">//  除&lt;IE8以外</span></div><div class="line">    <span class="keyword">if</span> (w.pageXOffset != <span class="literal">null</span>) <span class="keyword">return</span> &#123;<span class="string">x:</span> w.pageXOffset, <span class="string">y:</span> w.pageYOffset&#125;;</div><div class="line"></div><div class="line">    <span class="comment">//  标准模式下的IE（或任何浏览器）</span></div><div class="line">    var d = w.document;</div><div class="line">    <span class="keyword">if</span> (document.compatMode == <span class="string">"CSS1Compat"</span>)</div><div class="line">        <span class="keyword">return</span> &#123;<span class="string">x:</span> d.documentElement.scrollLeft, <span class="string">y:</span> d.documentElement.scrollTop&#125;;</div><div class="line"></div><div class="line">    <span class="comment">//  怪异模式下的浏览器</span></div><div class="line">    <span class="keyword">return</span> &#123;<span class="string">x:</span> d.body.scrollLeft, <span class="string">y:</span> d.body.scrollTop&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-查询窗口尺寸"><a href="#2-查询窗口尺寸" class="headerlink" title="2.查询窗口尺寸"></a>2.查询窗口尺寸</h4><ol>
<li>window对象的<code>innerWidth/Height</code> IE8以后及其他高级浏览器</li>
<li><code>document.documentElement.clientWidth/Height</code> IE8以前及其他高级浏览器</li>
<li>怪异模式</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="code"><pre><div class="line"><span class="comment">//  查询窗口视口尺寸</span></div><div class="line">function getViewportSize(w) &#123;</div><div class="line">    w = w || window;</div><div class="line"></div><div class="line">    <span class="comment">//  除IE8及更早版本以外的浏览器</span></div><div class="line">    <span class="keyword">if</span> (w.innerWidth) <span class="keyword">return</span> &#123;<span class="string">w:</span> w.innerWidth, <span class="string">h:</span> w.innerHeight&#125;;</div><div class="line"></div><div class="line">    <span class="comment">//  对标准模式下的IE（或任何浏览器）</span></div><div class="line">    var d = w.document;</div><div class="line">    <span class="keyword">if</span> (document.compatMode == <span class="string">"CSS1Compat"</span>)</div><div class="line">        <span class="keyword">return</span> &#123;<span class="string">w:</span> d.documentElement.clientWidth, <span class="string">h:</span> d.documentElement.clientHeight&#125;;</div><div class="line"></div><div class="line">    <span class="comment">//  怪异模式下的浏览器</span></div><div class="line">    <span class="keyword">return</span> &#123;<span class="string">w:</span> d.body.clientWidth, <span class="string">h:</span> d.body.clientHeight&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="inner与client的区别："><a href="#inner与client的区别：" class="headerlink" title="inner与client的区别："></a>inner与client的区别：</h4><ol>
<li><code>innerWidth/Height</code>不包含边框，包含滚动条</li>
<li><code>clientWidth/Height</code>不包含滚动条</li>
</ol>
<h4 id="3-获取元素的视口坐标"><a href="#3-获取元素的视口坐标" class="headerlink" title="3.获取元素的视口坐标"></a>3.获取元素的视口坐标</h4><ol>
<li><code>getBoundingClientRect()</code>:包含内边距和边框，但不包含元素的外边距</li>
<li>老式浏览器<code>offsetLeft/Top-scrollLeft/Top</code>(视口=文档-滚动偏移)</li>
</ol>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//  查询元素视口位置,作用同getBoundingClientRect()</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewPos</span><span class="params">(elt)</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> e = elt; e != <span class="literal">null</span>; e = e.offsetParent) &#123;</div><div class="line">        x += e.offsetLeft;</div><div class="line">        y += e.offsetTop;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> e = elt.parentNode; e != <span class="literal">null</span> &amp;&amp; e.nodeType == <span class="number">1</span>; e = e.parentNode) &#123;</div><div class="line">        x -= e.scrollLeft;</div><div class="line">        y -= e.scrollTop;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> &#123;x: x, y: y&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="getBoundingClientRect的确定：非实时，用户滚动或改变浏览器窗口大小时不会更新-可以通过绑定鼠标滚轮事件解决？"><a href="#getBoundingClientRect的确定：非实时，用户滚动或改变浏览器窗口大小时不会更新-可以通过绑定鼠标滚轮事件解决？" class="headerlink" title="getBoundingClientRect的确定：非实时，用户滚动或改变浏览器窗口大小时不会更新(可以通过绑定鼠标滚轮事件解决？)"></a>getBoundingClientRect的确定：非实时，用户滚动或改变浏览器窗口大小时不会更新(可以通过绑定鼠标滚轮事件解决？)</h5><h4 id="4-查询指定位置上为什么元素：-Document对象的elementFromPoint"><a href="#4-查询指定位置上为什么元素：-Document对象的elementFromPoint" class="headerlink" title="4.查询指定位置上为什么元素： Document对象的elementFromPoint()"></a>4.查询指定位置上为什么元素： Document对象的<code>elementFromPoint()</code></h4><blockquote>
<p>传入的x,y坐标为视口坐标</p>
</blockquote>
<h4 id="5-获取元素文档坐标（文档-视口-滚动偏移）"><a href="#5-获取元素文档坐标（文档-视口-滚动偏移）" class="headerlink" title="5.获取元素文档坐标（文档=视口+滚动偏移）"></a>5.获取元素文档坐标（文档=视口+滚动偏移）</h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//  查询元素文档位置</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDocPos</span><span class="params">(e)</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> viewPos = e.getBoundingClientRect();</div><div class="line">    <span class="keyword">var</span> offsets = getScrollOffsets();</div><div class="line">    <span class="keyword">return</span> &#123;x: viewPos.left + offsets.x, y: viewPos.top + offsets.y&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>

<h4 id="6-innerWidth-Height、offsetWidth-Height、clientWidth-Height、scrollWidth-Height的区别："><a href="#6-innerWidth-Height、offsetWidth-Height、clientWidth-Height、scrollWidth-Height的区别：" class="headerlink" title="6. innerWidth/Height、offsetWidth/Height、clientWidth/Height、scrollWidth/Height的区别："></a>6. innerWidth/Height、offsetWidth/Height、clientWidth/Height、scrollWidth/Height的区别：</h4><ol>
<li>innerWidth/Height为<code>window</code>对象的属性： <code>value=width+padding+scrollbar</code></li>
<li>offsetWidth/Height: <code>value=width+padding+scrollbar+border</code></li>
<li>clientWidth/Height: <code>value=width+padding</code></li>
<li>scrollWidth/Height: <code>value=width+padding+overflowarea</code><ul>
<li>转换：<ol>
<li><code>clientWidth/Height = visible height of content + visible padding</code></li>
<li><code>offsetWidth/Height = clientWidth/Height + scrollbar + border</code></li>
<li><code>scrollWidth/Height = clientWidth/Height + noll-visible height</code></li>
</ol>
</li>
</ul>
</li>
</ol>
<h4 id="7-offsetLeft-Top、clientLeft-Top、scrollLeft-Top区别："><a href="#7-offsetLeft-Top、clientLeft-Top、scrollLeft-Top区别：" class="headerlink" title="7.offsetLeft/Top、clientLeft/Top、scrollLeft/Top区别："></a>7.offsetLeft/Top、clientLeft/Top、scrollLeft/Top区别：</h4><ol>
<li>offsetLeft/Top：返回元素的X和Y坐标（文档坐标），定位元素相对于祖先元素(offsetParent)</li>
<li>clientLeft/Top:元素内边距外边缘到边框之间的距离(等于左边和上边边框宽度)</li>
<li>scrollLeft/Top：元素滚动条位置</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://weizhifeng.net/viewports.html" target="_blank" rel="external">两个viewport的故事（第一部分）</a></li>
<li><a href="http://weizhifeng.net/viewports2.html" target="_blank" rel="external">两个viewport的故事（第二部分）</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[视频播放相关的网络协议]]></title>
      <url>http://iminyao.com/2015/08/03/video-proto/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li><p>RTSP/RTP/RTCP协议族</p>
<p>本协议族是最早的视频传输协议。其中RTSP协议用于视频点播的会话控制，例如发起点播请求的SETUP请求，进行具体播放操作的PLAY、PAUSE请求，视频的跳转也是通过PLAY请求的参数支持的。而RTP协议用于具体的视频数据流的传输。RTCP协议中的C是控制的意思，用于在视频流数据之外，丢包或者码率之类的控制。<br>该协议族RTSP是建立在TCP之上的，RTP、RTCP建立在UDP之上。不过也可以通过interleave的方式，将RTP和RTSP一起在同一个TCP连接上传输。<br>RTSP协议族，是最早被提出来的，因此很多考虑的地方，都还带有早期的特征。比如使用UDP，是考虑到传输的效率，以及视频协议本身对丢包就有一定的容忍度。但是UDP协议，显然不能用于更大规模的网络，而且复杂网络下路由器的穿透也是问题。<br>从视频角度而言，RTSP协议族的优势，在于可以控制到视频帧，因此可以承载实时性很高的应用。这个优点是相对于HTTP方式的最大优点。H.323视频会议协议，底层一般采用RTSP协议。RTSP协议族的复杂度主要集中在服务器端，因为服务器端需要parse视频文件，seek到具体的视频帧，而且可能还需要进行倍速播放（就是老旧的DVD带的那种2倍速，4倍速播放的功能），倍速播放功能是RTSP协议独有的，其他视频协议都无法支持。<br>缺点，就是服务器端的复杂度也比较高，实现起来也比较复杂。</p>
</li>
<li><p>HTTP协议</p>
</li>
</ol>
<blockquote>
<p>HTTP的视频协议，主要是在互联网普及之后。在互联网上看视频的需求下形成的。</p>
</blockquote>
<ul>
<li>2.1<br>最初的HTTP视频协议，没有任何特别之处，就是通用的HTTP文件渐进式下载。本质就是下载视频文件，而利用视频文件本身的特点，就是存在头部信息，和部分视频帧数据，就完全可以解码播放了。显然这种方式需要将视频文件的头部信息放在文件的前面。有些例如faststart工具，就是专门做这个功能的。<br>但是最为原始的状态下，视频无法进行快进或者跳转播放到文件尚未被下载到的部分。这个时候对HTTP协议提出了range-request的要求。这个目前几乎所有HTTP的服务器都支持了。range-request，是请求文件的部分数据，指定偏移字节数。在视频客户端解析出视频文件的头部后，就可以判断后续视频相应的帧的位置了。或者根据码率等信息，计算相应的为位置。</li>
<li>2.2<br>支持HTTP range-request的服务器，目前就可以支持我们一般网络看视频的要求了。但是，这种方式，无法支持实时视频流，或者准实时视频流。因为视频流，是不存在一个视频文件的概念的。HTTP协议播放视频的好处，就是简单。采取通用的HTTP服务器，就可以提供服务，不需要专门类型的服务器，也不需要特别的网络端口，穿过路由器防火墙一点都没有问题。而且还可以利用通用的CDN来简化视频的部署分发的工作，减少带宽的使用。<br>这个是目前用于PC端或者网页端，视频点播业务，最常见的解决方案。客户端的实现，一般采用flash完成，flash本是的videoplayer或者videodisplay控件就可以完成。资源一般采用flv格式，也可以使用mp4格式。<br>在此基础上，多家公司推出了自己的解决方法。</li>
<li>2.3 HLS HDS MSS DASH<br>苹果推出的HTTP Live Streaming，就是随着苹果设备的普及得以广泛应用的一种。从名词就可以判断出来，HLS支持Live直播式的视频传输。HTTP采用m3u8作为索引文件，视频为MPEG2-TS格式的片段文件。如果为直播视频流，则采取更新m3u8文件，从而更新视频索引列表，达到视频直播的目的。但是这种方法，因为最终视频是片段文件，所以必然存在片段视频长度的延迟。因此只可以用于对实时性要求没有那么高的准实时视频流。但是HLS方式，因为采用了较早的MPEG2-TS格式，这种格式的overhead，也就是头部信息占据总文件的比例比较大，也就是效率不够高。之所以没有使用其他格式，主要是商业竞争和版权的问题。<br>相应的，adobe公司，推出相似的HTTP dynamic streaming。这种方式本质和HLS的策略是类似的，就是通过索引文件+视频片段的方式。但是显然采用的索引格式和视频片段格式都不一样的。HDS采用的是视频格式是flv或者f4v，索引格式记不清楚了。<br>类似的，微软也推出了Microsoft Smooth Streaming，也即是mss的视频播出方式，采用的视频格式是分段mp4格式。<br>MPEG标准组则推出了Dynamic Adaptive Streaming over HTTP,DASH.采用的视频格式为3GPP吧。<br>显然，这个目前是百花齐放的状态，虽然最常用的的是HLS，谁叫苹果这么霸气呢。而安卓和苹果上面对于flash都有限制，而HDS是adobe推出在adobe平台上面的。mss，只有在少数几个地方见到过。dash，目前仅仅是论文里面的产物。<br>以上的协议，主要是解决一个问题，就是自适应码率切换，上面的dynamic，adaptive都是类似的意思。主要是利用索引文件中同时给出不同码率的视频文件的地址，这样播放器端，可以根据带宽情况，自适应选择不同码率的视频文件。<br>同时在视频直播方面，在安卓和iOS平台以外，还有很多视频服务器提供厂商，自己开发协议，一般采用方式为固定时间片段的flv文件的方式（采用flv，是因为flash上方便播放）</li>
<li>2.4 HTML5<br>同时HTML制定厂商也不寂寞，推出HTML5这种方式，这种方式本质上，和前面的HTTP视频协议没有任何区别。但是播放器端，不再依赖于特定的插件如flash，或者其他播放软件，而是可以支持浏览器的直接视频播放。采用的是html中嵌入video标签，同时直接指明视频的url。不过，不同的浏览器，对于音视频的格式支持不完全相同。比较通用的是视频H。264格式，音频AAC格式，封装格式MP4。</li>
<li>2.5其他<br>在HTTP协议的基础上，各家公司，针对自己的业务特性，也可能开发自己的专有的数据格式，或者协议。但是都是在上述的基本上做出一些细微的修改而已。毕竟国内的技术体系，还完全无法提出一个新的技术的程度。（google，就提出新的编码格式替换H.264,SPDY协议，这个国内做不到的）。<br>一般只会做到例如HTTP特殊字段或者特殊参数，传递到flash中做出一定的解释。或者在原有的视频文件格式基础上添加一些特殊意义的头部等等。</li>
</ul>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.zhihu.com/question/20621558" target="_blank" rel="external">http://www.zhihu.com/question/20621558</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[阿里音乐面试总结]]></title>
      <url>http://iminyao.com/2015/07/23/alibaba/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="一、基础："><a href="#一、基础：" class="headerlink" title="一、基础："></a>一、基础：</h2><h3 id="1-数组转化为字符串的方法，字符串转化成数组？"><a href="#1-数组转化为字符串的方法，字符串转化成数组？" class="headerlink" title="1. 数组转化为字符串的方法，字符串转化成数组？"></a>1. 数组转化为字符串的方法，字符串转化成数组？</h3><p>数组 - &gt; 字符串  <code>Array.join()</code> 其实还有最基础的<code>toString()</code>方法，一下子没想起来<br>字符串 - &gt; 数组 <code>String.split()</code>,</p>
<h3 id="2-call和apply的区别："><a href="#2-call和apply的区别：" class="headerlink" title="2.call和apply的区别："></a>2.<code>call</code>和<code>apply</code>的区别：</h3><p><code>call</code>传入的是待调用函数的值，<code>apply</code>传入的是是保存有实参的数组</p>
<blockquote>
<p>应该再具体说一下的它们的作用的</p>
</blockquote>
<h3 id="3-对正则表达式的了解："><a href="#3-对正则表达式的了解：" class="headerlink" title="3.对正则表达式的了解："></a>3.对正则表达式的了解：</h3><p>只是说用的比较多的是<code>match</code>方法，在URL匹配那块</p>
<blockquote>
<p>应该说返回的由匹配结果组成的数组，核心是“数组”二个字。</p>
</blockquote>
<p><strong>正则表达式常用的4种方法：</strong></p>
<ul>
<li><code>search</code>检索，返回与参数匹配的子串的起始位置</li>
<li><code>replace</code>:检索与替换</li>
<li><code>match</code></li>
<li><code>split</code>:字符串拆分为数组<h3 id="4-图片水平垂直居中："><a href="#4-图片水平垂直居中：" class="headerlink" title="4.图片水平垂直居中："></a>4.图片水平垂直居中：</h3>回答<code>table-cell</code>方法，<code>line-height</code>，但具体实现没说出来</li>
</ul>
<blockquote>
<p><a href="http://www.zhangxinxu.com/wordpress/2009/08/%E5%A4%A7%E5%B0%8F%E4%B8%8D%E5%9B%BA%E5%AE%9A%E7%9A%84%E5%9B%BE%E7%89%87%E3%80%81%E5%A4%9A%E8%A1%8C%E6%96%87%E5%AD%97%E7%9A%84%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD/" target="_blank" rel="external">图片垂直居中-张鑫旭</a></p>
</blockquote>
<h3 id="5-Ajax工作步骤："><a href="#5-Ajax工作步骤：" class="headerlink" title="5.Ajax工作步骤："></a>5.Ajax工作步骤：</h3><p><code>new XMLHttpRequest()-&gt; open()-&gt;setRequestHeader()-&gt;onreadystatechange-&gt;send()</code></p>
<h3 id="6-id选择器-类选择器-属性选择器权重"><a href="#6-id选择器-类选择器-属性选择器权重" class="headerlink" title="6.id选择器 类选择器 属性选择器权重"></a>6.id选择器 类选择器 属性选择器权重</h3><p>不管怎么变都是id选择器权重高，要想改变可以通过直接在内置样式设置或是通过<code>!important</code>改变。</p>
<h3 id="7-改变元素的CSS属性"><a href="#7-改变元素的CSS属性" class="headerlink" title="7.改变元素的CSS属性"></a>7.改变元素的CSS属性</h3><p>style、setAttribute()、cssText()、添加class</p>
<blockquote>
<p>getComputedStyle()是只读的，不能修改</p>
</blockquote>
<h3 id="8-HTTP状态码"><a href="#8-HTTP状态码" class="headerlink" title="8.HTTP状态码"></a>8.HTTP状态码</h3><p><a href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="external">https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81</a></p>
<h3 id="9-请求URL后发生的事情"><a href="#9-请求URL后发生的事情" class="headerlink" title="9.请求URL后发生的事情"></a>9.请求URL后发生的事情</h3><p><a href="http://book.douban.com/subject/25910556/" target="_blank" rel="external">http://book.douban.com/subject/25910556/</a></p>
<h3 id="10-offsetWidth、clientWidth、scrollWidth区别"><a href="#10-offsetWidth、clientWidth、scrollWidth区别" class="headerlink" title="10.offsetWidth、clientWidth、scrollWidth区别"></a>10.<code>offsetWidth</code>、<code>clientWidth</code>、<code>scrollWidth</code>区别</h3><ul>
<li><p>查询滚动条位置：<code>window.pageXOffset</code> <code>window.pageYOffset</code> <code>e.scrollLeft</code> <code>e.scrollTop</code>（通常直接查询文档根节点<code>document.documentElement.scrollTop</code>）</p>
</li>
<li><p>查询元素文档位置：<code>e.offsetLeft</code> <code>e.offsetTop</code>（定位元素返回相对于祖先元素而非文档）<a href="http://code.w3ctech.com/detail/2203" target="_blank" rel="external">demo</a></p>
</li>
<li><p>查询元素几何尺寸: <code>getBoundingClientRect()</code>,返回（皆为视口坐标）左上角（left,top）,右下角(right,bottom)，宽度、高度 <a href="http://code.w3ctech.com/detail/2204" target="_blank" rel="external">获取文档坐标</a></p>
</li>
<li><p>查询视口尺寸：<code>window.innerWidth</code> <code>window.innerHeight</code></p>
</li>
<li><p><code>offsetWidth</code> <code>clientWidth</code> <code>scrollWidth</code>区别：<a href="http://code.w3ctech.com/detail/2203" target="_blank" rel="external">修改版获取文档位置</a></p>
<pre><code>`offsetWidth`:包含元素边框和内边距；`clientWidth`:包含内边距，不包含边框以及滚动条；`scrollWidth`包含内边距加任何溢出内容的尺寸。
</code></pre></li>
</ul>
<h2 id="项目及其他："><a href="#项目及其他：" class="headerlink" title="项目及其他："></a>项目及其他：</h2><h3 id="1-常逛的技术网站：https-github-com-jikeytang-front-end-collect"><a href="#1-常逛的技术网站：https-github-com-jikeytang-front-end-collect" class="headerlink" title="1. 常逛的技术网站：https://github.com/jikeytang/front-end-collect"></a>1. 常逛的技术网站：<a href="https://github.com/jikeytang/front-end-collect" target="_blank" rel="external">https://github.com/jikeytang/front-end-collect</a></h3><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>正吃着的饭的时候打来了电话，全程都很紧张，信号不好中间电话断了好几次，还好面试官人好，很有耐心（竟然是阿里音乐前端负责人，初面就来这样的boss,不带这么玩的…）。</p>
<p>基础方法感觉回答的还可以，有几个简单的问题答错了，其实主要问题还是缺乏面试经验，在很多会的问题上仅仅是答上来，但没有特别出彩的地方。</p>
<p>二面三面都是问了一些项目相关的，二面面试官也是阿里音乐的，聊的很好；三面是交叉面，完全不在状态，我听不明白面试官说的，面试官也听不明白我说的，然后，就没有然后了…</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript中的声明提前(hoist)]]></title>
      <url>http://iminyao.com/2015/07/19/javascript-hoist/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="代码段1：变量声明提前"><a href="#代码段1：变量声明提前" class="headerlink" title="代码段1：变量声明提前"></a>代码段1：变量声明提前</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> hoistedVariable = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">scopingFunction</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!hoistedVariable) &#123;</div><div class="line">        <span class="keyword">var</span> hoistedVariable = <span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> hoistedVariable;</div><div class="line">&#125;</div><div class="line"></div><div class="line">scopingFunction(); <span class="comment">// returns 10</span></div></pre></td></tr></table></figure>
<blockquote>
<p>结果为<code>10</code></p>
</blockquote>
<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><ol>
<li>JavaScript作用域是<code>function level</code>，所以<code>if</code>语句中的<code>{}</code>并不能形成单独的作用域</li>
<li>所以此时<code>var hoistedVariable = 10;</code> 属于<code>scopingFunction</code>，而变量声明会提前，此时代码相当于</li>
</ol>
<p><img src="https://cloud.githubusercontent.com/assets/4004044/8765259/f42abfc6-2e36-11e5-9228-d56116791d53.PNG" alt="undefined"></p>
<h3 id="代码段2：函数声明提前"><a href="#代码段2：函数声明提前" class="headerlink" title="代码段2：函数声明提前"></a>代码段2：函数声明提前</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">containingFunction</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> hoisted = <span class="string">"I'm the variable"</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hoisted</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"I'm the function"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> hoisted(); <span class="comment">// results in a TypeError</span></div><div class="line">&#125;</div><div class="line">containingFunction();</div></pre></td></tr></table></figure>
<p><strong>实际运行的代码顺序:</strong><br><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">containingFunction</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// hoisted section</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hoisted</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"I'm the function"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> hoisted;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// rest of the code</span></div><div class="line">    hoisted = <span class="string">"I'm the variable"</span>;</div><div class="line">    <span class="keyword">return</span> hoisted();</div><div class="line">&#125;</div><div class="line">containingFunction() <span class="comment">// results in a TypeError</span></div></pre></td></tr></table></figure></p>
<p><img src="https://cloud.githubusercontent.com/assets/4004044/8765645/2042c08e-2e48-11e5-8e33-38407a6fa471.PNG" alt="hoist01"><br><img src="https://cloud.githubusercontent.com/assets/4004044/8765648/338f5f76-2e48-11e5-8e8e-8c86b19c0d2f.PNG" alt="hoist02"></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://lucybain.com/blog/2014/hoisting/" target="_blank" rel="external">Explain “hoisting”</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript 数组随机排序]]></title>
      <url>http://iminyao.com/2015/07/18/javascript-array-sort/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="常规方法："><a href="#常规方法：" class="headerlink" title="常规方法："></a>常规方法：</h3><figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>].sort(function() &#123;return Math.random() - <span class="number">0.5</span>&#125;)</div></pre></td></tr></table></figure>
<h3 id="Fisher–Yates-shuffle-算法"><a href="#Fisher–Yates-shuffle-算法" class="headerlink" title="Fisher–Yates shuffle 算法"></a>Fisher–Yates shuffle 算法</h3><blockquote>
<p>类似摸牌<br>arr为原数组，cards为乱序结果数组<br>random取一个index，取arr中这个元素，放入cards，同时移除arr中这个元素。</p>
</blockquote>
<p><img src="https://cloud.githubusercontent.com/assets/4004044/8762134/bad68b40-2da2-11e5-9d1e-1776ca090f1f.PNG" alt="fisher"></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle" target="_blank" rel="external">Fisher–Yates shuffle</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[事件批量绑定中闭包共享作用域问题的几种几种解决方案]]></title>
      <url>http://iminyao.com/2015/07/14/share-scope/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h3><blockquote>
<p>每个links的onmouseover上执行的都是i=3时的情况</p>
</blockquote>
<figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">for (var i=<span class="number">0</span>;i&lt;=<span class="number">2</span>;i++) &#123;</div><div class="line">  links[i].onmouseover = function() &#123;</div><div class="line">    moveElement(<span class="string">"preview"</span>,<span class="number">-100</span>*i<span class="number">-100</span>,<span class="number">0</span>,<span class="number">10</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="IIFE-Immediately-Invoked-Function-Expression-匿名函数自调用"><a href="#IIFE-Immediately-Invoked-Function-Expression-匿名函数自调用" class="headerlink" title="IIFE(Immediately-Invoked Function Expression - 匿名函数自调用)"></a>IIFE(Immediately-Invoked Function Expression - 匿名函数自调用)</h3><blockquote>
<p>通常解决上述问题方法就是创建闭包。</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 写法一：</span></div><div class="line">links[i].onmouseover = (<span class="function"><span class="keyword">function</span> <span class="params">(j)</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">moveElement(<span class="string">"preview"</span>, <span class="number">-100</span> * j - <span class="number">100</span>, <span class="number">0</span>, <span class="number">10</span>)</div><div class="line">&#125;</div><div class="line">&#125;)(i);</div><div class="line"></div><div class="line"><span class="comment">// 写法二：</span></div><div class="line">  links[i].onmouseover = (<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> j = i;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">      moveElement(<span class="string">"preview"</span>, <span class="number">-100</span> * j - <span class="number">100</span>, <span class="number">0</span>, <span class="number">10</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;)();</div></pre></td></tr></table></figure>
<h3 id="其他解决方法："><a href="#其他解决方法：" class="headerlink" title="其他解决方法："></a>其他解决方法：</h3><ol>
<li><p><strong>ES6 let</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;=<span class="number">2</span>;i++) &#123;</div><div class="line">  <span class="keyword">let</span> idx=i;</div><div class="line">  links[idx].onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    moveElement(<span class="string">"preview"</span>,<span class="number">-100</span>*idx<span class="number">-100</span>,<span class="number">0</span>,<span class="number">10</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>Array.prototype.forEach</strong>:Array.prototype.forEach可以在回调里得到index，回调函数自身有新的作用域</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line">   links.<span class="keyword">forEach</span>(<span class="function"><span class="keyword">function</span> <span class="params">(link, i)</span> </span>&#123;</div><div class="line">  link.onmouseover = ...</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.zhihu.com/question/32175033" target="_blank" rel="external">http://www.zhihu.com/question/32175033</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[setTimeout中的this]]></title>
      <url>http://iminyao.com/2015/07/13/setTimeout-this/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p><strong>超时调用的代码（或回调函数内代码）都是在全局作用域中执行的，因此函数中this的值在非严格模式下指向window对象，在严格模式下是undefined</strong>                             —–《JavaScript高级程序设计》</p>
</blockquote>
<h3 id="两个this"><a href="#两个this" class="headerlink" title="两个this"></a>两个<code>this</code></h3><p><code>setTimeout</code>中我们经常会面对两个this。<strong>一个是setTimeout调用环境中的this，一个就是延迟执行函数中的this</strong></p>
<h3 id="结论："><a href="#结论：" class="headerlink" title="结论："></a>结论：</h3><ol>
<li><strong>setTimeout中的延迟执行代码中的this永远都指向window</strong></li>
<li><strong>setTimeout(this.method, time)这种形式中的this，是根据上下文来判断的，默认为全局作用域</strong></li>
<li><strong>setTimeout(匿名函数, time)这种形式下，匿名函数中的变量也需要根据上下文来判断</strong></li>
</ol>
<h4 id="延迟执行代码-回调函数中的this"><a href="#延迟执行代码-回调函数中的this" class="headerlink" title="延迟执行代码/回调函数中的this"></a>延迟执行代码/回调函数中的<code>this</code></h4><ol>
<li>直接使用  <code>setTimeout(&quot;alert(this)&quot;, 1);   // [object Window]</code></li>
<li>回调函数  <figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">talk</span><span class="params">()</span> </span>&#123;</div><div class="line"> alert(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line">setTimeout(talk, <span class="number">0</span>);</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="解释："><a href="#解释：" class="headerlink" title="解释："></a>解释：</h4><blockquote>
<p>由setTimeout()调用的代码运行在<strong>与所在函数完全分离的执行环境上</strong>. 这会导致,这些代码中包含的 this 关键字会指向 window (或全局)对象.</p>
</blockquote>
<h3 id="两个this分析："><a href="#两个this分析：" class="headerlink" title="两个this分析："></a>两个<code>this</code>分析：</h3><ol>
<li><p>构造函数中：</p>
 <figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">     <span class="keyword">var</span> value=<span class="number">33</span>;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.value = <span class="number">42</span>;</div><div class="line">    <span class="keyword">this</span>.method = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// this 指向全局对象</span></div><div class="line">        alert(<span class="keyword">this</span>)   <span class="comment">// 输出window    第二个this</span></div><div class="line">        alert(<span class="keyword">this</span>.value); <span class="comment">// 输出：33   第二个this</span></div><div class="line">    &#125;;</div><div class="line">    setTimeout(<span class="keyword">this</span>.method, <span class="number">500</span>);  <span class="comment">// 这里的this指向Foo的实例对象  第一个this</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">new</span> Foo();</div></pre></td></tr></table></figure>
</li>
<li><p>普通函数：</p>
 <figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">     <span class="function"><span class="keyword">function</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</div><div class="line">  alert(<span class="keyword">this</span>.value);  <span class="comment">// 输出 42  第二个this</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.value = <span class="number">42</span>;</div><div class="line">    setTimeout(<span class="keyword">this</span>.method, <span class="number">500</span>);  <span class="comment">// 这里this指向window   第一个this</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line">Foo();</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="闭包在setTimeout中的应用"><a href="#闭包在setTimeout中的应用" class="headerlink" title="闭包在setTimeout中的应用"></a>闭包在<code>setTimeout</code>中的应用</h3><h4 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> test = <span class="string">"in the window"</span>;</div><div class="line"> </div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;alert(<span class="string">'outer '</span> + test)&#125;, <span class="number">0</span>); <span class="comment">// 输出 outer in the window ，默认在window的全局作用域下</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> test = <span class="string">'in the f!'</span>;  <span class="comment">// 局部变量，window作用域不可访问</span></div><div class="line">  setTimeout(<span class="string">'alert("inner " + test)'</span>, <span class="number">0</span>);  <span class="comment">// 输出 inner in the window, 虽然在f方法的中调用，但执行代码(字符串形式的代码)默认在window全局作用域下，test也指向全局的test</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line">f();</div></pre></td></tr></table></figure>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//  应用闭包：</span></div><div class="line"><span class="comment">//  闭包是闭包，this是this，此处this指向全局window，但其中的变量需要根据上下文确认</span></div><div class="line"><span class="keyword">var</span> test = <span class="string">"in the window"</span>;</div><div class="line"> </div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;alert(<span class="string">'outer'</span> + test)&#125;, <span class="number">0</span>); <span class="comment">// outer in the window  ，没有问题，在全局下调用，访问全局中的test</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> test = <span class="string">'in the f!'</span>;</div><div class="line">  setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;alert(<span class="string">'inner '</span>+ test)&#125;, <span class="number">0</span>);  <span class="comment">// inner in the f!  </span></div><div class="line">&#125;</div><div class="line"> </div><div class="line">f();</div></pre></td></tr></table></figure>
<h4 id="2-var-a-“a”-”b”-”c”-”d”-每过-1-秒-alert-一下数组中的值"><a href="#2-var-a-“a”-”b”-”c”-”d”-每过-1-秒-alert-一下数组中的值" class="headerlink" title="2. var a=[“a”,”b”,”c”,”d”] 每过 1 秒 alert 一下数组中的值?"></a>2. var a=[“a”,”b”,”c”,”d”] 每过 1 秒 alert 一下数组中的值?</h4><figure class="highlight lisp"><table><tr><td class="code"><pre><div class="line">for(<span class="name">var</span> j = <span class="number">0</span><span class="comment">; j &lt; 4; j++) &#123;</span></div><div class="line">    (<span class="name">function</span>(<span class="name">i</span>) &#123;</div><div class="line">        setTimeout(<span class="name">function</span>() &#123;</div><div class="line">            alert(<span class="name">i</span>)<span class="comment">;  </span></div><div class="line">        &#125;, (<span class="name">i</span> + <span class="number">1</span>) * 1000);</div><div class="line">    &#125;)(j);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="常见问题及解决方案"><a href="#常见问题及解决方案" class="headerlink" title="常见问题及解决方案"></a>常见问题及解决方案</h3><ol>
<li><p>问题描述：</p>
<blockquote>
<p>在一个类中，调用setTimeout,会出现问题，this指向了window</p>
</blockquote>
 <figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">     <span class="keyword">var</span> firstName = <span class="string">"zhengxiang"</span>;  </div><div class="line">   <span class="keyword">var</span> nm =&#123;  </div><div class="line">   firstName : <span class="string">"xiong"</span>,  </div><div class="line">   showName : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;  </div><div class="line">        alert(<span class="keyword">this</span>.firstName);  </div><div class="line">   &#125;,  </div><div class="line">   waitShowName : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;  </div><div class="line">        setTimeout(<span class="keyword">this</span>.showName,<span class="number">1000</span>);   <span class="comment">// 尽管第一个this指向了nm调用了showName方法，但方法                       执行环境却不在nm中</span></div><div class="line">   &#125;  </div><div class="line">&#125;;  </div><div class="line">nm.waitShowName();      <span class="comment">//输出zhengxiang</span></div></pre></td></tr></table></figure>
</li>
<li><p>解决方案：</p>
<ul>
<li><p>使用call，将函数的运行环境绑定到类上面：</p>
 <figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">       waitShowName : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;  </div><div class="line">     setTimeout(<span class="keyword">this</span>.showName.call(<span class="keyword">this</span>),<span class="number">1000</span>);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>利用代理函数，利用外围保存的this环境that</p>
  <figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line">waitShowName : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;  </div><div class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;      </div><div class="line">        setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;that.showName();&#125;,<span class="number">1000</span>);  </div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<ul>
<li>ES6箭头函数<figure class="highlight coffeescript"><table><tr><td class="code"><pre><div class="line"> showName : <span class="function"><span class="params">()</span>=&gt;</span>&#123;  </div><div class="line">alert(<span class="keyword">this</span>.firstName);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.cnblogs.com/hutaoer/p/3423782.html" target="_blank" rel="external">谈谈setTimeout的作用域以及this的指向问题</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout" target="_blank" rel="external">window.setTimeout-MDN</a></li>
<li><a href="http://blog.csdn.net/xiongzhengxiang/article/details/7598838" target="_blank" rel="external">setTimeout 在类中绑定this的方法</a></li>
<li><a href="http://segmentfault.com/a/1190000003906484" target="_blank" rel="external">从Ecma规范深入理解js中的this的指向</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[闭包]]></title>
      <url>http://iminyao.com/2015/07/11/closure/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="词法作用域"><a href="#词法作用域" class="headerlink" title="词法作用域"></a>词法作用域</h2><blockquote>
<p>函数的执行依赖于变量作用域（作用域在函数定义时决定）</p>
</blockquote>
<h3 id="计算机科学闭包（广义：所有JavaScript函数都是闭包）"><a href="#计算机科学闭包（广义：所有JavaScript函数都是闭包）" class="headerlink" title="计算机科学闭包（广义：所有JavaScript函数都是闭包）"></a>计算机科学闭包（广义：所有JavaScript函数都是闭包）</h3><blockquote>
<p>为了实现词法作用域，JavaScript函数对象的内部状态不仅包含<strong>函数的代码逻辑</strong>，还必须引用当前的<strong>作用域链</strong>，函数体内部的变量都可以保存在函数作用域内。（函数变量被隐藏于作用域链之内，因此看起来是函数将变量包裹。）</p>
</blockquote>
<h3 id="JavaScript闭包（狭义）"><a href="#JavaScript闭包（狭义）" class="headerlink" title="JavaScript闭包（狭义）"></a>JavaScript闭包（狭义）</h3><blockquote>
<p>JavaScript闭包是指函数有自由独立的变量。换句话说，定义在闭包中的函数可以“记忆”它创建时候的环境。</p>
</blockquote>
<h3 id="闭包特性"><a href="#闭包特性" class="headerlink" title="闭包特性"></a>闭包特性</h3><blockquote>
<p>闭包可以捕捉到局部变量(和参数)，并一直保存下来，看起来像这些变量绑定到了在其中定义它们的外部函数。</p>
</blockquote>
<h3 id="eg01"><a href="#eg01" class="headerlink" title="eg01:"></a>eg01:</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeFunc</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> name = <span class="string">"Mozilla"</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">displayName</span><span class="params">()</span> </span>&#123;</div><div class="line">    alert(name);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> displayName;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> myFunc = makeFunc();</div><div class="line">myFunc();</div></pre></td></tr></table></figure>
<blockquote>
<p>通常，函数中的局部变量仅在函数的执行期间可用。一旦 makeFunc() 执行过后，我们会很合理的认为 <code>name</code> 变量将不再可用。虽然代码运行的没问题，但实际并不是这样的。</p>
<p>这个谜题的答案是 <code>myFunc</code> 变成一个 闭包 了。 </p>
<p><strong>闭包是一种特殊的对象</strong>。它由两部分构成：<strong>函数</strong>，以及<strong>创建该函数的环境</strong>。环境由闭包创建时在作用域中的任何局部变量组成。在我们的例子中，myFunc 是一个闭包，由 displayName 函数和闭包创建时存在的 “Mozilla” 字符串形成。</p>
</blockquote>
<h3 id="eg02-共享变量"><a href="#eg02-共享变量" class="headerlink" title="eg02:(共享变量)"></a>eg02:(共享变量)</h3><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeAdder</span><span class="params">(x)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(y)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> x + y;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> add5 = makeAdder(<span class="number">5</span>);</div><div class="line"><span class="keyword">var</span> add10 = makeAdder(<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="keyword">print</span>(add5(<span class="number">2</span>));  <span class="comment">// 7</span></div><div class="line"><span class="keyword">print</span>(add10(<span class="number">2</span>)); <span class="comment">// 12</span></div></pre></td></tr></table></figure>
<blockquote>
<p>从本质上讲，<code>makeAdder</code>是一个<strong>函数工厂</strong> — 创建将指定的值和它的参数求和的函数，在上面的示例中，我们使用函数工厂创建了两个新函数 — 一个将其参数和 5 求和，另一个和 10 求和。</p>
<p>add5 和 add10 都是闭包。它们共享相同的函数定义，但是保存了不同的环境。在 add5 的环境中，x 为 5。而在 add10 中，x 则为 10。</p>
</blockquote>
<h3 id="闭包的应用："><a href="#闭包的应用：" class="headerlink" title="闭包的应用："></a>闭包的应用：</h3><blockquote>
<p>闭包允许将函数与其所操作的某些数据（环境）关连起来。这显然类似于面向对象编程。在面对象编程中，对象允许我们将某些数据（对象的属性）与一个或者多个方法相关联。</p>
</blockquote>
<ol>
<li><strong>用闭包模拟私有方法</strong></li>
</ol>
<blockquote>
<p>可以使用闭包模拟私有方法。私有方法不仅仅有利于限制对代码的访问：还提供了管理全局命名空间的强大能力，避免非核心的方法弄乱了代码的公共接口部分。</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Counter = (<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> privateCounter = <span class="number">0</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeBy</span><span class="params">(val)</span> </span>&#123;</div><div class="line">    privateCounter += val;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    increment: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">      changeBy(<span class="number">1</span>);</div><div class="line">    &#125;,</div><div class="line">    decrement: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">      changeBy(<span class="number">-1</span>);</div><div class="line">    &#125;,</div><div class="line">    value: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="keyword">return</span> privateCounter;</div><div class="line">    &#125;</div><div class="line">  &#125;   </div><div class="line">&#125;)();</div><div class="line"></div><div class="line">alert(Counter.value()); <span class="comment">/* 提示 0 */</span></div><div class="line">Counter.increment();</div><div class="line">Counter.increment();</div><div class="line">alert(Counter.value()); <span class="comment">/* 提示 2 */</span></div><div class="line">Counter.decrement();</div><div class="line">alert(Counter.value()); <span class="comment">/* 提示 1 */</span></div></pre></td></tr></table></figure>
<blockquote>
<p>在以往的示例中，每个闭包都有它自己的环境；而这次我们只创建了一个环境，为三个函数所共享：Counter.increment，Counter.decrement 和 Counter.value。</p>
<p>该共享环境创建于一个匿名函数体内，该函数一经定义立刻执行。环境中包含两个私有项：名为 privateCounter 的变量和名为 changeBy 的函数。 这两项都无法在匿名函数外部直接访问。必须通过匿名包装器返回的三个公共函数访问。</p>
<p>这三个公共函数是共享同一个环境的闭包。多亏 JavaScript 的词法范围的作用域，它们都可以访问 privateCounter 变量和 changeBy 函数。</p>
<p>我们定义了一个匿名函数用于创建计数器，然后直接调用该函数，并将返回值赋给 Counter 变量。</p>
</blockquote>
<h3 id="常见错误：在循环中创建闭包"><a href="#常见错误：在循环中创建闭包" class="headerlink" title="常见错误：在循环中创建闭包"></a>常见错误：在循环中创建闭包</h3><figure class="highlight scilab"><table><tr><td class="code"><pre><div class="line">p id=<span class="string">"help"</span>&gt;Helpful notes will appear here&lt;/p&gt;</div><div class="line">&lt;p&gt;E-mail: &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> id=<span class="string">"email"</span> name=<span class="string">"email"</span>&gt;&lt;/p&gt;</div><div class="line">&lt;p&gt;Name: &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> id=<span class="string">"name"</span> name=<span class="string">"name"</span>&gt;&lt;/p&gt;</div><div class="line">&lt;p&gt;Age: &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> id=<span class="string">"age"</span> name=<span class="string">"age"</span>&gt;&lt;/p&gt;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showHelp</span><span class="params">(help)</span> &#123;</span></div><div class="line">  document.getElementById(<span class="string">'help'</span>).innerHTML = help;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setupHelp</span><span class="params">()</span> &#123;</span></div><div class="line">  var helpText = [</div><div class="line">      &#123;<span class="string">'id'</span>: <span class="string">'email'</span>, <span class="string">'help'</span>: <span class="string">'Your e-mail address'</span>&#125;,</div><div class="line">      &#123;<span class="string">'id'</span>: <span class="string">'name'</span>, <span class="string">'help'</span>: <span class="string">'Your full name'</span>&#125;,</div><div class="line">      &#123;<span class="string">'id'</span>: <span class="string">'age'</span>, <span class="string">'help'</span>: <span class="string">'Your age (you must be over 16)'</span>&#125;</div><div class="line">    ];</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (var i = <span class="number">0</span>; i &lt; helpText.<span class="built_in">length</span>; i++) &#123;</div><div class="line">    var item = helpText[i];</div><div class="line">    document.getElementById(item.id).onfocus = <span class="function"><span class="keyword">function</span><span class="params">()</span> &#123;</span></div><div class="line">      showHelp(item.help);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">setupHelp();</div></pre></td></tr></table></figure>
<blockquote>
<p>运行这段代码后，您会发现它没有达到想要的效果。无论焦点在哪个输入域上，显示的都是关于年龄的消息。</p>
<p>该问题的<strong>原因在于赋给 onfocus 是闭包setupHelp中的匿名函数而不是闭包对象</strong>；在闭包setupHelp中一共创建了三个匿名函数，但是它们都共享同一个环境（item）。在 onfocus 的回调被执行时，循环早已经完成，且此时 item 变量（由所有三个闭包所共享）已经指向了 helpText 列表中的最后一项。</p>
</blockquote>
<p><strong>解决这个问题的一种方案是使onfocus指向一个新的闭包对象。</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showHelp</span>(<span class="params">help</span>) </span>&#123;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'help'</span>).innerHTML = help;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeHelpCallback</span>(<span class="params">help</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    showHelp(help);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setupHelp</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> helpText = [</div><div class="line">      &#123;<span class="string">'id'</span>: <span class="string">'email'</span>, <span class="string">'help'</span>: <span class="string">'Your e-mail address'</span>&#125;,</div><div class="line">      &#123;<span class="string">'id'</span>: <span class="string">'name'</span>, <span class="string">'help'</span>: <span class="string">'Your full name'</span>&#125;,</div><div class="line">      &#123;<span class="string">'id'</span>: <span class="string">'age'</span>, <span class="string">'help'</span>: <span class="string">'Your age (you must be over 16)'</span>&#125;</div><div class="line">    ];</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; helpText.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> item = helpText[i];</div><div class="line">    <span class="built_in">document</span>.getElementById(item.id).onfocus = makeHelpCallback(item.help);</div><div class="line"> </div><div class="line">    <span class="comment">// 方法二：</span></div><div class="line">    <span class="built_in">document</span>.getElementById(item.id).onfoucs=(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;showHelp(i);&#125;; </div><div class="line">    &#125;)(item.help);</div><div class="line"></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">setupHelp();</div></pre></td></tr></table></figure>
<blockquote>
<p>所有的回调不再共享同一个环境， makeHelpCallback 函数为每一个回调创建一个新的环境。在这些环境中，help 指向 helpText 数组中对应的字符串。</p>
</blockquote>
<h3 id="性能："><a href="#性能：" class="headerlink" title="性能："></a>性能：</h3><blockquote>
<p>闭包对脚本性能具有负面影响，包括处理速度和内存消耗。</p>
<p>在创建新的对象或者类时，方法通常应该关联于对象的原型，而不是定义到对象的构造器中。原因是这将导致每次构造器被调用，方法都会被重新赋值一次（也就是说，为每一个对象的创建）。</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[margin与padding应用场景分析]]></title>
      <url>http://iminyao.com/2015/07/09/margin-padding/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="何时应当使用margin："><a href="#何时应当使用margin：" class="headerlink" title="何时应当使用margin："></a>何时应当使用margin：</h2><ol>
<li>需要在border外侧添加空白时。</li>
<li>空白处不需要背景（色）时。</li>
<li>上下相连的两个盒子之间的空白，需要相互抵消时。如15px + 20px的margin，将得到20px的空白。</li>
</ol>
<h3 id="何时应当时用padding："><a href="#何时应当时用padding：" class="headerlink" title="何时应当时用padding："></a>何时应当时用padding：</h3><ol>
<li>需要在border内测添加空白时。</li>
<li>空白处需要背景（色）时。</li>
<li>上下相连的两个盒子之间的空白，希望等于两者之和时。如15px + 20px的padding，将得到35px的空白。</li>
</ol>
<blockquote>
<p>margin是用来隔开元素与元素的间距；padding是用来隔开元素与内容的间隔。margin用于布局分开元素使元素与元素互不相干；padding用于元素与内容之间的间隔，让内容（文字）与（包裹）元素之间有一段“呼吸距离”。</p>
</blockquote>
<h3 id="margin在块级元素和行内元素的区别："><a href="#margin在块级元素和行内元素的区别：" class="headerlink" title="margin在块级元素和行内元素的区别："></a>margin在块级元素和行内元素的区别：</h3><blockquote>
<p>margin在块级元素下，他的性能可以完全体现，上下左右任你设定。且记住块级元素的margin的参照基准是前一个元素即相对于自身之前的元素有margin距离。如果元素是第一个元素，则就是相对于父元素的margin距离（但第一个元素相对于父元素margin-top而父元素又没有设定padding-top/border-top的话要需要印证上面的垂直外边距合并的知识）</p>
<p>margin也能用于内联元素，这是规范所允许的，但是margin-top和margin-bottom对内联元素（对行）的高度没有影响，并且由于边界效果(margin效果)是透明的，他也没有任何的视觉影响。<br>这是因为边界应用于内联元素时不改变元素的行高度，如果你要改变内联元素的行高即类似文本的行间距，那么你只能使用这三个属性：line-height，fong-size，vertical-align。请记住，这个影响内联元素高度的是line-height而不是height，因为内联元素是一行行的，定一个height的话，那这到底是整段inline元素的高呢？还是inline元素一行的高呢？这都说不准，所以统一都给每行定一个高，只能是line-height了。</p>
<p>margin-top/margin-bottom对内联元素没有多大实际效果，不过margin-left/margin-right还是能够对内联元素产生影响的。应用margin:10px 20px 30px 40px;，左边这个css如果写在inline元素上，他的效果大致是，上下无效果，左边离他相邻元素或者文本距离为40px，右边离他相邻元素或者文本距离为20px。你可以自行尝试一番。</p>
<p>最后在内联元素中还有上文我们提到的非可置换inline元素（non-replaced element），这些个元素img|input|select|textarea|button|label虽然是内联元素，但margin依旧可以影响到他的上下左右！</p>
</blockquote>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://www.hicss.net/do-not-tell-me-you-understand-margin/" target="_blank" rel="external">http://www.hicss.net/do-not-tell-me-you-understand-margin/</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript 数组去重]]></title>
      <url>http://iminyao.com/2015/07/06/javascript-array-unique/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="方法一：双重循环去重"><a href="#方法一：双重循环去重" class="headerlink" title="方法一：双重循环去重"></a>方法一：双重循环去重</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> result = [];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> ietm=arr[i];    <span class="comment">// 性能优化</span></div><div class="line">        <span class="keyword">if</span> (arr.indexOf(item, i + <span class="number">1</span>) == <span class="number">-1</span>)</div><div class="line">            result.push(item);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'e'</span>, <span class="number">1</span>, <span class="number">0</span>]</div><div class="line">alert(arr.unique1());</div></pre></td></tr></table></figure>
<h3 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h3><ol>
<li><p>先将原数组进行排序</p>
</li>
<li><p>检查原数组中的第i个元素 与 结果数组中的最后一个元素是否相同，因为已经排序，所以重复元素会在相邻位置</p>
</li>
<li><p>如果不相同，则将该元素存入结果数组中</p>
</li>
</ol>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><div class="line">Array.prototype.unique2 = function()&#123;</div><div class="line">	<span class="keyword">this</span>.sort();	<span class="comment">//先排序</span></div><div class="line">	<span class="keyword">var</span> res = [<span class="keyword">this</span>[<span class="number">0</span>]];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="keyword">this</span>.length; i++)&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>[i] !== res[res.length - <span class="number">1</span>])&#123;</div><div class="line">			res.push(<span class="keyword">this</span>[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'e'</span>, <span class="number">1</span>, <span class="number">0</span>]</div><div class="line">alert(arr.unique2());</div></pre></td></tr></table></figure>
<h3 id="哈希表"><a href="#哈希表" class="headerlink" title="哈希表"></a>哈希表</h3><ol>
<li><p>创建一个新的数组存放结果</p>
</li>
<li><p>创建一个空对象</p>
</li>
<li><p>for循环时，每次取出一个元素与对象进行对比，如果这个元素不重复，则把它存放到结果数组中，同时把这个元素的内容作为对象的一个属性，并赋值为<code>true</code>，存入到第2步建立的对象中。</p>
</li>
</ol>
<blockquote>
<p>说明：至于如何对比，就是每次从原数组中取出一个元素，然后到对象中去访问这个属性，如果能访问到值，则说明重复。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique3 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> r = [];</div><div class="line">	<span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> key=<span class="keyword">typeof</span>(v)+v;   <span class="comment">// 在 JavaScript 里，对象的键值只能是字符串，因此需要var key = typeof(item) + item 来区分数值 1 和字符串 '1' 等情况。</span></div><div class="line">        <span class="keyword">if</span> (!obj[key]) &#123;</div><div class="line">            obj[key] = <span class="literal">true</span></div><div class="line">            r.push(v)</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">return</span> r</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> arr = [<span class="number">112</span>,<span class="number">112</span>,<span class="number">34</span>,<span class="string">'你好'</span>,<span class="number">112</span>,<span class="number">112</span>,<span class="number">34</span>,<span class="string">'你好'</span>,<span class="string">'str'</span>,<span class="string">'str1'</span>];</div><div class="line">alert(arr.unique3());</div></pre></td></tr></table></figure>
<h3 id="JQuery-unique方法"><a href="#JQuery-unique方法" class="headerlink" title="JQuery unique方法"></a>JQuery unique方法</h3><blockquote>
<p>jQuery的方法是先排序，然后从第二个元素开始只循环一次，每次和上一元素比较。 并且只记录需要删除的下标，然后删除原数组中的重复项，这样避免了元素太大而导致的效率问题，应该是最高效的了</p>
</blockquote>
<figure class="highlight maxima"><table><tr><td class="code"><pre><div class="line">Sizzle.uniqueSort = function(results) &#123;</div><div class="line">            <span class="built_in">var</span> <span class="built_in">elem</span>,</div><div class="line">            duplicates = [],</div><div class="line">                i = <span class="number">1</span>,</div><div class="line">                j = <span class="number">0</span>;</div><div class="line"></div><div class="line">            // Unless we *know* we can detect duplicates, <span class="built_in">assume</span> their presence</div><div class="line">            hasDuplicate = !support.detectDuplicates;</div><div class="line">            results.<span class="built_in">sort</span>(sortOrder);</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (hasDuplicate) &#123;</div><div class="line">                <span class="keyword">for</span> (;</div><div class="line">                (<span class="built_in">elem</span> = results[i]); i++) &#123;</div><div class="line">                    <span class="keyword">if</span> (<span class="built_in">elem</span> === results[i - <span class="number">1</span>]) &#123;</div><div class="line">                        j = duplicates.<span class="built_in">push</span>(i);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">while</span> (j--) &#123;</div><div class="line">                    results.<span class="built_in">splice</span>(duplicates[j], <span class="number">1</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="built_in">return</span> results;</div><div class="line">        &#125;;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript事件绑定的几种方式与区别]]></title>
      <url>http://iminyao.com/2015/07/05/js-event-bind/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ol>
<li><p>方式1：</p>
<blockquote>
<p>HTML的DOM元素支持onclick、onblur等以on开头属性，我们可以直接在这些属性值中编写javascript代码。当点击div的时候，下面的代码会弹出div的ID：</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="code"><pre><div class="line">&lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">"outestA"</span> onclick=<span class="string">"var id = this.id;alert(id);return false;"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>因为代码都是放在字符串里的，不能格式化和排版，当代码很多的时候很难看懂。</p>
</blockquote>
</li>
<li><p>方式2：</p>
<blockquote>
<p>在onclick等属性中指定函数名</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">buttonHandler</span><span class="params">(thisDom)</span></span></div><div class="line">	&#123;</div><div class="line">		alert(<span class="keyword">this</span>.id);<span class="comment">//undefined</span></div><div class="line">		alert(thisDom.id); <span class="comment">//outestA</span></div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"outestA"</span> <span class="attr">onclick</span>=<span class="string">"buttonHandler(this)"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  ``` </div><div class="line">  &gt; 事件处理函数中的this代表的是window对象，所以我们在onclick属性值中，通过this将dom对象作为参数传递。</div><div class="line">  </div><div class="line">3. 方式3：</div><div class="line"> &gt; 在JS代码中通过dom元素的onclick等属性</div></pre></td></tr></table></figure>
<p>var dom = document.getElementById(“outestA”);<br>dom.onclick = function(){alert(“1=” + this.id);};<br>dom.onclick = function(){alert(“2=” + this.id);};</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><div class="line">  &gt; 这种做法<span class="keyword">this</span>代表当前的DOM对象。还有一点：这种做法只能绑定一个事件处理函数，后面的会覆盖前面的。</div><div class="line"></div><div class="line"><span class="number">4.</span> 方式<span class="number">4</span>：IE下使用attachEvent/detachEvent函数进行事件绑定和取消</div><div class="line">  &gt; attachEvent/detachEvent兼容性不好，IE6~IE11都支持该函数，但是FF和Chrome浏览器都不支持该方法。</div></pre></td></tr></table></figure>
<p>var dom = document.getElementById(“outestA”);<br>dom.attachEvent(‘onclick’,a);  </p>
</li>
</ol>
<p>function a()<br>{<br>    alert(this.id);//undefined<br>}<br>  <figure class="highlight coffeescript"><table><tr><td class="code"><pre><div class="line"> &gt; 事件处理函数中<span class="keyword">this</span>代表的是<span class="built_in">window</span>对象，不是dom对象。</div><div class="line"></div><div class="line"> &gt; 不同的函数对象，可以重复绑定，不会覆盖。</div><div class="line"> </div><div class="line"> &gt; 匿名函数和匿名函数是互相不相同的，即使代码完全一样。**所以如果我们想用detachEvent取消attachEvent绑定的事件处理函数，那么绑定事件的时候不能使用匿名函数，必须要将事件处事函数单独写成一个函数，否则无法取消**</div><div class="line"></div><div class="line"><span class="number">5.</span> 方式<span class="number">5</span>：</div><div class="line"> &gt; 使用W3C标准的addEventListener和removeEventListener</div></pre></td></tr></table></figure></p>
<p> // type:事件类型,不含”on”,比如”click”、”mouseover”、”keydown”;<br>// 而attachEvent的事件名称,含含”on”,比如”onclick”、”onmouseover”、”onkeydown”;<br>// listener:事件处理函数<br>// useCapture是事件冒泡,还是事件捕获,默认false,代表事件冒泡类型<br>addEventListener(type, listener, useCapture); </p>
<p>  var dom = document.getElementById(“outestA”);<br>dom.addEventListener(‘click’, a, false);  </p>
<p>function a()<br>{<br>    alert(this.id);//outestA<br>}<br> ```</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://blog.csdn.net/aitangyong/article/details/43231111" target="_blank" rel="external">http://blog.csdn.net/aitangyong/article/details/43231111</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[跨域解决方案之JSONP]]></title>
      <url>http://iminyao.com/2015/07/01/JSONP/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>JSON和JSONP虽然只有一个字母的差别，但其实他们根本不是一回事儿：JSON是一种数据交换格式，而JSONP是一种依靠开发人员的聪明才智创造出的一种非官方跨域数据交互协议。一个是描述信息的格式，一个是信息传递双方约定的方法。</p>
</blockquote>
<h2 id="什么是JSON？"><a href="#什么是JSON？" class="headerlink" title="什么是JSON？"></a>什么是JSON？</h2><h3 id="JSON的优点："><a href="#JSON的优点：" class="headerlink" title="JSON的优点："></a>JSON的优点：</h3><p>1、基于纯文本，跨平台传递极其简单；</p>
<p>2、Javascript原生支持，后台语言几乎全部支持；</p>
<p>3、轻量级数据格式，占用字符数量极少，特别适合互联网传递；</p>
<p>4、可读性较强，虽然比不上XML那么一目了然，但在合理的依次缩进之后还是很容易识别的；</p>
<p>5、容易编写和解析，当然前提是你要知道数据结构；</p>
<p>JSON的缺点当然也有，但在作者看来实在是无关紧要的东西，所以不再单独说明。</p>
<h3 id="JSON的格式或者叫规则："><a href="#JSON的格式或者叫规则：" class="headerlink" title="JSON的格式或者叫规则："></a>JSON的格式或者叫规则：</h3><p>JSON能够以非常简单的方式来描述数据结构，XML能做的它都能做，因此在跨平台方面两者完全不分伯仲。</p>
<p>1、JSON只有两种数据类型描述符，大括号{}和方括号[]，其余英文冒号:是映射符，英文逗号,是分隔符，英文双引号””是定义符。</p>
<p>2、大括号{}用来描述一组“不同类型的无序键值对集合”（每个键值对可以理解为OOP的属性描述），方括号[]用来描述一组“相同类型的有序数据集合”（可对应OOP的数组）。</p>
<p>3、上述两种集合中若有多个子项，则通过英文逗号,进行分隔。</p>
<p>4、键值对以英文冒号:进行分隔，并且建议键名都加上英文双引号””，以便于不同语言的解析。</p>
<p>5、JSON内部常用数据类型无非就是字符串、数字、布尔、日期、null 这么几个，字符串必须用双引号引起来，其余的都不用，日期类型比较特殊，这里就不展开讲述了，只是建议如果客户端没有按日期排序功能需求的话，那么把日期时间直接作为字符串传递就好，可以省去很多麻烦。</p>
<h3 id="JSON实例"><a href="#JSON实例" class="headerlink" title="JSON实例"></a>JSON实例</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 描述一个人</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> person = &#123;</div><div class="line">    <span class="string">"Name"</span>: <span class="string">"Bob"</span>,</div><div class="line">    <span class="string">"Age"</span>: <span class="number">32</span>,</div><div class="line">    <span class="string">"Company"</span>: <span class="string">"IBM"</span>,</div><div class="line">    <span class="string">"Engineer"</span>: <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 获取这个人的信息</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> personAge = person.Age;</div><div class="line"></div><div class="line"><span class="comment">// 描述几个人</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> members = [</div><div class="line">    &#123;</div><div class="line">        <span class="string">"Name"</span>: <span class="string">"Bob"</span>,</div><div class="line">        <span class="string">"Age"</span>: <span class="number">32</span>,</div><div class="line">        <span class="string">"Company"</span>: <span class="string">"IBM"</span>,</div><div class="line">        <span class="string">"Engineer"</span>: <span class="literal">true</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"Name"</span>: <span class="string">"John"</span>,</div><div class="line">        <span class="string">"Age"</span>: <span class="number">20</span>,</div><div class="line">        <span class="string">"Company"</span>: <span class="string">"Oracle"</span>,</div><div class="line">        <span class="string">"Engineer"</span>: <span class="literal">false</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"Name"</span>: <span class="string">"Henry"</span>,</div><div class="line">        <span class="string">"Age"</span>: <span class="number">45</span>,</div><div class="line">        <span class="string">"Company"</span>: <span class="string">"Microsoft"</span>,</div><div class="line">        <span class="string">"Engineer"</span>: <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">// 读取其中John的公司名称</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> johnsCompany = members[<span class="number">1</span>].Company;</div><div class="line"></div><div class="line"><span class="comment">// 描述一次会议</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> conference = &#123;</div><div class="line">    <span class="string">"Conference"</span>: <span class="string">"Future Marketing"</span>,</div><div class="line">    <span class="string">"Date"</span>: <span class="string">"2012-6-1"</span>,</div><div class="line">    <span class="string">"Address"</span>: <span class="string">"Beijing"</span>,</div><div class="line">    <span class="string">"Members"</span>: </div><div class="line">    [</div><div class="line">        &#123;</div><div class="line">            <span class="string">"Name"</span>: <span class="string">"Bob"</span>,</div><div class="line">            <span class="string">"Age"</span>: <span class="number">32</span>,</div><div class="line">            <span class="string">"Company"</span>: <span class="string">"IBM"</span>,</div><div class="line">            <span class="string">"Engineer"</span>: <span class="literal">true</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="string">"Name"</span>: <span class="string">"John"</span>,</div><div class="line">            <span class="string">"Age"</span>: <span class="number">20</span>,</div><div class="line">            <span class="string">"Company"</span>: <span class="string">"Oracle"</span>,</div><div class="line">            <span class="string">"Engineer"</span>: <span class="literal">false</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="string">"Name"</span>: <span class="string">"Henry"</span>,</div><div class="line">            <span class="string">"Age"</span>: <span class="number">45</span>,</div><div class="line">            <span class="string">"Company"</span>: <span class="string">"Microsoft"</span>,</div><div class="line">            <span class="string">"Engineer"</span>: <span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 读取参会者Henry是否工程师</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> henryIsAnEngineer = conference.Members[<span class="number">2</span>].Engineer;</div></pre></td></tr></table></figure>
<h2 id="什么是JSONP？"><a href="#什么是JSONP？" class="headerlink" title="什么是JSONP？"></a>什么是JSONP？</h2><h3 id="JSONP是怎么产生的："><a href="#JSONP是怎么产生的：" class="headerlink" title="JSONP是怎么产生的："></a>JSONP是怎么产生的：</h3><p>1、一个众所周知的问题，Ajax直接请求普通文件存在跨域无权限访问的问题，甭管你是静态页面、动态网页、web服务、WCF，只要是跨域请求，一律不准；</p>
<p>2、不过我们又发现，Web页面上调用js文件时则不受是否跨域的影响（不仅如此，我们还发现凡是拥有”src”这个属性的标签都拥有跨域的能力；</p>
<p>3、于是可以判断，当前阶段如果想通过纯web端（ActiveX控件、服务端代理、属于未来的HTML5之Websocket等方式不算）跨域访问数据就只有一种可能，那就是在远程服务器上设法把数据装进js格式的文件里，供客户端调用和进一步处理；</p>
<p>4、恰巧我们已经知道有一种叫做JSON的纯字符数据格式可以简洁的描述复杂数据，更妙的是JSON还被js原生支持，所以在客户端几乎可以随心所欲的处理这种格式的数据；</p>
<p>5、这样子解决方案就呼之欲出了，web客户端通过与调用脚本一模一样的方式，来调用跨域服务器上动态生成的js格式文件（一般以JSON为后缀），显而易见，服务器之所以要动态生成JSON文件，目的就在于把客户端需要的数据装入进去。</p>
<p>6、客户端在对JSON文件调用成功之后，也就获得了自己所需的数据，剩下的就是按照自己需求进行处理和展现了，这种获取远程数据的方式看起来非常像AJAX，但其实并不一样。</p>
<p>7、为了便于客户端使用数据，逐渐形成了一种非正式传输协议，人们把它称作JSONP，该协议的一个要点就是允许用户传递一个callback参数给服务端，然后服务端返回数据时会将这个callback参数作为函数名来包裹住JSON数据，这样客户端就可以随意定制自己的函数来自动处理返回数据了。</p>
<h3 id="JSONP的客户端具体实现："><a href="#JSONP的客户端具体实现：" class="headerlink" title="JSONP的客户端具体实现："></a>JSONP的客户端具体实现：</h3><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">// jsonp.html</div><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line">    <span class="keyword">var</span> localHandler = <span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>&#123;</div><div class="line">        alert(<span class="string">'我是本地函数，可以被跨域的remote.js文件调用，远程js带来的数据是：'</span> + data.result);</div><div class="line">    &#125;;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://remoteserver.com/remote.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="code"><pre><div class="line"><span class="comment">// remote.js</span></div><div class="line">localHandler(&#123;<span class="string">"result"</span>:<span class="string">"我是远程js带来的数据"</span>&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>运行之后查看结果，页面成功弹出提示窗口，显示本地函数被跨域的远程js调用成功，并且还接收到了远程js带来的数据。很欣喜，跨域远程获取数据的目的基本实现了，但是又一个问题出现了，我怎么让远程js知道它应该调用的本地函数叫什么名字呢？毕竟是jsonp的服务者都要面对很多服务对象，而这些服务对象各自的本地函数都不相同啊？我们接着往下看。</p>
<p>只要服务端提供的js脚本是动态生成的就行了呗，这样调用者可以传一个参数过去告诉服务端“我想要一段调用XXX函数的js代码，请你返回给我”，于是服务器就可以按照客户端的需求来生成js脚本并响应了。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">// jsonp.html</div><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">// 得到航班信息查询结果后的回调函数</span></div><div class="line">    <span class="keyword">var</span> flightHandler = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">        alert(<span class="string">'你查询的航班结果是：票价 '</span> + data.price + <span class="string">' 元，'</span> + <span class="string">'余票 '</span> + data.tickets + <span class="string">' 张。'</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// 提供jsonp服务的url地址（不管是什么类型的地址，最终生成的返回值都是一段javascript代码）</span></div><div class="line">    <span class="keyword">var</span> url = <span class="string">"http://flightQuery.com/jsonp/flightResult.aspx?code=CA1998&amp;callback=flightHandler"</span>;</div><div class="line">    <span class="comment">// 创建script标签，设置其属性</span></div><div class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">    script.setAttribute(<span class="string">'src'</span>, url);</div><div class="line">    <span class="comment">// 把script标签加入head，此时调用开始</span></div><div class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script); </div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这次的代码变化比较大，不再直接把远程js文件写死，而是编码实现动态查询，而这也正是jsonp客户端实现的核心部分，本例中的重点也就在于如何完成jsonp调用的全过程。</p>
<p>我们看到调用的url中传递了一个code参数，告诉服务器我要查的是CA1998次航班的信息，而callback参数则告诉服务器，我的本地回调函数叫做flightHandler，所以请把查询结果传入这个函数中进行调用。</p>
<p>OK，服务器很聪明，这个叫做flightResult.aspx的页面生成了一段这样的代码提供给jsonp.html（服务端的实现这里就不演示了，与你选用的语言无关，说到底就是拼接字符串）：<br><figure class="highlight 1c"><table><tr><td class="code"><pre><div class="line"><span class="comment">// flightResult.aspx</span></div><div class="line">flightHandler(&#123;</div><div class="line">    <span class="string">"code"</span>: <span class="string">"CA1998"</span>,</div><div class="line">    <span class="string">"price"</span>: <span class="number">1780</span>,</div><div class="line">    <span class="string">"tickets"</span>: <span class="number">5</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>我们看到，传递给flightHandler函数的是一个json，它描述了航班的基本信息。运行一下页面，成功弹出提示窗口，jsonp的执行全过程顺利完成！</p>
<h2 id="Ajax与JSONP区别："><a href="#Ajax与JSONP区别：" class="headerlink" title="Ajax与JSONP区别："></a>Ajax与JSONP区别：</h2><ol>
<li><p>ajax和jsonp这两种技术在调用方式上“看起来”很像，目的也一样，都是请求一个url，然后把服务器返回的数据进行处理，因此jquery和ext等框架都把jsonp作为ajax的一种形式进行了封装；</p>
</li>
<li><p>但ajax和jsonp其实本质上是不同的东西。ajax的核心是通过XmlHttpRequest获取非本页内容，而jsonp的核心则是动态添加<code>&lt;script&gt;</code>标签来调用服务器提供的js脚本。</p>
</li>
<li><p>所以说，其实ajax与jsonp的区别不在于是否跨域，ajax通过服务端代理一样可以实现跨域，jsonp本身也不排斥同域的数据的获取。</p>
</li>
<li><p>还有就是，jsonp是一种方式或者说非强制性协议，如同ajax一样，它也不一定非要用json格式来传递数据，如果你愿意，字符串都行，只不过这样不利于用jsonp提供公开服务。</p>
</li>
</ol>
<h3 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h3><blockquote>
<p>JSONP并不需要浏览器特殊支持，可以说所有的浏览器都是支持JSONP请求的。而且目前各流行JavaScript类库对JSONP的支持已经很全面，开发中也比较方便。</p>
</blockquote>
<h3 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h3><blockquote>
<p>JSONP的请求只能是GET请求，因为在请求URL有长度限制，一般情况下只要不超过2000字符都是可以的，主流浏览器所支持的长度也越来越放宽，基本是可以满足条件的。<br>JSONP的web服务端接口因为无法限制接收指定域名的请求，因此在实际应用中需要在安全性方面进行更多限制，以避免接口数据泄漏。</p>
</blockquote>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://www.cnblogs.com/dowinning/archive/2012/04/19/json-jsonp-jquery.html" target="_blank" rel="external">http://www.cnblogs.com/dowinning/archive/2012/04/19/json-jsonp-jquery.html</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/web/wa-aj-jsonp1/index.html" target="_blank" rel="external">http://www.ibm.com/developerworks/cn/web/wa-aj-jsonp1/index.html</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[跨域解决方案之CORS]]></title>
      <url>http://iminyao.com/2015/07/01/CORS/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="跨站-HTTP-请求-Cross-site-HTTP-request"><a href="#跨站-HTTP-请求-Cross-site-HTTP-request" class="headerlink" title="跨站 HTTP 请求(Cross-site HTTP request)"></a>跨站 HTTP 请求(Cross-site HTTP request)</h3><p>是指发起请求的资源所在域不同于该请求所指向资源所在的域的 HTTP 请求。比如说，域名A(<a href="http://domaina.example" target="_blank" rel="external">http://domaina.example</a>) 的某 Web 应用程序中通过<code>&lt;img&gt;</code>标签引入了域名B(<a href="http://domainb.foo" target="_blank" rel="external">http://domainb.foo</a>) 站点的某图片资源(<a href="http://domainb.foo/image.jpg)，域名A的那" target="_blank" rel="external">http://domainb.foo/image.jpg)，域名A的那</a> Web 应用就会导致浏览器发起一个跨站 HTTP 请求。在当今的 Web 开发中，使用跨站 HTTP 请求加载各类资源（包括CSS、图片、JavaScript 脚本以及其它类资源），已经成为了一种普遍且流行的方式。</p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h3><p>正如大家所知，出于安全考虑，浏览器会限制脚本中发起的跨站请求。比如，使用 XMLHttpRequest 对象发起 HTTP 请求就必须遵守同源策略（same-origin policy）。 具体而言，Web 应用程序能且只能使用 XMLHttpRequest 对象向其加载的源域名发起 HTTP 请求，而不能向任何其它域名发起请求。为了能开发出更强大、更丰富、更安全的Web应用程序，开发人员渴望着在不丢失安全的前提下，Web 应用技术能越来越强大、越来越丰富。比如，可以使用 XMLHttpRequest 发起跨站 HTTP 请求。</p>
<h3 id="解决方案-CORS"><a href="#解决方案-CORS" class="headerlink" title="解决方案-CORS:"></a>解决方案-CORS:</h3><p>CORS主要是通过定义浏览器与服务器之间共享内容的方式来实现跨域。<br>CORS通过新增一系列 HTTP 头（Access-Control-Allow-Origin，Access-Control-Expose-Headers，Access-Control-Max-Age，Access-Control-Allow-Credentials，Access-Control-Allow-Methods，Access-Control-Allow-Headers等），让服务器能声明那些来源可以通过浏览器访问该服务器上的资源。另外，对那些会对服务器数据造成破坏性影响的 HTTP 请求方法（特别是 GET 以外的 HTTP 方法，或者搭配某些MIME类型的POST请求），标准强烈要求浏览器必须先以 OPTIONS 请求方式发送一个预请求(preflight request)，从而获知服务器端对跨源请求所支持 HTTP 方法。在确认服务器允许该跨源请求的情况下，以实际的 HTTP 请求方法发送那个真正的请求。服务器端也可以通知客户端，是不是需要随同请求一起发送信用信息（包括 Cookies 和 HTTP 认证相关数据）。</p>
<p><img src="http://7xkbey.com1.z0.glb.clouddn.com/Cros%E5%8E%9F%E7%90%86.png" alt="CORS"></p>
<blockquote>
<p>跨源资源共享标准( cross-origin sharing standard ) 使得以下场景可以使用跨站 HTTP 请求：</p>
</blockquote>
<ul>
<li>如上所述，使用 XMLHttpRequest 发起跨站 HTTP 请求。</li>
<li>Web 字体 (CSS 中通过 @font-face 使用跨站字体资源), 因此，网站就可以发布 TrueType 字体资源，并只允许已授权网站进行跨站调用。</li>
<li>WebGL 贴图</li>
<li>使用 drawImage API 在 canvas 上画图</li>
</ul>
<h3 id="访问控制场景"><a href="#访问控制场景" class="headerlink" title="访问控制场景"></a>访问控制场景</h3><ol>
<li><p>简单请求</p>
<p>所谓的简单，是指：</p>
<ul>
<li>只使用 GET, HEAD 或者 POST 请求方法。如果使用 POST 向服务器端传送数据，则数据类型(Content-Type)只能是 application/x-www-form-urlencoded, multipart/form-data 或 text/plain中的一种。</li>
<li>不会使用自定义请求头（类似于 X-Modified 这种）。</li>
</ul>
</li>
<li><p>预请求</p>
<p>不同于上面讨论的简单请求，“预请求”要求必须先发送一个 OPTIONS 请求给目的站点，来查明这个跨站请求对于目的站点是不是安全可接受的。这样做，是因为跨站请求可能会对目的站点的数据造成破坏。 当请求具备以下条件，就会被当成预请求处理：</p>
<ul>
<li>请求以 GET, HEAD 或者 POST 以外的方法发起请求。或者，使用 POST，但请求数据为 application/x-www-form-urlencoded, multipart/form-data 或者 text/plain 以外的数据类型。比如说，用 POST 发送数据类型为 application/xml 或者 text/xml 的 XML 数据的请求。</li>
<li>使用自定义请求头（比如添加诸如 X-PINGOTHER）</li>
</ul>
</li>
<li><p>附带凭证信息的请求</p>
<p>XMLHttpRequest和访问控制功能，最有趣的特性就是，发送凭证请求（HTTP Cookies和验证信息）的功能。一般而言，对于跨站请求，浏览器是不会发送凭证信息的。但如果将XMLHttpRequest的一个特殊标志位设置为true，浏览器就将允许该请求的发送。</p>
</li>
</ol>
<h2 id="更多："><a href="#更多：" class="headerlink" title="更多："></a>更多：</h2><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">HTTP访问控制(CORS)</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Server-Side_Access_Control" target="_blank" rel="external">Server-Side Access Control</a></li>
<li><a href="http://blog.brucefeng.info/post/web-crossdomain-2016" target="_blank" rel="external">前端跨域</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[inline-block详解]]></title>
      <url>http://iminyao.com/2015/06/21/inline-block/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="IE6中inline和block的表现-demo"><a href="#IE6中inline和block的表现-demo" class="headerlink" title="IE6中inline和block的表现(demo)"></a>IE6中<code>inline</code>和<code>block</code>的表现(<a href="http://www.iyunlu.com/demo/inline-block-ie/" target="_blank" rel="external">demo</a>)</h3><ol>
<li><p>inline 元素 display:inline-block</p>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.dib-inline</span>, <span class="selector-class">.dib-block</span> &#123;</div><div class="line"><span class="attribute">width</span>:<span class="number">100px</span>;</div><div class="line"><span class="attribute">height</span>:<span class="number">30px</span>;</div><div class="line"><span class="attribute">line-height</span>:<span class="number">30px</span>;</div><div class="line"><span class="attribute">text-align</span>:center;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.dib-inline</span> &#123;</div><div class="line"><span class="attribute">display</span>:inline-block;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://img04.taobaocdn.com/tps/i4/T1E_DDXihhXXa9b4f4-458-85.png" alt="IE6-inline"></p>
<blockquote>
<p>测试表明：IE6 中 inline 元素只要触发了 hasLayout 其表现就类似于 inline-block，这里设置 display:inline-block; 或者 zoom:1; 等其他属性值可以触发 hasLayout ，表现出来是一样的。</p>
</blockquote>
</li>
<li><p>block 元素 display:inline-block </p>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.dib-inline</span>, <span class="selector-class">.dib-block</span> &#123;</div><div class="line"><span class="attribute">width</span>:<span class="number">100px</span>;</div><div class="line"><span class="attribute">height</span>:<span class="number">30px</span>;</div><div class="line"><span class="attribute">line-height</span>:<span class="number">30px</span>;</div><div class="line"><span class="attribute">text-align</span>:center;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.dib-block</span>&#123;</div><div class="line"><span class="attribute">display</span>:inline-block;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://img02.taobaocdn.com/tps/i2/T1B5rEXXNdXXau2DD4-486-217.png" alt="IE6-block"></p>
<blockquote>
<p>测试表明：IE6 中 block 元素即使触发了 hasLayout 也不能具有 inline-block 元素不换行的特性。想要 block 元素支持 inline-block 元素的特性，我们可以这样做：</p>
</blockquote>
<figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">.dib-<span class="class">block </span>&#123;</div><div class="line"><span class="symbol">display:</span>inline;</div><div class="line"><span class="symbol">zoom:</span><span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">    <span class="comment">// 原理：</span></div><div class="line">    <span class="comment">// 首先让 block 元素转化为 inline 元素，强制其不换行；然后通过 zoom:1 触发 hasLayout，使其可以设置宽高。</span></div></pre></td></tr></table></figure>
<p> <img src="http://img03.taobaocdn.com/tps/i3/T1vibEXcheXXbfe2f.-517-91.png" alt="IE6-fixed"></p>
<h3 id="兼容性代码"><a href="#兼容性代码" class="headerlink" title="兼容性代码"></a>兼容性代码</h3></li>
</ol>
<figure class="highlight scss"><table><tr><td class="code"><pre><div class="line"><span class="attribute">display</span>:inline-block; <span class="comment">/* 现代浏览器 +IE6、7 inline 元素 */</span></div><div class="line">*<span class="attribute">display</span>:inline; <span class="comment">/* IE6、7 block 元素 */</span></div><div class="line">*zoom:<span class="number">1</span>;</div></pre></td></tr></table></figure>
<blockquote>
<p>为了不让支持 CSS2.1 inline-block 的浏览器 重置为 inline，我们针对 IE6、7 做一个 hack。由于现代浏览器也开始支持 zoom 属性，这里只是希望 IE6、7 中生效，所以还是 hack 一下比较合适。至此产生了我们熟悉的兼容各个浏览器的 inline-block 写法。</p>
</blockquote>
<h3 id="inline-block本质"><a href="#inline-block本质" class="headerlink" title="inline-block本质:"></a><code>inline-block</code>本质:</h3><blockquote>
<p>inline-block 后的元素创建了一个行级的块容器，该元素内部（内容）被格式化成一个块元素，同时元素本身则被格式化成一个行内元素。</p>
<p>直白一点的意思就是：inline-block 的元素既具有 block 元素可以设置宽高的特性，同时又具有 inline 元素默认不换行的特性。当然不仅仅是这些特性，比如 inline-block 元素也可以设置 vertical-align 属性。简而言之：</p>
<p><em>inline-block 后的元素就是一个格式化为行内元素的块容器( Block container )</em></p>
</blockquote>
<h3 id="延伸阅读："><a href="#延伸阅读：" class="headerlink" title="延伸阅读："></a>延伸阅读：</h3><p><a href="http://ued.taobao.org/blog/2012/08/inline-block/" target="_blank" rel="external">in;ine-block的前世今生</a></p>
<h3 id="问题：display-inline-block-后的元素为什么会产生水平空隙，这真的是-bug-吗？"><a href="#问题：display-inline-block-后的元素为什么会产生水平空隙，这真的是-bug-吗？" class="headerlink" title="问题：display:inline-block 后的元素为什么会产生水平空隙，这真的是 bug 吗？"></a>问题：display:inline-block 后的元素为什么会产生水平空隙，这真的是 bug 吗？</h3><ul>
<li>现代浏览器中 inline 和 block 元素 display:inline-block 后均会产生水平空隙；<br><img src="http://img04.taobaocdn.com/tps/i4/T1AobxXlpsXXXtlu.6-451-223.png" alt="chrome"></li>
<li>IE6、7，IE8（Q）模拟 display:inline-block 后分两种情况：<br><img src="http://img01.taobaocdn.com/tps/i1/T1.EjEXalaXXXxnXr3-411-212.png" alt="IE"></li>
<li>inline 元素默认的表现:<br><img src="http://img02.taobaocdn.com/tps/i2/T1J5bDXk0lXXXhdIga-281-260.png" alt="inline"></li>
</ul>
<h4 id="它们是谁？是空白符（white-space）！"><a href="#它们是谁？是空白符（white-space）！" class="headerlink" title="它们是谁？是空白符（white space）！"></a>它们是谁？是<em>空白符（white space）</em>！</h4><blockquote>
<p>所以这并不是 inline-block 后产生的 bug，而是因为 inline-block 具有 inline 元素固有的特性。那么为何 IE6、7 block 元素没有产生空隙呢？其实前面也提到了 IE 的 hasLayout，具有独立性，所以产生 hasLayout 的元素之间表现出来互不影响，这也再次表明 IE6、7 中的 inline-block 不能等同于 CSS2.1 中的 inline-block。</p>
</blockquote>
<h5 id="测试表明删除换行符后，inline-元素间的空隙就「消失」了："><a href="#测试表明删除换行符后，inline-元素间的空隙就「消失」了：" class="headerlink" title="测试表明删除换行符后，inline 元素间的空隙就「消失」了："></a>测试表明删除换行符后，inline 元素间的空隙就「消失」了：</h5><p><img src="http://img03.taobaocdn.com/tps/i3/T1c02yXcRrXXcfLOPm-462-177.png" alt="del"></p>
<h3 id="如何去掉-inline-block-产生的空隙？"><a href="#如何去掉-inline-block-产生的空隙？" class="headerlink" title="如何去掉 inline-block 产生的空隙？"></a>如何去掉 inline-block 产生的空隙？</h3><h4 id="产生空隙的根本性原因是："><a href="#产生空隙的根本性原因是：" class="headerlink" title="产生空隙的根本性原因是："></a>产生空隙的根本性原因是：</h4><blockquote>
<p>HTML 中的换行符、空格符、制表符等产生了空白符，而这些<em>归根结底都是字符</em>，那么它们的大小都是 受 <code>font-size</code> 来控制的，字体大小直接导致 inline 或者 inline-block 后元素之间空隙的大小，把 inline-block 元素间的空隙认为总是某个固定大小是错误的。</p>
</blockquote>
<p><img src="http://img01.taobaocdn.com/tps/i1/T1vHvDXdhlXXcyL6DM-583-429.gif" alt="font-size"></p>
<ol>
<li>将<code>font-size</code>设置为0</li>
<li>对于不支持<code>font-size=0</code>的浏览器使用<code>letter-spacing</code>和<code>word-spacing</code>(<a href="http://www.iyunlu.com/demo/inline-block/" target="_blank" rel="external">demo</a>)</li>
<li><p>子元素重置回正常值</p>
<blockquote>
<p>上述所有操作都是在父元素设置的，那么子元素都会继承这些属性，字体大小为0了，子元素就什么都看不到了，这并不是我们想要的。 同时字符和单词间距我们也要把它重置为默认值。</p>
</blockquote>
</li>
<li><p><code>inline-block</code> 更好的复用</p>
<blockquote>
<p>可以抽离出两个复用的类，在需要设置 inline-block 元素的父级元素上定义一个「.dib-wrap」，该元素自身定义为「.dib」。这里还有一个问题需要注意的是：由于 inline-block 具有 inline 元素的特性，在垂直方向上很多时候我们并不希望元素以「vertical-align:baseline」方式来呈现，所以在「.dib-wrap」中统一重置为「vertical-align:top」即可。</p>
</blockquote>
</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://ued.taobao.org/blog/2012/08/inline-block/" target="_blank" rel="external">inline-block的前世今生</a></li>
</ul>
<h3 id="延伸阅读：-1"><a href="#延伸阅读：-1" class="headerlink" title="延伸阅读："></a>延伸阅读：</h3><ul>
<li><a href="https://css-tricks.com/fighting-the-space-between-inline-block-elements/" target="_blank" rel="external">Fighting the Space Between Inline Block Elements</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript中的随机数]]></title>
      <url>http://iminyao.com/2015/06/19/math-random/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>There are some examples on the <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/random" target="_blank" rel="external">MDN</a> page:<br><figure class="highlight processing"><table><tr><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Returns a random number between min (inclusive) and max (exclusive)</div><div class="line"> */</div><div class="line">function getRandomArbitrary(<span class="built_in">min</span>, <span class="built_in">max</span>) &#123;</div><div class="line">    <span class="keyword">return</span> Math.<span class="built_in">random</span>() * (<span class="built_in">max</span> - <span class="built_in">min</span>) + <span class="built_in">min</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Returns a random integer between min (inclusive) and max (inclusive)</div><div class="line"> * Using Math.round() will give you a non-uniform distribution!</div><div class="line"> */</div><div class="line">function getRandomInt(<span class="built_in">min</span>, <span class="built_in">max</span>) &#123;</div><div class="line">    <span class="keyword">return</span> Math.<span class="built_in">floor</span>(Math.<span class="built_in">random</span>() * (<span class="built_in">max</span> - <span class="built_in">min</span> + <span class="number">1</span>)) + <span class="built_in">min</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Here’s-the-logic-behind-it"><a href="#Here’s-the-logic-behind-it" class="headerlink" title="Here’s the logic behind it."></a>Here’s the logic behind it.</h3><ul>
<li><p>Math.random() returns a Number between 0 (inclusive) and 1 (exclusive). So we have an interval like this:(Math.random()函数只是会产生0-1之间的随机数[0,1)包含0，不包含1)</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">[<span class="number">0</span> .................................... <span class="number">1</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>Now, we’d like a number between min (inclusive) and max (exclusive):(类似映射)</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">[<span class="number">0</span> .................................... <span class="number">1</span>)</div><div class="line">[min .................................. max)</div></pre></td></tr></table></figure>
</li>
<li><p>We can use the Math.random to get the correspondent in the [min, max) interval. But, first we should factor a little bit the problem by subtracting min from the second interval:(将左边界变成0)</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">[<span class="number">0</span> .................................... <span class="number">1</span>)</div><div class="line">[min - min ............................ max - min)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>This gives:<br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">[<span class="number">0</span> .................................... <span class="number">1</span>)</div><div class="line">[<span class="number">0</span> .................................... max - min)</div></pre></td></tr></table></figure></p>
<ul>
<li>We may now apply Math.random and then calculate the correspondent. Let’s choose a random number:<figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">             Math.random()</div><div class="line">                    |</div><div class="line">[<span class="number">0</span> .................................... <span class="number">1</span>)</div><div class="line">[<span class="number">0</span> .................................... max - min)</div><div class="line">                    |</div><div class="line">                    x (what we need)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>So, in order to find x, we would do:(<code>*</code>即简单的乘法)<br><figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line">x = Math.<span class="built_in">random</span>() * (<span class="built_in">max</span> - <span class="built_in">min</span>);</div></pre></td></tr></table></figure></p>
<p>Don’t forget to add min back, so that we get a number in the [min, max) interval:(<code>+</code>即简单的加法，将[0,max-min)扩展到[min,max))<br><figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line">x = Math.<span class="built_in">random</span>() * (<span class="built_in">max</span> - <span class="built_in">min</span>) + <span class="built_in">min</span>;</div></pre></td></tr></table></figure></p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/random" target="_blank" rel="external">MDN - Math.random()</a></li>
<li><a href="http://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range" target="_blank" rel="external">stackoverflow - generating-random-numbers</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[伪类与伪元素本质区别]]></title>
      <url>http://iminyao.com/2015/06/13/Pseudo-element-Pseudo-class/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="前导"><a href="#前导" class="headerlink" title="前导"></a>前导</h2><ul>
<li>先看一个伪元素 first-line 例子。现在有一段HTML，内容是一个段落：</li>
</ul>
<figure class="highlight applescript"><table><tr><td class="code"><pre><div class="line">&lt;p&gt;I am <span class="keyword">the</span> bone <span class="keyword">of</span> <span class="keyword">my</span> sword. Steel <span class="keyword">is</span> <span class="keyword">my</span> body, <span class="keyword">and</span> fire <span class="keyword">is</span> <span class="keyword">my</span> blood.  </div><div class="line">I have created <span class="keyword">over</span> a thoustand blades.  </div><div class="line">Unknown <span class="keyword">to</span> Death.Nor known <span class="keyword">to</span> Life. Have withstood pain <span class="keyword">to</span> create many weapon.  </div><div class="line">Yet, those hands will never hold anything. So <span class="keyword">as</span> I pray, unlimited blade works.&lt;/p&gt;</div></pre></td></tr></table></figure>
<p>如果我要描述这个段落的第一行，在不用伪元素的情况下，我会怎么做？想来我一定要嵌套一层 span，然后加上类名:</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><div class="line">p&gt;&lt;span <span class="built_in">class</span>=<span class="string">"first-line"</span>&gt;I am <span class="keyword">the</span> bone <span class="keyword">of</span> <span class="keyword">my</span> sword. Steel <span class="keyword">is</span> <span class="keyword">my</span> body, <span class="keyword">and</span> fire <span class="keyword">is</span> <span class="keyword">my</span> blood. &lt;/span&gt;  </div><div class="line">I have created <span class="keyword">over</span> a thoustand blades.  </div><div class="line">Unknown <span class="keyword">to</span> Death.Nor known <span class="keyword">to</span> Life. Have withstood pain <span class="keyword">to</span> create many weapon.  </div><div class="line">Yet, those hands will never hold anything. So <span class="keyword">as</span> I pray, unlimited blade works.&lt;/p&gt;</div></pre></td></tr></table></figure>
<ul>
<li>再反观一个伪类 first-child 的例子，有一个简单的列表：<figure class="highlight apache"><table><tr><td class="code"><pre><div class="line"><span class="section">&lt;ul&gt;</span>  </div><div class="line">    <span class="section">&lt;li&gt;</span><span class="section">&lt;/li&gt;</span></div><div class="line">    <span class="section">&lt;li&gt;</span><span class="section">&lt;/li&gt;</span></div><div class="line"><span class="section">&lt;/ul&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>如果我要描述 ul 的第一个元素，我无须嵌套新的元素，我只须给第一个已经存在的 li 添加一个类名就可以了：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"first-child"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="本质区别"><a href="#本质区别" class="headerlink" title="本质区别"></a>本质区别</h3><blockquote>
<p>尽管，第一行和第一个元素，这两者的语意相似，但最后作用的效果却完全不同。所以，伪类和伪元素的根本区别在于：<strong>它们是否创造了新的元素(抽象)</strong>从我们模仿其意义的角度来看，如果需要添加新元素加以标识的，就是伪元素，反之，如果只需要在既有元素上添加类别的，就是伪类。</p>
</blockquote>
<h2 id="伪元素："><a href="#伪元素：" class="headerlink" title="伪元素："></a>伪元素：</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><blockquote>
<p>“伪元素”(pseudo)，顾名思义。它创建了一个虚假的元素，并插入到目标元素内容之前或之后。</p>
<p>css 设置伪元素是为了方便给某些选择器添加特殊的效果。</p>
</blockquote>
<h3 id="默认行为"><a href="#默认行为" class="headerlink" title="默认行为"></a>默认行为</h3><blockquote>
<p>通过伪元素添加的新内容区域默认的 display 属性值为 inline，但可以像修改其他元素一样修改它的样式，可以通过将它的 display 属性值来改为 block。  </p>
</blockquote>
<h3 id="content"><a href="#content" class="headerlink" title="content"></a>content</h3><blockquote>
<p>对于伪元素 :before 和 :after 而言，属性 content 是必须设置的</p>
</blockquote>
<h3 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h3><blockquote>
<p>直觉是：before和：after伪元素可能是 插入的内容会被注入到目标元素的前或后注入。但是，正如上面提到的，不是这样的。</p>
<p>注入的内容将是有关联的目标元素的子元素，但它会被置于这个元素的任何内容的“前”或“后”。</p>
</blockquote>
<h3 id="兼容性-IE6-7"><a href="#兼容性-IE6-7" class="headerlink" title="兼容性(IE6/7)"></a>兼容性(IE6/7)</h3><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.example</span> <span class="selector-tag">before</span> &#123;&#125;</div><div class="line"><span class="selector-class">.example</span> <span class="selector-tag">after</span> &#123;&#125;</div></pre></td></tr></table></figure>
<h3 id="实用技巧"><a href="#实用技巧" class="headerlink" title="实用技巧"></a>实用技巧</h3><ol>
<li><p>配合伪类</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 伪元素应该位于后面，如果顺序改为 .before:before:hover 是无效的。</span></div><div class="line"><span class="selector-class">.before</span>:hover:before&#123;<span class="attribute">content</span>:<span class="string">'you before'</span>; <span class="attribute">color</span>:red;&#125;</div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"before"</span>&gt; me&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>toDoList</p>
<p> <a href="http://code.w3ctech.com/detail/1523" target="_blank" rel="external">http://code.w3ctech.com/detail/1523</a></p>
</li>
<li><p>伪元素浮动</p>
<p> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/%3A%3Abefore" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/CSS/%3A%3Abefore</a></p>
</li>
<li><p>纯CSS提示工具</p>
<p> <a href="http://code.w3ctech.com/detail/1525" target="_blank" rel="external">http://code.w3ctech.com/detail/1525</a></p>
</li>
</ol>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://swordair.com/origin-and-difference-between-css-pseudo-classes-and-pseudo-elements/" target="_blank" rel="external">http://swordair.com/origin-and-difference-between-css-pseudo-classes-and-pseudo-elements/</a></li>
<li><ol>
<li><a href="http://segmentfault.com/a/1190000000474414" target="_blank" rel="external">http://segmentfault.com/a/1190000000474414</a></li>
</ol>
</li>
<li><a href="http://www.w3cplus.com/css3/learning-to-use-the-before-and-after-pseudo-elements-in-css.html" target="_blank" rel="external">http://www.w3cplus.com/css3/learning-to-use-the-before-and-after-pseudo-elements-in-css.html</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2012/11/before-after-use-web/" target="_blank" rel="external">http://www.zhangxinxu.com/wordpress/2012/11/before-after-use-web/</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/::after" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/CSS/::after</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/content" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/CSS/content</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[360前端星计划整理]]></title>
      <url>http://iminyao.com/2015/06/13/360FE-star/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="文博老师PPT"><a href="#文博老师PPT" class="headerlink" title="文博老师PPT"></a>文博老师PPT</h2><ol>
<li><a href="http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-1#/" target="_blank" rel="external">http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-1#/</a></li>
<li><a href="http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-2#/" target="_blank" rel="external">http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-2#/</a></li>
<li><a href="http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-3#/" target="_blank" rel="external">http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-3#/</a></li>
<li><a href="http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-4#/" target="_blank" rel="external">http://webzhao.github.io/sharing/slides.html?file=front-end-essentials-4#/</a></li>
</ol>
<h3 id="tips"><a href="#tips" class="headerlink" title="tips:"></a>tips:</h3><ol>
<li>盒模型高度：只有当包含块的高度不依赖该元素时，百分比高度才生效</li>
<li>inline-block 元素本身是行级，为其内容生成块级框</li>
<li>position设置为absolute以后，元素会生成一个块级框</li>
<li>块级格式化上下文<ul>
<li>在BFC中，框会从包含块的顶部开始，从上到下摆放</li>
<li>BFC内的浮动不会影响到BFC外部的元素</li>
<li>BFC的高度会包含其内的浮动元素</li>
<li>BFC不会和浮动元素重叠</li>
</ul>
</li>
<li>BFC的创建<ul>
<li>浮动框</li>
<li>绝对定位框</li>
<li>非块级的块容器(inline-block)</li>
<li>overflow属性非visible的块框</li>
</ul>
</li>
<li><p>z-index指定元素在所属堆叠上下文中的层次</p>
<ul>
<li><a href="http://code.w3ctech.com/detail/1533" target="_blank" rel="external">demo</a> </li>
<li><p>绘制顺序</p>
<pre><code> 每个堆叠上下文中， 从下到上的顺序显示：

*    background, boder

*    z-index为负值的定位元素

*    正常块级元素

*    浮动

*    行级元素

*    z-index为0

*    z-index为正数
</code></pre></li>
</ul>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[HTTP中的GET与POST]]></title>
      <url>http://iminyao.com/2015/06/02/GET-POST/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="GET的劣势："><a href="#GET的劣势：" class="headerlink" title="GET的劣势："></a>GET的劣势：</h3><blockquote>
<p>使用GET方法所有参数都包含在URL中，所有访问网站的URL都会记录在服务器的访问日志中。<br>而服务器的访问日志正是黑客攻击的重点对象之一！</p>
<p>POST是通过携带数据体传递用户登录信息，登录的数据并不会出现在URL和服务器访问日志中。</p>
</blockquote>
<h3 id="POST真的安全吗？"><a href="#POST真的安全吗？" class="headerlink" title="POST真的安全吗？"></a>POST真的安全吗？</h3><p>相比GET，POST只是将变量名/变量值放在实际的HTTP请求消息内部传送，且是以明文的方式在传输，所以从安全性上来讲，与不显示的后端Ajax的Get请求并无区别。</p>
<p>究其原因，POST设计之初，并不是为安全而来。</p>
<p>rfc2616中关于POST的定义：</p>
<p>The POST method is used to request that the origin server accept the entity enclosed in the request as a new subordinate of the resource identified by the Request-URI in the Request-Line. POST is designed to allow a uniform method to cover the following functions…</p>
<p>一个简单的例子：</p>
<ol>
<li><p>学校正方教务处登录，请求方式为POST。</p>
<p><img src="https://cloud.githubusercontent.com/assets/4004044/8125083/0454ca52-1115-11e5-8d8e-6f5811b67d69.jpg" alt="jwc"></p>
</li>
</ol>
<ol>
<li>可以看到学号、密码、验证码等字段均以明文显示。</li>
</ol>
<h4 id="在关系到用户隐私的时候，要时刻遵循两个原则："><a href="#在关系到用户隐私的时候，要时刻遵循两个原则：" class="headerlink" title="在关系到用户隐私的时候，要时刻遵循两个原则："></a>在关系到用户隐私的时候，要时刻遵循两个原则：</h4><ol>
<li>任何应用程序都不能在本地存储与安全相关的用户信息</li>
<li>任何应用程序在向服务器传递数据的时候，都不能直接传递与安全相关的用户信息。</li>
</ol>
<h4 id="可行的解决方案："><a href="#可行的解决方案：" class="headerlink" title="可行的解决方案："></a>可行的解决方案：</h4><ol>
<li>在不考虑页面打开速度时，对于登录等敏感操作页面使用HTTPs。</li>
<li>采用js加密方式，在发送敏感数据前用某些加密算法对其进行加密(MD5等，缺点是简单密码易被破解)。</li>
<li>密码加“盐”，在密码后面追加一堆无序字符后在进行算法加密。</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.w3school.com.cn/tags/html_ref_httpmethods.asp" target="_blank" rel="external">HTTP 方法：GET 对比 POST</a></li>
<li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html" target="_blank" rel="external">http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html</a></li>
<li><a href="http://blog.csdn.net/javamxd/article/details/28602523" target="_blank" rel="external">密码加密</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript实现动画的两种方式比较]]></title>
      <url>http://iminyao.com/2015/06/01/animation-use-javascript/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="区别："><a href="#区别：" class="headerlink" title="区别："></a>区别：</h3><ol>
<li>相当一部分的浏览器的显示频率是16.7ms,显示器16.7ms刷新间隔之前发生了其他绘制请求(setTimeout)，导致部分帧丢失，继而导致动画断续显示，这就是过度绘制带来的问题。不仅如此，这种计时器频率的降低也会对电池使用寿命造成负面影响，并会降低其他应用的性能。<br>这也是为何setTimeout的定时器值推荐最小使用16.7ms的原因（16.7 = 1000 / 60, 即每秒60帧）。</li>
<li><p>而requestAnimationFrame就是为了这个而出现的。所做的事情很简单，跟着浏览器的绘制走，如果浏览设备绘制间隔是16.7ms，那我就这个间隔绘制；如果浏览设备绘制间隔是10ms, 我就10ms绘制。这样就不会存在过度绘制的问题，动画不会掉帧，自然流畅的说~~<br>内部是这么运作的：<br>浏览器（如页面）每次要重绘，就会通知requestAnimationFrame</p>
</li>
<li><p>优势分析：<br>就算很多个requestAnimationFrame要执行，浏览器只要通知一次就可以了。而setTimeout貌似是多个独立绘制。<br>页面最小化了，或者被Tab切换关灯了，页面绘制全部停止，资源高效利用。</p>
</li>
</ol>
<h3 id="requestAnimationFrame变换背景"><a href="#requestAnimationFrame变换背景" class="headerlink" title="requestAnimationFrame变换背景"></a>requestAnimationFrame变换背景</h3><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="built_in">window</span>.requestAnimationFrame = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="built_in">window</span>.requestAnimationFrame ||    <span class="comment">//IE10以及以上版本，以及最新谷歌，火狐版本</span></div><div class="line"></div><div class="line">                <span class="built_in">window</span>.webkitRequestAnimationFrame ||   <span class="comment">//谷歌老版本</span></div><div class="line"></div><div class="line">                <span class="built_in">window</span>.mozRequestAnimationFrame ||  <span class="comment">//火狐老版本</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;    <span class="comment">//IE9以及以下版本</span></div><div class="line"></div><div class="line">                    <span class="built_in">window</span>.setTimeout(callback , <span class="number">1000</span>/<span class="number">60</span>);  <span class="comment">//这里强制让动画一秒刷新60次，这里之所以设置为16.7毫秒刷新一次，是因为requestAnimationFrame默认也是16.7毫秒刷新一次。</span></div><div class="line"></div><div class="line">                &#125;</div><div class="line">    &#125;)();</div><div class="line">    <span class="keyword">var</span> start = <span class="built_in">Date</span>.now(),</div><div class="line">            dur = <span class="number">3000</span>;</div><div class="line">    <span class="keyword">var</span> body = <span class="built_in">document</span>.body;</div><div class="line">    requestAnimationFrame(<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> p = (<span class="built_in">Date</span>.now() - start) / dur;</div><div class="line">        <span class="keyword">if</span> (p &lt; <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">var</span> r = <span class="number">0</span> | (<span class="number">255</span> * (<span class="number">1</span> - p)), g = <span class="number">0</span> | (<span class="number">255</span> * p), b = <span class="number">0</span> | (<span class="number">255</span> * <span class="built_in">Math</span>.sin(p * <span class="built_in">Math</span>.PI));</div><div class="line">            body.style.backgroundColor = <span class="string">"rgb("</span> + [r, g, b] + <span class="string">")"</span>;</div><div class="line">            <span class="built_in">console</span>.log(body.style.backgroundColor);</div><div class="line">            requestAnimationFrame(f);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            body.style.backgroundColor = <span class="string">"rgb(0, 255, 0)"</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame" target="_blank" rel="external">window.requestAnimationFrame</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2013/09/css3-animation-requestanimationframe-tween-%E5%8A%A8%E7%94%BB%E7%AE%97%E6%B3%95/" target="_blank" rel="external">requestAnimationFrame与CSS动画比较</a></li>
<li><a href="http://blog.csdn.net/milado_nju/article/details/8101188" target="_blank" rel="external">Chromium渲染主循环(mainloop)和requestAnimationFrame</a></li>
<li><a href="http://miclle.me/javascript-timer/" target="_blank" rel="external">JavaScript Timer</a></li>
<li><a href="http://cube.qq.com/?p=401" target="_blank" rel="external">transition和requestAnimationFrame动画学习</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS盒模型中的关于参照物很容易混淆的地方]]></title>
      <url>http://iminyao.com/2015/05/25/css-width/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>测试地址：<a href="http://codepen.io/vino24/pen/pEzrOk" target="_blank" rel="external">http://codepen.io/vino24/pen/pEzrOk</a></p>
<blockquote>
<p>百分百是CSS中最常用的一种尺寸单位了，但是平时在写的很容易的忽视的一点就是百分比的参照物，本文对常见的百分比使用做了总结。</p>
</blockquote>
<h3 id="宽高"><a href="#宽高" class="headerlink" title="宽高"></a>宽高</h3><figure class="highlight html"><table><tr><td class="code"><pre><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"child"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line">    <span class="selector-id">#parent</span> &#123;</div><div class="line">    <span class="attribute">width</span>:<span class="number">200px</span>;</div><div class="line">    <span class="attribute">height</span>:<span class="number">100px</span>;</div><div class="line">    <span class="attribute">background</span>:gray;</div><div class="line">&#125;</div><div class="line">    <span class="selector-id">#child</span> &#123;</div><div class="line">        <span class="attribute">width</span>:<span class="number">50%</span>;</div><div class="line">        <span class="attribute">height</span>:<span class="number">50%</span>;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>宽高是最简单的了，width是相对于父元素的width，height是相对于父元素的height。</p>
<h3 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h3><figure class="highlight css"><table><tr><td class="code"><pre><div class="line">    <span class="selector-id">#child</span> &#123;</div><div class="line">    <span class="attribute">postion</span>:relative;</div><div class="line">    <span class="attribute">left</span>:<span class="number">50%</span>;</div><div class="line">    <span class="attribute">top</span>:<span class="number">50%</span>;</div><div class="line">    <span class="attribute">width</span>:<span class="number">50%</span>;</div><div class="line">    <span class="attribute">height</span>:<span class="number">50%</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h4><p>相对定位的元素元素本身还身处在文档流中，left和right是相对的父元素的宽度，top和bottom相对的父元素的height</p>
<h4 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h4><p>绝对定位由于脱离了文档流，left和right是相对于第一个非static的父元素的宽度，top和rigt相对的也是这个父元素的高度。</p>
<h3 id="margin、padding"><a href="#margin、padding" class="headerlink" title="margin、padding"></a>margin、padding</h3><blockquote>
<p>这是开发中最容易被忽视的地方，因为它的参照和上面两个是不同的，如果不亲自尝试的话，很容易就会以为是和上面的一样。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-id">#child</span> &#123;</div><div class="line">     <span class="attribute">width</span>:<span class="number">50%</span>;</div><div class="line">     <span class="attribute">height</span>:<span class="number">50%</span>;</div><div class="line">     <span class="attribute">margin</span>: <span class="number">50%</span> <span class="number">0</span> <span class="number">0</span> <span class="number">50%</span>;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>从运行结果中我们惊讶的发现不论是margin-left还是margin-top相对的都是父元素的宽度，这看上去和我们通常的想法是不同的，二者都是相对于父元素的width，而且还会出现margin叠加现象。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS Hover特效应用]]></title>
      <url>http://iminyao.com/2015/05/16/CSS-hover/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><h3 id="rgba与opacity区别："><a href="#rgba与opacity区别：" class="headerlink" title="rgba与opacity区别："></a>rgba与opacity区别：</h3><ol>
<li>rgba可用于设置背景色，字体颜色，边框颜色等,可设置颜色的地方。</li>
<li>opacity是给元素设置透明度，其子元素也同样会有透明度。</li>
</ol>
<h4 id="使用场景："><a href="#使用场景：" class="headerlink" title="使用场景："></a>使用场景：</h4><blockquote>
<p>场景举例：</p>
<p>我们经常会遇到一种场景就是背景是半透明的，但是上面的文字不是透明的。以前我们的实现方式大概是利用绝对定位，一层半透明，一层不是透明的叠加在一起。现在直接可以利用rgba的透明度来实现</p>
</blockquote>
<h3 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box-sizing:"></a>box-sizing:</h3><p><code>语法：box-sizing: content-box|border-box|inherit;</code></p>
<ol>
<li>content-box：默认值。宽度和高度分别应用到元素的内容框，在宽度和高度之外绘制元素的内边距和边框。</li>
<li>border-box：为元素设定的宽度和高度决定了元素的边框盒。就是说为元素指定的任何内边距和边框都将在已设定的宽度和高度内进行绘制，通过从已设定的宽度和高度分别减去边框和内边距才能得到内容的宽度和高度。</li>
</ol>
<h4 id="使用场景：-1"><a href="#使用场景：-1" class="headerlink" title="使用场景："></a>使用场景：</h4><blockquote>
<p>场景举例：</p>
<p>当我们给div设置width:100%并且添加了固定大小的padding值，这时就会超出父元素的宽度，如果其父元素是body就会出现横向的滚动条。此时我们可以使用box-sizing:border-box来解决，因为无论你的padding值为多少，元素的框盒就等于父类的宽度，只是内容宽度和高度会变化。</p>
</blockquote>
<h3 id="background-size"><a href="#background-size" class="headerlink" title="background-size:"></a>background-size:</h3><p><code>value:</code></p>
<ol>
<li><p><code>length</code> </p>
<pre><code>&gt; 指定背景图片大小
</code></pre></li>
<li><p><code>percentage</code></p>
<blockquote>
<p>指定背景图片相对背景区（background positioning area）的百分比。背景区由background-origin设置，默认为盒模型的内容区与内边距，也可设置为只有内容区，或者还包括边框。如果attachment 为fixed，背景区为浏览器可视区（即视口），不包括滚动条。</p>
</blockquote>
</li>
<li><code>cover</code><blockquote>
<p>保留固有比例，缩放背景图片以完全覆盖背景区，可能背景图片部分看不见。(横向覆盖背景区，纵向可能部分看不见)</p>
</blockquote>
</li>
<li><code>contain</code><blockquote>
<p>保留固有比例，缩放背景图片以完全装入背景区，可能背景区部分空白。(纵向上完全装入，横向宽度可能不够长)</p>
</blockquote>
</li>
</ol>
<h4 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h4><ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-size" target="_blank" rel="external">background-size-MDN</a></li>
<li><a href="http://www.w3school.com.cn/tiy/c.asp?f=css_background-size&amp;p=7" target="_blank" rel="external">W3c Demo</a></li>
</ol>
<p><hr></p>
<h2 id="code"><a href="#code" class="headerlink" title="code:"></a>code:</h2><p>HTML code:<br><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"demo"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mask"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>World<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"border"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>CSS code:<br><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.demo</span>,<span class="selector-class">.img</span>,<span class="selector-class">.mask</span>,<span class="selector-class">.border</span>&#123;</div><div class="line">     <span class="attribute">width</span>: <span class="number">100px</span>;</div><div class="line">     <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">     <span class="attribute">border-radius</span>: <span class="number">50%</span>;</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.demo</span> &#123;</div><div class="line">     <span class="attribute">position</span>: relative;</div><div class="line">     <span class="attribute">display</span>: block;</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.img</span> &#123;</div><div class="line">     <span class="attribute">background-image</span>:<span class="built_in">url</span>(./images/avatar.png);</div><div class="line">     <span class="attribute">background-size</span>: cover;</div><div class="line">     <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.mask</span>,<span class="selector-class">.border</span> &#123;</div><div class="line">     <span class="attribute">position</span>: absolute;</div><div class="line">     <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">     <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.mask</span> &#123;</div><div class="line">     <span class="attribute">text-align</span>: center;</div><div class="line">     <span class="attribute">color</span>: <span class="built_in">rgba</span>(255,255,255,0);</div><div class="line">     <span class="attribute">transition</span>: all,.<span class="number">5s</span>,ease-in;</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.info</span> &#123;</div><div class="line">     <span class="attribute">margin-top</span>: <span class="number">50%</span>;</div><div class="line">     <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-50%);</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.border</span> &#123;</div><div class="line">     <span class="attribute">border</span>:<span class="number">10px</span> solid <span class="number">#072256</span>;</div><div class="line">     <span class="attribute">border-left-color</span>: <span class="number">#E07514</span>;</div><div class="line">     <span class="attribute">border-top-color</span>: <span class="number">#E07514</span>;</div><div class="line">     <span class="attribute">box-sizing</span>: border-box;</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.demo</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.mask</span> &#123;</div><div class="line">     <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(0,0,0,.5);</div><div class="line">     <span class="attribute">color</span>: <span class="built_in">rgba</span>(255,255,255,1);</div><div class="line"> &#125;</div><div class="line"> <span class="selector-class">.demo</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.border</span> &#123;</div><div class="line">     <span class="attribute">transform</span>: <span class="built_in">rotate</span>(180deg);</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<h4 id="参考：-1"><a href="#参考：-1" class="headerlink" title="参考："></a>参考：</h4><ol>
<li><a href="http://www.75team.com/archives/807" target="_blank" rel="external">CSS3 Hover 动画特效-奇舞团</a></li>
<li><a href="http://codepen.io/Elainelele/pen/WbKXjd" target="_blank" rel="external">demo</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JavaScript作用域链]]></title>
      <url>http://iminyao.com/2015/05/04/Scope-Chain/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="目录："><a href="#目录：" class="headerlink" title="目录："></a>目录：</h3><ul>
<li>EC(执行环境或者执行上下文，Execution Context)</li>
</ul>
<blockquote>
<p>执行代码时会创建一个称为“执行上下文(execution context)”的内部对象，执行上下文定义了函数执行时的环境。每个执行上下文都有自己的作用域链，用于标识符解析，当执行上下文被创建时，它的作用域链初始化为当前运行函数的[[Scope]]所包含的对象。每个执行环境都有一个与之关联的变量对象（variable object, VO）</p>
</blockquote>
<p>javascript中，EC分为三种：</p>
<ul>
<li>全局级别的代码 – 这个是默认的代码运行环境，一旦代码被载入，引擎最先进入的就是这个环境。</li>
<li>函数级别的代码 – 当执行一个函数时，运行函数体中的代码。</li>
<li>Eval的代码 – 在Eval函数内运行的代码。</li>
</ul>
<p>EC建立分为两个阶段：进入执行上下文和执行阶段。</p>
<p>1.进入上下文阶段：发生在函数调用时，但是在执行具体代码之前（比如，对函数参数进行具体化之前）<br>2.执行代码阶段：变量赋值，函数引用，执行其他代码。</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">EC=&#123;</div><div class="line"><span class="symbol">    VO:</span>&#123;<span class="comment">/* 函数中的arguments对象, 参数, 内部的变量以及函数声明 */</span>&#125;,</div><div class="line"><span class="symbol">    this:</span>&#123;&#125;,</div><div class="line"><span class="symbol">    Scope:</span>&#123; <span class="comment">/* VO以及所有父执行上下文中的VO */</span>&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ECS(执行环境栈Execution Context Stack)</li>
</ul>
<blockquote>
<p>一系列活动的执行上下文从逻辑上形成一个栈。每个函数都有自己的执行环境，当执行流进入一个函数的时候，函数的环境会被推入ECS中，而在函数执行完毕后执行环境出栈并被销毁，保存在其中的所有变量和函数定义随之销毁，控制权返回到之前的执行环境中，全局的执行环境在应用程序退出（浏览器关闭）才会被销毁。<br>栈底总是全局上下文，栈顶是当前（活动的）执行上下文。当在不同的执行上下文间切换（退出的而进入新的执行上下文）的时候，栈会被修改（通过压栈或者退栈的形式）。</p>
</blockquote>
<ol>
<li>压栈：全局EC–&gt;局部EC1–&gt;局部EC2–&gt;当前EC</li>
<li>出栈：全局EC&lt;–局部EC1&lt;–局部EC2&lt;–当前EC<figure class="highlight ebnf"><table><tr><td class="code"><pre><div class="line"><span class="attribute">ECS</span>=[局部EC,全局EC];</div></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>VO(变量对象，Variable Object)</li>
</ul>
<blockquote>
<p>每个执行环境都有一个与之关联的变量对象（variable object, VO）在该EC中定义的所有变量和函数都存放在其对应的VO中，解析器在处理数据的时候就会访问这个内部对象</p>
</blockquote>
<figure class="highlight ada"><table><tr><td class="code"><pre><div class="line">VO: &#123;</div><div class="line">  // 上下文中的数据 (变量声明（var）, 函数声明（FD), 函数形参（<span class="keyword">function</span> <span class="title">arguments）)</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>进入执行上下文时，VO的初始化过程具体如下：</li>
</ol>
<ul>
<li><p>函数的形参（当进入函数执行上下文时）<br>—— 变量对象的一个属性，其属性名就是形参的名字，其值就是实参的值；对于没有传递的参数，其值为undefined</p>
</li>
<li><p>函数声明（FunctionDeclaration, FD） —— 变量对象的一个属性，其属性名和值都是函数对象创建出来的；如果变量对象已经包含了相同名字的属性，则替换它的值</p>
</li>
<li><p>变量声明（var，VariableDeclaration） —— 变量对象的一个属性，其属性名即为变量名，其值为undefined;如果变量名和已经声明的函数名或者函数的参数名相同，则不会影响已经存在的属性。</p>
</li>
</ul>
<ol>
<li>执行代码阶段时，VO中的一些属性undefined值将会确定。</li>
</ol>
<ul>
<li>AO(活动对象，Active Object)</li>
</ul>
<blockquote>
<p>AO是在进入函数的执行上下文时创建的，并为该对象初始化一个arguments属性，该属性的值为Arguments对象。<br>在一个函数对象被调用的时候，会创建一个活动对象(也就是一个对象), 然后对于每一个函数的形参，都命名为该活动对象的命名属性, 然后将这个活动对象做为此时的作用域链(scope chain)最前端, 并将这个函数对象的[[scope]]加入到scope chain中</p>
</blockquote>
<figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">AO = &#123;</div><div class="line"><span class="symbol">  arguments:</span> &#123;</div><div class="line"><span class="symbol">    callee:</span>,</div><div class="line"><span class="symbol">    length:</span>,</div><div class="line">    properties-indexes: <span class="comment">//函数传参参数值</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="eg-1-javascript-执行环境，变量对象，作用域链"><a href="#eg-1-javascript-执行环境，变量对象，作用域链" class="headerlink" title="eg_1 javascript 执行环境，变量对象，作用域链"></a>eg_1 <a href="http://segmentfault.com/a/1190000000533094" target="_blank" rel="external">javascript 执行环境，变量对象，作用域链</a></h4><figure class="highlight abnf"><table><tr><td class="code"><pre><div class="line">alert(x)<span class="comment">; // function</span></div><div class="line"></div><div class="line">var x = <span class="number">10</span><span class="comment">;</span></div><div class="line">alert(x)<span class="comment">; // 10</span></div><div class="line"></div><div class="line"><span class="attribute">x</span> = <span class="number">20</span><span class="comment">;</span></div><div class="line"></div><div class="line">function x() &#123;&#125;<span class="comment">;</span></div><div class="line"></div><div class="line">alert(x)<span class="comment">; // 20</span></div></pre></td></tr></table></figure>
<p>进入执行上下文时，<br><figure class="highlight applescript"><table><tr><td class="code"><pre><div class="line">ECObject=&#123;</div><div class="line">  VO:&#123;</div><div class="line">    x:&lt;<span class="keyword">reference</span> <span class="keyword">to</span> FunctionDeclaration <span class="string">"x"</span>&gt;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>执行代码时：<br><figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">ECObject=&#123;</div><div class="line"><span class="symbol">  VO:</span>&#123;</div><div class="line"><span class="symbol">    x:</span><span class="number">20</span> <span class="comment">//与函数x同名，替换掉，先是10，后变成20</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>在进入上下文的时候，VO会被填充函数声明； 同一阶段，还有变量声明“x”，但是，正如此前提到的，变量声明是在函数声明和函数形参之后，并且，变量声明不会对已经存在的同样名字的函数声明和函数形参发生冲突。</p>
</blockquote>
<h4 id="eg-1-1"><a href="#eg-1-1" class="headerlink" title="eg_1.1"></a>eg_1.1</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> c = <span class="number">10</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  <span class="keyword">var</span> e = <span class="function"><span class="keyword">function</span> <span class="title">_e</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">  (<span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">test(<span class="number">10</span>); <span class="comment">// call</span></div></pre></td></tr></table></figure>
<p>当进入test(10)的执行上下文时，它的AO为：<br><figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">testEC=&#123;</div><div class="line"><span class="symbol">    AO:</span>&#123;</div><div class="line"><span class="symbol">        arguments:</span>&#123;</div><div class="line"><span class="symbol">            callee:</span>test</div><div class="line"><span class="symbol">            length:</span><span class="number">1</span>,</div><div class="line">            <span class="number">0</span>:<span class="number">10</span></div><div class="line">        &#125;,</div><div class="line"><span class="symbol">        a:</span><span class="number">10</span>,</div><div class="line"><span class="symbol">        c:</span>undefined,</div><div class="line"><span class="symbol">        d:</span><span class="params">&lt;reference to FunctionDeclaration "d"&gt;</span>,</div><div class="line"><span class="symbol">        e:</span>undefined</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>在建立阶段，VO除了arguments，函数的声明，以及参数被赋予了具体的属性值，其它的变量属性默认的都是undefined。函数表达式不会对VO造成影响，因此，(function x() {})并不会存在于VO中。</p>
</blockquote>
<p>当执行test(10)时，它的AO为：<br><figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">testEC=&#123;</div><div class="line"><span class="symbol">    AO:</span>&#123;</div><div class="line"><span class="symbol">        arguments:</span>&#123;</div><div class="line"><span class="symbol">            callee:</span>test,</div><div class="line"><span class="symbol">            length:</span><span class="number">1</span>,</div><div class="line">            <span class="number">0</span>:<span class="number">10</span></div><div class="line">        &#125;,</div><div class="line"><span class="symbol">        a:</span><span class="number">10</span>,</div><div class="line"><span class="symbol">        c:</span><span class="number">10</span>,</div><div class="line"><span class="symbol">        d:</span><span class="params">&lt;reference to FunctionDeclaration "d"&gt;</span>,</div><div class="line"><span class="symbol">        e:</span><span class="params">&lt;reference to FunctionDeclaration "e"&gt;</span></div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<ul>
<li>作用域</li>
</ul>
<blockquote>
<p>作用域就是变量和函数的可访问范围，控制着变量和函数的可见性与生命周期，在JavaScript中变量的作用域有全局作用域和局部作用域。</p>
</blockquote>
<ul>
<li>[[scope]]属性</li>
</ul>
<blockquote>
<p>在JavaScript中，函数也是对象，实际上，JavaScript里一切都是对象。函数对象和其它对象一样，拥有可以通过代码访问的属性和一系列仅供JavaScript引擎访问的内部属性。其中一个内部属性是[[Scope]]，该内部属性包含了函数被创建的作用域中对象的集合，这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。</p>
<p>[[Scope]]是一个包含了所有上层变量对象的分层链，它属于当前函数上下文，并在函数创建的时候，保存在函数中。</p>
<p>[[Scope]]是在函数创建的时候保存起来的——静态的（不变的），只有一次并且一直都存在——直到函数销毁。</p>
</blockquote>
<h4 id="eg1-2"><a href="#eg1-2" class="headerlink" title="eg1.2"></a>eg1.2</h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> x=<span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">var</span> y=<span class="number">20</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> x+y;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上示例中，f2的[[scope]]属性可以表示如下：<br><figure class="highlight lua"><table><tr><td class="code"><pre><div class="line">f2.<span class="string">[[scope]]</span>=[</div><div class="line">  f2OuterContext.VO</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>而f2的外部EC的所有上层变量对象包括了f1的活跃对象f1Context.AO，再往外层的EC，就是global对象了。<br>所以，具体我们可以表示如下：<br><figure class="highlight lua"><table><tr><td class="code"><pre><div class="line">f2.<span class="string">[[scope]]</span>=[</div><div class="line">  f1Context.AO,</div><div class="line">  globalContext.VO</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>对于EC执行环境是函数来说，那么它的Scope表示为：<br><figure class="highlight matlab"><table><tr><td class="code"><pre><div class="line">functionContext.Scope=functionContext.AO+<span class="function"><span class="keyword">function</span>.<span class="params">[[scope]</span>]</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>以上代码的表示，也体现了[[scope]]和Scope的差异，Scope是EC的属性，而[[scope]]则是函数的静态属性。</p>
</blockquote>
<p>对于以上的代码EC，我们可以给出其Scope的表示：<br><figure class="highlight lua"><table><tr><td class="code"><pre><div class="line">exampelEC=&#123;</div><div class="line">  Scope:[</div><div class="line">    f2Context.AO+f2.<span class="string">[[scope]]</span>,</div><div class="line">    f1.context.AO+f1.<span class="string">[[scope]]</span>,</div><div class="line">    globalContext.VO</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>scope chain(作用域链)</li>
</ul>
<blockquote>
<p>在执行上下文的作用域中查找变量的过程被称为标识符解析(indentifier resolution)，这个过程的实现依赖于函数内部另一个同执行上下文相关联的对象——作用域链。作用域链是一个有序链表，其包含着用以告诉JavaScript解析器一个标识符到底关联着哪一个变量的对象。而每一个执行上下文都有其自己的作用域链。</p>
<p>作用域链其实就是对执行上下文EC中的变量对象VO|AO有序访问的链表。能按顺序访问到VO|AO，就能访问到其中存放的变量和函数的定义。</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><div class="line">Scope chain = AO|VO + <span class="string">[[Scope]]</span></div></pre></td></tr></table></figure>
<ul>
<li>在一个函数被定义的时候, 会将它定义时刻的scope chain链接到这个函数对象的[[scope]]属性.</li>
<li>在一个函数对象被调用的时候，会创建一个活动对象(也就是一个对象), 然后对于每一个函数的形参，都命名为该活动对象的命名属性, 然后将这个活动对象做为此时的作用域链(scope chain)最前端, 并将这个函数对象的[[scope]]加入到scope chain中</li>
</ul>
<h4 id="eg-2-Javascript作用域原理"><a href="#eg-2-Javascript作用域原理" class="headerlink" title="eg_2: Javascript作用域原理"></a>eg_2: <a href="http://www.laruence.com/2009/05/28/863.html" target="_blank" rel="external">Javascript作用域原理</a></h4><figure class="highlight go"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="function"><span class="keyword">func</span> = <span class="title">function</span><span class="params">(lps, rps)</span></span>&#123;</div><div class="line">          <span class="keyword">var</span> name = <span class="string">'laruence'</span>;</div><div class="line">          ........</div><div class="line">     &#125;</div><div class="line">     <span class="function"><span class="keyword">func</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure>
<h4 id="过程："><a href="#过程：" class="headerlink" title="过程："></a>过程：</h4><ol>
<li>在执行func的定义语句的时候, 会创建一个这个函数对象的[[scope]]属性 并将这个[[scope]]属性, 链接到定义它的作用域链上, 此时因为func定义在全局环境, 所以此时的[[scope]]只是指向全局活动对象window active object.</li>
<li>在调用func的时候, 会创建一个活动对象(假设为aObj, 由JS引擎预编译时刻创建)，并创建arguments属性, 然后会给这个对象添加俩个命名属性aObj.lps, aObj.rps; 对于每一个在这个函数中申明的局部变量和函数定义, 都作为该活动对象的同名命名属性.</li>
<li>然后将调用参数赋值给形参数，对于缺少的调用参数，赋值为undefined</li>
<li>然后将这个活动对象做为scope chain的最前端, 并将func的[[scope]]属性所指向的定义func时候的顶级活动对象, 加入到scope chain.</li>
</ol>
<p><img src="/images/scope-chain-2016-08-04.jpeg" alt="pic1"></p>
<h4 id="eg-3-JavaScript作用域链"><a href="#eg-3-JavaScript作用域链" class="headerlink" title="eg_3: JavaScript作用域链"></a>eg_3: <a href="http://www.cnblogs.com/dolphinX/p/3280876.html" target="_blank" rel="external">JavaScript作用域链</a></h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//在函数a创建的时候它的作用域链填入全局对象,全局对象中有所有全局变量</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">(x,y)</span></span>&#123;</div><div class="line">            <span class="keyword">var</span> b=x+y;</div><div class="line">            <span class="keyword">return</span> b;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p><img src="http://images.cnitblog.com/blog/349217/201308/25155221-c777cdb6d3b24dd5972f65e4d262f90a.png" alt="pic2"><br><figure class="highlight ebnf"><table><tr><td class="code"><pre><div class="line"><span class="attribute">var tatal</span>=a(5,10);</div></pre></td></tr></table></figure></p>
<p>var total=a(5,10);语句的作用域链如下<br><img src="http://images.cnitblog.com/blog/349217/201308/25155227-d0d657caeeea4021ad4d51164fea6ed4.png" alt="pic3"></p>
<h4 id="eg-4-JavaScript-开发进阶：理解-JavaScript-作用域和作用域链"><a href="#eg-4-JavaScript-开发进阶：理解-JavaScript-作用域和作用域链" class="headerlink" title="eg_4: JavaScript 开发进阶：理解 JavaScript 作用域和作用域链"></a>eg_4: <a href="http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html" target="_blank" rel="external">JavaScript 开发进阶：理解 JavaScript 作用域和作用域链</a></h4><p>当一个函数创建后，它的作用域链会被创建此函数的作用域中可访问的数据对象填充。例如定义下面这样一个函数：<br><figure class="highlight scilab"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(num1,num2)</span> &#123;</span></div><div class="line">    var <span class="built_in">sum</span> = num1 + num2;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在函数add创建时，它的作用域链中会填入一个全局对象，该全局对象包含了所有全局变量<br><img src="http://pic002.cnblogs.com/images/2011/36987/2011090414435366.jpg" alt="pic4"><br>函数add的作用域将会在执行时用到。<br><code>var total = add(5,10);</code><br>这些值按照它们出现在函数中的顺序被复制到运行期上下文的作用域链中。它们共同组成了一个新的对象，叫“活动对象(activation object)”，该对象包含了函数的所有局部变量、命名参数、参数集合以及this，然后此对象会被推入作用域链的前端，当运行期上下文被销毁，活动对象也随之销毁。新的作用域链如下图所示：<br><img src="http://pic002.cnblogs.com/images/2011/36987/2011090414444843.jpg" alt="pic5"></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="external">学习Javascript闭包（Closure）</a></li>
<li><a href="http://blog.jobbole.com/81011/" target="_blank" rel="external">作用域链相关的问题</a></li>
<li><a href="http://weizhifeng.net/javascript-the-core.html" target="_blank" rel="external">JavaScript核心</a></li>
<li><a href="http://segmentfault.com/a/1190000000533094" target="_blank" rel="external">javascript 执行环境，变量对象，作用域链</a></li>
<li><a href="http://www.laruence.com/2009/05/28/863.html" target="_blank" rel="external">Javascript作用域原理</a></li>
<li><a href="http://www.cnblogs.com/dolphinX/p/3280876.html" target="_blank" rel="external">JavaScript作用域链</a></li>
<li><a href="http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html" target="_blank" rel="external">JavaScript 开发进阶：理解 JavaScript 作用域和作用域链</a></li>
<li><a href="http://www.cnblogs.com/georgewing/archive/2009/09/29/1576641.html" target="_blank" rel="external">PPK 谈 JavaScript 的 this 关键字</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS中神奇的负边距]]></title>
      <url>http://iminyao.com/2015/04/26/negative-margin/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="理解负边距核心"><a href="#理解负边距核心" class="headerlink" title="理解负边距核心"></a>理解负边距核心</h3><ol>
<li><p>在margin属性中一共有两类参考线，top和left的参考线属于一类，right和bottom的参考线属于另一类。</p>
</li>
<li><p>top和left是以外元素为参考(所谓外元素就是本元素的边界元素,再白话点的解释就是元素的紧邻元素)，right和bottom是以元素本身为参考,确切含义是指以自身为参考来影响周围元素的位置（实质即为影响下边和右边相邻元素的参考线）。</p>
</li>
<li><p>margin的位移方向是指margin数值为正值时候的情形，如果是负值则位移方向相反。(如下图)</p>
</li>
</ol>
<h3 id="margin的解析逻辑："><a href="#margin的解析逻辑：" class="headerlink" title="margin的解析逻辑："></a>margin的解析逻辑：</h3><blockquote>
<p>top 以 containing block 的 <strong>content 上边</strong> 或者 <strong>垂直上方相连元素 margin 的下边</strong>为参考线垂直向下位移；left 以 containing block 的 content 左边或者水平左方相连元素 margin 的右边为参考线水平向右位移。right 以元素本身的 border 右边为参考线水平向右位移；bottom 以元素本身的border 下边为参考线垂直向下位移。</p>
</blockquote>
<p> <a href="http://www.hicss.net/wp-content/uploads/2011/marginMoveDefault.gif" target="_blank" rel="external">http://www.hicss.net/wp-content/uploads/2011/marginMoveDefault.gif</a></p>
<h3 id="eg"><a href="#eg" class="headerlink" title="eg:"></a>eg:</h3> <figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"example"</span>&gt;</span>example元素：margin参考线举例说明文字，请查看此元素由于margin的变化所移动的位移量。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"normal"</span>&gt;</span>一个普通的Box<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">        * &#123;</div><div class="line">            <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">            <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="selector-class">.wrap</span> &#123;</div><div class="line">            <span class="attribute">width</span>: <span class="number">400px</span>;</div><div class="line">            <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#aaa</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="selector-class">.example</span> &#123;</div><div class="line">            <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">            <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">            <span class="attribute">background</span>: <span class="number">#CCCCFF</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="selector-class">.normal</span> &#123;</div><div class="line">            <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">            <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">            <span class="attribute">background</span>: <span class="number">#CCE8CF</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="selector-class">.example</span> &#123;</div><div class="line">            <span class="attribute">margin</span>: -<span class="number">10px</span> <span class="number">0px</span> -<span class="number">30px</span> <span class="number">40px</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"> ``` </div><div class="line">  </div><div class="line">### 分析：</div><div class="line"></div><div class="line">  &gt; example元素上边和左边的边界元素即为wrap父元素，wrap父元素为基准点，example的margin-top为-10px，想象下如果这里margin-top为+10px会什么情况，没错如果为+10px，example元素相对于wrap父元素边缘为基准，那么example元素会同wrap父元素10px产生间隙边距，那么反过来，margin-tip:-10px;还是与wrap父元素边缘为基准，反过来向上推10px的距离位置。</div><div class="line"></div><div class="line"></div><div class="line"> &gt; example元素的margin-right和margin-bottom，由上文得知这俩个值是以元素本身为参考。什么叫以元素本身为参考呢，确切含义是指以自身为参考来影响周围元素的位置（实质即为影响下边和右边相邻元素的参考线）。**这里的margin-bottom为-30px，对于其自身位置没有任何变化，**但是对于其下方元素normal元素产生了极大的影响，因为normal元素的上边界元素即为example元素，根据example元素边界来判定自身位置，想象下如果example元素margin-bottom为+30px，那么example元素将隔开下方的normal元素，反之为-30px，下方normal元素由于example参考线内凹，导致了normal元素自个儿身不由己的被“提”了上去了。这就是以自身为参考影响周围元素位置的含义。</div><div class="line"></div><div class="line">### 结论：</div><div class="line"></div><div class="line">&gt; 当margin四个值都为正数值的话，那么margin按照正常逻辑同周围元素产生边距。**当元素margin的top和left是负值时会引起元素的向上或向左位置移动。而当元素margin的bottom和right是负值时会影响右边和下边相邻元素的参考线。**</div><div class="line"></div><div class="line">### 负边距在普通文档流中的作用和效果 ###</div><div class="line">1.  负的边距好像能减小元素在文档流中的尺寸一样，但事实上，它的尺寸大小并没变，只是文档流在计算元素位置的时候，会认为负边距把元素的尺寸减小了，因为位置也就发生变化了。</div><div class="line"></div><div class="line">2. 在文档流中，元素的最终边界是由margin决定的，margin为负的时候就相当于元素的边界向里收，文档流认的只是这个边界，不会管你实际的尺寸是多少。</div><div class="line"></div><div class="line">### 负边距对没有设置宽度（包括auto）元素的影响 [demo](http://code.w3ctech.com/detail/2167)</div><div class="line"></div><div class="line">&gt; 如果没有设定width属性，设定负margin-left/right会将元素拖向对应的方向，并增加宽度，此时的margin的作用就像padding一样。</div><div class="line"></div><div class="line">### 负边距定位与相对定位的区别 ###</div><div class="line"></div><div class="line">&gt; 通过相对定位偏移后，其仍然会坚守着它原来占据的空间，不会让文档流的其它元素乘虚而入。而通过负边距进行偏移的元素，它会放弃偏移前占据的空间，这样它后面文档流中的其它元素就会“流”过来填充这部分空间。</div><div class="line"></div><div class="line">### 理解负边距要点： ###</div><div class="line"></div><div class="line">&gt; 先确定设置负边距的那条边的位置</div><div class="line"></div><div class="line">## 负边距应用</div><div class="line"></div><div class="line">### Tab选项卡([demo](http://code.w3ctech.com/detail/2158))</div></pre></td></tr></table></figure>
<pre><code>&lt;style type=&quot;text/css&quot;&gt;
    ul {
        list-style: none;
        margin: 0px;
        padding: 0px;
    }
    .demoTab {
        width: 400px;
        font: 14px/1.5 Microsoft YaHei, verdana, Helvetica, Arial, sans-serif;
    }

    .demoTab .demoTabHd {
        margin-bottom: -1px;
        border: 1px solid #6C92AD;
        border-bottom: none;
        background: #EAF0FD;
    }

    .demoTab .demoTabNav {
        height: 28px;
        overflow: hidden;
        *zoom: 1;
    }

    .demoTab .demoTabList {
        float: left;
        margin-left: -1px;
        padding: 0 22px;
        line-height: 28px;
        border-left: 1px solid #6C92AD;
        border-right: 1px solid #6C92AD;
        font-weight: bold;
        color: #005590;
        text-align: center;
        cursor: pointer;
    }

    .demoTab .demoTabList.current {
        position: relative;
        background: #fff;
    }

    .demoTab .demoTabBd {
        border: 1px solid #6C92AD;
    }

    .demoTab .demoTabBd .roundBox {
        padding: 15px;
    }

    .demoTab .demoTabContent {
        display: none;
    }

    .demoTab .demoTabContent.current {
        display: block;
    }
&lt;/style&gt;
</code></pre><p></p>
<p><body><br>    <div id="demoTab" class="demoTab"><br>        <div class="demoTabHd"><br>            <ul class="demoTabNav clearfix"><br>                <li class="demoTabList current">前端</li><br>                <li class="demoTabList">实战</li><br>                <li class="demoTabList">交互</li><br>                <li class="demoTabList">优化</li><br>            </ul><br>        </div><br>        <div class="demoTabBd"><br>            <div class="roundBox"><br>                <div class="demoTabContent current"><br>                    这是第一个选项卡的内容，现如今，负margin技术的应用可谓越来越广，任一个大型站点惊鸿一瞥之下都会有其身影所在。个人认为负margin技术是学习css路上必不可缺少的课题之一，许多高级应用及疑难杂症修复都可以使用负margin技术进行实现。<br>                </div><br>                <div class="demoTabContent"><br>                    这是第二个选项卡的内容，HICSS，这里是一个纯粹的前端技术分享网站，也是我记录工作体会和生活琐事的地方。理论为辅，实战为主，专注于前端开发。相信你在这里能够发现自己需要的东西，同时也希望你能前来一起分享你的知识。谢谢！<br>                </div><br>                <div class="demoTabContent"><br>                    这是第三个选项卡的内容，HICSS，互联网的最大意义就是分享信息，我很乐意将自己在工作与学习中遇到的问题与解决经验与大家分享，同时还总结、归纳了一部分网上不错的学习资源来让大家更集中地获取信息，这个平台就是现在您所看到的HiCSS。<br>                </div><br>                <div class="demoTabContent"><br>                    这是第四个选项卡的内容，据我所知至今没有一套完整的关于负margin专题研究的文章。有也仅仅是偏理论或者偏实例，理论终究是理论，学以致用才是根本，而有了实例你还得知道其原理，授人鱼不如授人以渔。这些都是文字文字文字文字文字。<br>                </div><br>            </div><br>        </div><br>    </div><br><figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">#### 分析：</div><div class="line">&gt; 第二行的margin-bottom:<span class="number">-1</span>px;使下方的正文部分向上“提”了<span class="number">1</span>px的距离，从而达到了鼠标上移后选项卡白色遮住下方黑色边框的效果（注：由于IE不是符合W3C标准，所以当鼠标移到选项卡上时需要添加一个额外属性position:relative;来修复IE不覆盖下方边框的这个Bug）。第四行的margin-left:<span class="number">-1</span>px;的目的是让四个选项卡向左移动<span class="number">1</span>px的距离，达到左右都只有一条分割线的效果。</div><div class="line"></div><div class="line">### 负位移([demo](http:<span class="comment">//code.w3ctech.com/detail/2159))</span></div></pre></td></tr></table></figure></body></p>
<p><div class="demoSpecItem"><br>    <a href="javascript:void(0)" class="demoItemPic" target="_blank" rel="external"><br>        <img width="200" height="166" src="item.jpg" alt="toygers kittens"><br>    </a><br>    <span class="demoIcon"><img width="54" height="54" src="buyInSoon.png" alt="icon"></span><br></div><br>        .demoSpecItem {<br>            width: 212px;<br>            min-height: 178px;<br>            _height: 178px;<br>        }</p>
<pre><code>.demoSpecItem .demoItemPic {
    display: block;
    text-align: center;
}

.demoItemPic img {
    padding: 5px;
    border: 1px solid #ccc;
}

.demoSpecItem .demoIcon {
    display: block;
    margin: -170px 0 0 150px;
}
</code></pre><p>```</p>
<h4 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h4><blockquote>
<p>上面那个类似于商城热销商品邮戳效果其实也是由负margin实现的，把以往使用的relative/absolute这样的“危险”属性代替为相对“温和”的margin属性。核心在于小的邮戳图片利用负margin-top向上移动，达到类似absolute的叠加效果。</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol>
<li><a href="http://www.cnblogs.com/2050/archive/2012/08/13/2636467.html" target="_blank" rel="external">CSS布局奇淫巧计之-强大的负边距</a></li>
<li><a href="http://www.hicss.net/i-know-you-do-not-know-the-negative-margin/" target="_blank" rel="external">我知道你不知道的负Margin</a></li>
<li><a href="http://www.planabc.net/2007/03/18/css_attribute_margin/" target="_blank" rel="external">由浅入深漫谈margin属性</a></li>
<li><a href="http://www.smashingmagazine.com/2009/07/the-definitive-guide-to-using-negative-margins/" target="_blank" rel="external">The Definitive Guide to Using Negative Margins</a></li>
<li><a href="http://www.hicss.net/i-know-you-do-not-know-the-negative-margin/" target="_blank" rel="external">http://www.hicss.net/i-know-you-do-not-know-the-negative-margin/</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS实现水平垂直居中的常见方式]]></title>
      <url>http://iminyao.com/2015/04/25/CSS-center/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h2><ul>
<li>如果需要居中的元素为常规流中inline元素，为父元素设置text-align: center;即可实现</li>
<li><p>如果需要居中的元素为常规流中block元素，1）为元素设置宽度，2）设置左右margin为auto。3）IE6下需在父元素上设置text-align: center;,再给子元素恢复需要的值</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"content"</span>&gt;</div><div class="line">    aaaaaa aaaaaa <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> </div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">        <span class="attribute">background</span>: <span class="number">#DDD</span>;</div><div class="line">        <span class="attribute">text-align</span>: center; <span class="comment">/* 3 IE */</span></div><div class="line">    &#125;</div><div class="line">    <span class="selector-class">.content</span> &#123;</div><div class="line">        <span class="attribute">width</span>: <span class="number">500px</span>;      <span class="comment">/* 1 */</span></div><div class="line">        <span class="attribute">text-align</span>: left;  <span class="comment">/* 3 IE */</span></div><div class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto;    <span class="comment">/* 2 */</span></div><div class="line"></div><div class="line">        <span class="attribute">background</span>: purple;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>如果需要居中的元素为浮动元素，1）为元素设置宽度，2）position: relative;，3）浮动方向偏移量（left或者right）设置为50%，4）浮动方向上的margin设置为元素宽度一半乘以-1</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">    aaaaaa aaaaaa a a a a a a a a</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">        <span class="attribute">background</span>: <span class="number">#DDD</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-class">.content</span> &#123;</div><div class="line">        <span class="attribute">width</span>: <span class="number">500px</span>;         <span class="comment">/* 1 */</span></div><div class="line">        <span class="attribute">float</span>: left;</div><div class="line"></div><div class="line">        <span class="attribute">position</span>: relative;   <span class="comment">/* 2 */</span></div><div class="line">        <span class="attribute">left</span>: <span class="number">50%</span>;            <span class="comment">/* 3 */</span></div><div class="line">        <span class="attribute">margin-left</span>: -<span class="number">250px</span>;  <span class="comment">/* 4 */</span></div><div class="line"></div><div class="line">        <span class="attribute">background-color</span>: purple;</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li><p>如果需要居中的元素为绝对定位元素，1）为元素设置宽度，2）偏移量设置为50%，3）偏移方向外边距设置为元素宽度一半乘以-1   – <a href="http://code.w3ctech.com/detail/1554" target="_blank" rel="external">demo</a> </p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"content"</span>&gt;</div><div class="line">    aaaaaa aaaaaa <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> <span class="selector-tag">a</span> </div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line"></div><div class="line">&lt;style&gt;</div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">        <span class="attribute">background</span>: <span class="number">#DDD</span>;</div><div class="line">        <span class="attribute">position</span>: relative;  <span class="comment">// 可有可无，影响垂直方向</span></div><div class="line">    &#125;</div><div class="line">    <span class="selector-class">.content</span> &#123;</div><div class="line">        <span class="attribute">width</span>: <span class="number">800px</span>;</div><div class="line"></div><div class="line">        <span class="attribute">position</span>: absolute;</div><div class="line">        <span class="attribute">left</span>: <span class="number">50%</span>;</div><div class="line">        <span class="attribute">margin-left</span>: -<span class="number">400px</span>;  <span class="comment">/* == transform: translate(-50%, -50%); 变换移动;优点：事先不知宽度也可用   50%为自身尺寸的一半 */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">        <span class="attribute">background-color</span>: purple;</div><div class="line">    &#125;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>如果需要居中的元素为绝对定位元素，1）为元素设置宽度，2）设置左右偏移量都为0,3）设置左右外边距都为auto</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">    aaaaaa aaaaaa a a a a a a a a </div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">        <span class="attribute">background</span>: <span class="number">#DDD</span>;</div><div class="line">        <span class="attribute">position</span>: relative;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-class">.content</span> &#123;</div><div class="line">        <span class="attribute">width</span>: <span class="number">800px</span>;</div><div class="line"></div><div class="line">        <span class="attribute">position</span>: absolute;</div><div class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto;</div><div class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">        <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="attribute">background-color</span>: purple;</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h2><h3 id="Line-Height-Method-设置任意比字体大的line-height"><a href="#Line-Height-Method-设置任意比字体大的line-height" class="headerlink" title="Line-Height Method**(设置任意比字体大的line-height)"></a>Line-Height Method**(设置任意比字体大的line-height)</h3><blockquote>
<p>很多文章中会写还要设置相等的height，其实不设置也可以，可以在只有line-height不起作用时加上height试试</p>
</blockquote>
<ul>
<li><p>原理：</p>
<blockquote>
<p>By default equal space will be given above and below the text and so the text will sit in the vertical center.</p>
</blockquote>
<pre><code><figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">        &lt;<span class="selector-tag">div</span> id=<span class="string">"child"</span>&gt;Text here&lt;/div&gt;</div><div class="line"><span class="selector-id">#child</span> &#123;</div><div class="line"> 	 	<span class="attribute">line-height</span>: <span class="number">200px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre></li>
</ul>
<p><img src="http://www.vanseodesign.com/blog/wp-content/uploads/2011/07/line-height.png" alt="1"></p>
<h3 id="Centering-an-Image-with-Line-Height-demo"><a href="#Centering-an-Image-with-Line-Height-demo" class="headerlink" title="Centering an Image with Line-Height demo"></a>Centering an Image with Line-Height <a href="http://code.w3ctech.com/detail/2022" target="_blank" rel="external">demo</a></h3><pre><code>/* html */
&lt;div id=&quot;parent&quot;&gt;
&lt;img src=&quot;image.png&quot; alt=&quot;&quot; /&gt;
&lt;/div&gt;

/* css */
#parent {
line-height: 200px;    //任意比图片高度大的值
}

#parent img {
    vertical-align: middle;
}
</code></pre><h3 id="CSS-Table-Method"><a href="#CSS-Table-Method" class="headerlink" title="CSS Table Method"></a>CSS Table Method</h3><figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">'wrap'</span>&gt;  </div><div class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">'ele'</span>&gt;</div><div class="line">      &lt;<span class="selector-tag">div</span> class=<span class="string">"ele-inner"</span>&gt;居中居中居中居中居中居中居中居中&lt;br&gt;居中居中居中居中居中居中居中居中&lt;br&gt;居中居中居中居中居中居中居中居中居中居中&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">.wrap&#123;</div><div class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</div><div class="line">  <span class="attribute">display</span>: table;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</div><div class="line">&#125;</div><div class="line">.ele&#123;</div><div class="line">  <span class="attribute">text-align</span>:center;</div><div class="line">  <span class="attribute">vertical-align</span>: middle;</div><div class="line">  <span class="attribute">display</span>:table-cell;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>扩展性：无论子元素还是父元素，元素宽高改变，子元素仍然居中</li>
<li>兼容性：由于display:table-cell的原因，IE6\7不兼容</li>
<li>优缺点：这种方法扩展性还可以，但是无论父元素还是子元素都不能浮动，如果父元素浮动，元素就只能水平居中，如果子元素浮动，则子元素按照浮动的方向走</li>
</ul>
<p><img src="http://www.vanseodesign.com/blog/wp-content/uploads/2011/07/table-cell.png" alt="table"></p>
<h3 id="Absolute-Positioning-and-Stretching"><a href="#Absolute-Positioning-and-Stretching" class="headerlink" title="Absolute Positioning and Stretching"></a>Absolute Positioning and Stretching</h3><h4 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h4><blockquote>
<p>absolute性质的盒子，它的包含块的宽度等于它的盒模型的宽度 + left + right值，包含块的高度同理  </p>
<p>如果想让内容块在贴近侧边的过程中保持水平居中，可以使用right: 0; left: auto; 让内容贴在右侧，或者使用left: 0; right: auto; 使内容贴在左侧。top和bottom同理</p>
</blockquote>
<ul>
<li>扩展性：父元素宽高改变，子元素仍然居中，但是子元素只能固定宽高</li>
<li>兼容性：主流浏览器均支持，IE6不支持</li>
<li><p>优缺点：这种对子元素水平垂直居中的方法兼容性很好，但是缺点是其一它需要让父元素相对定位才行，其二子元素必须为固定宽高</p>
<pre><code>/* html */
&lt;div id=&quot;parent&quot;&gt;
&lt;div id=&quot;child&quot;&gt;Content here&lt;/div&gt;
&lt;/div&gt;

/* css */
#parent {
position: relative;
background: red;
height: 100px;
}

#child {
position: absolute;
top: 0;
bottom: 0;
left: 0;
right: 0;
width: 50%;       // 必须设置子元素高宽
height: 30%;
margin: auto;
background: gray;
}
</code></pre></li>
</ul>
<p><img src="http://www.vanseodesign.com/blog/wp-content/uploads/2011/07/positioning-margin.png" alt="Absolute Positioning and Stretching"></p>
<h3 id="Equal-Top-and-Bottom-Padding"><a href="#Equal-Top-and-Bottom-Padding" class="headerlink" title="Equal Top and Bottom Padding"></a>Equal Top and Bottom Padding</h3><blockquote>
<p><code>margin</code>属性也可以</p>
<pre><code>/* html */
&lt;div id=&quot;parent&quot;&gt;
&lt;div id=&quot;child&quot;&gt;Content here&lt;/div&gt;
&lt;/div&gt;
</code></pre></blockquote>
<pre><code>/* css */
#parent {
padding: 5% 0;
background:red;
}

#child {
background:gray;
}
</code></pre><p><img src="http://www.vanseodesign.com/blog/wp-content/uploads/2011/07/padding.png" alt="Equal Top and Bottom Padding"></p>
<h3 id="Floater-Div"><a href="#Floater-Div" class="headerlink" title="Floater Div"></a>Floater Div</h3><blockquote>
<p>包含块总height为<code>250px``floater</code>块高度为<code>125px</code>对<code>floater</code>块设置<code>margin-bottom:-50px</code>,使得<code>child</code>元素块往上移动<code>50px</code>至距顶部<code>75px</code>处，由于<code>child</code>块本身高度为<code>100px</code>所以此时其其距底部也为<code>75px</code>(如果要兼容ie6的话，此方法最合适)</p>
</blockquote>
<pre><code>/* html */
&lt;div id=&quot;parent&quot;&gt;
&lt;div id=&quot;floater&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;child&quot;&gt;Content here&lt;/div&gt;
&lt;/div&gt;

/* css */
#parent {height: 250px;
        background:red;            
    }

#floater {
    float: left;
height: 50%;
width: 100%;
margin-bottom: -50px;
}

#child {
clear: both;
   height: 100px;
background:gray;
}
</code></pre><p><img src="http://www.vanseodesign.com/blog/wp-content/uploads/2011/07/floater-div.png" alt="6"></p>
<h3 id="7-Flex布局"><a href="#7-Flex布局" class="headerlink" title="7.Flex布局"></a><strong>7.Flex布局</strong></h3><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-class">.vertical-container</span> &#123;</div><div class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</div><div class="line">  <span class="attribute">display</span>: -webkit-flex;</div><div class="line">  <span class="attribute">display</span>:         flex;</div><div class="line">  <span class="attribute">-webkit-align-items</span>: center;</div><div class="line">          <span class="attribute">align-items</span>: center;</div><div class="line">  <span class="attribute">-webkit-justify-content</span>: center;</div><div class="line">          <span class="attribute">justify-content</span>: center;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://cloud.githubusercontent.com/assets/4004044/7333162/674be7e8-eb96-11e4-8d40-ec152e49a109.png" alt="2015-04-25_215939"></p>
<h3 id="8-CSS3-calc"><a href="#8-CSS3-calc" class="headerlink" title="8.CSS3 calc()"></a><strong>8.CSS3 calc()</strong></h3><ul>
<li>兼容性：兼容性差，只有最新浏览器才支持</li>
<li>扩展性：高宽不可扩展<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"m-demo"</span>&gt;</div><div class="line">    &lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">    <span class="selector-tag">html</span>,body&#123;</div><div class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    .m-demo&#123;</div><div class="line">        <span class="attribute">position</span>: relative;</div><div class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">        <span class="attribute">background-color</span>: <span class="number">#000000</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="selector-class">.m-demo</span> &gt; div&#123;</div><div class="line">        <span class="attribute">position</span>: absolute;</div><div class="line">        <span class="attribute">left</span>: calc(<span class="number">50%</span> - <span class="number">15%</span>);<span class="comment">//50%和15%都是相对于父元素的，所以意思就是先过去50%，再拉回来15%，而这个15%又刚好是父元素宽度一半</span></div><div class="line">        <span class="attribute">top</span>: calc(<span class="number">50%</span> - <span class="number">15%</span>);<span class="comment">//原理同上</span></div><div class="line">        <span class="attribute">width</span>: <span class="number">30%</span>;</div><div class="line">        <span class="attribute">height</span>: <span class="number">30%</span>;</div><div class="line">        <span class="attribute">background-color</span>: <span class="number">#FF0000</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">      <span class="comment">/*.m-demo &gt; div&#123;</span></div><div class="line">          position: absolute;//这种固定宽高的也是可以用calc计算的，原理同上</div><div class="line">          left: calc(50% - 400px /2);</div><div class="line">          top: calc(50% - 400px / 2);</div><div class="line">          width: 400px;</div><div class="line">          height: 400px;</div><div class="line">          background-color: #FF0000;</div><div class="line">      &#125;*/</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="图片-图标-表单与文字垂直居中"><a href="#图片-图标-表单与文字垂直居中" class="headerlink" title="图片/图标/表单与文字垂直居中"></a>图片/图标/表单与文字垂直居中</h2><ol>
<li><p>图片与文字(作为行内元素)：<code>vertical-align:middle</code></p>
 <figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	html code</span></div><div class="line">&lt;<span class="selector-tag">div</span> &gt;</div><div class="line">       &lt;<span class="selector-tag">img</span> src=<span class="string">"http://p3.music.126.net/H3sDNQLV3xymVQt5CYXXaw==/528865131917655.jpg?param=140y140"</span>&lt;<span class="selector-tag">a</span> href=<span class="string">""</span>&gt;找回密码&lt;/a&gt;</div><div class="line">   &lt;/div&gt;</div><div class="line"><span class="comment">// css code</span></div><div class="line"><span class="selector-tag">img</span> &#123;<span class="attribute">vertical-align</span>:middle;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>图片与文字（作为块元素(inline-block)）</p>
 <figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">// html code</span></div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"divs"</span>&gt;</div><div class="line">       &lt;<span class="selector-tag">div</span> class=<span class="string">"imgs"</span>&gt;&lt;<span class="selector-tag">img</span> src=<span class="string">"g"</span> alt=<span class="string">""</span>&gt;&lt;/div&gt;</div><div class="line">       &lt;<span class="selector-tag">div</span> class=<span class="string">"infos"</span>&gt;&lt;<span class="selector-tag">a</span> href=<span class="string">""</span>&gt;找回密码&lt;/a&gt;&lt;/div&gt;</div><div class="line">   &lt;/div&gt;</div><div class="line"><span class="comment">// css code</span></div><div class="line"><span class="selector-class">.divs</span> .imgs&#123;</div><div class="line">       <span class="attribute">display</span>: inline-block;</div><div class="line">       <span class="attribute">vertical-align</span>: middle;</div><div class="line">   &#125;</div><div class="line">   <span class="selector-class">.divs</span> .infos&#123;</div><div class="line">       <span class="attribute">display</span>: inline-block;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>将图片作为背景图片</p>
 <figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	html code</span></div><div class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"haokan"</span>&gt;</div><div class="line">       &lt;<span class="selector-tag">a</span> href=<span class="string">""</span>&gt;找回密码&lt;/a&gt;</div><div class="line">   &lt;/div&gt;</div><div class="line"><span class="comment">// code code</span></div><div class="line">.haokan&#123;</div><div class="line">       <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">       <span class="attribute">background-color</span>: red;</div><div class="line">       <span class="attribute">background</span>: url() no-repeat left center;</div><div class="line">       </div><div class="line">   &#125;</div><div class="line">   <span class="selector-class">.haokan</span> a&#123;</div><div class="line">           <span class="attribute">line-height</span>:<span class="number">50px</span>;</div><div class="line">           <span class="attribute">display</span>: block;</div><div class="line">           <span class="attribute">margin-left</span>: <span class="number">116px</span>;</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>图标/表单</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	html code </span></div><div class="line"><span class="comment">// 未对齐</span></div><div class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"icon middle"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>	</div><div class="line">Centered?</div><div class="line"><span class="comment">//	对齐</span></div><div class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"icon middle"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></div><div class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"middle"</span>&gt;Centered!<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">//	css code</span></div><div class="line">.icon   &#123; <span class="attr">display</span>: inline-block;</div><div class="line">            &#125;</div><div class="line"></div><div class="line"> .middle &#123; vertical-align: middle; &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://www.vanseodesign.com/css/vertical-centering/" target="_blank" rel="external">6种实现垂直居中的方法</a></li>
<li><a href="http://christopheraue.net/2014/03/05/vertical-align/" target="_blank" rel="external">Vertical-Align: All You Need To Know</a></li>
<li><a href="http://zh.learnlayout.com/flexbox.html" target="_blank" rel="external">Flex布局</a></li>
<li><a href="http://www.cnblogs.com/Dudy/p/4085292.html" target="_blank" rel="external">CSS元素水平垂直居中方法总结</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[DOM操作一览]]></title>
      <url>http://iminyao.com/2015/04/18/DOM/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><ol>
<li>Document</li>
<li>CharacterData<ul>
<li>Text</li>
<li>Comment(注释)</li>
</ul>
</li>
<li>Element</li>
<li>Attr</li>
</ol>
<h2 id="选取文档元素"><a href="#选取文档元素" class="headerlink" title="选取文档元素"></a>选取文档元素</h2><ol>
<li><p><strong>ID</strong></p>
<pre><code>var section1=document.getElemntById(&quot;section1&quot;);

//    通过ID查找多个元素
function getElements (/*ids...*/) {
    var elements={};
    for(var i=0;i&lt;arguments.length;i++) {
    var id=arguments[i];
    var elt=document.getElementById(id);
    if(elt == null)
        throw new Error(&quot;No element with id&quot; + id);
    elements[id]=elt;
    }
return elements;
}
</code></pre></li>
<li><p><strong>名字</strong></p>
<blockquote>
<p>name属性只在少数HTML元素有效，eg:表单、表单元素、<code>iframe&gt;</code> <code>&lt;img&gt;</code>，且XML不可用</p>
</blockquote>
<pre><code>var radioButtons=document.getElementsByName(&quot;favorite_color&quot;);    
</code></pre></li>
<li><p><strong>标签名</strong></p>
<pre><code>var spans=document.getElementsByTagName(&quot;span&quot;);
var html=document.getElementsByTagName(&quot;*&quot;);    //获取整个文档所有元素的NodeList对象
</code></pre></li>
<li><p><strong>快捷属性（历史遗留问题）</strong></p>
<blockquote>
<p>返回<code>HTMLCollection</code>对象</p>
</blockquote>
<ul>
<li>images     <code>&lt;img&gt;</code></li>
<li>forms    <code>&lt;form&gt;</code></li>
<li>links    <code>&lt;a&gt;</code></li>
<li>embeds,plugins    <code>&lt;embeds&gt;</code></li>
<li><p>scripts    <code>&lt;script&gt;</code></p>
<p>HTMLDocument对象特殊属性：</p>
<ul>
<li><code>document.body</code></li>
<li><code>document.head</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>CSS类</strong></p>
<pre><code>var log=document.getElementById(&quot;hello world&quot;); //匹配同时具备hello和world的class
</code></pre></li>
<li><p><strong>CSS选择器</strong></p>
<pre><code>var s = document.querySelectorAll(&quot;div #zipcode p[lang=&quot;fr&quot;]&quot;);
</code></pre></li>
</ol>
<h2 id="文档结构和遍历"><a href="#文档结构和遍历" class="headerlink" title="文档结构和遍历"></a>文档结构和遍历</h2><ol>
<li><h3 id="作为节点树-Node-文档的属性："><a href="#作为节点树-Node-文档的属性：" class="headerlink" title="作为节点树(Node)文档的属性："></a>作为节点树(Node)文档的属性：</h3><ul>
<li><code>parentNode</code> 父节点，Document对象返回<code>null</code></li>
<li><code>childNodes</code> 子节点(NodeList对象)</li>
<li><code>firstChild lastChild</code></li>
<li><code>nextSibling previousSibling</code> 兄弟节点的前一个和后一个</li>
<li><code>nodeType</code><ul>
<li>9 Document</li>
<li>1 Element</li>
<li>3 Text</li>
<li>8 Comment</li>
<li>11 DocumentFragment</li>
</ul>
</li>
<li><code>nodeValue</code> Text节点或Comment节点文本内容</li>
<li><code>nodeName</code>  元素标签名</li>
</ul>
</li>
</ol>
<ol>
<li><h3 id="作为元素树-Element-的文档的属性"><a href="#作为元素树-Element-的文档的属性" class="headerlink" title="作为元素树(Element)的文档的属性:"></a>作为元素树(Element)的文档的属性:</h3><ul>
<li><code>children</code> —— childNodes 返回NodeList对象</li>
<li><code>firstElementChild、lastElementChild</code> ——  firstChild lastChild</li>
<li><code>nextElementSibling、previousSibling</code> ——  nextSibling previousSibling</li>
<li><code>childElementCount</code></li>
</ul>
</li>
<li><h3 id="可移植的文档遍历函数"><a href="#可移植的文档遍历函数" class="headerlink" title="可移植的文档遍历函数"></a>可移植的文档遍历函数</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">*	返回元素e的n层祖先元素，如果不存在或不是Element，返回null</div><div class="line">*	nodeType属性返回值：</div><div class="line">*	9代表Document节点;1代码Element;3代表Text</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">parent</span> <span class="params">(e,n)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(n===<span class="literal">undefined</span>) n=<span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(n-- &amp;&amp; e) e=e.parentNode;</div><div class="line">	<span class="keyword">if</span>(!e || e.nodeType!=<span class="number">1</span>)</div><div class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">	<span class="keyword">return</span> e;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line">*	返回元素e的第n个兄弟元素</div><div class="line">*	n为正，返回后续的第n个兄弟元素</div><div class="line">*	n为负，返回前面的第n个兄弟元素</div><div class="line">*	n为零，返回e本身</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sibling</span> <span class="params">(e,n)</span> </span>&#123;		</div><div class="line">	<span class="keyword">while</span>(e &amp;&amp; n!==<span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">if</span>(n&gt;<span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">if</span>(e.nextElementSibling) e=e.nextElementSibling;</div><div class="line">			<span class="keyword">else</span>&#123;</div><div class="line">			<span class="keyword">for</span>(e=e.nextElementSibling;e&amp;&amp;e.nodeType!==<span class="number">1</span>;e=e.nextElementSibling)</div><div class="line">				<span class="comment">/* 空循环 */</span></div><div class="line">		&#125; </div><div class="line">		n--;</div><div class="line">		&#125; </div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">if</span>(e.previousElementSibling) e=previousElementSibling;</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				<span class="keyword">for</span>(e=e.previousElementSibling;e&amp;&amp;e.nodeType!==<span class="number">1</span>;e=e.previousElementSibling)</div><div class="line">			&#125;</div><div class="line">			n++;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> e;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">*	返回元素e的第n代子元素</div><div class="line">*	负值代表从后往前计数，0表示第一个子元素，-1代表最后一个，-2代码倒数第二个</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">child</span> <span class="params">(e,n)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(e.children) &#123;</div><div class="line">		<span class="keyword">if</span>(n&lt;<span class="number">0</span>) n += e.children.length;		<span class="comment">//转换负的n为数组索引</span></div><div class="line">		<span class="keyword">if</span>(n&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;				<span class="comment">//如果仍然为负，说明没有子元素</span></div><div class="line">		<span class="keyword">return</span> e.children[n];				<span class="comment">//返回指定子元素</span></div><div class="line">	&#125; </div><div class="line"></div><div class="line">	<span class="comment">// 如果e没有children数组</span></div><div class="line">	<span class="keyword">if</span>(n&gt;=<span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">if</span>(e.firstElementChild) e=e.firstElementChild;</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			<span class="keyword">for</span>(e=e.firstChild;e &amp;&amp; e.nodeType !==<span class="number">1</span>;e=e.nextSibling)</div><div class="line">				<span class="comment">/*  空循环  */</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> sibling(e,n);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">if</span>(e.lastElementChild) e=e.lastElementChild;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">for</span>(e=e.lastChild;e &amp;&amp; e.nodeType !== <span class="number">1</span>;e=e.previousSibling)</div><div class="line">				<span class="comment">/* 空循环 */</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> sibling(e,n+<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><ol>
<li>HTML属性作为Element的属性</li>
</ol>
<pre><code>var image=document.getElementById(&quot;myimage&quot;);
var imgurl=image.src;
</code></pre><ol>
<li>获取设置非标准HTML属性<ul>
<li>getAttribute</li>
<li>setAttribute</li>
<li>hasAttribute    检测为布尔值的属性尤其有效(disabled等)</li>
<li>removeAttribute</li>
</ul>
</li>
</ol>
<pre><code>var image=document.images[0];
var width=parseInt(image.getAttribute(&quot;WIDTH&quot;));
image.setAttribute(&quot;class&quot;,&quot;thumbnail&quot;);
</code></pre><ol>
<li><p>数据集属性</p>
<blockquote>
<p>HTML5中任意以<code>data-</code>为前缀的小写的属性定义为“数据集属性”，用于附加额外的数据信息</p>
<p>相应的HTML5在Element对象定义了<code>dataset</code>属性，指代各个<code>data-</code>属性去掉前缀的对象</p>
</blockquote>
</li>
</ol>
<ol>
<li><p>Attributes属性(仅Element对象)</p>
<pre><code>document.body.attributes[0];
document.body.attributes[&quot;ONLOAD&quot;];
</code></pre></li>
</ol>
<h2 id="元素的内容"><a href="#元素的内容" class="headerlink" title="元素的内容"></a>元素的内容</h2><blockquote>
<p>eg   <code>&lt;p&gt;This is a &lt;i&gt;simple&lt;/i&gt; document&lt;/p&gt;</code> </p>
</blockquote>
<ol>
<li><p><strong>作为HTML的元素内容</strong></p>
<ul>
<li>innerHTML</li>
<li>outerHTML</li>
<li><p>insertAdjacentHTML(仅IE)</p>
<pre><code>document.getElementsByTagName(&quot;p&quot;)[0].innerHTML
输出：
This is a &lt;i&gt;simple&lt;/i&gt; document
</code></pre></li>
</ul>
</li>
<li><p><strong>作为纯文本的元素内容</strong></p>
<ul>
<li>textContent</li>
<li><p>innerText : 不返回<code>&lt;script&gt;</code>元素的内容，忽略多余空白</p>
<pre><code>var para=document.getElementsByTagName(&quot;p&quot;)[0].textContent;
输出：
This is a simple document   

para.textContent=&quot;Hello World&quot;;
</code></pre></li>
</ul>
</li>
<li><strong>作为Text节点的元素内容（子节点列表）</strong><figure class="highlight typescript"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">* 查找元素后代中节点中的所有Text节点	</div><div class="line">* 返回元素e的纯文本内容，递归进入其子元素</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">textContent</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> child,<span class="keyword">type</span>,s=<span class="string">""</span>;	<span class="comment">//	s保存所有子节点的文本</span></div><div class="line">	<span class="keyword">for</span>(child=e.firstChild;child!=<span class="literal">null</span>;child=child.nextSibling) &#123;</div><div class="line">		<span class="keyword">type</span>=child.nodeType;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">type</span> ===<span class="number">3</span> || <span class="keyword">type</span> === <span class="number">4</span>)		<span class="comment">//Text和CDATASection节点</span></div><div class="line">			s+=child.nodeValue;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">type</span> === <span class="number">1</span>)</div><div class="line">			s+=textContent(child);		<span class="comment">// 递归Element节点</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="创建、插入、删除节点"><a href="#创建、插入、删除节点" class="headerlink" title="创建、插入、删除节点"></a>创建、插入、删除节点</h2><ol>
<li><p><strong>创建节点</strong></p>
<ul>
<li><p>直接创建</p>
<ul>
<li><p>Element节点</p>
<pre><code>var s=document.createElement(&quot;script&quot;);
</code></pre></li>
<li><p>Text节点</p>
<pre><code>var newnode=document.createTextNode(&quot;text node content&quot;);
</code></pre></li>
</ul>
</li>
<li><p>复制创建</p>
<pre><code>var cop=s.cloneNode(true);    //true递归复制所以后代节点，false浅复制(仅复制HTML标签)
var head=document,getElementsByTagName(&quot;head&quot;)[0];
head.appendChild(cop);
</code></pre></li>
</ul>
</li>
<li><p><strong>插入节点</strong></p>
<ul>
<li><p>appendChild()</p>
<pre><code>head.appendChild(cop);
</code></pre></li>
<li><p>insertBefore()</p>
<blockquote>
<p>接受2个参数，第一个为待插入节点，第二个为要插入其前方的节点，函数在父节点调用</p>
</blockquote>
<pre><code>body.insertBefore(para2,para3);
</code></pre></li>
</ul>
</li>
</ol>
<ol>
<li><p><strong>删除替换节点</strong></p>
<ul>
<li><p>removeChild()</p>
<pre><code>n.parentNode.removeChild(n);    //在文档中删除n节点
</code></pre></li>
<li><p>replaceChild() </p>
<pre><code>n.parentNode.replaceChild(document.createTextNode(&quot;REDATED&quot;),n);
</code></pre></li>
</ul>
</li>
</ol>
<h2 id="DocumentFragment-文档片段"><a href="#DocumentFragment-文档片段" class="headerlink" title="DocumentFragment(文档片段)"></a>DocumentFragment(文档片段)</h2><blockquote>
<p><code>DocumentFragment</code>是一种特殊的Node，作为其他节点的临时容器，像<code>Document</code>节点一样，<code>DocumentFragment</code>是独立的，parentNode总是null。</p>
<p><code>DocumentFragment</code>的特殊之处：使得一组节点被当做一个节点看待，如果给<code>appendChild() insertBefore() replaceChild()</code>传递一个<code>DocumentFragment</code>，插入的是文档片段的所有子节点，而非片段本身。(文档片段本身清空)。 </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 本模块为不支持insertAdjacentHTML()的浏览器定义Element.insertAdjacentHTML</span></div><div class="line"><span class="comment">// 同时定义可移植的HTML插入函数：Insert.before() Insert.after() Insert.atStart() Insert.atEnd()</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> Insert = (<span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="comment">// 如果支持原生的insertAdjacentHTML,在4个函数名更明了的HTML插入函数中使用它</span></div><div class="line">		<span class="keyword">if</span>(<span class="built_in">document</span>.createElement(<span class="string">"div"</span>).insertAdjacentHTML) &#123;</div><div class="line">			<span class="keyword">return</span> &#123;</div><div class="line">				<span class="attr">before</span>:<span class="function"><span class="keyword">function</span>  (<span class="params">e,h</span>) </span>&#123;e.insertAdjacentHTML(<span class="string">"beforebegin"</span>,h);&#125;,</div><div class="line">				<span class="attr">after</span>:<span class="function"><span class="keyword">function</span>  (<span class="params">e,h</span>) </span>&#123;e.insertAdjacentHTML(<span class="string">"afterend"</span>,h);&#125;,</div><div class="line">				<span class="attr">atStart</span>:<span class="function"><span class="keyword">function</span> (<span class="params">e,h</span>) </span>&#123;e.insertAdjacentHTML(<span class="string">"afterbegin"</span>,h);&#125;,</div><div class="line">				<span class="attr">atEnd</span>:<span class="function"><span class="keyword">function</span>  (<span class="params">e,h</span>) </span>&#123;e.insertAdjacentHTML(<span class="string">"beforeend"</span>,h);&#125;</div><div class="line">			&#125;;</div><div class="line"></div><div class="line">			<span class="comment">// 无原生的insertAdjacentHTML</span></div><div class="line">			<span class="comment">// 实现同样的4个插入函数，并使用它们来定义insertAdjacentHTML</span></div><div class="line">			</div><div class="line">			<span class="comment">// 首先定义一个工具函数，传入HTML字符串，返回一个DocumentFragment</span></div><div class="line">			<span class="function"><span class="keyword">function</span> <span class="title">fragment</span> (<span class="params">html</span>) </span>&#123;</div><div class="line">				<span class="keyword">var</span> elt=<span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</div><div class="line">				<span class="keyword">var</span> frag=<span class="built_in">document</span>.createDocumentFragment();</div><div class="line">				elt.innerHTML=html;</div><div class="line">				<span class="keyword">while</span>(elt.firstChild)</div><div class="line">					frag.appendChild(elt.firstChild);</div><div class="line">				<span class="keyword">return</span> frag;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">var</span> Insert = &#123;</div><div class="line">				<span class="attr">before</span>:<span class="function"><span class="keyword">function</span>(<span class="params">elt,html</span>)</span>&#123;elt.parentNode.insertBefore(fragment(html),elt);&#125;,</div><div class="line">				<span class="attr">after</span>:<span class="function"><span class="keyword">function</span>(<span class="params">elt,html</span>)</span>&#123;elt.parentNode.insertBefore(fragment(html),elt.nextSibling);&#125;,</div><div class="line">				<span class="attr">atStart</span>:<span class="function"><span class="keyword">function</span>(<span class="params">elt,html</span>)</span>&#123;elt.insertBefore(fragment(html),elt.firstChild);&#125;,</div><div class="line">				<span class="attr">atEnd</span>:<span class="function"><span class="keyword">function</span>(<span class="params">elt,html</span>)</span>&#123;elt.insertBefore(fragment(html),elt.appendChild(fragment(html));&#125;</div><div class="line">			&#125;;</div><div class="line"></div><div class="line">			<span class="comment">// 基于以上函数实现insertAdjacentHTML</span></div><div class="line">			Element.prototype.insertAdjacentHTML=<span class="function"><span class="keyword">function</span>  (<span class="params">pos,html</span>) </span>&#123;</div><div class="line">				<span class="keyword">switch</span>(pos.toLowerCase())&#123;</div><div class="line">					<span class="keyword">case</span> <span class="string">"beforebegin"</span>:<span class="keyword">return</span> Insert.before(<span class="keyword">this</span>,html);</div><div class="line">					<span class="keyword">case</span> <span class="string">"afterend"</span>:<span class="keyword">return</span> Insert.after(<span class="keyword">this</span>,html);</div><div class="line">					<span class="keyword">case</span> <span class="string">"afterbegin"</span>:<span class="keyword">return</span> Insert.atStart(<span class="keyword">this</span>,html);</div><div class="line">					<span class="keyword">case</span> <span class="string">"beforeend"</span>:<span class="keyword">return</span> Insert.atEnd(<span class="keyword">this</span>,html);</div><div class="line">				&#125;</div><div class="line">			&#125;;</div><div class="line">			<span class="keyword">return</span> Insert;</div><div class="line">		&#125;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Web Worker]]></title>
      <url>http://iminyao.com/2015/04/15/web-worker/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="·-问题描述"><a href="#·-问题描述" class="headerlink" title="· 问题描述"></a>· 问题描述</h3><blockquote>
<p>现代编程语言对于大计算量工作都会放到后台完成，但 <strong>javascript</strong> 中代码始终在前台运行，因此耗时计算会阻塞页面</p>
<h3 id="·-常规解决方法"><a href="#·-常规解决方法" class="headerlink" title="· 常规解决方法"></a>· 常规解决方法</h3><p>使用<code>setTimeout()或setInterval()</code>把大任务分成小任务</p>
<h3 id="·-Web-Worker"><a href="#·-Web-Worker" class="headerlink" title="· Web Worker"></a>· Web Worker</h3><p>Web Worker在后台运行代码，前台可以继续其操作。而且不允许在Web Worker之间共享数据，网页和Web Worker会各有一份副本。所以不会出现同时占用相同内存的问题。</p>
<h3 id="·-具体方法："><a href="#·-具体方法：" class="headerlink" title="· 具体方法："></a>· 具体方法：</h3><h5 id="网页：PrimeNumberSearch-WebWorker-html"><a href="#网页：PrimeNumberSearch-WebWorker-html" class="headerlink" title="网页：PrimeNumberSearch_WebWorker.html"></a>网页：PrimeNumberSearch_WebWorker.html</h5><h5 id="Web-Worker-prime-Worker-js"><a href="#Web-Worker-prime-Worker-js" class="headerlink" title="Web Worker:prime Worker.js"></a>Web Worker:prime Worker.js</h5><ol>
<li><strong>创建Worker对象，将运行大计算量的代码交给Worker对象</strong></li>
</ol>
</blockquote>
<pre><code>var worker=new Worker(&quot;PrimeWorker,js&quot;);    //让Worker运行代码必须是单独的文件，如果要使用另一个JS文件，需要使用`importScripts()`函数
</code></pre><ol>
<li><p><strong>网页与Web Worker通信</strong></p>
<pre><code>worker.postMessage(myData);    //给Worker发送消息
接着PrimeWorker.js会通过onMessage事件接收数据副本。
同理，Worker也可以通过调用postMessage()方法向网页发送数据，而网页则可以通过onMessage事件接收数据。
</code></pre><h5 id="postMessage-只能传递一个参数，可以通过对象来解决"><a href="#postMessage-只能传递一个参数，可以通过对象来解决" class="headerlink" title="postMessage()只能传递一个参数，可以通过对象来解决"></a>postMessage()只能传递一个参数，可以通过对象来解决</h5><pre><code>worker.postMessage(
{from:1,
to:20000 }
);        
</code></pre></li>
<li><p><strong>Web Worker接收到onMessage事件，开始工作</strong></p>
<pre><code>onMessage=function(event){
var formNumber=event.data.from;
var toNumber=event.data.to;

var primes=findPrimes(fromNumber,toNumber);    //执行搜索

postMessage(primes);    //将结果发回网页

function findPrimes(fromNumer,toNumber){
//具体搜索实现代码
}
};
</code></pre></li>
<li><p><strong>页面接收到onMessage事件，更新</strong></p>
<pre><code>worker.onMessage=receivedWorkerMessage;

function receivedWorkerMessage(event){
var primes=event.data;
}
</code></pre><h3 id="·-传递复杂消息"><a href="#·-传递复杂消息" class="headerlink" title="· 传递复杂消息"></a>· 传递复杂消息</h3><blockquote>
<p>传递多项数据时，可以增加<code>messageType</code>来区分</p>
</blockquote>
<pre><code>onMessage=function(event){
var primes=findPrimes(event.data.from,event.data.to);

postMessage(
{messageType:&quot;PrimeList&quot;,
data:&quot;primes&quot;});
};
</code></pre></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS中的生成内容]]></title>
      <url>http://iminyao.com/2015/04/06/CSS-content/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1.定义"></a>1.定义</h3><blockquote>
<p>由浏览器创建的内容而不是由标志或内容来表示。典型例子：列表标志</p>
</blockquote>
<h3 id="2-插入生成内容"><a href="#2-插入生成内容" class="headerlink" title="2.插入生成内容"></a>2.插入生成内容</h3><ul>
<li><p><strong>实例1：</strong>向超链接前面增加前缀文本<code>(link)</code>,以方便打印</p>
<p>  <code>a[href]:before {content:&quot;(link) &quot;;}</code></p>
</li>
<li><strong>实例2：</strong>向指定的PDF文档的链接最后插入一个小图标,并为链接添加边框</li>
</ul>
<pre><code>&gt; 链接的边框会包围生成内容，因为生成内容放在元素框的内部。


`a.pdf-doc:after{content:url(pdf-doc-icon.gif);}`

`a.pdf-doc{border:1px solid gray;}`
</code></pre><ul>
<li><p><strong>实例3：</strong>生成内容的继承</p>
<blockquote>
<p>生成文本将呈现绿色</p>
</blockquote>
<pre><code>p{color:green;}
p:before{content:&quot;:&quot;;}
</code></pre></li>
</ul>
<h3 id="3-指定内容-content"><a href="#3-指定内容-content" class="headerlink" title="3.指定内容(content)"></a>3.指定内容(<code>content</code>)</h3><pre><code>取值： string | uri | counter(计数器) | attr | open-quote | close-quote | ···
</code></pre><ul>
<li><p><strong> <uri> </uri></strong></p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 插入图片</span></div><div class="line"><span class="selector-tag">p</span>:before &#123;</div><div class="line">  <span class="attribute">content</span>: url(<span class="string">"image.jpg"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong><code>string</code></strong></p>
<blockquote>
<p>字符串值会原样显示，即使包含特殊标记也不例外。例如需要换行无法直接使用<strong><code>&lt;br&gt;</code></strong>而要使用<strong><code>\A</code></strong>。(十六进制<code>Unicode</code>值)</p>
</blockquote>
</li>
<li><p><strong><code>attr</code>(插入属性值)</strong></p>
<ul>
<li><strong>实例：</strong>将每个链接的<code>href</code>属性值直接放在链接的后面<br><code>a[href]:after {content:&quot; [&quot; attr(href) &quot;]&quot;; }</code></li>
</ul>
</li>
<li><p><strong>生成引号:</strong> <a href="http://codepen.io/vino24/pen/doRBbN" target="_blank" rel="external">code</a></p>
<blockquote>
<p>直引号</p>
</blockquote>
<pre><code>quote {quotes:&apos;&quot;&apos; &apos;&quot;&apos;;}
quote:before {content:open-quote; }
quote:after { content:close-quote;}
</code></pre><blockquote>
<p>弯引号(打印中使用)</p>
</blockquote>
<pre><code>quote{quotes:&apos;\201C&apos; &apos;\201D&apos;; }
</code></pre></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CSS中的vertical-align属性]]></title>
      <url>http://iminyao.com/2015/04/05/inline-element/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="行内元素术语："><a href="#行内元素术语：" class="headerlink" title="行内元素术语："></a>行内元素术语：</h2><ol>
<li><p><strong>em框：</strong>字体中定义，也称字符框，(个人理解：单个字符所形成的框)高度由<code>font-size</code>的值确定</p>
</li>
<li><p><strong>内容区：</strong>对于非替换元素：内容区是元素中各字符的<code>em</code>框串在一起构成的框。<br>对于替换元素，内容区就是元素的固有高度再加上可能的外边距、边框或内边距。</p>
</li>
<li><p><strong>行间距：</strong><code>=line-height-font-size</code>,只应用非替换元素<br><img src="https://cloud.githubusercontent.com/assets/4004044/6997422/405866a6-dbed-11e4-9643-258e974dfabc.png" alt="default"></p>
</li>
<li><p><strong>行内框：</strong>内容区+行间距，对于非替换元素，<code>行内框高度=line-height</code>;对于替换元素，元素行内框的高度恰好等于内容区高度(替换元素没有行间距)</p>
</li>
<li><p><strong>行框：</strong>一行行内框形成的水平框称为行框，行框的高度总是足以容纳它所包含的所有行内框。</p>
</li>
<li><p><strong>匿名块框/匿名行框(匿名文本)</strong><br>无法直接对匿名块或行框应用样式  </p>
<pre><code>&lt;div&gt;
some text                  //some text 匿名块框
&lt;p&gt;
Some more text        //每行文本形成一个匿名行框
Some more text
Some more text
&lt;/p&gt;    
&lt;/div&gt;
</code></pre><h3 id="CSS中的vertical-align"><a href="#CSS中的vertical-align" class="headerlink" title="CSS中的vertical-align"></a>CSS中的<code>vertical-align</code></h3></li>
</ol>
<blockquote>
<p>结合 CSS 2.1 规范中行内格式化上下文、行高计算、差异半差异、’line-height’ 和 ‘vertical-align’ 特性中相关说明，可以总结出行框顶边与行框底边位置的计算方式：</p>
</blockquote>
<ul>
<li>每一个行内元素会产生一个行内框；</li>
<li>行内框会在行框内横向排列；</li>
<li>‘line-height’ 特性值指定了每个行内非替换元素生成的行内框的 确切 高度；行内替换元素的高度由 * ‘height’ 特性值决定；</li>
<li>文字在行内框中垂直排列，上下空隙用半差异填补；如果字号大于行内框则文字从上下方向上溢出行内框，并可能渗入到其他行框内（行框是永远不会重叠的）；</li>
<li>‘vertical-align’ 特性值指定了每个行内框的垂直对齐方式；</li>
<li>行框的顶边界是这一系列垂直对齐的行内框最高的顶边框，底边界是最低的底边框。</li>
<li>行框的高度是顶边界到底边界的距离。<br><img src="/images/vertical-align-2016-08-04.jpeg" alt="vertical align"></li>
</ul>
<h3 id="延伸阅读："><a href="#延伸阅读：" class="headerlink" title="延伸阅读："></a>延伸阅读：</h3><ul>
<li><a href="http://output.jsbin.com/EKiLOQU/1" target="_blank" rel="external">img 元素底部的空白到底从何而来？</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[移动端开发的一些基础概念]]></title>
      <url>http://iminyao.com/2015/03/24/mobile-dev-basic-concept/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="此像素非彼像素"><a href="#此像素非彼像素" class="headerlink" title="此像素非彼像素"></a>此像素非彼像素</h3><blockquote>
<p>我们通常所说的像素其实有两种，一种是CSS像素，另一种是设备像素。</p>
</blockquote>
<ul>
<li>CSS像素(CSS pixel)：浏览器使用的抽象单位， 主要用来在网页上绘制内容。</li>
</ul>
<ul>
<li>设备(物理)像素(device pixel)：显示屏幕的的最小物理单位,在操作系统的调度下，每一个dp都有自己的颜色值和亮度值。</li>
</ul>
<blockquote>
<p>设备独立像素(device-independent pixels :dip(dp):也叫密度无关像素，可以认为是计算机坐标系统中得一个点，这个点代表一个可以由程序使用的虚拟像素(感觉通常情况下就是css像素)，然后由相关系统转换为设备像素。</p>
</blockquote>
<h3 id="DPR"><a href="#DPR" class="headerlink" title="DPR"></a>DPR</h3><blockquote>
<p>设备像素比率（Device Pixel Ratio，DPR）：设备像素与设备独立像素的对应关系。(对应默认缩放比例)</p>
</blockquote>
<p>在javascript中，可以通过<code>window.devicePixelRatio</code>获取到当前设备的dpr。</p>
<p>在css中，可以通过<code>-webkit-device-pixel-ratio，-webkit-min-device-pixel-ratio和 -webkit-max-device-pixel-ratio</code>进行媒体查询，对不同dpr的设备，做一些样式适配</p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2012/11/dpi.jpg" alt="DPR"></p>
<h2 id="PPI"><a href="#PPI" class="headerlink" title="PPI"></a>PPI</h2><blockquote>
<p>单位英寸像素数（Pixel Per Inch，也称DPI）:表示的是每英寸所拥有的像素（device pixel）数目，决定了屏幕的显示质量。320以上被归为超高密度(retina）。</p>
</blockquote>
<h3 id="计算方法："><a href="#计算方法：" class="headerlink" title="计算方法："></a>计算方法：</h3><p><code>PPI=屏幕对角线等效device pixel/手机屏幕对角线长度(即我们所说的手机屏幕尺寸)</code></p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2012/11/iphone_PPI.jpg" alt="ip4"></p>
<h3 id="分辨率（Resolution）：屏幕区域的宽高所占设备像素数"><a href="#分辨率（Resolution）：屏幕区域的宽高所占设备像素数" class="headerlink" title="分辨率（Resolution）：屏幕区域的宽高所占设备像素数"></a>分辨率（Resolution）：屏幕区域的宽高所占设备像素数</h3><h3 id="示例-以iPhone6为例"><a href="#示例-以iPhone6为例" class="headerlink" title="示例:(以iPhone6为例)"></a>示例:(以iPhone6为例)</h3><ol>
<li>设备宽高为375×667，可以理解为设备独立像素(或css像素)。</li>
<li>dpr为2，根据上面的计算公式，其物理像素就应该×2，为750×1334。<br><img src="https://img.alicdn.com/tps/TB1uWfJIpXXXXaoXXXXXXXXXXXX.gif" alt="normal vs retina"><br><img src="http://cdn1.w3cplus.com/cdn/farfuture/t8yHioHzAMbR6vqVz81sS54Gwn1ajSsGvVItiylAjQw/mtime:1341237754/sites/default/files/media-query-type.png" alt="media-query-type"></li>
</ol>
<p><img src="/images/mobile-dev-first-2016-08-01.jpeg" alt="ip"></p>
<h3 id="从设计稿到页面"><a href="#从设计稿到页面" class="headerlink" title="从设计稿到页面"></a>从设计稿到页面</h3><p>一般UI按设备像素为单位制作设计稿，前端要根据DPR转换后写代码。一般UI给到的是iphone5的稿，这样写的时候元素宽度需要除以二。</p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://www.w3cplus.com/css/A-pixel-is-not-a-pixel-is-not-a-pixel.html" target="_blank" rel="external">此像素非彼像素</a></li>
<li><a href="http://www.html-js.com/article/Mobile-terminal-H5-mobile-terminal-HD-multi-screen-adaptation-scheme%203041" target="_blank" rel="external">移动端高清、多屏适配方案</a></li>
<li><a href="https://isux.tencent.com/mobile-development-essential-knowledge.html" target="_blank" rel="external">移动端开发必备知识</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[网站优化之JavaScript异步加载]]></title>
      <url>http://iminyao.com/2015/03/22/async-javascript/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="写在前面："><a href="#写在前面：" class="headerlink" title="写在前面："></a>写在前面：</h3><ul>
<li><strong>DOMContentLoaded</strong></li>
</ul>
<blockquote>
<p><code>DOMcontentLoaded</code>是现代浏览器才支持的一个事件(<strong>IE9</strong>开始才支持)。</p>
<p><strong>那么在什么情况下才会触发DOMContentLoaded事件呢？</strong></p>
<p><code>DOMContentLoaded</code>会在浏览器接收到服务器传过来的HTML文档，<strong>整个页面DOM结构加载完成并且所有 行内脚本 和 外部脚本 执行完成后触发</strong></p>
</blockquote>
<ul>
<li><p><strong>onload</strong></p>
<blockquote>
<p><code>DOMContentLoaded</code>事件不需要等待<strong>图片，iframe和样式表</strong>等资源加载完成就会触发，而<code>onload</code>事件需要等待整个页面都加载完成包括各种资源才会触发。</p>
<p>所以对于我们来说<code>DOMContentLoaded</code>是一个更有用的事件，因为只要DOM结构加载完成，我们就可以通过Javasscript来操作页面上的DOM节点。</p>
</blockquote>
</li>
<li><p>补充：</p>
<blockquote>
<p>有时样式表的加载会阻塞脚本的执行从而阻塞DOMContentLoaded事件，这种情况一般出现在样式表后面跟着脚本。也就是说如果把脚本放在样式表后面，那么脚本就必须等到样式表加载完成才能开始执行，这样就会阻塞页面的DOMContentLoaded事件。</p>
<p>但是这样做也是有道理的，因为有时候我们的脚本会处理DOM样式方面的东西。</p>
<p>这种阻塞情况在不同浏览器上表现也会不一样。在IE和Firefox中，不管样式表后面跟着是行内脚本还是外部脚本，都会发生阻塞。在Chrome中，只有外部脚本才会发生阻塞。</p>
</blockquote>
</li>
</ul>
<h3 id="JavaScript加载方式："><a href="#JavaScript加载方式：" class="headerlink" title="JavaScript加载方式："></a>JavaScript加载方式：</h3><ul>
<li><strong>同步加载</strong></li>
</ul>
<blockquote>
<p>我们平时最常使用的就是这种同步加载形式：</p>
</blockquote>
<p><code>&lt;script src=&quot;http://yourdomain.com/script.js&quot;&gt;&lt;/script&gt;</code></p>
<blockquote>
<p>同步模式，又称<strong>阻塞模式</strong>，会阻止浏览器的后续处理，停止了后续的解析，因此停止了后续的文件加载（如图像）、渲染、代码执行。</p>
<p> js 之所以要同步执行，是因为 js 中可能有输出 document 内容、修改dom、重定向等行为，所以默认同步执行才是安全的。</p>
<p>简单说：加载的网络 timeline 是瀑布模型，而异步加载的 timeline 是并发模型。</p>
</blockquote>
<ul>
<li><p><strong>异步加载</strong></p>
<blockquote>
<p>异步加载又叫非阻塞，浏览器在下载执行 js 同时，还会继续进行后续页面的处理。</p>
</blockquote>
<ul>
<li>defer属性</li>
</ul>
<blockquote>
<p>对于IE来说，这个标签会让IE并行下载js文件，并且把其执行拖到了整个<strong>DOM装载完毕</strong>（DOMContentLoaded），多个defer的<code>&lt;script&gt;</code>在执行时也会按照其出现的<code>顺序来运行</code>。最重要的是<code>&lt;script&gt;</code>被加上defer后，其不会阻塞后续DOM的的渲染。但是因为这个defer只是IE专用，所以一般用得比较少。</p>
</blockquote>
<ul>
<li>async属性</li>
</ul>
<p><code>&lt;script src=&quot;file.js&quot; async&gt;&lt;/script&gt;</code></p>
<blockquote>
<p>async属性是HTML5新增的。(它们将在<code>onload</code> 事件之前完成。)作用和defer类似，async，无论你对它赋什么样的值，只要它出现，它就开始异步加载js文件。</p>
<p>但是， async的异步加载会有一个比较严重的问题，那就是它忠实地践行着“载入后马上执行”这条军规，所以，虽然它并不阻塞页面的渲染，但是你也无法控制他执行的次序和时机。</p>
</blockquote>
<ul>
<li><p>异步加载的其他方法</p>
<ul>
<li><p><strong>动态创建DOM(Script DOM Element)</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadjs</span>(<span class="params">script_filename</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">  script.setAttribute(<span class="string">'type'</span>, <span class="string">'text/javascript'</span>);</div><div class="line">  script.setAttribute(<span class="string">'src'</span>, script_filename);</div><div class="line">  script.setAttribute(<span class="string">'id'</span>, <span class="string">'coolshell_script_id'</span>);</div><div class="line"></div><div class="line">  script_id = <span class="built_in">document</span>.getElementById(<span class="string">'coolshell_script_id'</span>);</div><div class="line">  <span class="keyword">if</span>(script_id)&#123;</div><div class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].removeChild(script_id);</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> script = <span class="string">'http://coolshell.cn/asyncjs/alert.js'</span>;</div><div class="line">loadjs(script);</div></pre></td></tr></table></figure>
</li>
<li><p><strong>按需异步载入js(绑定onload 或其他特定事件的异步加载)</strong></p>
<blockquote>
<p>动态创建DOM的加载方式在加载执行完之前会阻止 <code>onload</code> 事件的触发，没有解决我们想让他按我们指定的时机运行的问题。而现在很多页面的代码都在 <code>onload</code> 时还要执行额外的渲染工作等，所以还是会阻塞部分页面的初始化处理。</p>
</blockquote>
</li>
</ul>
<ul>
<li><p>绑定Onload事件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadjs</span>(<span class="params">script_filename</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">  script.setAttribute(<span class="string">'type'</span>, <span class="string">'text/javascript'</span>);</div><div class="line">  script.setAttribute(<span class="string">'src'</span>, script_filename);</div><div class="line">  script.setAttribute(<span class="string">'id'</span>, <span class="string">'coolshell_script_id'</span>);</div><div class="line"></div><div class="line">  script_id = <span class="built_in">document</span>.getElementById(<span class="string">'coolshell_script_id'</span>);</div><div class="line">  <span class="keyword">if</span>(script_id)&#123;</div><div class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].removeChild(script_id);</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">onPageLoad</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> script = <span class="string">'./alert.js'</span>;</div><div class="line">  loadjs(script);</div><div class="line">&#125;</div><div class="line"><span class="built_in">window</span>.onload = onPageLoad;</div></pre></td></tr></table></figure>
</li>
<li><p>绑定特定事件<br><code>&lt;p style=&quot;cursor: pointer&quot; onclick=&quot;LoadJS()&quot;&gt;Click to load alert.js &lt;/p&gt;</code></p>
</li>
<li><p><a href="http://www.cnblogs.com/tiwlin/archive/2011/12/26/2302554.html" target="_blank" rel="external">补充：异步加载的其它方法</a></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><strong>延迟加载（lazy loading）</strong></li>
</ul>
<blockquote>
<p>有些 js 代码并不是页面初始化的时候就立刻需要的，而稍后的某些情况才需要的。延迟加载就是一开始<strong>下载但不执行</strong>这些暂时不用的js，而是在需要的时候再执行。</p>
</blockquote>
<ul>
<li><p>动用object标签（也可以动用iframe标签）</p>
<pre><code>function cachejs(script_filename){
var cache = document.createElement(&apos;object&apos;);
cache.data = script_filename;
cache.id = &quot;coolshell_script_cache_id&quot;;
cache.width = 0;
cache.height = 0;
document.body.appendChild(cache);
}
</code></pre></li>
</ul>
<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><ul>
<li><strong>document.write(还是会发生阻塞)</strong><blockquote>
<p>在异步加载的时候，无法使用 document.write 输出文档内容。<br>在同步模式下，document.write 是在当前 script 所在的位置输 出文档的。而在异步模式下，浏览器继续处理后续页面内容，根本无法确定 document.write 应该输出到什么位置，所以异步模式下 document.write 不可行。</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>而到了页面已经 onload 之后，再执行 document.write 将导致当前页面的内容被清空，因为它会自动触发 document.open 方法。</p>
</blockquote>
<ul>
<li><strong>script 的两阶段加载 与 执行（execution）</strong><blockquote>
<p><strong>JS的加载其实是由两阶段组成：下载内容（download bytes）和执行（parse and execute）。</strong></p>
</blockquote>
</li>
</ul>
<blockquote>
<p>浏览器在下载完 js 的内容后就会立即对其解析和执行，不管是同步加载还是异步加载。<br>前面说的异步加载，解决的只是下载阶段的问题，但代码在下载后会立即执行。<br>而浏览器在解析执行 JS 阶段是阻塞任何操作的，这时的浏览器处于无响应状态。<br>我 们都知道通过网络下载 script 需要明显的时间，但容易忽略了第二阶段，解析和执行也是需要时间的。script的解析和执行所花的时间比我们想象的要多，尤其是script 很多很大的时候。有些是需要立刻执行，而有些则不需要（比如只是在展示某个界面或执行某个操作时才需要）。</p>
<p>这些script 可以延迟执行，先异步下载缓存起来，但不立即执行，而是在第一次需要的时候执行一次。</p>
<p>利用特殊的技巧可以做到 下载 与 执行的分离 (javascript 的动态特性)。比如将 JS 的内容作为 <code>Image</code>或 <code>object</code> 对象加载缓存起来，所以就不会立即执行了，然后在第一次需要的时候再执行。</p>
</blockquote>
<ul>
<li><strong>更多:</strong><ul>
<li><a href="http://www.ibm.com/developerworks/cn/web/1308_caiys_jsload/index.html" target="_blank" rel="external">JavaScript 的性能优化：加载和执行</a></li>
<li><a href="http://stevesouders.com/controljs/" target="_blank" rel="external">ControlJS</a></li>
<li><a href="http://headjs.com/" target="_blank" rel="external">HeadJS</a></li>
<li><a href="http://requirejs.org/" target="_blank" rel="external">RequireJS</a></li>
<li><a href="http://www.commonjs.org/" target="_blank" rel="external">CommonJS </a></li>
<li><a href="https://lifesinger.wordpress.com/" target="_blank" rel="external">SeaJS(taobao王保平)</a></li>
<li><a href="http://coolshell.cn/articles/9749.html" target="_blank" rel="external">参考</a></li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[.htaccess文件配置详解]]></title>
      <url>http://iminyao.com/2015/03/22/htaccess/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="什么是-htaccess文件（分布式配置文件）"><a href="#什么是-htaccess文件（分布式配置文件）" class="headerlink" title="什么是.htaccess文件（分布式配置文件）"></a>什么是<code>.htaccess</code>文件（分布式配置文件）</h3><blockquote>
<p>Apache Web 服务器可以通过 <code>.htaccess</code> 文件来操作各种信息，这是一个<strong>目录级配置文件</strong>的默认名称，允许去中央化的 Web 服务器配置管理。可用来重写服务器的全局配置。该文件的目的就是为了允许单独目录的访问控制配置，例如密码和内容访问。</p>
<p>在一个目录下设置了<code>.htaccess</code>文件之后，当用户使用浏览器访问此目录时，Apache会读取该文件的配置来覆盖主配置文件<code>http.conf</code>的配置。</p>
</blockquote>
<h3 id="常用配置"><a href="#常用配置" class="headerlink" title="常用配置"></a>常用配置</h3><ol>
<li>使用 GZIP 对输出进行压缩(deflate是更新的技术)<blockquote>
<p>Apache server supports server level GZip compression with the help of module <strong>mod_gzip</strong> and <strong>mod_deflate</strong>. You can use this module and enable GZip compression for your website using htaccess file. First you have to check whether your hosting provider has enabled mod_gzip or mod_deflate module or not? To check this, you can use php_info() function of PHP which prints all the information about server and modules.</p>
</blockquote>
</li>
</ol>
<ul>
<li><p><strong>You can enable compression for text and html by adding following lines in your htaccess file.</strong></p>
<pre><code>// compress all text and html:
&lt;Ifmodule mod_deflate.c&gt;
AddOutputFilterByType DEFLATE text/html text/plain text/xml
&lt;/Ifmodule&gt;
或者
&lt;Ifmodule mod_deflate.c&gt;
AddOutputFilter DEFLATE html xml php js css
&lt;/Ifmodule&gt;

// compress certain file types by extension:
&lt;files *.html&gt;
   SetOutputFilter DEFLATE
&lt;/files&gt;
</code></pre></li>
<li><p><strong>You can compress all type of content (image, css, js etc) using mod_deflate. Copy following code in htaccess to do this.</strong></p>
<pre><code>&lt;location&gt;
SetOutputFilter DEFLATE
  SetEnvIfNoCase Request_URI  \
\.(?:gif|jpe?g|png)$ no-gzip dont-vary
SetEnvIfNoCase Request_URI  \
\.(?:exe|t?gz|zip|gz2|sit|rar)$ no-gzip dont-vary
&lt;/location&gt; 
</code></pre></li>
<li><p><strong>Also, you can add following code in your htaccess file and enable compression using mod_gzip.</strong></p>
<pre><code>&lt;ifmodule mod_gzip.c&gt;
mod_gzip_on       Yes
mod_gzip_dechunk  Yes
mod_gzip_item_include file      \.(html?|txt|css|js|php|pl)$
mod_gzip_item_include handler   ^cgi-script$
mod_gzip_item_include mime      ^text/.*
mod_gzip_item_include mime      ^application/x-javascript.*
mod_gzip_item_exclude mime      ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
&lt;/ifmodule&gt;
</code></pre></li>
</ul>
<pre><code>2.定制目录的 Index 文件 

`DirectoryIndex index.html index.php index.htm`
</code></pre><blockquote>
<p>你可以使用上面的配置来更改目录的默认页面，例如你将这个脚本放在 foo 目录，则用户请求 /foo/ 时候就会访问 /foo/index.html。</p>
<hr>


</blockquote>
<p>   3.自定义错误页</p>
<pre><code>`ErrorDocument 404 errors/404.html`
</code></pre><blockquote>
<p>当用户访问页面报错时，例如页面找不到你希望显示自定义的错误页面</p>
<hr>

</blockquote>
<p>   4.通过<code>.htaccess</code> 实现缓存策略</p>
<blockquote>
<p>对于 Apache 服务器，可以通过 <code>mod_expires</code> 模块来设定ExpiresHTTP 头或Cache-ControlHTTP 头的max-age指令。编辑相应目录下的 .htaccess 文件，或直接对 Apache 的配置文件（根据服务器系统版本不同，可能为httpd.conf或apache2.conf等）作出修改。</p>
<p>引用静态资源时，不要使用 Query String(就是例如<code>?key=val</code>的字符串)，如<br> <code>&lt;script src=&quot;/static/js/func.js?v=a87ff8&quot;&gt;&lt;/script&gt;</code>这会阻止一部分较老的浏览器（包括 IE6 ）对该资源进行缓存。</p>
</blockquote>
<ul>
<li>使用<code>ExpiresByType</code>可以按照文件的 MIME Type 设定某一类文件的过期日期</li>
</ul>
<blockquote>
<p>其中access plus 1 week表示将缓存过期设置为访问时间（即当前时间）之后的一周。如果将access替换为modification，则缓存过期会被设定为文件修改时间之后的一周。</p>
</blockquote>
<pre><code>&lt;IfModule mod_expires.c&gt;
        ExpiresActive on
ExpiresDefault A86400
ExpiresByType image/x-icon A2592000
ExpiresByType application/javascript &quot;access plus 1 month&quot;
ExpiresByType text/css A604800
ExpiresByType image/gif A2592000
ExpiresByType image/png A2592000
ExpiresByType image/jpeg A2592000
ExpiresByType text/plain A86400
ExpiresByType application/x-shockwave-flash A2592000
ExpiresByType video/x-flv A2592000
ExpiresByType application/pdf A2592000
ExpiresByType text/html A600
&lt;/IfModule&gt;
</code></pre><blockquote>
<p>可以使用的时间单位包括：</p>
</blockquote>
<ul>
<li>years</li>
<li>months</li>
<li>weeks</li>
<li>days</li>
<li>hours</li>
<li>minutes</li>
<li>seconds</li>
</ul>
<ul>
<li>根据文件扩展名进行设置</li>
</ul>
<blockquote>
<p>如果希望根据扩展名来指定缓存规则，可以使用<code>FilesMatch</code>配合正则表达式。为了简洁，我这里只规定了ExpiresDefault。它的优先级很低，只会在对应文件没有任何其他规则能够匹配（包括上层目录下的缓存规则）时生效。</p>
</blockquote>
<figure class="highlight clean"><table><tr><td class="code"><pre><div class="line">&lt;IfModule mod_expires.c&gt;</div><div class="line">    &lt;FilesMatch <span class="string">"\.(css|js)$"</span>&gt;</div><div class="line">        ExpiresActive on </div><div class="line">        ExpiresDefault <span class="string">"access plus 1 week"</span></div><div class="line">    &lt;/FilesMatch&gt;</div><div class="line">&lt;/IfModule&gt;</div><div class="line">```	</div><div class="line"></div><div class="line">* 对某些文件设定</div><div class="line"></div><div class="line">&gt; 同理，也可以对某些文件启用特定的缓存策略。注意，文件名中的点`.`是需要转义的。</div></pre></td></tr></table></figure>
<ifmodule mod_expires.c=""><br>    <filesmatch "^(example\.css|example\.js)$"=""><br>        ExpiresActive on<br>        ExpiresDefault “access plus 1 week”<br>    </filesmatch><br></ifmodule><br><figure class="highlight autohotkey"><table><tr><td class="code"><pre><div class="line"></div><div class="line">* 对某一文件夹下的所有文件设定</div><div class="line">&gt; 对于静态文件，一个比较方便的做法是将它们全部放到一个目录下，并对该目录下的所有文件设定。但是，此处需要注意防止其他规则将`ExpiresDefault`覆盖掉。</div></pre></td></tr></table></figure><br><br><ifmodule mod_expires.c=""><br>    ExpiresActive On<br>    ExpiresDefault “access plus 10 years”<br></ifmodule><br>```<br>   5.URL 重写<br><br>        <ifmodule mod_rewrite.c=""><br>        Options +FollowSymlinks<br>          RewriteEngine On<br><br>          RewriteCond %{http_host} ^iminyao.com [NC]<br>          RewriteRule ^(.<em>)$ <a href="http://www.iminyao.com/$1" target="_blank" rel="external">http://www.iminyao.com/$1</a> [L,R=301]<br>          RewriteCond %{REQUEST_FILENAME} !-d<br>          RewriteCond %{REQUEST_FILENAME} !-f<br>          RewriteRule ^(.</em>)$ index.php/$1 [QSA,PT,L]<br>          </ifmodule>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[浏览器缓存(HTTP Cache)控制简介及配置策略]]></title>
      <url>http://iminyao.com/2015/03/22/http-cache/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="Web缓存分类"><a href="#Web缓存分类" class="headerlink" title="Web缓存分类"></a>Web缓存分类</h2><ol>
<li><p>数据库缓存<br>我们可能听说过memcached，它就是一种数据库层面的缓存方案。数据库缓存是指，当web应用的关系比较复杂，数据库中的表很多的时候，如果频繁进行数据库查询，很容易导致数据库不堪重荷。为了提供查询的性能，将查询后的数据放到内存中进行缓存，下次查询时，直接从内存缓存直接返回，提供响应效率。</p>
</li>
<li><p>CDN缓存<br>CDN缓存一般是由网站管理员自己部署，为了让他们的网站更容易扩展并获得更好的性能。通常情况下，浏览器先向CDN网关发起Web请求，网关服务器后面对应着一台或多台负载均衡源服务器，会根据它们的负载请求，动态将请求转发到合适的源服务器上。从浏览器角度来看，整个CDN就是一个源服务器，从这个层面来说，浏览器和服务器之间的缓存机制，在这种架构下同样适用。</p>
</li>
<li><p>代理服务器缓存<br>代理服务器是浏览器和源服务器之间的中间服务器，浏览器先向这个中间服务器发起Web请求，经过处理后（比如权限验证，缓存匹配等），再将请求转发到源服务器。代理服务器缓存的运作原理跟浏览器的运作原理差不多，只是规模更大。</p>
</li>
<li><p>浏览器缓存<br>每个浏览器都实现了 HTTP 缓存，我们通过浏览器使用HTTP协议与服务器交互的时候，浏览器就会根据一套与服务器约定的规则进行缓存工作。</p>
</li>
<li><p>应用层缓存<br>应用层缓存是指我们在代码层面上做的缓存。通过代码逻辑，把曾经请求过的数据或资源等，缓存起来，再次需要数据时通过逻辑上的处理选择可用的缓存的数据。</p>
</li>
</ol>
<h2 id="浏览器缓存-HTTP-Cache-控制简介及配置策略"><a href="#浏览器缓存-HTTP-Cache-控制简介及配置策略" class="headerlink" title="浏览器缓存(HTTP Cache)控制简介及配置策略"></a>浏览器缓存(HTTP Cache)控制简介及配置策略</h2><blockquote>
<p>浏览器是否使用缓存、缓存多久，是由服务器控制的。准确来说，当浏览器请求一个网页（或者其他资源）时，服务器发回的响应的「响应头」部分(存在于<code>Request</code>或者<code>Response</code>的<code>Header</code>中)的某些字段指明了有关缓存的关键信息。</p>
</blockquote>
<h3 id="HTTP的Cache机制总共有4个组成部分："><a href="#HTTP的Cache机制总共有4个组成部分：" class="headerlink" title="HTTP的Cache机制总共有4个组成部分："></a>HTTP的Cache机制总共有4个组成部分：</h3><p><img src="https://camo.githubusercontent.com/2042b34a69fdec7562a8524672a5ac5958a07bd1/687474703a2f2f6d6d62697a2e717069632e636e2f6d6d62697a2f6d654736566f304d657669614b414c327756696162705344366961463557467137763830585a3759677a59616e4d46457a593130394b4550426961417156734d796770335762556846447359666d6a77614978356878463253772f3634303f77785f666d743d6a7065672674703d7765627026777866726f6d3d352677785f6c617a793d31" alt="区别"></p>
<ul>
<li><p><strong>Cache-Control</strong>(相对时间)<br><img src="https://camo.githubusercontent.com/f091c21acfb129ce14b5dd103423cfafaa6d1b6a/687474703a2f2f6d6d62697a2e717069632e636e2f6d6d62697a2f6d654736566f304d657669614b414c32775669616270534436696146355746713776387338314c69636963576f30425162386b426961656e587569623878314a766139696173764748525643447048526a656a5061486751677a543961412f3634303f77785f666d743d6a7065672674703d7765627026777866726f6d3d352677785f6c617a793d31" alt="用户"></p>
<blockquote>
<p><code>Cache-Control</code>HTTP 响应头是 HTTP 1.1 协议新增的指令，每个资源都可以通过设定 <code>Cache-Control</code> 来建立缓存策略。通常，可为它指定一个<code>max-age</code>，表示缓存的最长时间，单位为秒。例如，若设定<code>Cache-Control: max-age=604800</code>，则表示这个资源的有效时间为 7 天。浏览器第一次获取这个资源后，7 天之内若再次请求，通常都不会与服务器进行任何通信，而是直接使用本地副本。</p>
</blockquote>
<ul>
<li>Cache-Control包含的信息<ol>
<li><code>max-age=[秒]</code> — 执行缓存被认为是最新的最长时间。</li>
<li><code>public</code> — 标记认证内容也可以被缓存，一般来说： 经过HTTP认证才能访问的内容，输出是自动   不可以缓存</li>
<li><code>no-cache</code> —表示必须先与服务器确认返回的响应是否被更改，然后才能使用该响应来满足后续对同一个网址的请求。因此，如果存在合适的验证令牌 (ETag)，no-cache 会发起往返通信来验证缓存的响应，如果资源未被更改，可以避免下载。</li>
<li><code>no-store</code> — 强制缓存在任何情况下都不要保留任何副本,也就是说每次用户请求资源时，都会向服务器发送一个请求，每次都会下载完整的响应。</li>
<li>private : 浏览器可以缓存private响应，但是通常只为单个用户缓存，因此，不允许任何代理服务器对其进行缓存 。比如，用户浏览器可以缓存包含用户私人信息的 HTML 网页，但是 CDN 不能缓存。</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><img src="https://camo.githubusercontent.com/f76a0b0c0b755e0810a4e001f5865afee255ee83/687474703a2f2f6d6d62697a2e717069632e636e2f6d6d62697a2f6d654736566f304d657669614b414c32775669616270534436696146355746713776387a3654664d507a5a7a3271504f426a7143696131496b4f6962323973447269613233376f666a64496c427746426655334c75454e43654248512f3634303f77785f666d743d6a7065672674703d7765627026777866726f6d3d352677785f6c617a793d31" alt="Cache-Control"></p>
<ul>
<li><strong>Expires</strong>(绝对时间)</li>
</ul>
<blockquote>
<p>同样是用来控制缓存，<code>Expires</code>响应头从另一个角度——指明缓存的具体过期日期，来控制资源何时过期。在过期时间以内，若再次发起请求，通常浏览器都不会与服务器进行任何通信，而是直接使用本地副本。</p>
<p>Apache 服务器允许以多种方式，例如基于该资源的访问时间或上次修改时间来设定 Expires 的值。注意，这里的时间一律使用格林威治时间（Greenwich Mean Time, GMT），而非本地时间。</p>
<p><strong>当 <code>Expires</code> 和 <code>Cache-Control</code> 同时出现时，通常后者会覆盖前者的设定。</strong>由于 Expires 对用户的系统时间有所依赖，因此通常认为使用 Cache-Control 是更好的选择。</p>
</blockquote>
<h3 id="Last-Modified："><a href="#Last-Modified：" class="headerlink" title="Last-Modified："></a>Last-Modified：</h3><blockquote>
<p><code>Last-Modified</code> 表示被请求资源在服务器端的上次修改时间</p>
<h3 id="Etag作用"><a href="#Etag作用" class="headerlink" title="Etag作用:"></a>Etag作用:</h3><p>服务器通过 ETag HTTP 头传递验证码，大概是像‘‘x123cef’’这样的字符串。当浏览器在资源过期后再次请求时，浏览器默认会通过If-None-Match传递Etag的验证码，通过验证码可以进行高效的资源更新检查：如果资源未更改，则不会传输任何数据。</p>
<p>Etag就主要用来在响应过期之后，验证资源是否被修改。</p>
</blockquote>
<h3 id="Etag的工作原理"><a href="#Etag的工作原理" class="headerlink" title="Etag的工作原理:"></a>Etag的工作原理:</h3><blockquote>
<p>服务器在第一次返回响应的时候设置了缓存的时间120s，假设浏览器在这120s经过之后再次请求服务器相同的资源，首先，浏览器会检查本地缓存并找到之前的响应，不幸的是，这个响应现在已经’过期’，无法在使用。此时，浏览器也可以直接发出新请求，获取新的完整响应，但是这样做效率较低，因为如果资源未被更改过，我们就没有理由再去下载与缓存中已有的完全相同的字节。</p>
</blockquote>
<p>于是就到了Etag发挥作用的时候了，通常服务器生成并返回在Etag中的验证码，常常是文件内容的哈希值或者某个其他指纹码。客户端不必了解指纹码是如何生成的，只需要在下一个请求中将其发送给服务器(浏览器默认会添加)：如果指纹码仍然一致，说明资源未被修改，服务器会返回304 Not Modified，这样我们就可以跳过下载，利用已经缓存了的资源，并且该资源会继续缓存120s。</p>
<p><img src="https://camo.githubusercontent.com/6e6d389731554bcb21f764342f5634f1a5687e7f/687474703a2f2f6d6d62697a2e717069632e636e2f6d6d62697a2f6d654736566f304d657669614b414c32775669616270534436696146355746713776384e4a3769613262336f4b7a376e70673342544b73313057684f6c585172443931613476557a3669626b354b39513067324d3569624e33734a672f3634303f77785f666d743d6a7065672674703d7765627026777866726f6d3d352677785f6c617a793d31" alt="Etag"></p>
<blockquote>
<p>无论通过 <code>Cache-Control</code> 还是 <code>Expires</code> 设置缓存，在<strong>响应过期之后</strong>，当用户点击浏览器刷新按钮时，为了确保用户所加载的资源是最新的，大部分浏览器不会再直接使用缓存中的数据，而是发出一个条件请求<strong><code>Conditional GET Request</code></strong>。对于这类请求，浏览器会在请求头中包含<code>If-Modified-Since</code>或<code>If-None-Match</code>字段。前者即浏览器当初得到的 <code>Last-Modified</code>；后者即浏览器当初得到的 ETag。当服务器发现资源的更新时间晚于 <code>If-Modified-Since</code> 所提供的时间，或者资源在服务器端当前的 <code>ETag</code> 和 <code>If-None-Match</code> 提供的不符时，会响应整个资源，否则只会响应一个 <strong>304 Not Modified</strong> 状态码（浏览器通过在用户明确重新加载页面时发出条件式GET请求，有效地更新其已缓存资源。除非您在服务器端更改资源，否则条件式GET请求不会返回完整的响应，因此相较于完整GET请求，此类请求的延迟较小。）。这种机制可以最大程度上减少数据下载量。</p>
</blockquote>
<h3 id="已经缓存的响应，如何更新或废弃？"><a href="#已经缓存的响应，如何更新或废弃？" class="headerlink" title="已经缓存的响应，如何更新或废弃？"></a>已经缓存的响应，如何更新或废弃？</h3><blockquote>
<p>一旦浏览器缓存了响应，在过期以前，将一直使用缓存的版本，这是由 max-age 或者 expires 指定的，或者直到因为某些原因从缓存中删除，例如用户清除了浏览器缓存。因此，在构建网页时，不同的用户可能使用的是文件的不同版本；刚获取该资源的用户将使用新版本，而缓存过之前副本（但是依然有效）的用户将继续使用旧版本的响应。</p>
<p>所以，在资源内容更改时，我们可以更改资源的网址，强制用户下载新响应。通常情况下，可以通过在文件名中嵌入文件的指纹码（或版本号）来实现 - 例如 style.x234dff.css。</p>
</blockquote>
<p><img src="https://camo.githubusercontent.com/ff21103fe2a744232446e5a44376717c7d156652/687474703a2f2f6d6d62697a2e717069632e636e2f6d6d62697a2f6d654736566f304d657669614b414c3277566961627053443669614635574671377638655447774873524b643738596562647a724841316d6e4e706b7356576376354378615955415a464f52366a66674a4f736a7579526b672f3634303f77785f666d743d6a7065672674703d7765627026777866726f6d3d352677785f6c617a793d31" alt="css"></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching?hl=zh-cn" target="_blank" rel="external">Google HTTP 缓存</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&amp;mid=401841369&amp;idx=1&amp;sn=8d1631bc856a3b290bc5468c20a4ccab&amp;3rd=MzA3MDU4NTYzMw==&amp;scene=6#rd" target="_blank" rel="external">透过浏览器看HTTP缓存</a></li>
<li><a href="http://www.cnblogs.com/vajoy/p/5341664.html" target="_blank" rel="external">浅谈浏览器http的缓存机制</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Canvas入门]]></title>
      <url>http://iminyao.com/2015/03/18/canvas-first/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><h4 id="页面基本结构"><a href="#页面基本结构" class="headerlink" title="页面基本结构:"></a>页面基本结构:</h4><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">css:</div><div class="line">canvas&#123;</div><div class="line">			border: 1px dashed black;</div><div class="line">		&#125;</div><div class="line">html</div><div class="line">        <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"drawingCanvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span> <span class="comment">&lt;!--width height必须在此处设置--&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">js:在页面加载是取得Canvas绘图上下文，以下所有绘图代码均添加在此函数</div><div class="line">window.onload=function()&#123;</div><div class="line">			var canvas=document.getElementById("drawingCanvas");</div><div class="line">			var context=canvas.getContext("2d"); //	取得二维绘图上下文</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="绘制直线"><a href="#绘制直线" class="headerlink" title="绘制直线"></a>绘制直线</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><div class="line">                     <span class="comment">/* </span></div><div class="line">                      *线条样式设置 </div><div class="line">                     */</div><div class="line">                     <span class="keyword">context</span><span class="variable">.lineWidth</span>=<span class="number">10</span>; 			                <span class="comment">//设置线条宽度</span></div><div class="line"><span class="keyword">context</span><span class="variable">.strokeStyle</span>=<span class="string">"rgb(205,40,40)"</span>; 		<span class="comment">//设置线条颜色</span></div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.moveTo</span>(<span class="number">10</span>,<span class="number">50</span>); 			<span class="comment">//找到直线的起点</span></div><div class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">400</span>,<span class="number">50</span>);			<span class="comment">//在起点和终点之间建立联系</span></div><div class="line"><span class="keyword">context</span><span class="variable">.lineCap</span>=<span class="string">"butt"</span>;			<span class="comment">//设置线条两端的形状 butt为默认</span></div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();				<span class="comment">//实际的绘制直线,lineTo()负责画直线，调用     </span></div><div class="line">                                                                             <span class="comment">//stroke()才会显示直线</span></div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.beginPath</span>();			<span class="comment">//调用beginPath()重新开始新线段绘制</span></div><div class="line"><span class="keyword">context</span><span class="variable">.moveTo</span>(<span class="number">10</span>,<span class="number">120</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">400</span>,<span class="number">120</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineCap</span>=<span class="string">"round"</span>;                <span class="comment">//圆头</span></div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();</div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.beginPath</span>();</div><div class="line"><span class="keyword">context</span><span class="variable">.moveTo</span>(<span class="number">10</span>,<span class="number">190</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">400</span>,<span class="number">190</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineCap</span>=<span class="string">"square"</span>; 	      <span class="comment">//加长方头</span></div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();</div></pre></td></tr></table></figure>
<h4 id="绘制三角形并填充颜色"><a href="#绘制三角形并填充颜色" class="headerlink" title="绘制三角形并填充颜色"></a>绘制三角形并填充颜色</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><div class="line"><span class="keyword">context</span><span class="variable">.lineWidth</span>=<span class="number">10</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.strokeStyle</span>=<span class="string">"red"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.lineJoin</span>=<span class="string">"bevel"</span>;	                <span class="comment">//可以通过lineJoin属性设置交点的形状 默认</span></div><div class="line">                                                                             <span class="comment">// mitre(锐角斜接) round(圆头) bevel(平头斜接)</span></div><div class="line"><span class="keyword">context</span><span class="variable">.fillStyle</span>=<span class="string">"blue"</span>;	               <span class="comment">//先填充内部，后绘制轮廓，否则轮廓会被填充覆盖</span></div><div class="line"></div><div class="line">                     <span class="keyword">context</span><span class="variable">.moveTo</span>(<span class="number">250</span>,<span class="number">50</span>);</div><div class="line">                     <span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">50</span>,<span class="number">250</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">450</span>,<span class="number">250</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">250</span>,<span class="number">50</span>);		<span class="comment">//可省略 closePath()会自动在最后一个绘制点绘制与起</span></div><div class="line">                                                                     <span class="comment">//点的连线</span></div><div class="line"><span class="keyword">context</span><span class="variable">.closePath</span>(); 		<span class="comment">//关闭路径</span></div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.fill</span>();</div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();</div></pre></td></tr></table></figure>
<h4 id="绘制并填充长方形-直接使用fillRect-和strokeRect-函数"><a href="#绘制并填充长方形-直接使用fillRect-和strokeRect-函数" class="headerlink" title="绘制并填充长方形(直接使用fillRect()和strokeRect()函数)"></a>绘制并填充长方形(直接使用<code>fillRect()</code>和<code>strokeRect()</code>函数)</h4><figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">context.fillStyle=<span class="string">"blue"</span>;</div><div class="line">context.lineWidth=<span class="number">5</span>;</div><div class="line">context.strokeStyle=<span class="string">"red"</span>;</div><div class="line"></div><div class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">200</span>);		<span class="comment">//在(10,10)点放置一个100*200像素的矩形</span></div><div class="line">context.strokeRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">200</span>);	<span class="comment">//绘制矩形框</span></div></pre></td></tr></table></figure>
<h4 id="绘制圆-弧"><a href="#绘制圆-弧" class="headerlink" title="绘制圆(弧)"></a>绘制圆(弧)</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">                      *创建变量，保存圆弧信息</div><div class="line">                     */   </div><div class="line"><span class="keyword">var</span> centerX=<span class="number">150</span>;</div><div class="line"><span class="keyword">var</span> centerY=<span class="number">300</span>;</div><div class="line"><span class="keyword">var</span> radius=<span class="number">100</span>;</div><div class="line">                     <span class="comment">//startinngAngle endingAngle分别设置为0和2*Math.PI即为圆</span></div><div class="line"><span class="keyword">var</span> startinngAngle=<span class="number">1</span><span class="variable">.25</span>*Math<span class="variable">.PI</span>;                      </div><div class="line"><span class="keyword">var</span> endingAngle=<span class="number">1</span><span class="variable">.75</span>*Math<span class="variable">.PI</span>;</div><div class="line"></div><div class="line"><span class="comment">//使用确定的信息绘制圆弧</span></div><div class="line"><span class="keyword">context</span><span class="variable">.arc</span>(centerX,centerY,radius,startinngAngle,endingAngle);</div><div class="line"><span class="keyword">context</span><span class="variable">.closePath</span>(); 			<span class="comment">//添加closePath会得到一个封闭的小半圆</span></div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();</div></pre></td></tr></table></figure>
<h4 id="绘制椭圆"><a href="#绘制椭圆" class="headerlink" title="绘制椭圆"></a>绘制椭圆</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><div class="line"><span class="keyword">context</span><span class="variable">.moveTo</span>(<span class="number">62</span>,<span class="number">242</span>);</div><div class="line"></div><div class="line"><span class="comment">// 创建变量，保存两个控制点及曲线终点的信息</span></div><div class="line"><span class="keyword">var</span> control1_x=<span class="number">187</span>;</div><div class="line"><span class="keyword">var</span> control1_y=<span class="number">32</span>;</div><div class="line"><span class="keyword">var</span> control2_x=<span class="number">429</span>;</div><div class="line"><span class="keyword">var</span> control2_y=<span class="number">480</span>;</div><div class="line"><span class="keyword">var</span> endPointX=<span class="number">365</span>;</div><div class="line"><span class="keyword">var</span> endPointY=<span class="number">133</span>;</div><div class="line">                     <span class="comment">// 绘制曲线 bezierCurveTo() 贝塞尔曲线、 quadraticCurveTo() 二次曲线、 artTo()			  </span></div><div class="line">            <span class="keyword">context</span><span class="variable">.bezierCurveTo</span>(control1_x,control1_y,control2_x,control2_y,endPointX,endPointY);</div><div class="line"><span class="keyword">context</span><span class="variable">.closePath</span>();</div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();</div></pre></td></tr></table></figure>
<h4 id="变换——translate-平移-scale-缩放-rotate-旋转-matrix-矩阵"><a href="#变换——translate-平移-scale-缩放-rotate-旋转-matrix-矩阵" class="headerlink" title="变换——translate(平移) scale(缩放) rotate(旋转) matrix(矩阵)"></a>变换——translate(平移) scale(缩放) rotate(旋转) matrix(矩阵)</h4><figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">context.rect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">30</span>,<span class="number">30</span>); 		<span class="comment">//在(0,0)点绘制正方形</span></div><div class="line"></div><div class="line">context.translate(<span class="number">50</span>,<span class="number">50</span>); 		<span class="comment">//把坐标系向下向右移动50像素 </span></div><div class="line">context.rect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">30</span>,<span class="number">30</span>);</div><div class="line"></div><div class="line">context.translate(<span class="number">50</span>,<span class="number">50</span>);		<span class="comment">//把坐标系再向下向右移动50像素，(0,0)被平移到(100,100)</span></div><div class="line">                     context.rect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">30</span>,<span class="number">30</span>);</div><div class="line">context.stroke();</div><div class="line"></div><div class="line">context.beginPath();</div><div class="line">context.translate(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line"></div><div class="line"><span class="comment">//绘制9个正方形</span></div><div class="line">var copies=<span class="number">10</span>;</div><div class="line">for (var i = <span class="number">1</span>; i &lt;copies; i++) &#123;</div><div class="line">	context.rotate(<span class="number">2</span>*Math.<span class="literal">PI</span>*<span class="number">1</span>/(copies<span class="number">-1</span>));</div><div class="line">	context.rect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">60</span>,<span class="number">60</span>);</div><div class="line">&#125;</div><div class="line">context.stroke();</div></pre></td></tr></table></figure>
<h4 id="透明度-globalCompositeOperation属性设置如何处理图形重叠部分"><a href="#透明度-globalCompositeOperation属性设置如何处理图形重叠部分" class="headerlink" title="透明度(globalCompositeOperation属性设置如何处理图形重叠部分)"></a>透明度(globalCompositeOperation属性设置如何处理图形重叠部分)</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><div class="line"><span class="comment">//设置填充及描边颜色</span></div><div class="line"><span class="keyword">context</span><span class="variable">.fillStyle</span>=<span class="string">"rgb(100,150,185)"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.lineWidth</span>=<span class="number">10</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.strokeStyle</span>=<span class="string">"red"</span>;</div><div class="line"></div><div class="line"><span class="comment">//绘制圆形</span></div><div class="line"><span class="keyword">context</span><span class="variable">.arc</span>(<span class="number">110</span>,<span class="number">120</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">2</span>*Math<span class="variable">.PI</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.fill</span>();</div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();</div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.beginPath</span>();                  <span class="comment">// 调用beginPath()再绘制新图形</span></div><div class="line"></div><div class="line"><span class="comment">//用半透明的颜色填充三角形</span></div><div class="line"><span class="keyword">context</span><span class="variable">.fillStyle</span>=<span class="string">"rgba(100,150,185,0.5)"</span>; </div><div class="line"><span class="comment">/** context.globalAlpha=0.5; context.fillStyle="rgba(100,150,185)"; 也能实现相同效果，globalAlpha包括描边颜色和填充颜色，且后续所有绘图操作都会使用此处设置的不透明度	 **/</span></div><div class="line"></div><div class="line"><span class="comment">//绘制三角形</span></div><div class="line"><span class="keyword">context</span><span class="variable">.moveTo</span>(<span class="number">215</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">15</span>,<span class="number">250</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">315</span>,<span class="number">250</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.closePath</span>();</div><div class="line"><span class="keyword">context</span><span class="variable">.fill</span>();</div><div class="line"><span class="keyword">context</span><span class="variable">.stroke</span>();</div></pre></td></tr></table></figure>
<h3 id="基于Canvas的画图程序"><a href="#基于Canvas的画图程序" class="headerlink" title="基于Canvas的画图程序"></a>基于Canvas的画图程序</h3><h5 id="paint-html"><a href="#paint-html" class="headerlink" title="paint.html"></a>paint.html</h5><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>基于Canvas的画图程序<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"function.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Toolbar"</span>&gt;</span></div><div class="line">			- Pen Color -<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"pen_red.gif"</span> <span class="attr">alt</span>=<span class="string">"Red Pen"</span> <span class="attr">onclick</span>=<span class="string">"changeColor('rgb(212,21,29)',this)"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"pen_green.gif"</span> <span class="attr">alt</span>=<span class="string">"Green Pen"</span> <span class="attr">onclick</span>=<span class="string">"changeColor('rgb(131,190,61)',this)"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"pen_blue.gif"</span> <span class="attr">alt</span>=<span class="string">"Blue Pen"</span> <span class="attr">onclick</span>=<span class="string">"changeColor('rgb(0,86,166)',this)"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Toolbar"</span>&gt;</span></div><div class="line">			- Pen Thickness -<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"pen_thin.gif"</span> <span class="attr">alt</span>=<span class="string">"Thin Pen"</span> <span class="attr">onclick</span>=<span class="string">"changeThickness(1, this)"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"pen_medium.gif"</span> <span class="attr">alt</span>=<span class="string">"Medium Pen"</span> <span class="attr">onclick</span>=<span class="string">"changeThickness(5, this)"</span>&gt;</span> </div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"pen_thick.gif"</span> <span class="attr">alt</span>=<span class="string">"Thick Pen"</span> <span class="attr">onclick</span>=<span class="string">"changeThickness(10, this)"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"CanvasContainer"</span>&gt;</span></div><div class="line">    	                <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"drawingCanvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">	        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">	     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Toolbar"</span>&gt;</span></div><div class="line">		- Operations -<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"saveCanvas()"</span>&gt;</span>Save the Canvas<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"clearCanvas()"</span>&gt;</span>Clear the Canvas<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">		        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"savedCopyContainer"</span>&gt;</span></div><div class="line">		             <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"savedImageCopy"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">		             Right-click to save ...</div><div class="line">		        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="function-js"><a href="#function-js" class="headerlink" title="function.js"></a>function.js</h5><figure class="highlight qml"><table><tr><td class="code"><pre><div class="line"><span class="built_in">var</span> canvas;</div><div class="line"><span class="built_in">var</span> context;</div><div class="line"></div><div class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">       canvas=<span class="built_in">document</span>.getElementById(<span class="string">"drawingCanvas"</span>);</div><div class="line">       context=canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">	</div><div class="line">	<span class="comment">//添加用于实现绘图操作的事件处理程序</span></div><div class="line">	canvas.onmousedown = startDrawing;</div><div class="line">	canvas.onmouseup   = stopDrawing;</div><div class="line">	canvas.onmouseout  = stopDrawing;</div><div class="line">	canvas.onmousemove = draw;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line"><span class="built_in">var</span> previousColorElement;                                  <span class="comment">//记录此前为选择颜色而被单击过&lt;img&gt;元素</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeColor</span>(<span class="params">color,imgElement</span>)</span>&#123;</div><div class="line">	</div><div class="line">	context.strokeStyle=<span class="built_in">color</span>;                             <span class="comment">//重新设置当前绘图要使用的颜色</span></div><div class="line">	</div><div class="line">	imgElement.className=<span class="string">"Selected"</span>;             <span class="comment">//为刚被单击过的&lt;img&gt;元素应用新样式</span></div><div class="line"></div><div class="line">	<span class="comment">//恢复上一次被单击&lt;img&gt;元素的样式</span></div><div class="line">	<span class="keyword">if</span> (previousColorElement!=<span class="literal">null</span>) &#123;</div><div class="line">		previousColorElement.className=<span class="string">""</span>;</div><div class="line">	&#125;</div><div class="line">	previousColorElement=imgElement;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">var</span> previousThicknessElement;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeThickness</span>(<span class="params">thickness,imgElement</span>)</span>&#123;</div><div class="line">	</div><div class="line">	context.lineWidth=thickness;                         <span class="comment">//重新设置当前绘图要使用的粗细</span></div><div class="line">	</div><div class="line">	imgElement.className=<span class="string">"Selected"</span>;             <span class="comment">//为刚被单击过的&lt;img&gt;元素应用新样式</span></div><div class="line"></div><div class="line">	<span class="comment">//恢复上一次被单击&lt;img&gt;元素的样式</span></div><div class="line">	<span class="keyword">if</span> (previousThicknessElement!=<span class="literal">null</span>) &#123;</div><div class="line">		previousThicknessElement.className=<span class="string">""</span>;</div><div class="line">	&#125;</div><div class="line">	previousThicknessElement=imgElement;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">var</span> isDrawing=<span class="literal">false</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">startDrawing</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">	</div><div class="line">	isDrawing=<span class="literal">true</span>;                 <span class="comment">// 开始绘图</span></div><div class="line">	</div><div class="line">	context.beginPath();         <span class="comment">//创建新路径</span></div><div class="line"></div><div class="line">	<span class="comment">//把画笔放到鼠标当前所在位置</span></div><div class="line">	context.moveTo(e.pageX - canvas.offsetLeft,e.pageY - canvas.offsetTop);	 <span class="comment">//e 事件对象 pageX,pageY相对于整个页面坐标 offsetLeft offsetTop浏览器左上角到画布左上角距离	</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> (isDrawing==<span class="literal">true</span>) &#123;</div><div class="line"></div><div class="line">        <span class="comment">// 找到鼠标的新位置</span></div><div class="line">	<span class="built_in">var</span> x=e.pageX - canvas.offsetLeft;</div><div class="line">	<span class="built_in">var</span> y=e.pageY-canvas.offsetTop;</div><div class="line"></div><div class="line">	<span class="comment">//画一条到新位置的线</span></div><div class="line">	context.lineTo(x,y);</div><div class="line">	context.stroke();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stopDrawing</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	isDrawing=<span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearCanvas</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	context.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvas.width,canvas.height);		<span class="comment">//清空整个画布</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//将画布保存为图像</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveCanvas</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="comment">// 找到&lt;img&gt;元素</span></div><div class="line">	<span class="built_in">var</span> imageCopy=<span class="built_in">document</span>.getElementById(<span class="string">"savedImageCopy"</span>);</div><div class="line"></div><div class="line">	<span class="comment">//在图像中显示画布数据</span></div><div class="line">	imageCopy.src=canvas.toDataURL();	<span class="comment">//toDataUR("image/jpeg")函数取得当前数据URL，不提供参数默认得到PNG图片</span></div><div class="line">	<span class="comment">/* 数据URL是一个以data:image/png;base64开头的base-64编码的字符串 */</span></div><div class="line"></div><div class="line">	<span class="comment">//显示包含&lt;img&gt;元素的&lt;div&gt;,以便把图像显示出来</span></div><div class="line">	<span class="built_in">var</span> imageContainer=<span class="built_in">document</span>.getElementById(<span class="string">"savedCopyContainer"</span>);</div><div class="line">	imageContainer.style.display=<span class="string">"block"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="style-css"><a href="#style-css" class="headerlink" title="style.css"></a>style.css</h5><figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">body</span>&#123;</div><div class="line">		<span class="attribute">background</span>: white;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.Toolbar</span> &#123;</div><div class="line">	<span class="attribute">float</span>: left;</div><div class="line">	<span class="attribute">font-family</span>: <span class="string">'Trebuchet MS'</span>; </div><div class="line">	<span class="attribute">font-size</span>: <span class="number">14px</span>;</div><div class="line">	<span class="attribute">font-variant</span>: small-caps;</div><div class="line">	<span class="attribute">text-align</span>: center;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#F2F7FE</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span> <span class="number">3px</span> <span class="number">10px</span>;</div><div class="line">	<span class="attribute">margin-bottom</span>: <span class="number">1px</span>;</div><div class="line">	<span class="attribute">margin-right</span>: <span class="number">1px</span>;</div><div class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#7B899B</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.Toolbar</span> <span class="selector-tag">button</span> &#123;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">6px</span>;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">7px</span> <span class="number">2px</span>;</div><div class="line">	<span class="attribute">font-variant</span>: normal;</div><div class="line">	<span class="attribute">font-size</span>: <span class="number">12px</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.CanvasContainer</span> &#123;</div><div class="line">	<span class="attribute">clear</span>: both;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="selector-tag">canvas</span> &#123;</div><div class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#7B899B</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-tag">img</span> &#123;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">2px</span>;</div><div class="line">	<span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#F2F7FE</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">	<span class="attribute">border</span>: <span class="number">2px</span> groove <span class="number">#E4F0FE</span>;</div><div class="line">	<span class="attribute">background</span>: white;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	</div><div class="line">	<span class="selector-tag">img</span><span class="selector-class">.Selected</span> &#123;</div><div class="line">	<span class="attribute">border</span>: <span class="number">2px</span> groove <span class="number">#E4F0FE</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#savedCopyContainer</span> &#123;</div><div class="line">	<span class="attribute">display</span>: none;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="selector-id">#savedCopyContainer</span> <span class="selector-tag">img</span> &#123;</div><div class="line">	<span class="attribute">width</span>: <span class="number">250px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">150px</span>;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h3 id="高级Canvas绘图"><a href="#高级Canvas绘图" class="headerlink" title="高级Canvas绘图"></a>高级Canvas绘图</h3><h4 id="绘制图像"><a href="#绘制图像" class="headerlink" title="绘制图像"></a>绘制图像</h4><figure class="highlight actionscript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//创建图片对象</span></div><div class="line"><span class="keyword">var</span> img=<span class="keyword">new</span> Image();</div><div class="line"></div><div class="line"><span class="comment">//context.drawImage()实际上会在img.src后执行</span></div><div class="line"></div><div class="line"><span class="comment">//添加onload事件处理程序</span></div><div class="line"><span class="comment">//告诉浏览器图片加载完成后做什么</span></div><div class="line">img.onload=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">context.drawImage(img,<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>); <span class="comment">//参数分别为img x,y width height</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//加载图片文件</span></div><div class="line">img.src=<span class="string">" "</span>;</div></pre></td></tr></table></figure>
<h4 id="裁剪、切割、伸缩图片"><a href="#裁剪、切割、伸缩图片" class="headerlink" title="裁剪、切割、伸缩图片"></a>裁剪、切割、伸缩图片</h4><figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">var img=new Image();</div><div class="line"></div><div class="line">img.onload=function()&#123;</div><div class="line"><span class="comment">//drawImage(img,source_x,source_y,source_width,source_height,x,y,width,height)</span></div><div class="line">context.drawImage(img,<span class="number">0</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">100</span>,<span class="number">75</span>,<span class="number">25</span>,<span class="number">200</span>,<span class="number">100</span>);  <span class="comment">//图片200*200，从原始图片的(0,0)位置开始裁剪，得到上半部分，然后把裁剪结果绘制到画布，起点为(75,25)</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//加载图片文件</span></div><div class="line">img.src=<span class="string">" "</span>;</div></pre></td></tr></table></figure>
<h4 id="绘制视频帧"><a href="#绘制视频帧" class="headerlink" title="绘制视频帧"></a>绘制视频帧</h4><figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="comment">//捕捉代码运行瞬间正在播放视频中的一帧画面</span></div><div class="line"><span class="keyword">var</span> video=<span class="built_in">document</span>.getElementById(<span class="string">"videoPlayer"</span>);</div><div class="line">context.drawImage(video,<span class="number">0</span>,<span class="number">0</span>,video.clientWidth,video.clientHeight);</div></pre></td></tr></table></figure>
<h4 id="绘制文本"><a href="#绘制文本" class="headerlink" title="绘制文本"></a>绘制文本</h4><figure class="highlight mipsasm"><table><tr><td class="code"><pre><div class="line"><span class="built_in">context</span>.font=<span class="string">"bold 20px Arial"</span><span class="comment">;</span></div><div class="line"><span class="built_in">context</span>.textBaseline=<span class="string">"top"</span><span class="comment">;</span></div><div class="line"><span class="built_in">context</span>.fillStyle=<span class="string">"black"</span><span class="comment">;</span></div><div class="line"></div><div class="line"><span class="built_in">context</span>.fillText(<span class="string">"I'm back!"</span>,<span class="number">50</span>,<span class="number">50</span>)<span class="comment">;</span></div><div class="line"></div><div class="line"><span class="built_in">context</span>.font=<span class="string">"bold 40px Verdana,sans-serif"</span><span class="comment">;</span></div><div class="line"><span class="built_in">context</span>.lineWidth=<span class="number">1</span><span class="comment">;</span></div><div class="line"><span class="built_in">context</span>.fillStyle=<span class="string">"blue"</span><span class="comment">;</span></div><div class="line"><span class="built_in">context</span>.strokeStyle=<span class="string">"red"</span><span class="comment">;</span></div><div class="line"></div><div class="line"><span class="built_in">context</span>.fillText(<span class="string">"I'm back!"</span>,<span class="number">100</span>,<span class="number">100</span>)<span class="comment">;</span></div><div class="line"><span class="built_in">context</span>.strokeText(<span class="string">"I'm back!"</span>,<span class="number">100</span>,<span class="number">100</span>)<span class="comment">;	//绘制轮廓</span></div></pre></td></tr></table></figure>
<h4 id="添加阴影"><a href="#添加阴影" class="headerlink" title="添加阴影"></a>添加阴影</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 绘制矩形阴影</span></div><div class="line"><span class="keyword">context</span><span class="variable">.rect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">200</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">context</span><span class="variable">.fillStyle</span>=<span class="string">"#8ED6FF"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowColor</span>=<span class="string">"#bbbbbb"</span>;	<span class="comment">// 设置阴影颜色</span></div><div class="line"><span class="keyword">context</span><span class="variable">.shadowBlur</span>=<span class="number">10</span>;		    <span class="comment">// 设置阴影模糊程度,值区间:0-100</span></div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetX</span>=<span class="number">15</span>;	    <span class="comment">// 相对于内容的位置</span></div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetY</span>=<span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.fill</span>();</div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.font</span>=<span class="string">"bold 20px Arial"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.textBaseline</span>=<span class="string">"top"</span>;</div><div class="line"></div><div class="line"><span class="comment">//绘制三行文本的阴影</span></div><div class="line"><span class="keyword">context</span><span class="variable">.fillStyle</span>=<span class="string">"steelblue"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowBlur</span>=<span class="number">3</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetX</span>=<span class="number">2</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetY</span>=<span class="number">2</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.fillText</span>(<span class="string">"I'm Back!"</span>,<span class="number">10</span>,<span class="number">175</span>);</div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.shadowBlur</span>=<span class="number">5</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetX</span>=<span class="number">20</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetY</span>=<span class="number">20</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.fillStyle</span>=<span class="string">"green"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.fillText</span>(<span class="string">"I'm Back!"</span>,<span class="number">10</span>,<span class="number">225</span>);</div><div class="line"></div><div class="line"><span class="keyword">context</span><span class="variable">.shadowBlur</span>=<span class="number">15</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetX</span>=<span class="number">0</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowOffsetY</span>=<span class="number">0</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.shadowColor</span>=<span class="string">"black"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.strokeStyle</span>=<span class="string">"white"</span>;</div><div class="line"><span class="keyword">context</span><span class="variable">.strokeText</span>(<span class="string">"I'm Back!"</span>,<span class="number">10</span>,<span class="number">300</span>);</div></pre></td></tr></table></figure>
<h4 id="填充图案"><a href="#填充图案" class="headerlink" title="填充图案"></a>填充图案</h4><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">	<span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> canvas  = <span class="built_in">document</span>.getElementById(<span class="string">"drawingCanvas"</span>);</div><div class="line">		<span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">		<span class="keyword">var</span> img     =<span class="built_in">document</span>.getElementById(<span class="string">"brickTile"</span>);</div><div class="line"></div><div class="line">		<span class="keyword">var</span> pattern =context.createPattern(img,<span class="string">"repeat"</span>); <span class="comment">//创建图案对象 repeat-x(水平) repeat-y(垂直) repeat(重复)</span></div><div class="line"></div><div class="line">		context.fillStyle=pattern;</div><div class="line">		context.rect(<span class="number">0</span>,<span class="number">0</span>,canvas.width,canvas.height);</div><div class="line">		context.fill();</div><div class="line">	&#125;;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"drawingCanvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"brick_tile.gif"</span> <span class="attr">id</span>=<span class="string">"brickTile"</span> <span class="attr">alt</span>=<span class="string">"填充图案"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="填充渐变"><a href="#填充渐变" class="headerlink" title="填充渐变"></a>填充渐变</h4><blockquote>
<p>可以把渐变想象成位于画布下方彩色图样，创建渐变时，是在创建这个彩色但却隐藏的图样。而当填充图案时，会在画布上按图形形状抠一个洞，从而让下面那部分图样显现出来。</p>
</blockquote>
<figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">window.onload = function() &#123;</div><div class="line">  canvas = document.getElementById(<span class="string">"drawingCanvas"</span>);</div><div class="line">  context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">  <span class="comment">//创建一个从(10,0)到(100,0)的渐变</span></div><div class="line">  var gradient = context.createLinearGradient(<span class="number">10</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">0</span>); <span class="comment">//创建线性渐变createLinearGradient</span></div><div class="line">  gradient.addColorStop(<span class="number">0</span>, <span class="string">"magenta"</span>);<span class="comment">//设置渐变颜色 偏移值(范围0~1)决定颜色在渐变中的位置，0表示渐变起点 1终点</span></div><div class="line">  gradient.addColorStop(<span class="number">1</span>, <span class="string">"yellow"</span>);</div><div class="line"></div><div class="line">  <span class="comment">//调用绘制心形函数</span></div><div class="line">  drawHeart(<span class="number">60</span>, <span class="number">50</span>);</div><div class="line"></div><div class="line">  context.fillStyle = gradient;</div><div class="line">  context.fill();</div><div class="line">  context.stroke();</div><div class="line"></div><div class="line">  <span class="comment">//创建放射性渐变createRadialGradient</span></div><div class="line">  gradient = context.createRadialGradient(<span class="number">180</span>, <span class="number">100</span>, <span class="number">10</span>, <span class="number">180</span>, <span class="number">100</span>, <span class="number">50</span>); <span class="comment">//(180,100) 小圆圆心 10 小圆半径 (180,100)大圆半径 50 大圆半径</span></div><div class="line">  gradient.addColorStop(<span class="number">0</span>, <span class="string">"magenta"</span>);</div><div class="line">  gradient.addColorStop(<span class="number">1</span>, <span class="string">"yellow"</span>); </div><div class="line"></div><div class="line">  drawHeart(<span class="number">180</span>, <span class="number">80</span>);</div><div class="line">  context.fillStyle = gradient;</div><div class="line">  context.fill();</div><div class="line">  context.stroke();</div><div class="line"></div><div class="line">  gradient = context.createLinearGradient(<span class="number">10</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">0</span>);</div><div class="line">  gradient.addColorStop(<span class="string">"0"</span>,<span class="string">"magenta"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">".25"</span>,<span class="string">"blue"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">".50"</span>,<span class="string">"green"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">".75"</span>,<span class="string">"yellow"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">"1.0"</span>,<span class="string">"red"</span>);</div><div class="line"></div><div class="line">  drawHeart(<span class="number">60</span>, <span class="number">200</span>);</div><div class="line">  context.fillStyle = gradient;</div><div class="line">  context.fill();</div><div class="line">  context.stroke();</div><div class="line"></div><div class="line">  gradient = context.createRadialGradient(<span class="number">180</span>, <span class="number">250</span>, <span class="number">10</span>, <span class="number">180</span>, <span class="number">250</span>, <span class="number">50</span>);</div><div class="line">  gradient.addColorStop(<span class="string">"0"</span>,<span class="string">"magenta"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">".25"</span>,<span class="string">"blue"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">".50"</span>,<span class="string">"green"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">".75"</span>,<span class="string">"yellow"</span>);</div><div class="line">  gradient.addColorStop(<span class="string">"1.0"</span>,<span class="string">"red"</span>);</div><div class="line"></div><div class="line">  drawHeart(<span class="number">180</span>, <span class="number">230</span>);</div><div class="line">  context.fillStyle = gradient;</div><div class="line">  context.fill();</div><div class="line">  context.stroke();  </div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">function drawHeart(x, y) &#123;</div><div class="line">  context.beginPath();</div><div class="line">  context.moveTo(x, y);</div><div class="line">  context.bezierCurveTo(x, y - <span class="number">40</span>, x - <span class="number">45</span>, y - <span class="number">40</span>, x - <span class="number">48</span>, y);</div><div class="line">  context.bezierCurveTo(x - <span class="number">45</span>, y + <span class="number">30</span>, x, y + <span class="number">40</span>, x, y + <span class="number">80</span>);</div><div class="line">  context.bezierCurveTo(x, y + <span class="number">90</span>, x + <span class="number">45</span>, y + <span class="number">40</span>, x + <span class="number">45</span>, y);</div><div class="line">  context.bezierCurveTo(x + <span class="number">45</span>, y - <span class="number">30</span>, x, y - <span class="number">30</span>, x, y);</div><div class="line">  context.closePath();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="绘制图解"><a href="#绘制图解" class="headerlink" title="绘制图解"></a>绘制图解</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">	<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> extraversion = <span class="built_in">Number</span>(getQueryVariable(<span class="string">"e"</span>));</div><div class="line">		<span class="keyword">var</span> accommodation = <span class="built_in">Number</span>(getQueryVariable(<span class="string">"a"</span>));</div><div class="line">		<span class="keyword">var</span> conscientiousness = <span class="built_in">Number</span>(getQueryVariable(<span class="string">"c"</span>));</div><div class="line">		<span class="keyword">var</span> neuroticism = <span class="built_in">Number</span>(getQueryVariable(<span class="string">"n"</span>));</div><div class="line">		<span class="keyword">var</span> openness = <span class="built_in">Number</span>(getQueryVariable(<span class="string">"o"</span>));</div><div class="line"></div><div class="line">  <span class="comment">// Show the score numbers.</span></div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"headingE"</span>).innerHTML += extraversion;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"headingA"</span>).innerHTML += accommodation;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"headingC"</span>).innerHTML += conscientiousness;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"headingN"</span>).innerHTML += neuroticism;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"headingO"</span>).innerHTML += openness;</div><div class="line"></div><div class="line">  <span class="comment">// Draw the scores.</span></div><div class="line">  plotScore(<span class="built_in">document</span>.getElementById(<span class="string">"canvasE"</span>), extraversion, <span class="string">"Extraversion"</span>);</div><div class="line">  plotScore(<span class="built_in">document</span>.getElementById(<span class="string">"canvasA"</span>), accommodation, <span class="string">"Accommodation"</span>);</div><div class="line">  plotScore(<span class="built_in">document</span>.getElementById(<span class="string">"canvasC"</span>), conscientiousness, <span class="string">"Conscientiousness"</span>);</div><div class="line">  plotScore(<span class="built_in">document</span>.getElementById(<span class="string">"canvasN"</span>), neuroticism, <span class="string">"Neuroticism"</span>);</div><div class="line">  plotScore(<span class="built_in">document</span>.getElementById(<span class="string">"canvasO"</span>), openness, <span class="string">"Openness"</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">getQueryVariable</span>(<span class="params">variable</span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> query = <span class="built_in">window</span>.location.search.substring(<span class="number">1</span>); 	<span class="comment">//获取?后面的URL</span></div><div class="line">		<span class="keyword">var</span> vars = query.split(<span class="string">"&amp;"</span>);						<span class="comment">//以&amp;为分隔符切割字符串并保存为数组</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;vars.length;i++) &#123;</div><div class="line">			<span class="keyword">var</span> pair = vars[i].split(<span class="string">"="</span>);</div><div class="line">			<span class="keyword">if</span> (pair[<span class="number">0</span>] == variable) &#123;</div><div class="line">				<span class="keyword">return</span> pair[<span class="number">1</span>];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">plotScore</span>(<span class="params">canvas,score,title</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> context=canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">		<span class="comment">//在图示的两端绘制箭头</span></div><div class="line">		<span class="keyword">var</span> img=<span class="built_in">document</span>.getElementById(<span class="string">"arrow_left"</span>);</div><div class="line">		context.drawImage(img,<span class="number">12</span>,<span class="number">10</span>);</div><div class="line">		img=<span class="built_in">document</span>.getElementById(<span class="string">"arrow_right"</span>);</div><div class="line">		context.drawImage(img,<span class="number">498</span>,<span class="number">10</span>);</div><div class="line"></div><div class="line">		<span class="comment">//绘制箭头之间的刻度线</span></div><div class="line">		context.moveTo(<span class="number">39</span>,<span class="number">25</span>);</div><div class="line">		context.lineTo(<span class="number">503</span>,<span class="number">25</span>);</div><div class="line">		context.lineWidth=<span class="number">10</span>;</div><div class="line">		context.strokeStyle=<span class="string">"rgb(174,215,244)"</span>;</div><div class="line">		context.stroke();</div><div class="line"></div><div class="line">		<span class="comment">//把数值写在刻度位置上</span></div><div class="line">		context.fillStyle=context.strokeStyle;</div><div class="line">		context.font=<span class="string">"italic bold 18px Arial"</span>;</div><div class="line">		context.textBaseline=<span class="string">"top"</span>;</div><div class="line"></div><div class="line">		context.fillText(<span class="string">"-20"</span>,<span class="number">35</span>,<span class="number">50</span>);</div><div class="line">		context.fillText(<span class="string">"0"</span>,<span class="number">255</span>,<span class="number">50</span>);</div><div class="line">		context.fillText(<span class="string">"20"</span>,<span class="number">475</span>,<span class="number">50</span>);</div><div class="line"></div><div class="line">		<span class="comment">//绘制星星,显示分数在图示上的位置</span></div><div class="line">		img.document.getElementById(<span class="string">"star"</span>);</div><div class="line">		context.drawImage(img,(score+<span class="number">20</span>)/<span class="number">40</span>*<span class="number">440</span>+<span class="number">35</span><span class="number">-17</span>,<span class="number">0</span>);</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h3 id="canvas图形交互"><a href="#canvas图形交互" class="headerlink" title="canvas图形交互"></a>canvas图形交互</h3><h4 id="InteractiveCircles-html"><a href="#InteractiveCircles-html" class="headerlink" title="InteractiveCircles.html"></a>InteractiveCircles.html</h4><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"400"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"addRandomCircle()"</span>&gt;</span>Add Circle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"clearCanvas()"</span>&gt;</span>Clear Canvas<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="InteractiveCircles-js"><a href="#InteractiveCircles-js" class="headerlink" title="InteractiveCircles.js"></a>InteractiveCircles.js</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// This function stores the details for a single circle.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">x, y, radius, color</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = x;</div><div class="line">  <span class="keyword">this</span>.y = y;</div><div class="line">  <span class="keyword">this</span>.radius = radius;</div><div class="line">  <span class="keyword">this</span>.color = color;</div><div class="line">  <span class="keyword">this</span>.isSelected = <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// This array hold all the circles on the canvas.</span></div><div class="line"><span class="keyword">var</span> circles = [];</div><div class="line"></div><div class="line"><span class="keyword">var</span> canvas;</div><div class="line"><span class="keyword">var</span> context;</div><div class="line"></div><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</div><div class="line">  context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">    canvas.onmousedown = canvasClick;</div><div class="line">    canvas.onmouseup   = stopDragging;</div><div class="line">    canvas.onmouseout  = stopDragging;</div><div class="line">    canvas.onmousemove = dragCircle;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addRandomCircle</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Give the circle a random size and position.</span></div><div class="line">  <span class="keyword">var</span> radius = randomFromTo(<span class="number">10</span>, <span class="number">60</span>);</div><div class="line">  <span class="keyword">var</span> x = randomFromTo(<span class="number">0</span>, canvas.width);</div><div class="line">  <span class="keyword">var</span> y = randomFromTo(<span class="number">0</span>, canvas.height);</div><div class="line"></div><div class="line">  <span class="comment">// Give the circle a random color.</span></div><div class="line">  <span class="keyword">var</span> colors = [<span class="string">"green"</span>, <span class="string">"blue"</span>, <span class="string">"red"</span>, <span class="string">"yellow"</span>, <span class="string">"magenta"</span>, <span class="string">"orange"</span>, <span class="string">"brown"</span>, <span class="string">"purple"</span>, <span class="string">"pink"</span>];</div><div class="line">  <span class="keyword">var</span> color = colors[randomFromTo(<span class="number">0</span>, <span class="number">8</span>)];</div><div class="line"></div><div class="line">  <span class="comment">// Create the new circle.</span></div><div class="line">  <span class="keyword">var</span> circle = <span class="keyword">new</span> Circle(x, y, radius, color);</div><div class="line"></div><div class="line">  <span class="comment">// Store it in the array.</span></div><div class="line">  circles.push(circle);</div><div class="line"></div><div class="line">  <span class="comment">// 重新绘制画布</span></div><div class="line">  drawCircles();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearCanvas</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Remove all the circles.</span></div><div class="line">  circles = [];</div><div class="line"></div><div class="line">  <span class="comment">// Update the display.</span></div><div class="line">  drawCircles();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawCircles</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Clear the canvas.</span></div><div class="line">  context.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line"></div><div class="line">  <span class="comment">// Go through all the circles.</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;circles.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> circle = circles[i];</div><div class="line"></div><div class="line">    <span class="comment">// Draw the circle.</span></div><div class="line">    context.globalAlpha = <span class="number">0.85</span>;</div><div class="line">    context.beginPath();</div><div class="line">    context.arc(circle.x, circle.y, circle.radius, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span>);</div><div class="line">    context.fillStyle = circle.color;</div><div class="line">    context.strokeStyle = <span class="string">"black"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (circle.isSelected) &#123;</div><div class="line">      context.lineWidth = <span class="number">5</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      context.lineWidth = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    context.fill();</div><div class="line">    context.stroke(); </div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> previousSelectedCircle;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">canvasClick</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="comment">// Get the canvas click coordinates.</span></div><div class="line">  <span class="keyword">var</span> clickX = e.pageX - canvas.offsetLeft;</div><div class="line">  <span class="keyword">var</span> clickY = e.pageY - canvas.offsetTop;</div><div class="line"></div><div class="line">  <span class="comment">// 反向遍历所有的圆，因为如果两个圆发生叠加，只能单机上面一层也就是后面添加的圆</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=circles.length<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</div><div class="line">    <span class="keyword">var</span> circle = circles[i];</div><div class="line">    <span class="comment">//pow() n次方函数  sqrt() 开根号</span></div><div class="line">    <span class="keyword">var</span> distanceFromCenter = <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(circle.x - clickX, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(circle.y - clickY, <span class="number">2</span>)); </div><div class="line">    <span class="keyword">if</span> (distanceFromCenter &lt;= circle.radius) &#123;</div><div class="line">      <span class="keyword">if</span> (previousSelectedCircle != <span class="literal">null</span>) previousSelectedCircle.isSelected = <span class="literal">false</span>;</div><div class="line">      previousSelectedCircle = circle;</div><div class="line"></div><div class="line">      circle.isSelected = <span class="literal">true</span>;</div><div class="line">      isDragging = <span class="literal">true</span>;</div><div class="line">      drawCircles();</div><div class="line">      <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> isDragging = <span class="literal">false</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stopDragging</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  isDragging = <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragCircle</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="comment">// Is a circle being dragged?</span></div><div class="line">  <span class="keyword">if</span> (isDragging == <span class="literal">true</span>) &#123;</div><div class="line">    <span class="comment">// Make sure there really is a circle object (just in case).</span></div><div class="line">    <span class="keyword">if</span> (previousSelectedCircle != <span class="literal">null</span>) &#123;</div><div class="line">      <span class="comment">// Find the new position of the mouse.</span></div><div class="line">      <span class="keyword">var</span> x = e.pageX - canvas.offsetLeft;</div><div class="line">      <span class="keyword">var</span> y = e.pageY - canvas.offsetTop;</div><div class="line"></div><div class="line">      <span class="comment">// Move the circle to that position.</span></div><div class="line">      previousSelectedCircle.x = x;</div><div class="line">      previousSelectedCircle.y = y;</div><div class="line"></div><div class="line">      <span class="comment">// Update the canvas.</span></div><div class="line">      drawCircles();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomFromTo</span>(<span class="params">from, to</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (to - <span class="keyword">from</span> + <span class="number">1</span>) + <span class="keyword">from</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="canvas动画"><a href="#canvas动画" class="headerlink" title="canvas动画"></a>canvas动画</h2><h4 id="基本动画-方形下落"><a href="#基本动画-方形下落" class="headerlink" title="基本动画(方形下落)"></a>基本动画(方形下落)</h4><figure class="highlight verilog"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas;</div><div class="line"><span class="keyword">var</span> <span class="keyword">context</span>;</div><div class="line"></div><div class="line">window<span class="variable">.onload</span> = <span class="keyword">function</span>() &#123;</div><div class="line">canvas = document<span class="variable">.getElementById</span>(<span class="string">"canvas"</span>);</div><div class="line"><span class="keyword">context</span> = canvas<span class="variable">.getContext</span>(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line"><span class="comment">// 每0.02秒绘制一次画布</span></div><div class="line">setTimeout(<span class="string">"drawFrame()"</span>,<span class="number">20</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//设置方形初始位置</span></div><div class="line"><span class="keyword">var</span> squarePosition_y=<span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> squarePosition_x=<span class="number">10</span>;</div><div class="line"></div><div class="line"><span class="keyword">function</span> drawFrame () &#123;</div><div class="line">	<span class="keyword">context</span><span class="variable">.clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,canvas<span class="variable">.width</span>,canvas<span class="variable">.height</span>);</div><div class="line"></div><div class="line">	<span class="comment">// 调用beginPath()确保不会接上次绘制的图像绘制</span></div><div class="line">	<span class="keyword">context</span><span class="variable">.beginPath</span>();</div><div class="line"></div><div class="line">	<span class="comment">//在当前位置绘制10*10的方形</span></div><div class="line">	<span class="keyword">context</span><span class="variable">.rect</span>(squarePosition_x,squarePosition_y,<span class="number">10</span>,<span class="number">10</span>);</div><div class="line">	<span class="keyword">context</span><span class="variable">.lineStyle</span>=<span class="string">"black"</span>;</div><div class="line">	<span class="keyword">context</span><span class="variable">.lineWidth</span>=<span class="number">1</span>;</div><div class="line">	<span class="keyword">context</span><span class="variable">.stroke</span>();</div><div class="line"></div><div class="line">	<span class="comment">// 向下移动1像素</span></div><div class="line">	squarePosition_y +=<span class="number">1</span>;</div><div class="line"></div><div class="line">	setTimeout(<span class="string">"drawFrame()"</span>,<span class="number">20</span>);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="多物体动画-模拟小球自由下落"><a href="#多物体动画-模拟小球自由下落" class="headerlink" title="多物体动画(模拟小球自由下落)"></a>多物体动画(模拟小球自由下落)</h4><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Animation<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">  <span class="attribute">font-family</span>: Verdana;</div><div class="line">  <span class="attribute">font-size</span>: small;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">canvas</span> &#123;</div><div class="line">  <span class="attribute">cursor</span>: pointer;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">  <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">button</span> &#123;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=number]</span> &#123;</div><div class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</div><div class="line">  <span class="attribute">margin-right</span>: <span class="number">15px</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line"><span class="comment">// These are the details that represent an individual ball.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ball</span>(<span class="params">x, y, dx, dy, radius</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = x;</div><div class="line">  <span class="keyword">this</span>.y = y;</div><div class="line">  <span class="keyword">this</span>.dx = dx;</div><div class="line">  <span class="keyword">this</span>.dy = dy;</div><div class="line">  <span class="keyword">this</span>.radius = radius;</div><div class="line">  <span class="keyword">this</span>.strokeColor = <span class="string">"black"</span>;</div><div class="line">  <span class="keyword">this</span>.fillColor = <span class="string">"red"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// This is an array that will hold all the balls on the canvas</span></div><div class="line"><span class="keyword">var</span> balls = [];</div><div class="line"></div><div class="line"><span class="keyword">var</span> canvas;</div><div class="line"><span class="keyword">var</span> context;</div><div class="line"></div><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</div><div class="line">  context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">  canvas.onmousedown = canvasClick;</div><div class="line"></div><div class="line">  <span class="comment">// Redraw every 20 milliseconds.</span></div><div class="line">  setTimeout(drawFrame, <span class="number">20</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addBall</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Get the requested size.</span></div><div class="line">  <span class="keyword">var</span> radius = <span class="built_in">parseFloat</span>(<span class="built_in">document</span>.getElementById(<span class="string">"ballSize"</span>).value);</div><div class="line"></div><div class="line">  <span class="comment">// Create the new ball.</span></div><div class="line">  <span class="keyword">var</span> ball = <span class="keyword">new</span> Ball(<span class="number">50</span>,<span class="number">50</span>,<span class="number">1</span>,<span class="number">1</span>,radius);</div><div class="line"></div><div class="line">  <span class="comment">// Store it in the ball array.</span></div><div class="line">  balls.push(ball);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearBalls</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Remove all the balls.</span></div><div class="line">  balls = [];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawFrame</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Clear the canvas.</span></div><div class="line">  context.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line"></div><div class="line">  <span class="comment">// Note that you need to call beginPath() to make sure you don't redraw part of what</span></div><div class="line">  <span class="comment">// you were drawing before.</span></div><div class="line">  context.beginPath();</div><div class="line"></div><div class="line">  <span class="comment">// Go through all the balls.</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;balls.length; i++) &#123;</div><div class="line">    <span class="comment">// Move each ball to its new position.</span></div><div class="line">    <span class="keyword">var</span> ball = balls[i];</div><div class="line">    ball.x += ball.dx;</div><div class="line">    ball.y += ball.dy;</div><div class="line"></div><div class="line">    <span class="comment">// Add in a "gravity" effect that makes the ball fall faster.</span></div><div class="line">    <span class="keyword">if</span> ((ball.y) &lt; canvas.height) ball.dy += <span class="number">0.22</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Add in a "friction" effect that slows down the ball's side-to-side motion.</span></div><div class="line">    ball.dx = ball.dx * <span class="number">0.998</span>;</div><div class="line"></div><div class="line">    <span class="comment">// If the ball has hit the side, bounce it.</span></div><div class="line">    <span class="keyword">if</span> ((ball.x + ball.radius &gt; canvas.width) || (ball.x - ball.radius &lt; <span class="number">0</span>)) &#123;</div><div class="line">      ball.dx = -ball.dx;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// If the ball has hit the bottom, bounce it, but slow it down slightly.</span></div><div class="line">    <span class="keyword">if</span> ((ball.y + ball.radius &gt; canvas.height) || (ball.y - ball.radius &lt; <span class="number">0</span>)) &#123; </div><div class="line">      ball.dy = -ball.dy*<span class="number">0.96</span>; </div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Check if the user wants lines.</span></div><div class="line">    <span class="keyword">if</span> (!<span class="built_in">document</span>.getElementById(<span class="string">"connectedBalls"</span>).checked) &#123;</div><div class="line">      context.beginPath();</div><div class="line">      context.fillStyle = ball.fillColor;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      context.fillStyle = <span class="string">"white"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Draw the ball.</span></div><div class="line">    context.arc(ball.x, ball.y, ball.radius, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span>);</div><div class="line">    context.lineWidth = <span class="number">1</span>;</div><div class="line">    context.fill();</div><div class="line">    context.stroke(); </div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// Draw the next frame in 20 milliseconds.</span></div><div class="line">  setTimeout(drawFrame, <span class="number">20</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">canvasClick</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="comment">// Get the canvas click coordinates.</span></div><div class="line">  <span class="keyword">var</span> clickX = e.pageX - canvas.offsetLeft;</div><div class="line">  <span class="keyword">var</span> clickY = e.pageY - canvas.offsetTop;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">// Look for the clicked ball.</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> balls)</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">var</span> ball = balls[i];</div><div class="line">    <span class="keyword">if</span> ((clickX &gt; (ball.x-ball.radius)) &amp;&amp; (clickX &lt; (ball.x+ball.radius)))</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">if</span> ((clickY &gt; (ball.y-ball.radius)) &amp;&amp; (clickY &lt; (ball.y+ball.radius)))</div><div class="line">      &#123;</div><div class="line">        <span class="comment">// Change the clicked ball's speed.</span></div><div class="line">        ball.dx -= <span class="number">2</span>;</div><div class="line">        ball.dy -= <span class="number">3</span>;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"400"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"addBall()"</span>&gt;</span>Add Ball<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"clearBalls()"</span>&gt;</span>Clear Canvas<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    Ball Size:<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"ballSize"</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">min</span>=<span class="string">"0"</span> <span class="attr">max</span>=<span class="string">"50"</span> <span class="attr">value</span>=<span class="string">"15"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"connectedBalls"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>&gt;</span>Connect Balls<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    </div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Audio&&Vedio兼容方案]]></title>
      <url>http://iminyao.com/2015/03/15/audio-video-canvas-fixed/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ul>
<li><p>HTML5为兼容主体</p>
<figure class="highlight dust"><table><tr><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span></div><div class="line">		<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"audio/mp3"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"audio/ogg"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 不支持audio的浏览器加载Flash(外部播放器，如虾米、云音乐) --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">object</span> <span class="attr">id</span>=<span class="string">"flowplayer"</span> <span class="attr">width</span>=<span class="string">"700"</span> <span class="attr">height</span>=<span class="string">"400"</span> <span class="attr">data</span>=<span class="string">"flowplayer-3.2.7.swf"</span> <span class="attr">type</span>=<span class="string">"application/x-shockwave-flash"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"movie"</span> <span class="attr">value</span>=<span class="string">"flowplayer-3.2.7.swf"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"flashvars"</span> <span class="attr">value</span>=<span class="string">'config=</span></span><span class="template-variable">&#123;"clip":"天空之城.mp3"&#125;</span><span class="xml"><span class="tag"><span class="string">'</span>&gt;</span></span></div><div class="line"></div><div class="line">			<span class="comment">&lt;!--既不支持audio，也没装Flash--&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">"李志"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>Your browser do not support HTML5 video or flash.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">object</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>Flash为兼容主体</p>
<figure class="highlight dust"><table><tr><td class="code"><pre><div class="line"><span class="xml"><span class="comment">&lt;!-- 不支持audio的浏览器加载Flash(外部播放器，如虾米、云音乐) --&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">object</span> <span class="attr">id</span>=<span class="string">"flowplayer"</span> <span class="attr">width</span>=<span class="string">"700"</span> <span class="attr">height</span>=<span class="string">"400"</span> <span class="attr">data</span>=<span class="string">"flowplayer-3.2.7.swf"</span> <span class="attr">type</span>=<span class="string">"application/x-shockwave-flash"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"movie"</span> <span class="attr">value</span>=<span class="string">"flowplayer-3.2.7.swf"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"flashvars"</span> <span class="attr">value</span>=<span class="string">'config=</span></span><span class="template-variable">&#123;"clip":"天空之城.mp3"&#125;</span><span class="xml"><span class="tag"><span class="string">'</span>&gt;</span></span></div><div class="line">              <span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"audio/mp3"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"audio/ogg"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--既不支持audio，也没装Flash--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">"李志"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>Your browser do not support HTML5 video or flash.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">             <span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">object</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>Canvas:IE9以下使用<a href="http://code.google.com/p/exlorercanvas" target="_blank" rel="external">excanvas.js</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--[if lt IE 9]&gt;</span></div><div class="line">          &lt;script src="excanvas.js"&gt;&lt;/script&gt;</div><div class="line">   &lt;![endif]--&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Node.js Java开发环境安装配置]]></title>
      <url>http://iminyao.com/2015/03/04/nodejs-install/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h2><ol>
<li>python配置</li>
</ol>
<ul>
<li>环境变量-&gt;系统变量-&gt;path <code>;E:\Python27</code> &amp; PATHEXT <code>;.PY;.PYM</code></li>
<li>安装setuptools：<br><a href="https://pypi.python.org/pypi/setuptools/0.6c11" target="_blank" rel="external">https://pypi.python.org/pypi/setuptools/0.6c11</a><br>检验是否安装成功 <code>E:\Python27\Scripts\easy_install</code></li>
<li>安装第三方module:<br>cmd转至第三方module目录，运行 <code>python setup.py install</code><br>检查是否安装成功<code>E:\Python27\Lib\site-packages</code></li>
</ul>
<ol>
<li>node.js配置</li>
</ol>
<ul>
<li>环境变量-&gt;系统变量-&gt;path <code>;C:\Program Files\nodejs\</code> &amp; NODE_PATH <code>C:\Program Files\nodejs\node_modules</code></li>
<li>检验是否安装成功 <code>node -v</code></li>
</ul>
<h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><p>一开始想用brew来安装NVM的，命令如下：<br>安装homebrew:<br><code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code></p>
<p>然后安装NVM：<code>brew install nvm</code>，结果接下来配置的时候发现<code>~/</code>目录下没有<code>.nvm</code>和<code>.bash_profile</code><br>目录，搞了半天发现原来这样是安装到了全局环境中<code>usr/local</code>下面。</p>
<p>于是就换了种安装方式，直接用curl安装到<code>~</code>目录，<code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.1/install.sh | bash</code></p>
<p>安装完成后发现<code>~</code>目录下已经有了那两个文件，然后修改<code>.bash_profile</code>文件，添加<code>export NVM_DIR=~/.nvm
[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; . &quot;$NVM_DIR/nvm.sh&quot;</code>来完成路径配置。</p>
<p>此时再运行<code>nvm</code>命令显示成功</p>
<p>安装node</p>
<p><code>nvm ls-remote</code> 查看node的所有版本<br>选择最新稳定版 <code>nvm install 4.4.4</code>,<br>然后通过<code>nvm alias default 4.4.4</code>来设定默认node版本。</p>
<p>至此，安装完成。</p>
<p>2016/05/19更</p>
<p>昨天安装了新的shell zsh，然后今天早上来用gulp开服务器时发现命令竟然失效了，卧槽，昨晚睡觉的时候明明还好好的。</p>
<p>我运行了下 npm node这些命令结果发现全部失效。</p>
<p>我仔细回想了下当时安装nvm的场景，当时配置了<code>~/.bash_profile</code>文件，昨天在安装zsh后它的配置文件是在<code>~/.zshrc</code>里面的。于是乎恍然大悟，切换zsh后没有添加配置，把原本的配置<code>export NVM_DIR=~/.nvm
[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; . &quot;$NVM_DIR/nvm.sh&quot;</code>拷到<code>~/.zshrc</code>后<code>source ~/.zshrc</code>后一切恢复正常。</p>
<p>2016/08/01更<br>在配置Sublime Text中的SublimeLinter时发现怎么弄也搞不定，结果还是一开始安装到<code>usr/local</code>全局环境下比较合适。</p>
<h2 id="Linux下彻底删除make方法安装的node"><a href="#Linux下彻底删除make方法安装的node" class="headerlink" title="Linux下彻底删除make方法安装的node"></a>Linux下彻底删除make方法安装的node</h2><h4 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h4><p>在学习webpack的过程中，当使用CommonsChunkPlugin打包公用代码时一直不成功，后来一怒之下直接想重装node和npm，结果卸载个node还来了麻烦的，真是请神容易送神难。</p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ol>
<li>一开始直接用命令<code>sudo apt-get remove nodejs</code>和<code>sudo npm rm npm -g</code>,然后<code>npm -v</code>看了下npm成功删除了，但是<code>node -v</code>的时候发现node还在，什么鬼？</li>
<li>于是乎又到<code>/usr/local/lib</code>下把<code>node_modules</code>删掉,不行，又把用户文件夹下的<code>node_modules</code>也删掉，还是不行。</li>
<li>Google一下，原来之所以命令删除不起作用是因为当时node安装的时候是源代码make安装的，remove命令只能删掉通过<code>apt-get install nodejs</code>安装的。</li>
</ol>
<h4 id="完整删除方案"><a href="#完整删除方案" class="headerlink" title="完整删除方案"></a>完整删除方案</h4><ol>
<li><code>sudo apt-get remove nodejs</code></li>
<li>删除下列文件：<ul>
<li>/usr/local/lib下node and node_modules</li>
<li>/usr/local/include下node and node_modules directory</li>
<li>go to /usr/local/bin下node executable</li>
<li>/usr/local/bin/npm</li>
<li>/usr/local/share/man/man1/node.1</li>
</ul>
</li>
</ol>
<h4 id="写在最后："><a href="#写在最后：" class="headerlink" title="写在最后："></a>写在最后：</h4><p>其实还有一种最简单的方法，有<code>make install</code>当然也会有    <code>make uninstall</code>,到当初的源代码目录下运行此命令即可。只是强迫症的我早把它删了。<br>A fall into the pit, a gain in your wit.<br>下次直接剁手了。</p>
<h2 id="Mac-Java开发环境配置"><a href="#Mac-Java开发环境配置" class="headerlink" title="Mac Java开发环境配置"></a>Mac Java开发环境配置</h2><h3 id="一-安装Java"><a href="#一-安装Java" class="headerlink" title="一. 安装Java"></a>一. 安装Java</h3><h3 id="二-安装JDK"><a href="#二-安装JDK" class="headerlink" title="二. 安装JDK"></a>二. 安装JDK</h3><p>jdk默认安装路径：/Library/Java/JavaVirtualMachines/</p>
<h3 id="三-配置环境变量"><a href="#三-配置环境变量" class="headerlink" title="三. 配置环境变量"></a>三. 配置环境变量</h3><p>~/.bash_profile<br><figure class="highlight crystal"><table><tr><td class="code"><pre><div class="line">/<span class="regexp">/ 以1.7为例</span></div><div class="line">export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.<span class="number">7.0_75</span>.jdk/Contents/Home </div><div class="line">export PATH=$JAVA_HOME/<span class="symbol">bin:</span>$PATH</div><div class="line">export CLASSPATH=.:$JAVA_HOME/<span class="class"><span class="keyword">lib</span>/<span class="title">dt</span>.<span class="title">jar</span>:$<span class="title">JAVA_HOME</span>/<span class="title">lib</span>/<span class="title">tools</span>.<span class="title">jar</span></span></div></pre></td></tr></table></figure></p>
<h3 id="四-安装maven"><a href="#四-安装maven" class="headerlink" title="四. 安装maven"></a>四. 安装maven</h3><p><code>brew install maven</code><br>然后.bash.profile添加<br><figure class="highlight awk"><table><tr><td class="code"><pre><div class="line">export M2_HOME=<span class="regexp">/usr/</span>local<span class="regexp">/Cellar/m</span>aven<span class="regexp">/3.3.9/</span>libexec</div></pre></td></tr></table></figure></p>
<h3 id="五-内存设置"><a href="#五-内存设置" class="headerlink" title="五. 内存设置"></a>五. 内存设置</h3><p>如果工程过大的话maven默认的内存不够会导致IDEA报错PermGen out of memory</p>
<p>解决方法：<br>在IDEA全局配置对话框里搜索vm，设置VM options for importer为<code>-Xmx512m -XX:PermSize=256m -XX:MaxPermSize=512m</code></p>
<h3 id="注"><a href="#注" class="headerlink" title="注:"></a>注:</h3><ol>
<li>/etc/profile   （建议不修改这个文件 ）<br>全局（公有）配置，不管是哪个用户，登录时都会读取该文件。</li>
<li>/etc/bashrc    （一般在这个文件中添加系统级环境变量）<br>全局（公有）配置，bash shell执行时，不管是何种方式，都会读取此文件。<br>在这里加入mysqlstart、MySQL和mysqladmin命令的别名，保证每一个用户都可以使用这3个命令。 </li>
<li>~/.bash_profile  （一般在这个文件中添加用户级环境变量）</li>
</ol>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h3><ol>
<li><a href="https://hungred.com/how-to/completely-removing-nodejs-npm/" target="_blank" rel="external">Completely removing Node.js and Npm</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[中国最好的民谣音乐网站“爱民谣”正式上线]]></title>
      <url>http://iminyao.com/2015/03/01/iminyao/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>2015.02.28，中国最好的民谣网站”爱民谣”(<a href="www.imnyao.com">www.iminyao.com</a>)正式上线了。<br><img src="http://ww1.sinaimg.cn/large/bd0b5318gw1epp7ubowdnj210c0hen2n.jpg" alt="爱民谣"><br>因为钟情于民谣音乐，所以我要打造一个属于民谣爱好者的独立空间。不仅如此，如今中国新民谣蔚然成风，更需要一个专门网站整合资源，宣传推广，让民谣不再小众。</p>
<ul>
<li>在这里，你可以聆听娓娓道来的民谣，无论清新抒情，还是写实感怀，抑或恣意狂放，总有一种声音摄你心魄；</li>
<li>在这里，你可以与千千万万的民谣发烧友共话一屋檐下，谈谈生活，聊聊理想；</li>
<li>在这里，你可以发表你的原创，一句歌，一首诗，都是一段心路历程；</li>
<li>在这里，你可以听听音乐，讲讲故事，聊聊生活，停下来休息片刻。</li>
</ul>
<p>如上所述，“爱民谣”大体包括三个版块：<strong>音乐推荐区</strong>，<strong>民谣故事区</strong>，<strong>乐人轶事区</strong>。除了输入歌手，歌曲名搜索歌曲，我们把不同风格的音乐分门别类，设置不同的标签，帮助你快速找到感兴趣的歌曲。每天及时推送歌单，帮你发现好歌曲。根据用户的年龄地区，论坛区会设置各个年龄层，各个地区的聊天窗口，帮你快速找好友。在分享区中，用户可以直接上传图文音频视频等多种格式的资源，设立个人中心，打造属于用户自己的空间。</p>
<p>“爱民谣”是一个集<strong>音乐</strong>、<strong>故事</strong>、<strong>情感</strong>为一体的兴趣网站，我们为兴趣而生，希望通过此平台，集合长久的用户资源。同时，给用户搭建一个休闲娱乐的好去处。在繁忙工作之余，静下心来歇一歇。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[一种检测IE版本号神奇思路]]></title>
      <url>http://iminyao.com/2015/01/06/ie-scan/</url>
      <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h3 id="1-常规方法"><a href="#1-常规方法" class="headerlink" title="1. 常规方法"></a>1. 常规方法</h3><figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> isIE=!!<span class="built_in">window</span>.ActiveXObject;</div><div class="line"><span class="keyword">var</span> isIE6=isIE&amp;&amp;!<span class="built_in">window</span>.XMLHttpRequest;</div><div class="line"><span class="keyword">var</span> isIE8=isIE&amp;&amp;!!<span class="built_in">document</span>.documentMode;</div><div class="line"><span class="keyword">var</span> isIE7=isIE&amp;&amp;!isIE6&amp;&amp;!isIE8;</div></pre></td></tr></table></figure>
<h3 id="2-更简短代码"><a href="#2-更简短代码" class="headerlink" title="2. 更简短代码"></a>2. 更简短代码</h3><figure class="highlight dart"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> ie = !-[<span class="number">1</span>,];</div><div class="line"><span class="keyword">var</span> ie6=!-[<span class="number">1</span>,]&amp;&amp;!<span class="built_in">window</span>.XMLHttpRequest;</div></pre></td></tr></table></figure>
<h3 id="3-更神奇：-IE-HTML-hack"><a href="#3-更神奇：-IE-HTML-hack" class="headerlink" title="3. 更神奇： IE HTML hack"></a>3. 更神奇： IE HTML hack</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//	利用IE特有的注释在其他浏览器无法解析的特性</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> isIE = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.createElement(<span class="string">'b'</span>)</div><div class="line">    b.innerHTML = <span class="string">'&lt;!--[if IE]&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif]--&gt;'</span></div><div class="line">    <span class="keyword">return</span> b.getElementsByTagName(<span class="string">'i'</span>).length === <span class="number">1</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> isIE6 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.createElement(<span class="string">'b'</span>)</div><div class="line">    b.innerHTML = <span class="string">'&lt;!--[if IE 6]&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif]--&gt;'</span></div><div class="line">    <span class="keyword">return</span> b.getElementsByTagName(<span class="string">'i'</span>).length === <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="通用函数："><a href="#通用函数：" class="headerlink" title="通用函数："></a>通用函数：</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> isIE = <span class="function"><span class="keyword">function</span>(<span class="params">ver</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.createElement(<span class="string">'b'</span>)</div><div class="line">    b.innerHTML = <span class="string">'&lt;!--[if IE '</span> + ver + <span class="string">']&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif]--&gt;'</span></div><div class="line">    <span class="keyword">return</span> b.getElementsByTagName(<span class="string">'i'</span>).length === <span class="number">1</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span>(isIE(<span class="number">6</span>))&#123;</div><div class="line">    <span class="comment">// IE 6</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">if</span>(isIE(<span class="number">9</span>))&#123;</div><div class="line">    <span class="comment">// IE 9</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// 只检测是否为IE</span></div><div class="line"><span class="keyword">var</span> ie=isIE();</div></pre></td></tr></table></figure>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="https://github.com/nioteam/jquery-plugins/issues/12" target="_blank" rel="external">JavaScript判断IE各版本最完美解决方案</a></li>
</ol>
]]></content>
    </entry>
    
  
  
</search>
